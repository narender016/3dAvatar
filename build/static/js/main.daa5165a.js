/*! For license information please see main.daa5165a.js.LICENSE.txt */
(()=>{var __webpack_modules__={5682:(e,t,n)=>{"use strict";const i=n(4160);class r extends Error{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let o;super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,r),this.name="StatusError",this.message=e.statusMessage,this.statusCode=e.status,this.res=e,this.json=e.json.bind(e),this.text=e.text.bind(e),this.arrayBuffer=e.arrayBuffer.bind(e);Object.defineProperty(this,"responseBody",{get:()=>(o||(o=this.arrayBuffer()),o)}),this.headers={};for(const[r,s]of e.headers.entries())this.headers[r.toLowerCase()]=s}}e.exports=i(((e,t,n,i,o)=>async function(s,a){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s=o+(s||"");let u=new URL(s);if(i||(i={}),u.username&&(i.Authorization="Basic "+btoa(u.username+":"+u.password),u=new URL(u.protocol+"//"+u.host+u.pathname+u.search)),"https:"!==u.protocol&&"http:"!==u.protocol)throw new Error("Unknown protocol, ".concat(u.protocol));if(a)if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||"string"===typeof a);else{if("object"!==typeof a)throw new Error("Unknown body type.");a=JSON.stringify(a),i["Content-Type"]="application/json"}l=new Headers({...i||{},...l});const c=await fetch(u,{method:t,headers:l,body:a});if(c.statusCode=c.status,!e.has(c.status))throw new r(c);return"json"===n?c.json():"buffer"===n?c.arrayBuffer():"string"===n?c.text():c}))},4160:e=>{"use strict";const t=new Set(["json","buffer","string"]);e.exports=e=>function(){const n=new Set;let i,r,o,s="";for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return l.forEach((e=>{if("string"===typeof e)if(e.toUpperCase()===e){if(i){const t="Can't set method to ".concat(e,", already set to ").concat(i,".");throw new Error(t)}i=e}else if(e.startsWith("http:")||e.startsWith("https:"))s=e;else{if(!t.has(e))throw new Error("Unknown encoding, ".concat(e));r=e}else if("number"===typeof e)n.add(e);else{if("object"!==typeof e)throw new Error("Unknown type: ".concat(typeof e));if(Array.isArray(e)||e instanceof Set)e.forEach((e=>n.add(e)));else{if(o)throw new Error("Cannot set headers twice.");o=e}}})),i||(i="GET"),0===n.size&&n.add(200),e(n,i,r,o,s)}},8961:e=>{function t(e,t,n){var i,r,o,s,a;function l(){var u=Date.now()-s;u<t&&u>=0?i=setTimeout(l,t-u):(i=null,n||(a=e.apply(o,r),o=r=null))}null==t&&(t=100);var u=function(){o=this,r=arguments,s=Date.now();var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(a=e.apply(o,r),o=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=e.apply(o,r),o=r=null,clearTimeout(i),i=null)},u}t.debounce=t,e.exports=t},2418:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});new(n(9831).AgentConfig),r(n(7419),t)},4090:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLoggingListener=void 0;const s=o(n(9271)),a=n(4533),l=n(3720);t.ConsoleLoggingListener=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.LogLevel.None;this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=e}set logPath(e){l.Contracts.throwIfNullOrUndefined(s.openSync,"\nFile System access not available"),this.privLogPath=e}set enableConsoleOutput(e){this.privEnableConsoleOutput=e}onEvent(e){if(e.eventType>=this.privLogLevelFilter){const t=this.toString(e);if(this.privLogPath&&s.writeFileSync(this.privLogPath,t+"\n",{flag:"a+"}),this.privEnableConsoleOutput)switch(e.eventType){case a.LogLevel.Debug:console.debug(t);break;case a.LogLevel.Info:console.info(t);break;case a.LogLevel.Warning:console.warn(t);break;case a.LogLevel.Error:console.error(t);break;default:console.log(t)}}}toString(e){const t=["".concat(e.eventTime),"".concat(e.name)],n=e;for(const i in n)if(i&&e.hasOwnProperty(i)&&"eventTime"!==i&&"eventType"!==i&&"eventId"!==i&&"name"!==i&&"constructor"!==i){const e=n[i];let r="<NULL>";void 0!==e&&null!==e&&(r="number"===typeof e||"string"===typeof e?e.toString():JSON.stringify(e)),t.push("".concat(i,": ").concat(r))}return t.join(" | ")}}},4583:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(4090),t),r(n(4678),t),r(n(5027),t),r(n(201),t),r(n(4141),t),r(n(7934),t),r(n(2386),t),r(n(5842),t),r(n(2974),t),r(n(7562),t),r(n(5304),t)},201:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.FileAudioSource=void 0;const r=n(9831),o=n(6606),s=n(9495);t.FileAudioSource=class{constructor(e,t,n){this.privStreams={},this.privHeaderEnd=44,this.privId=n||o.createNoDashGuid(),this.privEvents=new o.EventSource,this.privSource=e,"undefined"!==typeof window&&"undefined"!==typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const e=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new o.AudioSourceErrorEvent(e,"")),Promise.reject(e)}this.onEvent(new o.AudioSourceInitializingEvent(this.privId)),this.onEvent(new o.AudioSourceReadyEvent(this.privId))}id(){return this.privId}attach(e){return i(this,void 0,void 0,(function*(){this.onEvent(new o.AudioStreamNodeAttachingEvent(this.privId,e));const t=yield this.upload(e);return this.onEvent(new o.AudioStreamNodeAttachedEvent(this.privId,e)),Promise.resolve({detach:()=>i(this,void 0,void 0,(function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)),yield this.turnOff()})),id:()=>e,read:()=>t.read()})}))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new o.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then((e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:r.type.File})))}readHeader(){const e=this.privSource.slice(0,4296),t=new o.Deferred,n=e=>{const n=new DataView(e),i=e=>String.fromCharCode(n.getUint8(e),n.getUint8(e+1),n.getUint8(e+2),n.getUint8(e+3));if("RIFF"!==i(0))return void t.reject("Invalid WAV header in file, RIFF was not found");if("WAVE"!==i(8)||"fmt "!==i(12))return void t.reject("Invalid WAV header in file, WAVEfmt was not found");const r=n.getInt32(16,!0),o=n.getUint16(22,!0),a=n.getUint32(24,!0),l=n.getUint16(34,!0);let u=36+Math.max(r-16,0);for(;"data"!==i(u);u+=2)if(u>4288)return void t.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=u+8,t.resolve(s.AudioStreamFormat.getWaveFormatPCM(a,l,o))};if("undefined"!==typeof window&&"undefined"!==typeof Blob&&e instanceof Blob){const t=new FileReader;t.onload=e=>{const t=e.target.result;n(t)},t.readAsArrayBuffer(e)}else{const t=e;n(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength))}return t.promise}upload(e){return i(this,void 0,void 0,(function*(){const t=t=>{const n="Error occurred while processing '".concat(this.privFilename,"'. ").concat(t);throw this.onEvent(new o.AudioStreamNodeErrorEvent(this.privId,e,n)),new Error(n)};try{yield this.turnOn();const n=yield this.privAudioFormatPromise,i=new o.ChunkedArrayBufferStream(n.avgBytesPerSec/10,e);this.privStreams[e]=i;const r=this.privSource.slice(this.privHeaderEnd),s=e=>{i.isClosed||(i.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),i.close())};if("undefined"!==typeof window&&"undefined"!==typeof Blob&&r instanceof Blob){const e=new FileReader;e.onerror=e=>t(e.toString()),e.onload=e=>{const t=e.target.result;s(t)},e.readAsArrayBuffer(r)}else{const e=r;s(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}return i}catch(n){t(n)}}))}onEvent(e){this.privEvents.onEvent(e),o.Events.instance.onEvent(e)}}},4678:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5027:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;const r=n(9831),o=n(6606),s=n(9495);t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class a{constructor(e,t,n,i){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.privOutputChunkSize=a.AUDIOFORMAT.avgBytesPerSec/10,this.privId=n||o.createNoDashGuid(),this.privEvents=new o.EventSource,this.privMediaStream=i||null,this.privIsClosing=!1}get format(){return Promise.resolve(a.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new o.Deferred;try{this.createAudioContext()}catch(n){if(n instanceof Error){const e=n;this.privInitializeDeferral.reject(e.name+": "+e.message)}else this.privInitializeDeferral.reject(n);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,n,i)=>{e.mediaDevices.getUserMedia(t).then(n).catch(i)}),t){const e=()=>{this.onEvent(new o.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new o.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},(e=>{this.privMediaStream=e,this.onEvent(new o.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()}),(e=>{const t="Error occurred during microphone initialization: ".concat(e);this.privInitializeDeferral.reject(t),this.onEvent(new o.AudioSourceErrorEvent(this.privId,t))}))};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch((e=>{this.privInitializeDeferral.reject("Failed to initialize audio context: ".concat(e))})):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new o.AudioSourceErrorEvent(e,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(e){return this.onEvent(new o.AudioStreamNodeAttachingEvent(this.privId,e)),this.listen(e).then((t=>(this.onEvent(new o.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>i(this,void 0,void 0,(function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()})))}detach(e){e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)))}turnOff(){return i(this,void 0,void 0,(function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new o.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(yield this.privInitializeDeferral,this.privInitializeDeferral=null),yield this.destroyAudioContext()}))}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then((e=>({bitspersample:a.AUDIOFORMAT.bitsPerSample,channelcount:a.AUDIOFORMAT.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:e,samplerate:a.AUDIOFORMAT.samplesPerSec,type:r.type.Microphones})))}setProperty(e,n){if(e!==t.AudioWorkletSourceURLPropertyName)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(n)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const n=new o.Deferred;return navigator.mediaDevices.enumerateDevices().then((e=>{for(const n of e)if(n.deviceId===t){this.privMicrophoneLabel=n.label;break}n.resolve(this.privMicrophoneLabel)}),(()=>n.resolve(this.privMicrophoneLabel))),n.promise}listen(e){return i(this,void 0,void 0,(function*(){yield this.turnOn();const t=new o.ChunkedArrayBufferStream(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(n){throw this.onEvent(new o.AudioStreamNodeErrorEvent(this.privId,e,n)),n}return t}))}onEvent(e){this.privEvents.onEvent(e),o.Events.instance.onEvent(e)}createAudioContext(){this.privContext||(this.privContext=s.AudioStreamFormatImpl.getAudioContext(a.AUDIOFORMAT.samplesPerSec))}destroyAudioContext(){return i(this,void 0,void 0,(function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?this.privIsClosing||(this.privIsClosing=!0,yield this.privContext.close(),this.privContext=null,this.privIsClosing=!1):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())}))}}t.MicAudioSource=a,a.AUDIOFORMAT=s.AudioStreamFormat.getDefaultInputFormat()},4141:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PcmRecorder=void 0;const i=n(6606);t.PcmRecorder=class{constructor(e){this.privStopInputOnRelease=e}record(e,t,n){const r=new i.RiffPcmEncoder(e.sampleRate,16e3),o=e.createMediaStreamSource(t),s=()=>{const i=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(n){t=2048;let i=e.sampleRate;for(;t<16384&&i>=32e3;)t<<=1,i>>=1;return e.createScriptProcessor(t,1,1)}})();i.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const e=r.encode(t);e&&n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},o.connect(i),i.connect(e.destination),this.privMediaResources={scriptProcessorNode:i,source:o,stream:t}},a=!!this.privSpeechProcessorScript&&"ignore"===this.privSpeechProcessorScript.toLowerCase();if(e.audioWorklet&&!a){if(!this.privSpeechProcessorScript){const e=new Blob(["class SP extends AudioWorkletProcessor {\n                    constructor(options) {\n                      super(options);\n                    }\n                    process(inputs, outputs) {\n                      const input = inputs[0];\n                      const output = [];\n                      for (let channel = 0; channel < input.length; channel += 1) {\n                        output[channel] = input[channel];\n                      }\n                      this.port.postMessage(output[0]);\n                      return true;\n                    }\n                  }\n                  registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(e)}e.audioWorklet.addModule(this.privSpeechProcessorScript).then((()=>{const i=new AudioWorkletNode(e,"speech-processor");i.port.onmessage=e=>{const t=e.data;if(n&&!n.isClosed){const e=r.encode(t);e&&n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}},o.connect(i),i.connect(e.destination),this.privMediaResources={scriptProcessorNode:i,source:o,stream:t}})).catch((()=>{s()}))}else try{s()}catch(l){throw new Error("Unable to start audio worklet node for PCMRecorder: ".concat(l))}}releaseMediaResources(e){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach((e=>e.stop())),this.privMediaResources.source=null))}setWorkletUrl(e){this.privSpeechProcessorScript=e}}},2974:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyInfo=void 0;const i=n(7419);class r{constructor(e,t,n,i){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=n,this.privProxyPassword=i}static fromParameters(e){return new r(e.getProperty(i.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(i.PropertyId.SpeechServiceConnection_ProxyPort),10),e.getProperty(i.PropertyId.SpeechServiceConnection_ProxyUserName),e.getProperty(i.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}t.ProxyInfo=r},5842:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayableAudioNode=void 0;t.ReplayableAudioNode=class{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=e,this.privBytesPerSecond=t}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!==t%2&&t++;let n=0;for(;n<this.privBuffers.length&&t>=this.privBuffers[n].chunk.buffer.byteLength;)t-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){const e=this.privBuffers[n].chunk.buffer.slice(t);return this.privReplayOffset+=e.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:e,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then((e=>(e&&e.buffer&&(this.privBuffers.push(new n(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e)))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let n=Math.round(t*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&n>=this.privBuffers[i].chunk.buffer.byteLength;)n-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const n=t.byteOffset/this.privBytesPerSecond*1e7,i=n+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=i)return t.chunk.timeReceived}return 0}};class n{constructor(e,t,n){this.chunk=e,this.serial=t,this.byteOffset=n}}},5304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestConfigBase=void 0;class n{static get requestOptions(){return n.privDefaultRequestOptions}static get configParams(){return n.privDefaultParams}static get restErrors(){return n.privRestErrors}}t.RestConfigBase=n,n.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},n.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},n.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"}},7562:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;const o=r(n(5682)),s=n(6606);var a;!function(e){e.Get="GET",e.Post="POST",e.Delete="DELETE",e.File="file"}(a=t.RestRequestType||(t.RestRequestType={}));t.RestMessageAdapter=class{constructor(e){if(!e)throw new s.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}static extractHeaderValue(e,t){let n="";try{const i=t.trim().split(/[\r\n]+/),r={};i.forEach((e=>{const t=e.split(": "),n=t.shift().toLowerCase(),i=t.join(": ");r[n]=i})),n=r[e.toLowerCase()]}catch(i){}return n}set options(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}setHeaders(e,t){this.privHeaders[e]=t}request(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const l=new s.Deferred,u=e===a.File?"POST":e,c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:n.statusText?n.statusText:n.statusMessage}};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===a.Post&&r&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),(r=>{o.default(t,u,this.privHeaders,200,201,202,204,400,401,402,403,404)(""===this.queryParams(n)?"":"?".concat(this.queryParams(n)),r).then((t=>i(this,void 0,void 0,(function*(){if(e===a.Delete||204===t.statusCode)l.resolve(c(t));else try{const e=yield t.json();l.resolve(c(t,e))}catch(n){l.resolve(c(t))}})))).catch((e=>{l.reject(e)}))})(r),l.promise}queryParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&")}}},7934:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketConnection=void 0;const r=n(6606),o=n(2386);t.WebsocketConnection=class{constructor(e,t,n,i,s){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6?arguments[6]:void 0;if(this.privIsDisposed=!1,!e)throw new r.ArgumentNullError("uri");if(!i)throw new r.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let u="",c=0;if(t)for(const r in t)if(r){u+=0===c&&-1===e.indexOf("?")?"?":"&";u+=encodeURIComponent(r);let n=t[r];n&&(n=encodeURIComponent(n),u+="=".concat(n)),c++}if(n)for(const r in n)if(r){u+=0===c&&-1===e.indexOf("?")?"?":"&";const t=encodeURIComponent(n[r]);u+="".concat(r,"=").concat(t),c++}this.privUri=e+u,this.privId=l||r.createNoDashGuid(),this.privConnectionMessageAdapter=new o.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,n,a)}dispose(){return i(this,void 0,void 0,(function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())}))}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(e){return this.privConnectionMessageAdapter.send(e)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}},2386:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageAdapter=void 0;const l=o(n(4151)),u=o(n(4270)),c=a(n(6916)),h=a(n(2104)),p=a(n(2914)),d=n(4891),f=n(6606);class m{constructor(e,t,n,i,r,o){if(!e)throw new f.ArgumentNullError("uri");if(!n)throw new f.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new f.EventSource,this.privConnectionId=t,this.privMessageFormatter=n,this.privConnectionState=f.ConnectionState.None,this.privUri=e,this.privHeaders=r,this.privEnableCompression=o,this.privHeaders[d.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===f.ConnectionState.Disconnected)return Promise.reject("Cannot open a connection that is in ".concat(this.privConnectionState," state"));if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new f.Deferred,this.privCertificateValidatedDeferral=new f.Deferred,this.privConnectionState=f.ConnectionState.Connecting;try{if("undefined"===typeof WebSocket||m.forceNpmWebSocket){const e={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve(),e.agent=this.getAgent();let t=new URL(this.privUri).protocol;"wss:"===(null===t||void 0===t?void 0:t.toLocaleLowerCase())?t="https:":"ws:"===(null===t||void 0===t?void 0:t.toLocaleLowerCase())&&(t="http:"),e.agent.protocol=t,this.privWebsocketClient=new p.default(this.privUri,e)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new f.Queue,this.privDisconnectDeferral=new f.Deferred,this.privSendMessageQueue=new f.Queue,this.processSendQueue().catch((e=>{f.Events.instance.onEvent(new f.BackgroundEvent(e))}))}catch(e){return this.privConnectionEstablishDeferral.resolve(new f.ConnectionOpenResponse(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new f.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then((()=>{this.privConnectionState=f.ConnectionState.Connected,this.onEvent(new f.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new f.ConnectionOpenResponse(200,""))}),(e=>{this.privConnectionEstablishDeferral.reject(e)}))},this.privWebsocketClient.onerror=e=>{this.onEvent(new f.ConnectionErrorEvent(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===f.ConnectionState.Connecting?(this.privConnectionState=f.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new f.ConnectionOpenResponse(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=f.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new f.ConnectionClosedEvent(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch((e=>{f.Events.instance.onEvent(new f.BackgroundEvent(e))}))},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===f.ConnectionState.Connected){const n=new f.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){const i=new f.RawWebsocketMessage(f.MessageType.Binary,e.data);this.privMessageFormatter.toConnectionMessage(i).then((e=>{this.onEvent(new f.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),n.resolve(e)}),(e=>{n.reject("Invalid binary message format. Error: ".concat(e))}))}else{const i=new f.RawWebsocketMessage(f.MessageType.Text,e.data);this.privMessageFormatter.toConnectionMessage(i).then((e=>{this.onEvent(new f.ConnectionMessageReceivedEvent(this.privConnectionId,t,e)),n.resolve(e)}),(e=>{n.reject("Invalid text message format. Error: ".concat(e))}))}}},this.privConnectionEstablishDeferral.promise}send(e){if(this.privConnectionState!==f.ConnectionState.Connected)return Promise.reject("Cannot send on connection that is in ".concat(f.ConnectionState[this.privConnectionState]," state"));const t=new f.Deferred,n=new f.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then((i=>{n.resolve({Message:e,RawWebsocketMessage:i,sendStatusDeferral:t})}),(e=>{n.reject("Error formatting the message. ".concat(e))})),t.promise}read(){return this.privConnectionState!==f.ConnectionState.Connected?Promise.reject("Cannot read on connection that is in ".concat(this.privConnectionState," state")):this.privReceivingMessageQueue.dequeue()}close(e){return this.privWebsocketClient?(this.privConnectionState!==f.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve()}get events(){return this.privConnectionEvents}sendRawMessage(e){try{return e?(this.onEvent(new f.ConnectionMessageSentEvent(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(t){return Promise.reject("websocket send error: ".concat(t))}}onClose(e,t){return s(this,void 0,void 0,(function*(){const n="Connection closed. ".concat(e,": ").concat(t);this.privConnectionState=f.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose((()=>{}),n),yield this.privSendMessageQueue.drainAndDispose((e=>{e.sendStatusDeferral.reject(n)}),n)}))}processSendQueue(){return s(this,void 0,void 0,(function*(){for(;;){const t=this.privSendMessageQueue.dequeue(),n=yield t;if(!n)return;try{yield this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(e){n.sendStatusDeferral.reject(e)}}}))}onEvent(e){this.privConnectionEvents.onEvent(e),f.Events.instance.onEvent(e)}getAgent(){const e=new c.default.Agent(this.createConnection);return void 0!==this.proxyInfo&&void 0!==this.proxyInfo.HostName&&this.proxyInfo.Port>0&&(e.proxyInfo=this.proxyInfo),e}static GetProxyAgent(e){const t={host:e.HostName,port:e.Port};e.UserName?t.headers={"Proxy-Authentication":"Basic "+new Buffer("".concat(e.UserName,":").concat(void 0===e.Password?"":e.Password)).toString("base64")}:t.headers={},t.headers.requestOCSP="true";return new h.default(t)}createConnection(e,t){let n;if(t=Object.assign(Object.assign({},t),{requestOCSP:!0,servername:t.host}),this.proxyInfo){const i=m.GetProxyAgent(this.proxyInfo);n=new Promise(((n,r)=>{i.callback(e,t,((e,t)=>{e?r(e):n(t)}))}))}else n=t.secureEndpoint?Promise.resolve(u.connect(t)):Promise.resolve(l.connect(t));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}t.WebsocketMessageAdapter=m,m.forceNpmWebSocket=!1},9869:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddedLmIntent=void 0;t.AddedLmIntent=class{constructor(e,t){this.modelImpl=e,this.intentName=t}}},8002:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AgentConfig=void 0;t.AgentConfig=class{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}},8686:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarSynthesisAdapter=void 0;const i=n(7419),r=n(9831);class o extends r.SynthesisAdapterBase{constructor(e,t,n,i,r){super(e,t,n,void 0),this.privAvatarSynthesizer=i,this.privSynthesizer=i,this.privAvatarConfig=r}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var e,t,n,r,o,s,a,l,u,c,h,p,d,f,m,g;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:null===(e=this.privAvatarConfig.videoFormat)||void 0===e?void 0:e.bitrate,codec:null===(t=this.privAvatarConfig.videoFormat)||void 0===t?void 0:t.codec,crop:{bottomRight:{x:null===(o=null===(r=null===(n=this.privAvatarConfig.videoFormat)||void 0===n?void 0:n.cropRange)||void 0===r?void 0:r.bottomRight)||void 0===o?void 0:o.x,y:null===(l=null===(a=null===(s=this.privAvatarConfig.videoFormat)||void 0===s?void 0:s.cropRange)||void 0===a?void 0:a.bottomRight)||void 0===l?void 0:l.y},topLeft:{x:null===(h=null===(c=null===(u=this.privAvatarConfig.videoFormat)||void 0===u?void 0:u.cropRange)||void 0===c?void 0:c.topLeft)||void 0===h?void 0:h.x,y:null===(f=null===(d=null===(p=this.privAvatarConfig.videoFormat)||void 0===p?void 0:p.cropRange)||void 0===d?void 0:d.topLeft)||void 0===f?void 0:f.y}},resolution:{height:null===(m=this.privAvatarConfig.videoFormat)||void 0===m?void 0:m.height,width:null===(g=this.privAvatarConfig.videoFormat)||void 0===g?void 0:g.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style}}}onAvatarEvent(e){if(this.privAvatarSynthesizer.avatarEventReceived){const n=new i.AvatarEventArgs(e.Data.Offset,e.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,n)}catch(t){}}}}t.AvatarSynthesisAdapter=o},5547:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveSubscriptionKeyAuthentication=void 0;const i=n(6606),r=n(4891),o=n(1592);t.CognitiveSubscriptionKeyAuthentication=class{constructor(e){if(!e)throw new i.ArgumentNullError("subscriptionKey");this.privAuthInfo=new o.AuthInfo(r.HeaderNames.AuthKey,e)}fetch(e){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(e){return Promise.resolve(this.privAuthInfo)}}},9904:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveTokenAuthentication=void 0;const i=n(6606),r=n(1592),o=n(4891);class s{constructor(e,t){if(!e)throw new i.ArgumentNullError("fetchCallback");if(!t)throw new i.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}fetch(e){return this.privFetchCallback(e).then((e=>new r.AuthInfo(o.HeaderNames.Authorization,void 0===e?void 0:s.privTokenPrefix+e)))}fetchOnExpiry(e){return this.privFetchOnExpiryCallback(e).then((e=>new r.AuthInfo(o.HeaderNames.Authorization,void 0===e?void 0:s.privTokenPrefix+e)))}}t.CognitiveTokenAuthentication=s,s.privTokenPrefix="Bearer "},9258:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionFactoryBase=void 0;const i=n(9831),r=n(7419),o=n(2367);t.ConnectionFactoryBase=class{static getHostSuffix(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(e,t,n){new Map([[r.PropertyId.Speech_SegmentationSilenceTimeoutMs,o.QueryParameterNames.SegmentationSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_EnableAudioLogging,o.QueryParameterNames.EnableAudioLogging],[r.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,o.QueryParameterNames.EndSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,o.QueryParameterNames.InitialSilenceTimeoutMs],[r.PropertyId.SpeechServiceResponse_PostProcessingOption,o.QueryParameterNames.Postprocessing],[r.PropertyId.SpeechServiceResponse_ProfanityOption,o.QueryParameterNames.Profanity],[r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,o.QueryParameterNames.EnableWordLevelTimestamps],[r.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,o.QueryParameterNames.StableIntermediateThreshold]]).forEach(((i,r)=>{this.setUrlParameter(r,i,e,t,n)}));const s=JSON.parse(e.parameters.getProperty(i.ServicePropertiesPropertyName,"{}"));Object.keys(s).forEach((e=>{t[e]=s[e]}))}setUrlParameter(e,t,n,i,r){const o=n.parameters.getProperty(e,void 0);!o||r&&-1!==r.search(t)||(i[t]=o.toLocaleLowerCase())}}},2217:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceRecognizer=void 0;const r=n(7419),o=n(9831);class s extends o.ServiceRecognizerBase{constructor(e,t,n,r,o){super(e,t,n,r,o),this.handleSpeechPhraseMessage=e=>i(this,void 0,void 0,(function*(){return this.handleSpeechPhrase(e)})),this.handleSpeechHypothesisMessage=e=>this.handleSpeechHypothesis(e)}processTypeSpecificMessages(e){}handleRecognizedCallback(e,t,n){}handleRecognizingCallback(e,t,n){}processSpeechMessages(e){return i(this,void 0,void 0,(function*(){let t=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(e.textBody),t=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&(yield this.handleSpeechPhraseMessage(e.textBody)),t=!0}return t}))}cancelRecognition(e,t,n,i,r){}handleSpeechPhrase(e){return i(this,void 0,void 0,(function*(){const t=o.SimpleSpeechPhrase.fromJSON(e),n=o.EnumTranslation.implTranslateRecognitionResult(t.RecognitionStatus);let i;const s=new r.PropertyCollection;s.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e);const a=t.Offset+this.privRequestSession.currentTurnAudioOffset;let l=a;if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+t.Offset+t.Duration),r.ResultReason.Canceled===n){const e=o.EnumTranslation.implTranslateCancelResult(t.RecognitionStatus),n=o.EnumTranslation.implTranslateCancelErrorCode(t.RecognitionStatus);yield this.cancelRecognitionLocal(e,n,o.EnumTranslation.implTranslateErrorDetails(n))}else if(!this.privRequestSession.isSpeechEnded||n!==r.ResultReason.NoMatch||t.RecognitionStatus===o.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(o.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])i=new r.SpeechRecognitionResult(this.privRequestSession.requestId,n,t.DisplayText,t.Duration,a,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,s);else{const t=o.DetailedSpeechPhrase.fromJSON(e),a=t.Offset+this.privRequestSession.currentTurnAudioOffset,u=t.getJsonWithCorrectedOffsets(a);i=new r.SpeechRecognitionResult(this.privRequestSession.requestId,n,t.Text,t.Duration,a,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,u,s),l=i.offset}this.handleRecognizedCallback(i,l,this.privRequestSession.sessionId)}}))}handleSpeechHypothesis(e){const t=o.SpeechHypothesis.fromJSON(e),n=t.Offset+this.privRequestSession.currentTurnAudioOffset,i=new r.PropertyCollection;i.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e);const s=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,t.Text,t.Duration,n,t.Language,t.LanguageDetectionConfidence,t.SpeakerId,void 0,e,i);this.privRequestSession.onHypothesis(n),this.handleRecognizingCallback(s,t.Duration,this.privRequestSession.sessionId)}}t.ConversationServiceRecognizer=s},708:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriberConnectionFactory=void 0;const i=n(4583),r=n(7419),o=n(9831),s=n(9258),a=n(9831),l=n(4891),u=n(2367);class c extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/speech/universal/v2"}create(e,t,n){let o=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const c=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),h=s.ConnectionFactoryBase.getHostSuffix(c),p=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+c+".stt.speech"+h),d={},f=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);f?o&&-1!==o.search(u.QueryParameterNames.CustomSpeechDeploymentId)||(d[u.QueryParameterNames.CustomSpeechDeploymentId]=f):m&&(o&&-1!==o.search(u.QueryParameterNames.Language)||(d[u.QueryParameterNames.Language]=m)),void 0!==e.autoDetectSourceLanguages&&(d[u.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(e,d,o),o||(o="".concat(p).concat(this.universalUri));const g={};void 0!==t.token&&""!==t.token&&(g[t.headerName]=t.token),g[l.HeaderNames.ConnectionId]=n;const v="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),y=new i.WebsocketConnection(o,d,g,new a.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),v,n),S=y.uri;return e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,S),y}setV2UrlParams(e,t,n){new Map([[r.PropertyId.Speech_SegmentationSilenceTimeoutMs,u.QueryParameterNames.SegmentationSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_EnableAudioLogging,u.QueryParameterNames.EnableAudioLogging],[r.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,u.QueryParameterNames.EndSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,u.QueryParameterNames.InitialSilenceTimeoutMs],[r.PropertyId.SpeechServiceResponse_PostProcessingOption,u.QueryParameterNames.Postprocessing],[r.PropertyId.SpeechServiceResponse_ProfanityOption,u.QueryParameterNames.Profanity],[r.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,u.QueryParameterNames.StableIntermediateThreshold]]).forEach(((i,r)=>{this.setUrlParameter(r,i,e,t,n)}));const i=JSON.parse(e.parameters.getProperty(o.ServicePropertiesPropertyName,"{}"));Object.keys(i).forEach((e=>{t[e]=i[e]}))}}t.ConversationTranscriberConnectionFactory=c},1995:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionServiceRecognizer=void 0;const r=n(7419),o=n(9831);class s extends o.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privConversationTranscriber=r,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const e=this.privSpeechContext.getSection("phraseDetection");e.mode="Conversation";const t={mode:"Anonymous"};t.audioSessionId=this.privDiarizationSessionId,t.audioOffsetMs=0,e.speakerDiarization=t,this.privSpeechContext.setSection("phraseDetection",e)}}processTypeSpecificMessages(e){return i(this,void 0,void 0,(function*(){let t;const n=new r.PropertyCollection;n.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let i=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const a=o.SpeechHypothesis.fromJSON(e.textBody),l=a.Offset+this.privRequestSession.currentTurnAudioOffset;t=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,a.Text,a.Duration,l,a.Language,a.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(l);const u=new r.ConversationTranscriptionEventArgs(t,a.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,u)}catch(s){}i=!0;break;case"speech.phrase":const c=o.SimpleSpeechPhrase.fromJSON(e.textBody),h=o.EnumTranslation.implTranslateRecognitionResult(c.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+c.Offset+c.Duration),r.ResultReason.Canceled===h){const e=o.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus),t=o.EnumTranslation.implTranslateCancelErrorCode(c.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,o.EnumTranslation.implTranslateErrorDetails(t))}else if(!this.privRequestSession.isSpeechEnded||h!==r.ResultReason.NoMatch||c.RecognitionStatus===o.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(o.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])t=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,h,c.DisplayText,c.Duration,c.Offset+this.privRequestSession.currentTurnAudioOffset,c.Language,c.LanguageDetectionConfidence,c.SpeakerId,void 0,e.textBody,n);else{const i=o.DetailedSpeechPhrase.fromJSON(e.textBody),s=i.Offset+this.privRequestSession.currentTurnAudioOffset,a=i.getJsonWithCorrectedOffsets(s);t=new r.ConversationTranscriptionResult(this.privRequestSession.requestId,h,i.RecognitionStatus===o.RecognitionStatus.Success?i.NBest[0].Display:void 0,i.Duration,s,i.Language,i.LanguageDetectionConfidence,c.SpeakerId,void 0,a,n)}const i=new r.ConversationTranscriptionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,i)}catch(s){}}i=!0}return i}))}cancelRecognition(e,t,n,i,s){if((new r.PropertyCollection).setProperty(o.CancellationErrorCodePropertyName,r.CancellationErrorCode[i]),this.privConversationTranscriber.canceled){const t=new r.ConversationTranscriptionCanceledEventArgs(n,s,i,void 0,e);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,t)}catch(a){}}}}t.ConversationTranscriptionServiceRecognizer=s},4429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogConnectionFactory=void 0;const i=n(4583),r=n(9831),o=n(7419),s=n(9258),a=n(9831),l=n(4891),u=n(2367);class c extends s.ConnectionFactoryBase{create(e,t,n){const h=e.parameters.getProperty(o.PropertyId.Conversation_ApplicationId,""),p=e.parameters.getProperty(o.PropertyId.Conversation_DialogType),d=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region),f=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),m=e.parameters.getProperty(o.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),g={};g[l.HeaderNames.ConnectionId]=n,g[u.QueryParameterNames.Format]=e.parameters.getProperty(r.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase(),g[u.QueryParameterNames.Language]=f,g[u.QueryParameterNames.RequestBotStatusMessages]=m,h&&(g[u.QueryParameterNames.BotId]=h,p===o.DialogServiceConfig.DialogTypes.CustomCommands&&(g[l.HeaderNames.CustomCommandsAppId]=h));const v=p===o.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",y=p===o.DialogServiceConfig.DialogTypes.CustomCommands?"v1":p===o.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",S={};null!=t.token&&""!==t.token&&(S[t.headerName]=t.token);let R=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,"");if(!R){const t=s.ConnectionFactoryBase.getHostSuffix(d),n=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://".concat(d,".").concat(c.BaseUrl).concat(t)),i=n.endsWith("/")?n:n+"/";R="".concat(i).concat(v).concat(c.ApiKey,"/").concat(y)}this.setCommonUrlParams(e,g,R);const w="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(R,g,S,new a.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),w,n)}}t.DialogConnectionFactory=c,c.ApiKey="api",c.BaseUrl="convai.speech"},38:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceAdapter=void 0;const r=n(4583),o=n(6917),s=n(6606),a=n(2231),l=n(7419),u=n(3036),c=n(9831),h=n(6421),p=n(8046);class d extends c.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privEvents=new s.EventSource,this.privDialogServiceConnector=r,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new u.DialogServiceTurnStateManager,this.recognizeOverride=(e,t,n)=>this.listenOnce(e,t,n),this.postConnectImplOverride=e=>this.dialogConnectImpl(e),this.configConnectionOverride=e=>this.configConnection(e),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=n,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach((e=>{"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0)}))}sendMessage(e){return i(this,void 0,void 0,(function*(){const t=s.createGuid(),n=s.createNoDashGuid(),i={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},r=JSON.stringify(i),o=yield this.fetchConnection();yield o.send(new p.SpeechConnectionMessage(s.MessageType.Text,"agent",n,"application/json",r))}))}privDisconnect(){return i(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,l.CancellationReason.Error,l.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}))}processTypeSpecificMessages(e){const t=new l.PropertyCollection;let n,i;switch(e.messageType===s.MessageType.Text&&t.setProperty(l.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":const r=c.SimpleSpeechPhrase.fromJSON(e.textBody);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+r.Offset+r.Duration),r.RecognitionStatus!==c.RecognitionStatus.TooManyRequests&&r.RecognitionStatus!==c.RecognitionStatus.Error){const e=this.fireEventForResult(r,t);if(this.privLastResult=e.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,e)}catch(o){}}i=!0;break;case"speech.hypothesis":const s=c.SpeechHypothesis.fromJSON(e.textBody),a=s.Offset+this.privRequestSession.currentTurnAudioOffset;n=new l.SpeechRecognitionResult(this.privRequestSession.requestId,l.ResultReason.RecognizingSpeech,s.Text,s.Duration,a,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,t),this.privRequestSession.onHypothesis(a);const u=new l.SpeechRecognitionEventArgs(n,s.Duration,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,u)}catch(o){}i=!0;break;case"speech.keyword":const h=c.SpeechKeyword.fromJSON(e.textBody);n=new l.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===h.Status?l.ResultReason.RecognizedKeyword:l.ResultReason.NoMatch,h.Text,h.Duration,h.Offset,void 0,void 0,void 0,void 0,e.textBody,t),"Accepted"!==h.Status&&(this.privLastResult=n);const p=new l.SpeechRecognitionEventArgs(n,n.duration,n.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,p)}catch(o){}i=!0;break;case"audio":{const t=e.requestId.toUpperCase(),n=this.privTurnStateManager.GetTurn(t);try{e.binaryBody?n.audioStream.write(e.binaryBody):n.endAudioStream()}catch(o){}}i=!0;break;case"response":this.handleResponseMessage(e),i=!0}const r=new s.Deferred;return r.resolve(i),r.promise}cancelRecognition(e,t,n,r,o){return i(this,void 0,void 0,(function*(){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing()),this.privDialogServiceConnector.canceled){const s=new l.PropertyCollection;s.setProperty(c.CancellationErrorCodePropertyName,l.CancellationErrorCode[r]);const a=new l.SpeechRecognitionCanceledEventArgs(n,o,r,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,a)}catch(t){}if(this.privSuccessCallback){const e=new l.SpeechRecognitionResult(void 0,l.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,o,void 0,s);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(i){}}}}))}listenOnce(e,t,n){return i(this,void 0,void 0,(function*(){this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(l.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const o=this.connectImpl(),s=this.sendPreAudioMessages(),a=yield this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),u=yield this.privDialogAudioSource.format,c=yield this.privDialogAudioSource.deviceInfo,h=new r.ReplayableAudioNode(a,u.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:c};try{yield o,yield s}catch(d){return yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,l.CancellationReason.Error,l.CancellationErrorCode.ConnectionFailure,d),Promise.resolve()}const p=new l.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,p);this.sendAudio(h).then((()=>{}),(e=>i(this,void 0,void 0,(function*(){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,l.CancellationReason.Error,l.CancellationErrorCode.RuntimeError,e)}))))}))}dialogConnectImpl(e){return this.privConnectionLoop=this.startMessageLoop(),e}receiveDialogMessageOverride(){const e=new s.Deferred,t=()=>i(this,void 0,void 0,(function*(){try{const i=this.isDisposed(),r=!this.isDisposed()&&this.terminateMessageLoop;if(i||r)return void e.resolve(void 0);const o=yield this.fetchConnection(),a=yield o.read();if(!a)return t();const u=p.SpeechConnectionMessage.fromConnectionMessage(a);switch(u.path.toLowerCase()){case"turn.start":{const e=u.requestId.toUpperCase();e!==this.privRequestSession.requestId.toUpperCase()?this.privTurnStateManager.StartTurn(e):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const e=c.SpeechDetected.fromJSON(u.textBody),t=new l.RecognitionEventArgs(e.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,t);break;case"speech.enddetected":let i;i=u.textBody.length>0?u.textBody:"{ Offset: 0 }";const r=c.SpeechDetected.fromJSON(i);this.privRequestSession.onServiceRecognized(r.Offset+this.privRequestSession.currentTurnAudioOffset);const o=new l.RecognitionEventArgs(r.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,o);break;case"turn.end":{const e=u.requestId.toUpperCase();if(e!==this.privRequestSession.requestId.toUpperCase())this.privTurnStateManager.CompleteTurn(e);else{const e=new l.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(!1),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,e),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(n){this.privErrorCallback&&this.privErrorCallback(n)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{(yield this.processTypeSpecificMessages(u))||this.serviceEvents&&this.serviceEvents.onEvent(new s.ServiceEvent(u.path.toLowerCase(),u.textBody))}catch(n){}}return t()}catch(i){this.terminateMessageLoop=!0,e.resolve()}}));return t().catch((e=>{s.Events.instance.onEvent(new s.BackgroundEvent(e))})),e.promise}startMessageLoop(){return i(this,void 0,void 0,(function*(){this.terminateMessageLoop=!1;try{yield this.receiveDialogMessageOverride()}catch(e){yield this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,l.CancellationReason.Error,l.CancellationErrorCode.RuntimeError,e)}return Promise.resolve()}))}configConnection(e){return i(this,void 0,void 0,(function*(){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendAgentConfig(e),e)}))}sendPreAudioMessages(){return i(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();this.addKeywordContextData(),yield this.sendSpeechContext(e,!0),yield this.sendAgentContext(e),yield this.sendWaveHeader(e)}))}sendAgentConfig(e){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(l.PropertyId.Conversation_DialogType)===l.DialogServiceConfig.DialogTypes.CustomCommands){const e=this.agentConfig.get();e.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(e)}this.onEvent(new o.SendingAgentContextMessageEvent(this.agentConfig));const t=this.agentConfig.toJsonString();return this.agentConfigSent=!0,e.send(new p.SpeechConnectionMessage(s.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",t))}}sendAgentContext(e){const t=s.createGuid(),n=this.privDialogServiceConnector.properties.getProperty(l.PropertyId.Conversation_Speech_Activity_Template),i={channelData:"",context:{interactionId:t},messagePayload:void 0===typeof n?void 0:n,version:.5},r=JSON.stringify(i);return e.send(new p.SpeechConnectionMessage(s.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",r))}fireEventForResult(e,t){const n=c.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),i=e.Offset+this.privRequestSession.currentTurnAudioOffset,r=new l.SpeechRecognitionResult(this.privRequestSession.requestId,n,e.DisplayText,e.Duration,i,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new l.SpeechRecognitionEventArgs(r,i,this.privRequestSession.sessionId)}handleResponseMessage(e){const t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":const i=e.requestId.toUpperCase(),r=h.ActivityPayloadResponse.fromJSON(e.textBody),o=this.privTurnStateManager.GetTurn(i);if(r.conversationId){const e=this.agentConfig.get();e.botInfo.conversationId=r.conversationId,this.agentConfig.set(e)}const u=o.processActivityPayload(r,a.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(l.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),c=new l.ActivityReceivedEventArgs(r.messagePayload,u);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,c)}catch(n){}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new l.TurnStatusReceivedEventArgs(e.textBody))}catch(n){}break;default:s.Events.instance.onEvent(new s.BackgroundEvent("Unexpected response of type ".concat(t.messageType,". Ignoring.")))}}onEvent(e){this.privEvents.onEvent(e),s.Events.instance.onEvent(e)}addKeywordContextData(){const e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0===e)return;const t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),n=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),i=e.split(";"),r=void 0===t?[]:t.split(";"),o=void 0===n?[]:n.split(";"),s=[];for(let a=0;a<i.length;a++){const e={};e.text=i[a],a<r.length&&(e.offset=Number(r[a])),a<o.length&&(e.duration=Number(o[a])),s.push(e)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:s,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}}t.DialogServiceAdapter=d},3100:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnState=void 0;const i=n(2231),r=n(6625),o=n(6421);t.DialogServiceTurnState=class{constructor(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(e,t){return e.messageDataStreamType===o.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=r.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==t?t:i.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()}complete(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout((()=>{this.privTurnManager.CompleteTurn(this.privRequestId)}),2e3)}}},3036:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnStateManager=void 0;const i=n(6943),r=n(3100);t.DialogServiceTurnStateManager=class{constructor(){this.privTurnMap=new Map}StartTurn(e){if(this.privTurnMap.has(e))throw new i.InvalidOperationError("Service error: There is already a turn with id:"+e);const t=new r.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)}GetTurn(e){return this.privTurnMap.get(e)}CompleteTurn(e){if(!this.privTurnMap.has(e))throw new i.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);const t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t}}},5023:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicGrammarBuilder=void 0;t.DynamicGrammarBuilder=class{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach((e=>{t.push({Text:e})})),e.Groups=[{Type:"Generic",Items:t}]}return e}}},7811:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7732:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumTranslation=void 0;const i=n(7419),r=n(9831);t.EnumTranslation=class{static implTranslateRecognitionResult(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=i.ResultReason.Canceled;switch(e){case r.RecognitionStatus.Success:n=i.ResultReason.RecognizedSpeech;break;case r.RecognitionStatus.EndOfDictation:n=t?i.ResultReason.RecognizedSpeech:i.ResultReason.NoMatch;break;case r.RecognitionStatus.NoMatch:case r.RecognitionStatus.InitialSilenceTimeout:case r.RecognitionStatus.BabbleTimeout:n=i.ResultReason.NoMatch;break;case r.RecognitionStatus.Error:case r.RecognitionStatus.BadRequest:case r.RecognitionStatus.Forbidden:default:n=i.ResultReason.Canceled}return n}static implTranslateCancelResult(e){let t=i.CancellationReason.EndOfStream;switch(e){case r.RecognitionStatus.Success:case r.RecognitionStatus.EndOfDictation:case r.RecognitionStatus.NoMatch:t=i.CancellationReason.EndOfStream;break;case r.RecognitionStatus.InitialSilenceTimeout:case r.RecognitionStatus.BabbleTimeout:case r.RecognitionStatus.Error:case r.RecognitionStatus.BadRequest:case r.RecognitionStatus.Forbidden:default:t=i.CancellationReason.Error}return t}static implTranslateCancelErrorCode(e){let t=i.CancellationErrorCode.NoError;switch(e){case r.RecognitionStatus.Error:t=i.CancellationErrorCode.ServiceError;break;case r.RecognitionStatus.TooManyRequests:t=i.CancellationErrorCode.TooManyRequests;break;case r.RecognitionStatus.BadRequest:t=i.CancellationErrorCode.BadRequestParameters;break;case r.RecognitionStatus.Forbidden:t=i.CancellationErrorCode.Forbidden;break;default:t=i.CancellationErrorCode.NoError}return t}static implTranslateErrorDetails(e){let t="The speech service encountered an internal error and could not continue.";switch(e){case i.CancellationErrorCode.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case i.CancellationErrorCode.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case i.CancellationErrorCode.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return t}}},9831:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,r(n(5547),t),r(n(9904),t),r(n(1592),t),r(n(4643),t),r(n(2502),t),r(n(1579),t),r(n(6850),t),r(n(3254),t),r(n(6169),t),r(n(2217),t),r(n(9725),t),r(n(6174),t),r(n(1791),t),r(n(3206),t),r(n(708),t),r(n(5861),t),r(n(9347),t),r(n(8587),t),r(n(7732),t),r(n(7004),t),r(n(3700),t),r(n(5187),t),r(n(570),t),r(n(5586),t),r(n(2146),t),r(n(8198),t),r(n(6163),t),r(n(9528),t),r(n(1995),t),r(n(1407),t),r(n(6868),t),r(n(7143),t),r(n(9869),t),r(n(4079),t),r(n(8150),t),r(n(5617),t),r(n(5057),t),r(n(2617),t),r(n(5023),t),r(n(7811),t),r(n(38),t),r(n(8002),t),r(n(5264),t),r(n(1007),t),r(n(1348),t),r(n(4058),t);var o=n(8686);Object.defineProperty(t,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return o.AvatarSynthesisAdapter}});var s=n(9531);Object.defineProperty(t,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return s.SpeechSynthesisAdapter}}),r(n(7897),t),r(n(2280),t),r(n(5366),t),r(n(4781),t),r(n(8790),t),r(n(36),t),r(n(3925),t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"},4891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNames=void 0;class n{}t.HeaderNames=n,n.AuthKey="Ocp-Apim-Subscription-Key",n.Authorization="Authorization",n.SpIDAuthKey="Apim-Subscription-Id",n.ConnectionId="X-ConnectionId",n.ContentType="Content-Type",n.CustomCommandsAppId="X-CommandsAppId",n.Path="Path",n.RequestId="X-RequestId",n.RequestStreamId="X-StreamId",n.RequestTimestamp="X-Timestamp"},1592:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthInfo=void 0;t.AuthInfo=class{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}},4643:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1579:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentConnectionFactory=void 0;const i=n(4583),r=n(7419),o=n(9258),s=n(9831),a=n(4891);class l extends o.ConnectionFactoryBase{create(e,t,n){let l=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const t=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_IntentRegion),n=o.ConnectionFactoryBase.getHostSuffix(t);l=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+t+".sr.speech"+n)+"/speech/recognition/interactive/cognitiveservices/v1"}const u={format:"simple",language:e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,u,l);const c={};void 0!==t.token&&""!==t.token&&(c[t.headerName]=t.token),c[a.HeaderNames.ConnectionId]=n,e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,l);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(l,u,c,new s.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),h,n)}getSpeechRegionFromIntentRegion(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}}}t.IntentConnectionFactory=l},4079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentServiceRecognizer=void 0;const i=n(6606),r=n(7419),o=n(9831);class s extends o.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privIntentRecognizer=r,this.privIntentDataSent=!1}setIntents(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0}processTypeSpecificMessages(e){let t,n,s=!1;const a=new r.PropertyCollection;switch(e.messageType===i.MessageType.Text&&a.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":const i=o.SpeechHypothesis.fromJSON(e.textBody);if(t=new r.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.ResultReason.RecognizingIntent,i.Text,i.Duration,i.Offset+this.privRequestSession.currentTurnAudioOffset,i.Language,i.LanguageDetectionConfidence,void 0,e.textBody,a),this.privRequestSession.onHypothesis(t.offset),n=new r.IntentRecognitionEventArgs(t,i.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,n)}catch(u){}s=!0;break;case"speech.phrase":const l=o.SimpleSpeechPhrase.fromJSON(e.textBody);t=new r.IntentRecognitionResult(void 0,this.privRequestSession.requestId,o.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),l.DisplayText,l.Duration,l.Offset+this.privRequestSession.currentTurnAudioOffset,l.Language,l.LanguageDetectionConfidence,void 0,e.textBody,a),n=new r.IntentRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch(u){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};!1===this.privIntentDataSent||r.ResultReason.NoMatch===n.result.reason?(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),h()):this.privPendingIntentArgs=n,s=!0;break;case"response":if(n=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===n){if(""===e.textBody)return;n=new r.IntentRecognitionEventArgs(new r.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const p=o.IntentResponse.fromJSON(e.textBody);if(null!==p&&p.topScoringIntent&&p.topScoringIntent.intent){let t=this.privAddedLmIntents[p.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(t=this.privUmbrellaIntent),t){const i=void 0===t||void 0===t.intentName?p.topScoringIntent.intent:t.intentName;let o=n.result.reason;void 0!==i&&(o=r.ResultReason.RecognizedIntent);const s=void 0!==n.result.properties?n.result.properties:new r.PropertyCollection;s.setProperty(r.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),n=new r.IntentRecognitionEventArgs(new r.IntentRecognitionResult(i,n.result.resultId,o,n.result.text,n.result.duration,n.result.offset,void 0,void 0,n.result.errorDetails,n.result.json,s),n.offset,n.sessionId)}}if(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch(u){}if(this.privSuccessCallback){try{this.privSuccessCallback(n.result)}catch(c){this.privErrorCallback&&this.privErrorCallback(c)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}s=!0}const l=new i.Deferred;return l.resolve(s),l.promise}cancelRecognition(e,t,n,i,s){const a=new r.PropertyCollection;if(a.setProperty(o.CancellationErrorCodePropertyName,r.CancellationErrorCode[i]),this.privIntentRecognizer.canceled){const t=new r.IntentRecognitionCanceledEventArgs(n,s,i,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,t)}catch(l){}}if(this.privSuccessCallback){const e=new r.IntentRecognitionResult(void 0,t,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,s,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(u){}}}}t.IntentServiceRecognizer=s},2367:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryParameterNames=void 0;class n{}t.QueryParameterNames=n,n.BotId="botid",n.CustomSpeechDeploymentId="cid",n.CustomVoiceDeploymentId="deploymentId",n.EnableAudioLogging="storeAudio",n.EnableLanguageId="lidEnabled",n.EnableWordLevelTimestamps="wordLevelTimestamps",n.EndSilenceTimeoutMs="endSilenceTimeoutMs",n.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs",n.Format="format",n.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",n.Language="language",n.Profanity="profanity",n.RequestBotStatusMessages="enableBotMessageStatus",n.StableIntermediateThreshold="stableIntermediateThreshold",n.StableTranslation="stableTranslation",n.TestHooks="testhooks",n.Postprocessing="postprocessing",n.CtsMeetingId="meetingId",n.CtsDeviceId="deviceId",n.CtsIsParticipant="isParticipant",n.EnableAvatar="enableTalkingAvatar"},3254:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;const i=n(6606);class r extends i.PlatformEvent{constructor(e,t,n){super(e,arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.EventType.Info),this.privRequestId=t,this.privSessionId=n}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}t.SpeechRecognitionEvent=r;t.RecognitionTriggeredEvent=class extends r{constructor(e,t,n,i){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};t.ListeningStartedEvent=class extends r{constructor(e,t,n,i){super("ListeningStartedEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}};t.ConnectingToServiceEvent=class extends r{constructor(e,t,n){super("ConnectingToServiceEvent",e,n),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}};var o;t.RecognitionStartedEvent=class extends r{constructor(e,t,n,i,r){super("RecognitionStartedEvent",e,r),this.privAudioSourceId=t,this.privAudioNodeId=n,this.privAuthFetchEventId=i}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}},function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(o=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));t.RecognitionEndedEvent=class extends r{constructor(e,t,n,r,s,a,l,u){super("RecognitionEndedEvent",e,s,l===o.Success?i.EventType.Info:i.EventType.Error),this.privAudioSourceId=t,this.privAudioNodeId=n,this.privAuthFetchEventId=r,this.privStatus=l,this.privError=u,this.privServiceTag=a}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}},9725:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;const i=n(7419),r=n(9831);var o;!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(o=t.RecognitionMode||(t.RecognitionMode={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.SpeechResultFormat||(t.SpeechResultFormat={}));t.RecognizerConfig=class{constructor(e,t){this.privSpeechServiceConfig=e||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=t.getProperty(i.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===o.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=o[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==o.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(i.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,void 0)}get sourceLanguageModels(){const e=[];let t=!1;if(void 0!==this.autoDetectSourceLanguages)for(const n of this.autoDetectSourceLanguages.split(",")){const r=n+i.PropertyId.SpeechServiceConnection_EndpointId.toString(),o=this.parameters.getProperty(r,void 0);void 0!==o?(e.push({language:n,endpoint:o}),t=!0):e.push({language:n,endpoint:""})}return t?e:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(e){this.privEnableSpeakerId=e}}},5057:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RequestSession=void 0;const r=n(6606),o=n(3254),s=n(7079);t.RequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=e,this.privRequestId=r.createNoDashGuid(),this.privAudioNodeId=r.createNoDashGuid(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new s.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new o.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t){return i(this,void 0,void 0,(function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new o.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}))}onPreConnectionStart(e,t){this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new o.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}onAuthCompleted(e){return i(this,void 0,void 0,(function*(){e&&(yield this.onComplete())}))}onConnectionEstablishCompleted(e,t){return i(this,void 0,void 0,(function*(){if(200===e)return this.onEvent(new o.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&(yield this.onComplete())}))}onServiceTurnEndResponse(e){return i(this,void 0,void 0,(function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}))}onSpeechContext(){this.privRequestId=r.createNoDashGuid()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0}onAudioSent(e){this.privBytesSent+=e,this.privRecognitionBytesSent+=e}onRetryConnection(){this.privConnectionAttempts++}dispose(){return i(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}))}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}onStopRecognizing(){return i(this,void 0,void 0,(function*(){yield this.onComplete()}))}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(e){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),r.Events.instance.onEvent(e)}onComplete(){return i(this,void 0,void 0,(function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())}))}detachAudioNode(){return i(this,void 0,void 0,(function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))}))}}},6421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;class n{constructor(e){this.privActivityResponse=JSON.parse(e)}static fromJSON(e){return new n(e)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}t.ActivityPayloadResponse=n,function(e){e[e.None=0]="None",e[e.TextToSpeechAudio=1]="TextToSpeechAudio"}(t.MessageDataStreamType||(t.MessageDataStreamType={}))},6868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DetailedSpeechPhrase=void 0;const i=n(9831);class r{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=i.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new r(e)}getJsonWithCorrectedOffsets(e){if(this.privDetailedSpeechPhrase.NBest){let t;for(const e of this.privDetailedSpeechPhrase.NBest)if(e.Words&&e.Words[0]){t=e.Words[0].Offset;break}if(t&&t<e){const n=e-t;for(const e of this.privDetailedSpeechPhrase.NBest){if(e.Words)for(const t of e.Words)t.Offset+=n;if(e.DisplayWords)for(const t of e.DisplayWords)t.Offset+=n}}}return JSON.stringify(this.privDetailedSpeechPhrase)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}}t.DetailedSpeechPhrase=r},7004:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(t.SynthesisStatus||(t.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(t.RecognitionStatus||(t.RecognitionStatus={}))},8150:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentResponse=void 0;class n{constructor(e){this.privIntentResponse=""===e?{}:JSON.parse(e)}static fromJSON(e){return new n(e)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}t.IntentResponse=n},7143:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpeechPhrase=void 0;const i=n(9831);class r{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=i.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new r(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}t.SimpleSpeechPhrase=r},5617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechDetected=void 0;class n{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new n(e)}get Offset(){return this.privSpeechStartDetected.Offset}}t.SpeechDetected=n},8198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechHypothesis=void 0;class n{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new n(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}t.SpeechHypothesis=n},6163:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechKeyword=void 0;class n{constructor(e){this.privSpeechKeyword=JSON.parse(e)}static fromJSON(e){return new n(e)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}}t.SpeechKeyword=n},1007:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme",e.SentenceBoundary="SentenceBoundary",e.SessionEnd="SessionEnd",e.AvatarSignal="TalkingAvatarSignal"}(t.MetadataType||(t.MetadataType={}));class n{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new n(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}t.SynthesisAudioMetadata=n},5187:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationHypothesis=void 0;const i=n(3720),r=n(3960);class o{constructor(e){this.privTranslationHypothesis=e,this.privTranslationHypothesis.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}static fromJSON(e){return new o(JSON.parse(e))}static fromTranslationResponse(e){i.Contracts.throwIfNullOrUndefined(e,"translationHypothesis");const t=e.SpeechHypothesis;return e.SpeechHypothesis=void 0,t.Translation=e,new o(t)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var e;return null===(e=this.privTranslationHypothesis.PrimaryLanguage)||void 0===e?void 0:e.Language}}t.TranslationHypothesis=o},570:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationPhrase=void 0;const i=n(3720),r=n(9831),o=n(3960);class s{constructor(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=r.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=o.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}static fromJSON(e){return new s(JSON.parse(e))}static fromTranslationResponse(e){i.Contracts.throwIfNullOrUndefined(e,"translationResponse");const t=e.SpeechPhrase;return e.SpeechPhrase=void 0,t.Translation=e,t.Text=t.DisplayText,new s(t)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Language}get Confidence(){var e;return null===(e=this.privTranslationPhrase.PrimaryLanguage)||void 0===e?void 0:e.Confidence}get Translation(){return this.privTranslationPhrase.Translation}}t.TranslationPhrase=s},3700:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEnd=void 0;const i=n(9831);class r{constructor(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=i.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=i.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(e){return new r(e)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}}t.TranslationSynthesisEnd=r},9040:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusResponsePayload=void 0;class n{constructor(e){this.privMessageStatusResponse=JSON.parse(e)}static fromJSON(e){return new n(e)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}t.TurnStatusResponsePayload=n},6169:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceRecognizerBase=void 0;const r=n(4583),o=n(6606),s=n(7419),a=n(9831),l=n(8046);class u{constructor(e,t,n,i,r){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!e)throw new o.ArgumentNullError("authentication");if(!t)throw new o.ArgumentNullError("connectionFactory");if(!n)throw new o.ArgumentNullError("audioSource");if(!i)throw new o.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=i.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=n,this.privRecognizerConfig=i,this.privIsDisposed=!1,this.privRecognizer=r,this.privRequestSession=new a.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new o.EventSource,this.privServiceEvents=new o.EventSource,this.privDynamicGrammar=new a.DynamicGrammarBuilder,this.privSpeechContext=new a.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new a.AgentConfig;"on"===this.privRecognizerConfig.parameters.getProperty(s.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!==typeof Blob&&"undefined"!==typeof Worker?this.privSetTimeout=o.Timeout.setTimeout:"undefined"!==typeof window&&(this.privSetTimeout=window.setTimeout.bind(window)),this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;(1003===t.statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(s.CancellationReason.Error,1007===t.statusCode?s.CancellationErrorCode.BadRequestParameters:s.CancellationErrorCode.ConnectionFailure,"".concat(t.reason," websocket error code: ").concat(t.statusCode))}})),this.privEnableSpeakerId&&(this.privDiarizationSessionId=o.createNoDashGuid()),this.setLanguageIdJson(),this.setOutputDetailLevelJson()}setTranslationJson(){const e=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(void 0!==e){const t=e.split(","),n=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),i=void 0!==n?"Synthesize":"None";if(this.privSpeechContext.setSection("translation",{onSuccess:{action:i},output:{interimResults:{mode:"Always"}},targetLanguages:t}),void 0!==n){const e={};for(const i of t)e[i]=n;this.privSpeechContext.setSection("synthesis",{defaultVoices:e})}}}setSpeechSegmentationTimeoutJson(){const e=this.privRecognizerConfig.parameters.getProperty(s.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0);if(void 0!==e){const t=this.recognitionMode===a.RecognitionMode.Conversation?"CONVERSATION":this.recognitionMode===a.RecognitionMode.Dictation?"DICTATION":"INTERACTIVE",n=parseInt(e,10),i=this.privSpeechContext.getSection("phraseDetection");i.mode=t,i[t]={segmentation:{mode:"Custom",segmentationSilenceTimeoutMs:n}},this.privSpeechContext.setSection("phraseDetection",i)}}setLanguageIdJson(){const e=this.privSpeechContext.getSection("phraseDetection");if(void 0!==this.privRecognizerConfig.autoDetectSourceLanguages){const t=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");let n;n="Continuous"===this.privRecognizerConfig.languageIdMode?"DetectContinuous":"DetectAtAudioStart",this.privSpeechContext.setSection("languageId",{Priority:"PrioritizeLatency",languages:t,mode:n,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}});const i=this.privRecognizerConfig.sourceLanguageModels;void 0!==i&&(e.customModels=i,e.onInterim={action:"None"},e.onSuccess={action:"None"})}void 0!==this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)&&(e.onInterim={action:"Translate"},e.onSuccess={action:"Translate"},this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"None"},phraseResults:{resultType:"None"}})),this.privSpeechContext.setSection("phraseDetection",e)}setOutputDetailLevelJson(){if(this.privEnableSpeakerId){if("true"===this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase())this.privSpeechContext.setWordLevelTimings();else{this.privRecognizerConfig.parameters.getProperty(a.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()===s.OutputFormat[s.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat()}}}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.ConversationTranslator_Token,e)}set voiceProfileType(e){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.SpeechServiceConnection_SpeakerIdMode,e)}set authentication(e){this.privAuthentication=e}isDisposed(){return this.privIsDisposed}dispose(e){return i(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privConnectionConfigurationPromise)try{const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}catch(t){return}}))}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,t,n){return i(this,void 0,void 0,(function*(){if(void 0!==this.recognizeOverride)return void(yield this.recognizeOverride(e,t,n));this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=e,this.setSpeechSegmentationTimeoutJson(),this.setTranslationJson(),this.privSuccessCallback=t,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const o=this.connectImpl();let l;try{const e=yield this.audioSource.attach(this.privRequestSession.audioNodeId),t=yield this.audioSource.format,n=yield this.audioSource.deviceInfo;this.privIsLiveAudio=n.type&&n.type===a.type.Microphones,l=new r.ReplayableAudioNode(e,t.avgBytesPerSec),yield this.privRequestSession.onAudioSourceAttachCompleted(l,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:n}}catch(c){throw yield this.privRequestSession.onStopRecognizing(),c}try{yield o}catch(c){return void(yield this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,c))}const u=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u),this.receiveMessage();this.sendAudio(l).catch((e=>i(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)}))))}))}stopRecognizing(){return i(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing)try{yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise}finally{yield this.privRequestSession.dispose()}}))}connect(){return i(this,void 0,void 0,(function*(){return yield this.connectImpl(),Promise.resolve()}))}connectAsync(e,t){this.connectImpl().then((()=>{try{e&&e()}catch(n){t&&t(n)}}),(e=>{try{t&&t(e)}catch(n){}}))}disconnect(){return i(this,void 0,void 0,(function*(){if(yield this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride()),void 0!==this.privConnectionPromise)try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=void 0}))}sendMessage(e){}sendNetworkMessage(e,t){return i(this,void 0,void 0,(function*(){const n="string"===typeof t?o.MessageType.Text:o.MessageType.Binary,i="string"===typeof t?"application/json":"";return(yield this.fetchConnection()).send(new l.SpeechConnectionMessage(n,e,this.privRequestSession.requestId,i,t))}))}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(e){this.privExpectContentAssessmentResponse=e}sendTelemetryData(){return i(this,void 0,void 0,(function*(){const e=this.privRequestSession.getTelemetry();if(!0!==u.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(u.telemetryData)try{u.telemetryData(e)}catch(n){}const t=yield this.fetchConnection();yield t.send(new l.SpeechConnectionMessage(o.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))}))}cancelRecognitionLocal(e,t,n){return i(this,void 0,void 0,(function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,n))}))}receiveMessage(){return i(this,void 0,void 0,(function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection();const t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.receiveMessage();this.privServiceHasSentMessage=!0;const n=l.SpeechConnectionMessage.fromConnectionMessage(t);if(n.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(n.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const t=a.SpeechDetected.fromJSON(n.textBody),i=new s.RecognitionEventArgs(t.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,i);break;case"speech.enddetected":let r;r=n.textBody.length>0?n.textBody:"{ Offset: 0 }";const l=a.SpeechDetected.fromJSON(r),u=new s.RecognitionEventArgs(l.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,u);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(s.CancellationReason.EndOfStream,s.CancellationErrorCode.NoError,void 0));const c=new s.SessionEventArgs(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,c));e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(n))||this.privServiceEvents&&this.serviceEvents.onEvent(new o.ServiceEvent(n.path.toLowerCase(),n.textBody))}return this.receiveMessage()}catch(e){return null}}))}updateSpeakerDiarizationAudioOffset(){const e=this.privRequestSession.recognitionBytesSent/this.privAverageBytesPerMs;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(e)}sendSpeechContext(e,t){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const n=this.speechContext.toJSON();if(t&&this.privRequestSession.onSpeechContext(),n)return e.send(new l.SpeechConnectionMessage(o.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",n))}noOp(){}sendPrePayloadJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i(this,void 0,void 0,(function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e,t),yield this.sendWaveHeader(e)}))}sendWaveHeader(e){return i(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;return e.send(new l.SpeechConnectionMessage(o.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))}))}connectImpl(){return void 0!==this.privConnectionPromise?this.privConnectionPromise.then((e=>e.state()===o.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()))):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch((()=>{})),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(e,t,n){if(t.onSpeechContext(),!0!==u.telemetryDataEnabled){const e={context:{system:JSON.parse(n).context.system}};n=JSON.stringify(e)}if("true"===this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()){const e=JSON.parse(n);e.context.DisableReferenceChannel="True",e.context.MicSpec="1_0_0",n=JSON.stringify(e)}if(n)return e.send(new l.SpeechConnectionMessage(o.MessageType.Text,"speech.config",t.requestId,"application/json",n))}fetchConnection(){return i(this,void 0,void 0,(function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===o.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}sendAudio(e){return i(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;this.privAverageBytesPerMs=t.avgBytesPerSec/1e3;let n=Date.now();const r=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),s=t.avgBytesPerSec/1e3*parseInt(r,10),a=this.privRequestSession.recogNumber,u=()=>i(this,void 0,void 0,(function*(){if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===a){const i=yield this.fetchConnection(),r=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let c,h;if(!r||r.isEnd?(c=null,h=0):(c=r.buffer,this.privRequestSession.onAudioSent(c.byteLength),h=s>=this.privRequestSession.bytesSent?0:Math.max(0,n-Date.now())),0!==h&&(yield this.delay(h)),null!==c&&(n=Date.now()+1e3*c.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===a){if(i.send(new l.SpeechConnectionMessage(o.MessageType.Binary,"audio",this.privRequestSession.requestId,null,c)).catch((()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch((()=>{}))})),!(null===r||void 0===r?void 0:r.isEnd))return u();this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}}}));return u()}))}retryableConnect(){return i(this,void 0,void 0,(function*(){let e=!1;this.privAuthFetchEventId=o.createNoDashGuid();const t=this.privRequestSession.sessionId;this.privConnectionId=void 0!==t?t:o.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let n=0,i="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId),r=yield t;yield this.privRequestSession.onAuthCompleted(!1);const o=this.privConnectionFactory.create(this.privRecognizerConfig,r,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(o.events),o.events.attach((e=>{this.connectionEvents.onEvent(e)}));const s=yield o.open();if(200===s.statusCode)return yield this.privRequestSession.onConnectionEstablishCompleted(s.statusCode),Promise.resolve(o);1006===s.statusCode&&(e=!0),n=s.statusCode,i=s.reason,this.privRequestSession.onRetryConnection()}return yield this.privRequestSession.onConnectionEstablishCompleted(n,i),Promise.reject("Unable to contact server. StatusCode: ".concat(n,", ").concat(this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint)," Reason: ").concat(i))}))}delay(e){return new Promise((t=>this.privSetTimeout(t,e)))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const n=new Uint8Array(e);t+="".concat(e.byteLength,"\r\n");for(let i=0;i<e.byteLength;i++)t+=n[i].toString(16).padStart(2,"0")+" ",(i+1)%16===0&&(console.info(t),t="")}console.info(t)}sendFinalAudio(){return i(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();yield e.send(new l.SpeechConnectionMessage(o.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}))}configureConnection(){return i(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e,!1),e)}))}}t.ServiceRecognizerBase=u,u.telemetryDataEnabled=!0},7079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceTelemetryListener=void 0;const i=n(6606),r=n(3254);t.ServiceTelemetryListener=class{constructor(e,t,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}onEvent(e){if(!this.privIsDisposed&&(e instanceof r.RecognitionTriggeredEvent&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof i.AudioStreamNodeAttachingEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof i.AudioStreamNodeAttachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof i.AudioSourceErrorEvent&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof i.AudioStreamNodeErrorEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof i.AudioStreamNodeDetachedEvent&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof r.ConnectingToServiceEvent&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof i.ConnectionStartEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof i.ConnectionEstablishedEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof i.ConnectionEstablishErrorEvent&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof i.ConnectionMessageReceivedEvent&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)){this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array);const t=50;this.privReceivedMessages[e.message.headers.path].length<t&&this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)}}getTelemetry(){const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}dispose(){this.privIsDisposed=!0}getConnectionError(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}}}},4781:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionConfig=void 0;const i=n(9831);t.SpeakerRecognitionConfig=class{constructor(e,t){this.privContext=e||new i.Context(null),this.privParameters=t}get parameters(){return this.privParameters}get Context(){return this.privContext}}},6850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileConnectionFactory=t.SpeakerRecognitionConnectionFactory=void 0;const i=n(4583),r=n(7419),o=n(9258),s=n(9831),a=n(4891);class l extends o.ConnectionFactoryBase{create(e,t,n,l){let u=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint);if(!u){const t=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),i=o.ConnectionFactoryBase.getHostSuffix(t),s=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://".concat(t,".spr-frontend.speech").concat(i)),a=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");u="".concat(s,"/speaker/ws/").concat(this.scenarioToPath(a),"/").concat(n)}const c={format:"simple",language:e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(e,c,u);const h={};void 0!==t.token&&""!==t.token&&(h[t.headerName]=t.token),h[a.HeaderNames.ConnectionId]=l,h[a.HeaderNames.SpIDAuthKey]=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Key),e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,u);const p="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(u,c,h,new s.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),p,l)}scenarioToPath(e){switch(e){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}t.SpeakerRecognitionConnectionFactory=class extends l{create(e,t,n){return super.create(e,t,"recognition",n)}};t.VoiceProfileConnectionFactory=class extends l{create(e,t,n){return super.create(e,t,"profile",n)}}},8790:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerServiceRecognizer=void 0;const r=n(4583),o=n(6606),s=n(7419),a=n(9831),l=n(8046);class u extends a.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privSpeakerRecognizer=r,this.privSpeakerAudioSource=n,this.recognizeSpeaker=e=>this.recognizeSpeakerOnce(e),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(e){let t=!1;const n=new s.PropertyCollection;if(e.messageType===o.MessageType.Text&&n.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),"speaker.response"===e.path.toLowerCase()){const n=JSON.parse(e.textBody);let i;i="success"!==n.status.statusCode.toLowerCase()?new s.SpeakerRecognitionResult(n,s.ResultReason.Canceled,s.CancellationErrorCode.ServiceError,n.status.reason):new s.SpeakerRecognitionResult(n,s.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(i),t=!0}const i=new o.Deferred;return i.resolve(t),i.promise}cancelRecognition(e,t,n,i,r){if((new s.PropertyCollection).setProperty(a.CancellationErrorCodePropertyName,s.CancellationErrorCode[i]),this.privResultDeferral){const e=new s.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:r,reason:r}},s.ResultReason.Canceled,i,r);try{this.privResultDeferral.resolve(e)}catch(r){this.privResultDeferral.reject(r)}}}recognizeSpeakerOnce(e){return i(this,void 0,void 0,(function*(){this.privSpeakerModel=e,this.voiceProfileType=e.scenario,this.privResultDeferral||(this.privResultDeferral=new o.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(s.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const t=this.connectImpl(),n=this.sendPreAudioMessages(this.extractSpeakerContext(e)),i=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),a=yield this.privSpeakerAudioSource.format,l=yield this.privSpeakerAudioSource.deviceInfo,u=new r.ReplayableAudioNode(i,a.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(u,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:l};try{yield t,yield n}catch(h){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,h)}const c=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,c),this.receiveMessage();return this.sendAudio(u).then((()=>{}),(e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)})),this.privResultDeferral.promise}))}sendPreAudioMessages(e){return i(this,void 0,void 0,(function*(){const t=yield this.fetchConnection();yield this.sendSpeakerRecognition(t,e)}))}sendSpeakerRecognition(e,t){return i(this,void 0,void 0,(function*(){const n=JSON.stringify(t);return e.send(new l.SpeechConnectionMessage(o.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",n))}))}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}}t.SpeakerServiceRecognizer=u},3206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionFactory=void 0;const i=n(4583),r=n(9831),o=n(7419),s=n(9258),a=n(9831),l=n(4891),u=n(2367);class c extends s.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/speech/universal/v"}create(e,t,n){let c=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region,void 0),p=s.ConnectionFactoryBase.getHostSuffix(h),d=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+p),f={},m=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(m?c&&-1!==c.search(u.QueryParameterNames.CustomSpeechDeploymentId)||(f[u.QueryParameterNames.CustomSpeechDeploymentId]=m):g&&(c&&-1!==c.search(u.QueryParameterNames.Language)||(f[u.QueryParameterNames.Language]=g)),c&&-1!==c.search(u.QueryParameterNames.Format)||(f[u.QueryParameterNames.Format]=e.parameters.getProperty(r.OutputFormatPropertyName,o.OutputFormat[o.OutputFormat.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(f[u.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(e,f,c),!c)switch(e.recognitionMode){case a.RecognitionMode.Conversation:c="true"===e.parameters.getProperty(r.ForceDictationPropertyName,"false")?d+this.dictationRelativeUri:void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?"".concat(d).concat(this.universalUri).concat(e.recognitionEndpointVersion):d+this.conversationRelativeUri;break;case a.RecognitionMode.Dictation:c=d+this.dictationRelativeUri;break;default:c=void 0!==e.recognitionEndpointVersion&&parseInt(e.recognitionEndpointVersion,10)>1?"".concat(d).concat(this.universalUri).concat(e.recognitionEndpointVersion):d+this.interactiveRelativeUri}const v={};void 0!==t.token&&""!==t.token&&(v[t.headerName]=t.token),v[l.HeaderNames.ConnectionId]=n;const y="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false"),S=new i.WebsocketConnection(c,f,v,new a.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),y,n),R=S.uri;return e.parameters.setProperty(o.PropertyId.SpeechServiceConnection_Url,R),S}}t.SpeechConnectionFactory=c},8046:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionMessage=void 0;const i=n(6606),r=n(4891);class o extends i.ConnectionMessage{constructor(e,t,n,o,s,a,l,u){if(!t)throw new i.ArgumentNullError("path");if(!n)throw new i.ArgumentNullError("requestId");const c={};if(c[r.HeaderNames.Path]=t,c[r.HeaderNames.RequestId]=n,c[r.HeaderNames.RequestTimestamp]=(new Date).toISOString(),o&&(c[r.HeaderNames.ContentType]=o),a&&(c[r.HeaderNames.RequestStreamId]=a),l)for(const i in l)i&&(c[i]=l[i]);u?super(e,s,c,u):super(e,s,c),this.privPath=t,this.privRequestId=n,this.privContentType=o,this.privStreamId=a,this.privAdditionalHeaders=l}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(e){let t=null,n=null,i=null,s=null;const a={};if(e.headers)for(const o in e.headers)o&&(o.toLowerCase()===r.HeaderNames.Path.toLowerCase()?t=e.headers[o]:o.toLowerCase()===r.HeaderNames.RequestId.toLowerCase()?n=e.headers[o]:o.toLowerCase()===r.HeaderNames.ContentType.toLowerCase()?i=e.headers[o]:o.toLowerCase()===r.HeaderNames.RequestStreamId.toLowerCase()?s=e.headers[o]:a[o]=e.headers[o]);return new o(e.messageType,t,n,i,e.body,s,a,e.id)}}t.SpeechConnectionMessage=o},2617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechContext=void 0;t.SpeechContext=class{constructor(e){this.privContext={},this.privDynamicGrammar=e}getSection(e){return this.privContext[e]||{}}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),void 0===this.privContext.phraseDetection.enrichment&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),n&&(this.privContext.phraseDetection.mode="Conversation"),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR"),t&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:t},this.privContext.phraseOutput.detailed.options.push("ContentAssessment"))}setDetailedOutputFormat(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed"}setWordLevelTimings(){void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),void 0===this.privContext.phraseOutput.detailed&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format="Detailed",-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}setSpeakerDiarizationAudioOffsetMs(e){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=e}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();this.setSection("dgi",e);return JSON.stringify(this.privContext)}}},3925:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=void 0;t.SpeechServiceConfig=class{constructor(e){this.context=e}serialize(){return JSON.stringify(this,((e,t)=>{if(t&&"object"===typeof t&&!Array.isArray(t)){const e={};for(const n in t)Object.hasOwnProperty.call(t,n)&&(e[n&&n.charAt(0).toLowerCase()+n.substring(1)]=t[n]);return e}return t}))}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}};t.Context=class{constructor(e){this.system=new n,this.os=e}};class n{constructor(){this.name="SpeechSDK",this.version="1.34.0",this.build="JavaScript",this.lang="JavaScript"}}t.System=n;t.OS=class{constructor(e,t,n){this.platform=e,this.name=t,this.version=n}};t.Device=class{constructor(e,t,n){this.manufacturer=e,this.model=t,this.version=n}},function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(t.connectivity||(t.connectivity={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(t.type||(t.type={}))},6174:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9528:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechServiceRecognizer=void 0;const r=n(7419),o=n(9831);class s extends o.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privSpeechRecognizer=r}processTypeSpecificMessages(e){return i(this,void 0,void 0,(function*(){let t;const n=new r.PropertyCollection;n.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,e.textBody);let i=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const l=o.SpeechHypothesis.fromJSON(e.textBody),u=l.Offset+this.privRequestSession.currentTurnAudioOffset;t=new r.SpeechRecognitionResult(this.privRequestSession.requestId,r.ResultReason.RecognizingSpeech,l.Text,l.Duration,u,l.Language,l.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(u);const c=new r.SpeechRecognitionEventArgs(t,l.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,c)}catch(s){}i=!0;break;case"speech.phrase":const h=o.SimpleSpeechPhrase.fromJSON(e.textBody),p=o.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+h.Offset+h.Duration),r.ResultReason.Canceled===p){const e=o.EnumTranslation.implTranslateCancelResult(h.RecognitionStatus),t=o.EnumTranslation.implTranslateCancelErrorCode(h.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,o.EnumTranslation.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||p!==r.ResultReason.NoMatch||h.RecognitionStatus===o.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(o.OutputFormatPropertyName)===r.OutputFormat[r.OutputFormat.Simple])t=new r.SpeechRecognitionResult(this.privRequestSession.requestId,p,h.DisplayText,h.Duration,h.Offset+this.privRequestSession.currentTurnAudioOffset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,e.textBody,n);else{const i=o.DetailedSpeechPhrase.fromJSON(e.textBody),s=i.Offset+this.privRequestSession.currentTurnAudioOffset,a=i.getJsonWithCorrectedOffsets(s);t=new r.SpeechRecognitionResult(this.privRequestSession.requestId,p,i.RecognitionStatus===o.RecognitionStatus.Success?i.NBest[0].Display:void 0,i.Duration,s,i.Language,i.LanguageDetectionConfidence,void 0,void 0,a,n)}const i=new r.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,i)}catch(s){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}i=!0}return i}))}cancelRecognition(e,t,n,i,s){const a=new r.PropertyCollection;if(a.setProperty(o.CancellationErrorCodePropertyName,r.CancellationErrorCode[i]),this.privSpeechRecognizer.canceled){const t=new r.SpeechRecognitionCanceledEventArgs(n,s,i,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch(l){}}if(this.privSuccessCallback){const e=new r.SpeechRecognitionResult(t,r.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,s,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(u){}}}}t.SpeechServiceRecognizer=s},9531:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisAdapter=void 0;const i=n(7419),r=n(9831);class o extends r.SynthesisAdapterBase{constructor(e,t,n,i,r){super(e,t,n,r),this.privSpeechSynthesizer=i,this.privSynthesizer=i}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(e){const t=new i.SpeechSynthesisEventArgs(new i.SpeechSynthesisResult(e,i.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t)}onSynthesizing(e){if(this.privSpeechSynthesizer.synthesizing)try{const t=this.privSynthesisTurn.audioOutputFormat.addHeader(e),n=new i.SpeechSynthesisEventArgs(new i.SpeechSynthesisResult(this.privSynthesisTurn.requestId,i.ResultReason.SynthesizingAudio,t));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,n)}catch(t){}}onSynthesisCancelled(e){if(this.privSpeechSynthesizer.SynthesisCanceled){const n=new i.SpeechSynthesisEventArgs(e);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,n)}catch(t){}}}onSynthesisCompleted(e){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new i.SpeechSynthesisEventArgs(e))}catch(t){}}onWordBoundary(e){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(t){}}onVisemeReceived(e){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,e)}catch(t){}}onBookmarkReached(e){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,e)}catch(t){}}}t.SpeechSynthesisAdapter=o},8587:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisConnectionFactory=void 0;const i=n(4583),r=n(7419),o=n(9258),s=n(9831),a=n(4891),l=n(2367);t.SpeechSynthesisConnectionFactory=class{constructor(){this.synthesisUri="/cognitiveservices/websocket/v1"}create(e,t,n){let u=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const c=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),h=o.ConnectionFactoryBase.getHostSuffix(c),p=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=void 0===p?"tts":"voice",f=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+c+"."+d+".speech"+h),m={},g={};void 0!==t.token&&""!==t.token&&(g[t.headerName]=t.token),g[a.HeaderNames.ConnectionId]=n,void 0!==p&&""!==p&&(u&&-1!==u.search(l.QueryParameterNames.CustomVoiceDeploymentId)||(m[l.QueryParameterNames.CustomVoiceDeploymentId]=p)),e.avatarEnabled&&(u&&-1!==u.search(l.QueryParameterNames.EnableAvatar)||(m[l.QueryParameterNames.EnableAvatar]="true")),u||(u=f+this.synthesisUri),e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,u);const v="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(u,m,g,new s.WebsocketMessageFormatter,i.ProxyInfo.fromParameters(e.parameters),v,n)}}},4058:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAdapterBase=void 0;const r=n(6606),o=n(7419),s=n(9831),a=n(8046);class l{constructor(e,t,n,i){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!e)throw new r.ArgumentNullError("authentication");if(!t)throw new r.ArgumentNullError("connectionFactory");if(!n)throw new r.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=n,this.privIsDisposed=!1,this.privSessionAudioDestination=i,this.privSynthesisTurn=new s.SynthesisTurn,this.privConnectionEvents=new r.EventSource,this.privServiceEvents=new r.EventSource,this.privSynthesisContext=new s.SynthesisContext,this.privAgentConfig=new s.AgentConfig,this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(o.CancellationReason.Error,1007===t.statusCode?o.CancellationErrorCode.BadRequestParameters:o.CancellationErrorCode.ConnectionFailure,"".concat(t.reason," websocket error code: ").concat(t.statusCode))}}))}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}isDisposed(){return this.privIsDisposed}dispose(e){return i(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),void 0!==this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}}))}connect(){return i(this,void 0,void 0,(function*(){yield this.connectImpl()}))}sendNetworkMessage(e,t){return i(this,void 0,void 0,(function*(){const n="string"===typeof t?r.MessageType.Text:r.MessageType.Binary,i="string"===typeof t?"application/json":"";return(yield this.fetchConnection()).send(new a.SpeechConnectionMessage(n,e,this.privSynthesisTurn.requestId,i,t))}))}Speak(e,t,n,r,s,a){return i(this,void 0,void 0,(function*(){let i;if(i=t?e:this.privSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(i,n,r,s);this.privSuccessCallback=r,this.privErrorCallback=s,this.privSynthesisTurn.startNewSynthesis(n,e,t,a);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,i,n),this.onSynthesisStarted(n),this.receiveMessage()}catch(l){return this.cancelSynthesisLocal(o.CancellationReason.Error,o.CancellationErrorCode.ConnectionFailure,l),Promise.reject(l)}}))}stopSpeaking(){return i(this,void 0,void 0,(function*(){yield this.connectImpl();return(yield this.fetchConnection()).send(new a.SpeechConnectionMessage(r.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}))}cancelSynthesis(e,t,n,i){const r=new o.PropertyCollection;r.setProperty(s.CancellationErrorCodePropertyName,o.CancellationErrorCode[n]);const a=new o.SpeechSynthesisResult(e,o.ResultReason.Canceled,void 0,i,r);if(this.onSynthesisCancelled(a),this.privSuccessCallback)try{this.privSuccessCallback(a)}catch(l){}}cancelSynthesisLocal(e,t,n){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,n))}processTypeSpecificMessages(e){return!0}receiveMessage(){return i(this,void 0,void 0,(function*(){try{const t=yield this.fetchConnection(),n=yield t.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!n)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const i=a.SpeechConnectionMessage.fromConnectionMessage(n);if(i.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(i.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(i.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(i.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===i.streamId.toLowerCase()&&i.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(i.binaryBody),this.onSynthesizing(i.binaryBody),void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(i.binaryBody));break;case"audio.metadata":const t=s.SynthesisAudioMetadata.fromJSON(i.textBody).Metadata;for(const e of t)switch(e.Type){case s.MetadataType.WordBoundary:case s.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(e);const t=new o.SpeechSynthesisWordBoundaryEventArgs(e.Data.Offset,e.Data.Duration,e.Data.text.Text,e.Data.text.Length,e.Type===s.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,e.Data.text.BoundaryType);this.onWordBoundary(t);break;case s.MetadataType.Bookmark:const n=new o.SpeechSynthesisBookmarkEventArgs(e.Data.Offset,e.Data.Bookmark);this.onBookmarkReached(n);break;case s.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(e),e.Data.IsLastAnimation){const t=new o.SpeechSynthesisVisemeEventArgs(e.Data.Offset,e.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(t)}break;case s.MetadataType.AvatarSignal:this.onAvatarEvent(e);break;case s.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(e)}break;case"turn.end":let n;this.privSynthesisTurn.onServiceTurnEndResponse();try{n=yield this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(n)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.onSynthesisCompleted(n);break;default:this.processTypeSpecificMessages(i)||this.privServiceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(i.path.toLowerCase(),i.textBody))}return this.receiveMessage()}catch(t){}}))}sendSynthesisContext(e){this.setSynthesisContextSynthesisSection();const t=this.synthesisContext.toJSON();if(t)return e.send(new a.SpeechConnectionMessage(r.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))}setSpeechConfigSynthesisSection(){}connectImpl(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null!=this.privConnectionPromise)return this.privConnectionPromise.then((e=>e.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise),(()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl())));this.privAuthFetchEventId=r.createNoDashGuid(),this.privConnectionId=r.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then((t=>i(this,void 0,void 0,(function*(){this.privSynthesisTurn.onAuthCompleted(!1);const n=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);n.events.attach((e=>{this.connectionEvents.onEvent(e)}));const i=yield n.open();return 200===i.statusCode?(this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode),Promise.resolve(n)):403!==i.statusCode||e?(this.privSynthesisTurn.onConnectionEstablishCompleted(i.statusCode),Promise.reject("Unable to contact server. StatusCode: ".concat(i.statusCode,", ").concat(this.privSynthesizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint)," Reason: ").concat(i.reason))):this.connectImpl(!0)}))),(e=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(e)})),this.privConnectionPromise.catch((()=>{})),this.privConnectionPromise}sendSpeechServiceConfig(e,t){if(t)return e.send(new a.SpeechConnectionMessage(r.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))}sendSsmlMessage(e,t,n){return e.send(new a.SpeechConnectionMessage(r.MessageType.Text,"ssml",n,"application/ssml+xml",t))}fetchConnection(){return i(this,void 0,void 0,(function*(){return void 0!==this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}configureConnection(){return i(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(this.setSpeechConfigSynthesisSection(),yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}))}onAvatarEvent(e){}onSynthesisStarted(e){}onSynthesizing(e){}onSynthesisCancelled(e){}onSynthesisCompleted(e){}onWordBoundary(e){}onVisemeReceived(e){}onBookmarkReached(e){}}t.SynthesisAdapterBase=l,l.telemetryDataEnabled=!0},5366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisContext=void 0;const i=n(7419);t.SynthesisContext=class{constructor(){this.privContext={}}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(e){const t=this.buildSynthesisContext(e);this.setSection("synthesis",t)}buildSynthesisContext(e){return{audio:{metadataOptions:{bookmarkEnabled:!!(null===e||void 0===e?void 0:e.bookmarkReached),punctuationBoundaryEnabled:null===e||void 0===e?void 0:e.properties.getProperty(i.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(null===e||void 0===e?void 0:e.wordBoundary)),sentenceBoundaryEnabled:null===e||void 0===e?void 0:e.properties.getProperty(i.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(null===e||void 0===e?void 0:e.visemeReceived),wordBoundaryEnabled:null===e||void 0===e?void 0:e.properties.getProperty(i.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(null===e||void 0===e?void 0:e.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:null===e||void 0===e?void 0:e.autoDetectSourceLanguage}}}}},8762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisStartedEvent=t.ConnectingToSynthesisServiceEvent=t.SynthesisTriggeredEvent=t.SpeechSynthesisEvent=void 0;const i=n(6606);class r extends i.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.EventType.Info),this.privRequestId=t}get requestId(){return this.privRequestId}}t.SpeechSynthesisEvent=r;t.SynthesisTriggeredEvent=class extends r{constructor(e,t,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}};t.ConnectingToSynthesisServiceEvent=class extends r{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}};t.SynthesisStartedEvent=class extends r{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}},7897:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRestAdapter=void 0;const i=n(4583),r=n(7419),o=n(9258),s=n(4891);t.SynthesisRestAdapter=class{constructor(e,t){let n=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!n){const t=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,"westus"),i=o.ConnectionFactoryBase.getHostSuffix(t);n=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"https://".concat(t,".tts.speech").concat(i))}this.privUri="".concat(n,"/cognitiveservices/voices/list");const s=i.RestConfigBase.requestOptions;this.privRestAdapter=new i.RestMessageAdapter(s),this.privAuthentication=t}getVoicesList(e){return this.privRestAdapter.setHeaders(s.HeaderNames.ConnectionId,e),this.privAuthentication.fetch(e).then((e=>(this.privRestAdapter.setHeaders(e.headerName,e.token),this.privRestAdapter.request(i.RestRequestType.Get,this.privUri))))}}},1348:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisTurn=void 0;const r=n(6606),o=n(6625),s=n(7419),a=n(1007),l=n(8762);class u{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=r.createNoDashGuid(),this.privTurnDeferral=new r.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const e=new s.PropertyCollection;return e.setProperty(s.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),e}}getAllReceivedAudio(){return i(this,void 0,void 0,(function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}))}getAllReceivedAudioWithHeader(){return i(this,void 0,void 0,(function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(e),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}))}startNewSynthesis(e,t,n,i){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=n,this.privAudioOutputStream=new o.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",void 0!==i&&(this.privTurnAudioDestination=i,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new l.SynthesisTriggeredEvent(this.requestId,void 0,void 0===i?void 0:i.id()))}onPreConnectionStart(e){this.privAuthFetchEventId=e,this.onEvent(new l.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){if(200===e)return this.onEvent(new l.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()}onServiceResponseMessage(e){const t=JSON.parse(e);this.streamId=t.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(e){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch((()=>{}))),this.privInTurn=!0,this.privTurnDeferral=new r.Deferred;const t=JSON.parse(e);t.webrtc&&(this.privWebRTCSDP=t.webrtc.connectionString)}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onTextBoundaryEvent(e){this.updateTextOffset(e.Data.text.Text,e.Type)}onVisemeMetadataReceived(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)}onSessionEnd(e){this.privAudioDuration=e.Data.Offset}constructSynthesisResult(){return i(this,void 0,void 0,(function*(){const e=yield this.getAllReceivedAudioWithHeader();return new s.SpeechSynthesisResult(this.requestId,s.ResultReason.SynthesizingAudioCompleted,e,void 0,this.extraProperties,this.audioDuration)}))}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e}onEvent(e){r.Events.instance.onEvent(e)}static isXmlTag(e){return e.length>=2&&"<"===e[0]&&">"===e[e.length-1]}updateTextOffset(e,t){t===a.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!u.isXmlTag(e)&&this.updateTextOffset(e,t))):(this.privSentenceOffset=this.privRawText.indexOf(e,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+e.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!u.isXmlTag(e)&&this.updateTextOffset(e,t)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}readAllAudioFromStream(){return i(this,void 0,void 0,(function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}))}withinXmlTag(e){return this.privRawText.indexOf("<",e+1)>this.privRawText.indexOf(">",e+1)}}t.SynthesisTurn=u},2280:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;const i=n(9831);var r;!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(r=t.SynthesisServiceType||(t.SynthesisServiceType={}));t.SynthesizerConfig=class{constructor(e,t){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=e||new i.SpeechServiceConfig(new i.Context(null)),this.privParameters=t}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(e){this.privSynthesisServiceType=e}set synthesisVideoSection(e){this.privSpeechServiceConfig.Context.synthesis={video:e}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}},5861:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberConnectionFactory=void 0;const i=n(4583),r=n(7419),o=n(9258),s=n(9831),a=n(4891),l=n(2367);class u extends o.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(e,t,n){let l=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const u=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,"centralus"),c="wss://transcribe."+u+".cts.speech"+o.ConnectionFactoryBase.getHostSuffix(u)+this.multiaudioRelativeUri,h=e.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,c),p={};this.setQueryParams(p,e,l),l||(l=h);const d={};void 0!==t.token&&""!==t.token&&(d[t.headerName]=t.token),d[a.HeaderNames.ConnectionId]=n,e.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,l);const f="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(l,p,d,new s.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),f,n)}setQueryParams(e,t,n){const i=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),o=t.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);i&&!(l.QueryParameterNames.CustomSpeechDeploymentId in e)&&(e[l.QueryParameterNames.CustomSpeechDeploymentId]=i),o&&!(l.QueryParameterNames.Language in e)&&(e[l.QueryParameterNames.Language]=o);const a="true"===t.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase(),u=t.parameters.getProperty(s.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple])!==r.OutputFormat[r.OutputFormat.Simple];(a||u)&&(e[l.QueryParameterNames.Format]=r.OutputFormat[r.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(t,e,n)}}t.TranscriberConnectionFactory=u},1407:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptionServiceRecognizer=void 0;const r=n(6606),o=n(7419),s=n(9831),a=n(8046);class l extends s.ConversationServiceRecognizer{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privTranscriberRecognizer=r,this.sendPrePayloadJSONOverride=e=>this.sendTranscriptionStartJSON(e),"true"===this.privRecognizerConfig.parameters.getProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)&&this.privSpeechContext.setWordLevelTimings()}sendSpeechEventAsync(e,t){return i(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing){const n=yield this.fetchConnection();yield this.sendSpeechEvent(n,this.createSpeechEventPayload(e,t))}}))}sendMeetingSpeechEventAsync(e,t){return i(this,void 0,void 0,(function*(){if(this.privRequestSession.isRecognizing){const n=yield this.fetchConnection();yield this.sendSpeechEvent(n,this.createMeetingSpeechEventPayload(e,t))}}))}processTypeSpecificMessages(e){return this.processSpeechMessages(e)}handleRecognizedCallback(e,t,n){try{const r=new o.SpeechRecognitionEventArgs(e,t,n);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,r),this.privSuccessCallback){try{this.privSuccessCallback(e)}catch(i){this.privErrorCallback&&this.privErrorCallback(i)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch(r){}}handleRecognizingCallback(e,t,n){try{const i=new o.SpeechRecognitionEventArgs(e,t,n);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,i)}catch(i){}}cancelRecognition(e,t,n,i,r){const a=new o.PropertyCollection;if(a.setProperty(s.CancellationErrorCodePropertyName,o.CancellationErrorCode[i]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const t=new o.MeetingTranscriptionCanceledEventArgs(n,r,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch(l){}}}else if(this.privTranscriberRecognizer.canceled){const t=new o.ConversationTranscriptionCanceledEventArgs(n,r,i,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,t)}catch(u){}}if(this.privSuccessCallback){const e=new o.SpeechRecognitionResult(t,o.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,r,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(c){}}}sendTranscriptionStartJSON(e){return i(this,void 0,void 0,(function*(){if(yield this.sendSpeechContext(e,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const t=this.privTranscriberRecognizer.getMeetingInfo(),n=this.createMeetingSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,n)}else{const t=this.privTranscriberRecognizer.getConversationInfo(),n=this.createSpeechEventPayload(t,"start");yield this.sendSpeechEvent(e,n)}yield this.sendWaveHeader(e)}))}sendSpeechEvent(e,t){const n=JSON.stringify(t);if(n)return e.send(new a.SpeechConnectionMessage(r.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",n))}createSpeechEventPayload(e,t){const n={id:"meeting",name:t,meeting:e.conversationProperties};return n.meeting.id=e.id,n.meeting.attendees=e.participants,n}createMeetingSpeechEventPayload(e,t){const n={id:"meeting",name:t,meeting:e.meetingProperties};return n.meeting.id=e.id,n.meeting.attendees=e.participants,n}}t.TranscriptionServiceRecognizer=l},1978:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionConfig=void 0;const i=n(5304);class r extends i.RestConfigBase{static get host(){return r.privHost}static get apiVersion(){return r.privApiVersion}static get clientAppId(){return r.privClientAppId}static get defaultLanguageCode(){return r.privDefaultLanguageCode}static get restPath(){return r.privRestPath}static get webSocketPath(){return r.privWebSocketPath}static get transcriptionEventKeys(){return r.privTranscriptionEventKeys}}t.ConversationConnectionConfig=r,r.privHost="dev.microsofttranslator.com",r.privRestPath="/capito/room",r.privApiVersion="2.0",r.privDefaultLanguageCode="en-US",r.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",r.privWebSocketPath="/capito/translate",r.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"]},3381:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionFactory=void 0;const i=n(4583),r=n(6606),o=n(3720),s=n(7419),a=n(9258),l=n(1978),u=n(9866);class c extends a.ConnectionFactoryBase{create(e,t,n){const a=e.parameters.getProperty(s.PropertyId.ConversationTranslator_Host,l.ConversationConnectionConfig.host),c=e.parameters.getProperty(s.PropertyId.ConversationTranslator_CorrelationId,r.createGuid()),h="wss://".concat(a).concat(l.ConversationConnectionConfig.webSocketPath),p=e.parameters.getProperty(s.PropertyId.ConversationTranslator_Token,void 0);o.Contracts.throwIfNullOrUndefined(p,"token");const d={};d[l.ConversationConnectionConfig.configParams.apiVersion]=l.ConversationConnectionConfig.apiVersion,d[l.ConversationConnectionConfig.configParams.token]=p,d[l.ConversationConnectionConfig.configParams.correlationId]=c;const f="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(h,d,{},new u.ConversationWebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),f,n)}}t.ConversationConnectionFactory=c},7736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionMessage=void 0;const i=n(6606);class r extends i.ConnectionMessage{constructor(e,t,n,i){super(e,t,n,i);const r=JSON.parse(this.textBody);void 0!==r.type&&(this.privConversationMessageType=r.type)}get conversationMessageType(){return this.privConversationMessageType}}t.ConversationConnectionMessage=r},6698:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationManager=void 0;const i=n(4583),r=n(3720),o=n(7419),s=n(1978);t.ConversationManager=class{constructor(){this.privRequestParams=s.ConversationConnectionConfig.configParams,this.privErrors=s.ConversationConnectionConfig.restErrors,this.privHost=s.ConversationConnectionConfig.host,this.privApiVersion=s.ConversationConnectionConfig.apiVersion,this.privRestPath=s.ConversationConnectionConfig.restPath,this.privRestAdapter=new i.RestMessageAdapter({})}createOrJoin(e,t,n,a){try{r.Contracts.throwIfNullOrUndefined(e,"args");const l=e.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,s.ConversationConnectionConfig.defaultLanguageCode),u=e.getProperty(o.PropertyId.ConversationTranslator_Name,"conversation_host"),c=e.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),h=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),p=e.getProperty(o.PropertyId.SpeechServiceConnection_Key),d=e.getProperty(o.PropertyId.SpeechServiceConnection_Region),f=e.getProperty(o.PropertyId.SpeechServiceAuthorization_Token);r.Contracts.throwIfNullOrWhitespace(l,"languageCode"),r.Contracts.throwIfNullOrWhitespace(u,"nickname"),r.Contracts.throwIfNullOrWhitespace(c,"endpointHost");const m={};m[this.privRequestParams.apiVersion]=this.privApiVersion,m[this.privRequestParams.languageCode]=l,m[this.privRequestParams.nickname]=u;const g={};h&&(g[this.privRequestParams.correlationId]=h),g[this.privRequestParams.clientAppId]=s.ConversationConnectionConfig.clientAppId,void 0!==t?m[this.privRequestParams.roomId]=t:(r.Contracts.throwIfNullOrUndefined(d,this.privErrors.authInvalidSubscriptionRegion),g[this.privRequestParams.subscriptionRegion]=d,p?g[this.privRequestParams.subscriptionKey]=p:f?g[this.privRequestParams.authorization]="Bearer ".concat(f):r.Contracts.throwIfNullOrUndefined(p,this.privErrors.authInvalidSubscriptionKey));const v={};v.headers=g,this.privRestAdapter.options=v;const y="https://".concat(c).concat(this.privRestPath);this.privRestAdapter.request(i.RestRequestType.Post,y,m,null).then((e=>{const t=i.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,e.headers);if(!e.ok){if(a){let n,i=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString());try{n=JSON.parse(e.data),i+=" [".concat(n.error.code,": ").concat(n.error.message,"]")}catch(o){i+=" [".concat(e.data,"]")}t&&(i+=" ".concat(t)),a(i)}return}const r=JSON.parse(e.data);if(r&&(r.requestId=t),n){try{n(r)}catch(o){a&&a(o)}n=void 0}})).catch((()=>{}))}catch(l){if(a)if(l instanceof Error){const e=l;a(e.name+": "+e.message)}else a(l)}}leave(e,t){return new Promise(((n,s)=>{try{r.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","token"));const s=e.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),a=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),l={};l[this.privRequestParams.apiVersion]=this.privApiVersion,l[this.privRequestParams.sessionToken]=t;const u={};a&&(u[this.privRequestParams.correlationId]=a);const c={};c.headers=u,this.privRestAdapter.options=c;const h="https://".concat(s).concat(this.privRestPath);this.privRestAdapter.request(i.RestRequestType.Delete,h,l,null).then((e=>{e.ok,n()})).catch((()=>{}))}catch(a){if(a instanceof Error){const e=a;s(e.name+": "+e.message)}else s(a)}}))}}},583:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationRequestSession=void 0;const r=n(6606);t.ConversationRequestSession=class{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=e,this.privRequestId=r.createNoDashGuid(),this.privRequestCompletionDeferral=new r.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(e,t){this.privSessionId=t}onAuthCompleted(e){e&&this.onComplete()}onConnectionEstablishCompleted(e){200!==e&&403===e&&this.onComplete()}onServiceTurnEndResponse(e){e?this.privRequestId=r.createNoDashGuid():this.onComplete()}dispose(){return i(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach()}}))}onComplete(){}}},5935:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceAdapter=void 0;const r=n(6606),o=n(7419),s=n(9831),a=n(7736),l=n(583),u=n(7218),c=n(4171),h=n(7181);class p extends s.ServiceRecognizerBase{constructor(e,t,n,i,o){super(e,t,n,i,o),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=o,this.privConversationAuthentication=e,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=e=>this.conversationConnectImpl(e),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new l.ConversationRequestSession(r.createNoDashGuid()),this.privConversationConnectionFactory=t,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){if(this.privConversationIsDisposed=!0,void 0!==this.privConnectionConfigPromise){const t=yield this.privConnectionConfigPromise;yield t.dispose(e)}yield t.dispose.call(this,e)}))}sendMessage(e){return i(this,void 0,void 0,(function*(){return(yield this.fetchConnection()).send(new a.ConversationConnectionMessage(r.MessageType.Text,e))}))}sendMessageAsync(e){return i(this,void 0,void 0,(function*(){const t=yield this.fetchConnection();yield t.send(new a.ConversationConnectionMessage(r.MessageType.Text,e))}))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,o.CancellationReason.Error,o.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}processTypeSpecificMessages(){return i(this,void 0,void 0,(function*(){return!0}))}cancelRecognition(e,t,n,i,r){this.terminateMessageLoop=!0;const s=new o.ConversationTranslationCanceledEventArgs(n,r,i,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,s)}catch(a){}}conversationConnectImpl(e){return i(this,void 0,void 0,(function*(){return this.privConnectionLoop=this.startMessageLoop(),e}))}receiveConversationMessageOverride(){return i(this,void 0,void 0,(function*(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const e=new r.Deferred;try{const n=yield this.fetchConnection(),i=yield n.read();if(this.isDisposed()||this.terminateMessageLoop)return e.resolve(),Promise.resolve();if(!i)return this.receiveConversationMessageOverride();const r=this.privConversationRequestSession.sessionId,a=i.conversationMessageType.toLowerCase();let l=!1;try{switch(a){case"info":case"participant_command":case"command":const e=h.CommandResponsePayload.fromJSON(i.textBody);switch(e.command.toLowerCase()){case"participantlist":const t=h.ParticipantsListPayloadResponse.fromJSON(i.textBody),n=t.participants.map((e=>({avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale})));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new u.ParticipantsListEventArgs(t.roomid,t.token,t.translateTo,t.profanityFilter,t.roomProfanityFilter,t.roomLocked,t.muteAll,n,r));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new u.ParticipantAttributeEventArgs(e.participantId,c.ConversationTranslatorCommandTypes.setTranslateToLanguages,e.value,r));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new u.ParticipantAttributeEventArgs(e.participantId,c.ConversationTranslatorCommandTypes.setProfanityFiltering,e.value,r));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new u.ParticipantAttributeEventArgs(e.participantId,c.ConversationTranslatorCommandTypes.setMute,e.value,r));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new u.MuteAllEventArgs(e.value,r));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new o.ConversationExpirationEventArgs(e.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new u.ParticipantAttributeEventArgs(e.participantId,c.ConversationTranslatorCommandTypes.setUseTTS,e.value,r));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new u.LockRoomEventArgs(e.value,r));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new u.ParticipantAttributeEventArgs(e.participantId,c.ConversationTranslatorCommandTypes.changeNickname,e.value,r));break;case"joinsession":const a=h.ParticipantPayloadResponse.fromJSON(i.textBody),l={avatar:a.avatar,displayName:a.nickname,id:a.participantId,isHost:a.ishost,isMuted:a.ismuted,isUsingTts:a.usetts,preferredLanguage:a.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new u.ParticipantEventArgs(l,r));break;case"leavesession":const p={id:e.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new u.ParticipantEventArgs(p,r));break;case"disconnectsession":e.participantId;break;case"token":const d=new s.CognitiveTokenAuthentication((()=>{const t=e.token;return Promise.resolve(t)}),(()=>{const t=e.token;return Promise.resolve(t)}));this.authentication=d,this.privConversationServiceConnector.onToken(d)}break;case"partial":case"final":const t=h.SpeechResponsePayload.fromJSON(i.textBody),n="final"===a?o.ResultReason.TranslatedParticipantSpeech:o.ResultReason.TranslatingParticipantSpeech,p=new o.ConversationTranslationResult(t.participantId,this.getTranslations(t.translations),t.language,t.id,n,t.recognition,void 0,void 0,i.textBody,void 0);t.isFinal?((void 0!==p.text&&p.text.length>0||t.id===this.privLastPartialUtteranceId)&&(l=!0),l&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new u.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.final,p,r))):void 0!==p.text&&(this.privLastPartialUtteranceId=t.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new u.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.partial,p,r)));break;case"translated_message":const d=h.TextResponsePayload.fromJSON(i.textBody),f=new o.ConversationTranslationResult(d.participantId,this.getTranslations(d.translations),d.language,void 0,void 0,d.originalText,void 0,void 0,void 0,i.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new u.ConversationReceivedTranslationEventArgs(c.ConversationTranslatorMessageTypes.instantMessage,f,r))}}catch(t){}return this.receiveConversationMessageOverride()}catch(t){this.terminateMessageLoop=!0}return e.promise}))}startMessageLoop(){return i(this,void 0,void 0,(function*(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const e=this.receiveConversationMessageOverride();try{return yield e}catch(t){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",o.CancellationReason.Error,o.CancellationErrorCode.RuntimeError,t),null}}))}configConnection(){return this.isDisposed()?Promise.resolve(void 0):void 0!==this.privConnectionConfigPromise?this.privConnectionConfigPromise.then((e=>e.state()===r.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise),(()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()))):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then((e=>e)),this.privConnectionConfigPromise)}getTranslations(e){let t;if(void 0!==e){t=new o.Translations;for(const n of e)t.set(n.lang,n.translation)}return t}}t.ConversationServiceAdapter=p},7600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorConnectionFactory=void 0;const i=n(4583),r=n(350),o=n(3720),s=n(7419),a=n(4891),l=n(2367),u=n(9258),c=n(9831);class h extends u.ConnectionFactoryBase{constructor(e){super(),o.Contracts.throwIfNullOrUndefined(e,"convGetter"),this.privConvGetter=e}create(e,t,n){const o="TRUE"===e.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase(),p=this.privConvGetter().room,d=p.cognitiveSpeechRegion||e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,""),f={hostSuffix:u.ConnectionFactoryBase.getHostSuffix(d),path:h.CTS_VIRT_MIC_PATH,region:encodeURIComponent(d)};f[l.QueryParameterNames.Language]=encodeURIComponent(e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"")),f[l.QueryParameterNames.CtsMeetingId]=encodeURIComponent(p.roomId),f[l.QueryParameterNames.CtsDeviceId]=encodeURIComponent(p.participantId),f[l.QueryParameterNames.CtsIsParticipant]=p.isHost?"":"&"+l.QueryParameterNames.CtsIsParticipant;let m="";const g={},v={};if(o){if(m=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint),!m){m="wss://"+e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"}m=r.StringUtils.formatString(m,f);const t=new URL(m);t.searchParams.forEach(((e,t)=>{g[t]=e}));(new c.TranscriberConnectionFactory).setQueryParams(g,e,m),g[l.QueryParameterNames.CtsMeetingId]=f[l.QueryParameterNames.CtsMeetingId],g[l.QueryParameterNames.CtsDeviceId]=f[l.QueryParameterNames.CtsDeviceId],p.isHost||(g[l.QueryParameterNames.CtsIsParticipant]=""),l.QueryParameterNames.Format in g||(g[l.QueryParameterNames.Format]="simple"),t.searchParams.forEach(((e,n)=>{t.searchParams.set(n,g[n]),delete g[n]})),m=t.toString()}else{const t=new c.TranslationConnectionFactory;m=t.getEndpointUrl(e,!0),m=r.StringUtils.formatString(m,f),t.setQueryParams(g,e,m)}v[a.HeaderNames.ConnectionId]=n,v[i.RestConfigBase.configParams.token]=p.token,t.token&&(v[t.headerName]=t.token);const y="TRUE"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase();return new i.WebsocketConnection(m,g,v,new c.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),y,n)}}t.ConversationTranslatorConnectionFactory=h,h.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio"},7218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationReceivedTranslationEventArgs=t.ParticipantsListEventArgs=t.ParticipantAttributeEventArgs=t.ParticipantEventArgs=t.LockRoomEventArgs=t.MuteAllEventArgs=void 0;const i=n(7419);class r extends i.SessionEventArgs{constructor(e,t){super(t),this.privIsMuted=e}get isMuted(){return this.privIsMuted}}t.MuteAllEventArgs=r;class o extends i.SessionEventArgs{constructor(e,t){super(t),this.privIsLocked=e}get isMuted(){return this.privIsLocked}}t.LockRoomEventArgs=o;class s extends i.SessionEventArgs{constructor(e,t){super(t),this.privParticipant=e}get participant(){return this.privParticipant}}t.ParticipantEventArgs=s;class a extends i.SessionEventArgs{constructor(e,t,n,i){super(i),this.privKey=t,this.privValue=n,this.privParticipantId=e}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}t.ParticipantAttributeEventArgs=a;class l extends i.SessionEventArgs{constructor(e,t,n,i,r,o,s,a,l){super(l),this.privRoomId=e,this.privSessionToken=t,this.privTranslateTo=n,this.privProfanityFilter=i,this.privRoomProfanityFilter=r,this.privIsRoomLocked=o,this.privIsRoomLocked=s,this.privParticipants=a}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}t.ParticipantsListEventArgs=l;t.ConversationReceivedTranslationEventArgs=class{constructor(e,t,n){this.privPayload=t,this.privCommand=e,this.privSessionId=n}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}},4171:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorCommandTypes=t.ConversationTranslatorMessageTypes=t.InternalParticipants=void 0;t.InternalParticipants=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this.participants=e,this.meId=t}addOrUpdateParticipant(e){if(void 0===e)return;const t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}getParticipantIndex(e){return this.participants.findIndex((t=>t.id===e))}getParticipant(e){return this.participants.find((t=>t.id===e))}deleteParticipant(e){this.participants=this.participants.filter((t=>t.id!==e))}get host(){return this.participants.find((e=>!0===e.isHost))}get me(){return this.getParticipant(this.meId)}},t.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},t.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}},6411:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorRecognizer=t.ConversationRecognizerFactory=void 0;const r=n(9831),o=n(6606),s=n(3720),a=n(7419),l=n(3381),u=n(5935);t.ConversationRecognizerFactory=class{static fromConfig(e,t,n){return new c(e,t,n)}};class c extends a.Recognizer{constructor(e,t,n){const i=t;s.Contracts.throwIfNull(i,"speechConfig");const r=e;s.Contracts.throwIfNull(r,"conversationImpl"),super(n,i.properties,new l.ConversationConnectionFactory),this.privConversation=r,this.privIsDisposed=!1,this.privProperties=i.properties.clone(),this.privConnection=a.Connection.fromRecognizer(this);"on"===this.privProperties.getProperty(a.PropertyId.WebWorkerLoadType,"on").toLowerCase()&&"undefined"!==typeof Blob&&"undefined"!==typeof Worker?(this.privSetTimeout=o.Timeout.setTimeout,this.privClearTimeout=o.Timeout.clearTimeout):"undefined"!==typeof window?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(e){this.privConnection.connected=e}set disconnected(e){this.privConnection.disconnected=e}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,n)}catch(i){if(n)if(i instanceof Error){const e=i;n(e.name+": "+e.message)}else n(i)}}disconnect(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then((()=>{e&&e()}),(e=>{t&&t(e)}))}catch(n){if(t)if(n instanceof Error){const e=n;t(e.name+": "+e.message)}else t(n);this.dispose(!0).catch((e=>{o.Events.instance.onEvent(new o.BackgroundEvent(e))}))}}sendRequest(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,n)}catch(i){if(n)if(i instanceof Error){const e=i;n(e.name+": "+e.message)}else n(i);this.dispose(!0).catch((e=>{o.Events.instance.onEvent(new o.BackgroundEvent(e))}))}}onToken(e){this.privConversation.onToken(e)}close(){return i(this,void 0,void 0,(function*(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,yield this.dispose(!0))}))}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){this.privIsDisposed||e&&(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,i){const r=n;return new u.ConversationServiceAdapter(e,t,r,i,this)}sendMessage(e,t,n){((e,t,n)=>{void 0!==e?e.then((()=>{try{t&&t()}catch(e){n&&n("'Unhandled error on promise callback: ".concat(e,"'"))}}),(e=>{try{n&&n(e)}catch(t){}})):n&&n("Null promise")})(this.privReco.sendMessageAsync(e),t,n),this.resetConversationTimeout()}resetConversationTimeout(){void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout((()=>{this.sendRequest(this.privConversation.getKeepAlive())}),6e4)}}t.ConversationTranslatorRecognizer=c},9866:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationWebsocketMessageFormatter=void 0;const i=n(6606),r=n(7736);t.ConversationWebsocketMessageFormatter=class{toConnectionMessage(e){const t=new i.Deferred;try{if(e.messageType===i.MessageType.Text){const n=new r.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(n)}else e.messageType===i.MessageType.Binary&&t.resolve(new r.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(n){t.reject("Error formatting the message. Error: ".concat(n))}return t.promise}fromConnectionMessage(e){const t=new i.Deferred;try{if(e.messageType===i.MessageType.Text){const n="".concat(e.textBody?e.textBody:"");t.resolve(new i.RawWebsocketMessage(i.MessageType.Text,n,e.id))}}catch(n){t.reject("Error formatting the message. ".concat(n))}return t.promise}}},5264:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6698);Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return i.ConversationManager}});var r=n(1978);Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var o=n(6411);Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return o.ConversationRecognizerFactory}});var s=n(8592);Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return s.TranscriberRecognizer}});var a=n(7218);Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return a.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return a.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return a.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return a.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return a.ParticipantsListEventArgs}});var l=n(4171);Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return l.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return l.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return l.InternalParticipants}})},1297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandResponsePayload=void 0;class n{constructor(e){this.privCommandResponse=(e=>JSON.parse(e))(e)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(e){return new n(e)}}t.CommandResponsePayload=n},7181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1297);Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return i.CommandResponsePayload}});var r=n(7258);Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var o=n(9942);Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return o.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return o.TextResponsePayload}})},7258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantPayloadResponse=t.ParticipantsListPayloadResponse=void 0;class n{constructor(e){this.privParticipantsPayloadResponse=(e=>JSON.parse(e))(e)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(e){return new n(e)}}t.ParticipantsListPayloadResponse=n;class i{constructor(e){this.privParticipantPayloadResponse=(e=>JSON.parse(e))(e)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(e){return new i(e)}}t.ParticipantPayloadResponse=i},9942:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextResponsePayload=t.SpeechResponsePayload=void 0;class n{constructor(e){this.privSpeechResponse=(e=>JSON.parse(e))(e)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return"final"===this.privSpeechResponse.type}static fromJSON(e){return new n(e)}}t.SpeechResponsePayload=n;class i{constructor(e){this.privTextResponse=(e=>JSON.parse(e))(e)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(e){return new i(e)}}t.TextResponsePayload=i},8592:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberRecognizer=void 0;const r=n(6606),o=n(3720),s=n(7419),a=n(9831);class l extends s.Recognizer{constructor(e,t){const n=e;o.Contracts.throwIfNull(n,"speechTranslationConfig");const i=t;o.Contracts.throwIfNull(i,"audioConfigImpl"),o.Contracts.throwIfNullOrWhitespace(n.speechRecognitionLanguage,s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,n.properties,new a.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return o.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}set conversation(e){o.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=e}getConversationInfo(){return o.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(e){o.Contracts.throwIfNullOrUndefined(e,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=e}getMeetingInfo(){return o.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(e,t){r.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(a.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){r.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(){return i(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(yield this.dispose(!0))}))}pushConversationEvent(e,t){return i(this,void 0,void 0,(function*(){const n=this.privReco;o.Contracts.throwIfNullOrUndefined(n,"serviceRecognizer"),yield n.sendSpeechEventAsync(e,t)}))}pushMeetingEvent(e,t){return i(this,void 0,void 0,(function*(){const n=this.privReco;o.Contracts.throwIfNullOrUndefined(n,"serviceRecognizer"),yield n.sendMeetingSpeechEventAsync(e,t)}))}enforceAudioGating(){return i(this,void 0,void 0,(function*(){const e=this.audioConfig,t=(yield e.format).channels;if(1===t){if("true"!==this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase())throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(8!==t)throw new Error("Unsupported audio configuration: Detected ".concat(t,"-channel audio"))}))}connectMeetingCallbacks(e){this.isMeetingRecognizer=!0,this.canceled=(t,n)=>{e.canceled&&e.canceled(e,n)},this.recognizing=(t,n)=>{e.transcribing&&e.transcribing(e,n)},this.recognized=(t,n)=>{e.transcribed&&e.transcribed(e,n)},this.sessionStarted=(t,n)=>{e.sessionStarted&&e.sessionStarted(e,n)},this.sessionStopped=(t,n)=>{e.sessionStopped&&e.sessionStopped(e,n)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new a.RecognizerConfig(e,this.properties)}createServiceRecognizer(e,t,n,i){const r=n;return new a.TranscriptionServiceRecognizer(e,t,r,i,this)}}t.TranscriberRecognizer=l},9347:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationConnectionFactory=void 0;const i=n(4583),r=n(350),o=n(7419),s=n(9258),a=n(9831),l=n(4891),u=n(2367);class c extends s.ConnectionFactoryBase{create(e,t,n){const r=this.getEndpointUrl(e),s={};void 0!==e.autoDetectSourceLanguages&&(s[u.QueryParameterNames.EnableLanguageId]="true"),this.setQueryParams(s,e,r);const c={};void 0!==t.token&&""!==t.token&&(c[t.headerName]=t.token),c[l.HeaderNames.ConnectionId]=n,e.parameters.setProperty(o.PropertyId.SpeechServiceConnection_Url,r);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new i.WebsocketConnection(r,s,c,new a.WebsocketMessageFormatter,i.ProxyInfo.fromRecognizerConfig(e),h,n)}getEndpointUrl(e,t){const n=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Region),i=s.ConnectionFactoryBase.getHostSuffix(n);let a=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!a)if(void 0!==e.autoDetectSourceLanguages){a=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+i)+"/speech/universal/v2"}else{a=e.parameters.getProperty(o.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+i)+"/speech/translation/cognitiveservices/v1"}return!0===t?a:r.StringUtils.formatString(a,{region:n})}setQueryParams(e,t,n){e.from=t.parameters.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),e.to=t.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages),e.scenario=t.recognitionMode===a.RecognitionMode.Interactive?"interactive":t.recognitionMode===a.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(t,e,n),this.setUrlParameter(o.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,u.QueryParameterNames.StableTranslation,t,e,n);const i=t.parameters.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);void 0!==i&&(e.voice=i,e.features="texttospeech")}}t.TranslationConnectionFactory=c},5586:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationServiceRecognizer=void 0;const r=n(6606),o=n(7419),s=n(9831);class a extends s.ConversationServiceRecognizer{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privTranslationRecognizer=r,this.connectionEvents.attach((e=>{"ConnectionEstablishedEvent"===e.name&&this.privTranslationRecognizer.onConnection()}))}processTypeSpecificMessages(e){return i(this,void 0,void 0,(function*(){const t=new o.PropertyCollection;let n=yield this.processSpeechMessages(e);if(n)return!0;const a=r=>i(this,void 0,void 0,(function*(){if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+r.Offset+r.Duration),r.RecognitionStatus===s.RecognitionStatus.Success){const e=this.fireEventForResult(r,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(i){}if(this.privSuccessCallback){try{this.privSuccessCallback(e.result)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const l=s.EnumTranslation.implTranslateRecognitionResult(r.RecognitionStatus),u=new o.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,l,r.Text,r.Duration,this.privRequestSession.currentTurnAudioOffset+r.Offset,r.Language,r.Confidence,void 0,e.textBody,t);if(l===o.ResultReason.Canceled){const e=s.EnumTranslation.implTranslateCancelResult(r.RecognitionStatus),t=s.EnumTranslation.implTranslateCancelErrorCode(r.RecognitionStatus);yield this.cancelRecognitionLocal(e,t,s.EnumTranslation.implTranslateErrorDetails(t))}else{if(!this.privRequestSession.isSpeechEnded||l!==o.ResultReason.NoMatch||r.RecognitionStatus===s.RecognitionStatus.InitialSilenceTimeout){const e=new o.TranslationRecognitionEventArgs(u,u.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,e)}catch(i){}}if(this.privSuccessCallback){try{this.privSuccessCallback(u)}catch(a){this.privErrorCallback&&this.privErrorCallback(a)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}n=!0}})),l=(e,t)=>{const i=this.fireEventForResult(e,t);if(this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+i.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch(r){}n=!0};switch(e.messageType===r.MessageType.Text&&t.setProperty(o.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":l(s.TranslationHypothesis.fromJSON(e.textBody),t);break;case"translation.response":const i=JSON.parse(e.textBody);if(i.SpeechPhrase)yield a(s.TranslationPhrase.fromTranslationResponse(i));else{const n=JSON.parse(e.textBody);n.SpeechHypothesis&&l(s.TranslationHypothesis.fromTranslationResponse(n),t)}break;case"translation.phrase":yield a(s.TranslationPhrase.fromJSON(e.textBody));break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),n=!0;break;case"audio.end":case"translation.synthesis.end":const r=s.TranslationSynthesisEnd.fromJSON(e.textBody);switch(r.SynthesisStatus){case s.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const e=new o.TranslationSynthesisResult(o.ResultReason.Canceled,void 0),t=new o.TranslationSynthesisEventArgs(e,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,t)}catch(u){}}if(this.privTranslationRecognizer.canceled){const e=new o.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,o.CancellationReason.Error,r.FailureReason,o.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,e)}catch(u){}}break;case s.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}n=!0}return n}))}cancelRecognition(e,t,n,i,r){const a=new o.PropertyCollection;if(a.setProperty(s.CancellationErrorCodePropertyName,o.CancellationErrorCode[i]),this.privTranslationRecognizer.canceled){const t=new o.TranslationRecognitionCanceledEventArgs(e,n,r,i,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,t)}catch(l){}}if(this.privSuccessCallback){const e=new o.TranslationRecognitionResult(void 0,t,o.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,r,void 0,a);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(u){}}}handleRecognizingCallback(e,t,n){try{const i=new o.TranslationRecognitionEventArgs(o.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,n);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch(i){}}handleRecognizedCallback(e,t,n){try{const i=new o.TranslationRecognitionEventArgs(o.TranslationRecognitionResult.fromSpeechRecognitionResult(e),t,n);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,i)}catch(i){}}fireEventForResult(e,t){let n,i,a;if(void 0!==e.Translation.Translations){n=new o.Translations;for(const t of e.Translation.Translations)n.set(t.Language,t.Text||t.DisplayText)}e instanceof s.TranslationPhrase?(i=e.Translation&&e.Translation.TranslationStatus===r.TranslationStatus.Success?o.ResultReason.TranslatedSpeech:o.ResultReason.RecognizedSpeech,a=e.Confidence):i=o.ResultReason.TranslatingSpeech;const l=e.Language,u=e.Offset+this.privRequestSession.currentTurnAudioOffset,c=new o.TranslationRecognitionResult(n,this.privRequestSession.requestId,i,e.Text,e.Duration,u,l,a,e.Translation.FailureReason,JSON.stringify(e),t);return new o.TranslationRecognitionEventArgs(c,u,this.privRequestSession.sessionId)}sendSynthesisAudio(e,t){const n=void 0===e?o.ResultReason.SynthesizingAudioCompleted:o.ResultReason.SynthesizingAudio,i=new o.TranslationSynthesisResult(n,e),r=new o.TranslationSynthesisEventArgs(i,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,r)}catch(s){}}}t.TranslationServiceRecognizer=a},3960:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(t.TranslationStatus||(t.TranslationStatus={}))},36:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceServiceRecognizer=void 0;const r=n(4583),o=n(6606),s=n(7419),a=n(9831),l=n(8046);class u extends a.ServiceRecognizerBase{constructor(e,t,n,i,r){super(e,t,n,i,r),this.privDeferralMap=new o.DeferralMap,this.privSpeakerAudioSource=n,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(e){this.privSpeakerAudioSource=e}processTypeSpecificMessages(e){let t=!1;const n=new s.PropertyCollection;switch(e.messageType===o.MessageType.Text&&n.setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speaker.profiles":const n=JSON.parse(e.textBody);switch(n.operation.toLowerCase()){case"create":this.handleCreateResponse(n,e.requestId);break;case"delete":case"reset":this.handleResultResponse(n,e.requestId);break;case"fetch":const t=JSON.parse(e.textBody);this.handleFetchResponse(t,e.requestId)}t=!0;break;case"speaker.phrases":const i=JSON.parse(e.textBody);this.handlePhrasesResponse(i,e.requestId),t=!0;break;case"speaker.profile.enrollment":const r=JSON.parse(e.textBody),o=new s.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(r.enrollment?r.enrollment.enrollmentStatus:r.status.statusCode),r.enrollment?JSON.stringify(r.enrollment):void 0,r.status.reason);this.privDeferralMap.getId(e.requestId)&&this.privDeferralMap.complete(e.requestId,o),this.privRequestSession.onSpeechEnded(),t=!0}const i=new o.Deferred;return i.resolve(t),i.promise}cancelRecognition(e,t,n,i,r){(new s.PropertyCollection).setProperty(a.CancellationErrorCodePropertyName,s.CancellationErrorCode[i]);const o=new s.VoiceProfileEnrollmentResult(s.ResultReason.Canceled,r,r);this.privDeferralMap.getId(t)&&this.privDeferralMap.complete(t,o)}createProfile(e,t){return i(this,void 0,void 0,(function*(){this.voiceProfileType=e.toString();const n=this.connectImpl();try{const i=new o.Deferred;return yield n,yield this.sendCreateProfile(i,e,t),this.receiveMessage(),i.promise}catch(i){throw i}}))}resetProfile(e){return i(this,void 0,void 0,(function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("reset",e.profileType,e)}))}deleteProfile(e){return i(this,void 0,void 0,(function*(){return this.voiceProfileType=e.profileType.toString(),this.sendCommonRequest("delete",e.profileType,e)}))}retrieveEnrollmentResult(e){return i(this,void 0,void 0,(function*(){return this.voiceProfileType=e.profileType.toString(),this.privExpectedProfileId=e.profileId,this.sendCommonRequest("fetch",e.profileType,e)}))}getAllProfiles(e){return i(this,void 0,void 0,(function*(){return this.voiceProfileType=e.toString(),this.sendCommonRequest("fetch",e)}))}getActivationPhrases(e,t){return i(this,void 0,void 0,(function*(){this.voiceProfileType=e.toString();const n=this.connectImpl();try{const i=new o.Deferred;return yield n,yield this.sendPhrasesRequest(i,e,t),this.receiveMessage(),i.promise}catch(i){throw i}}))}enrollProfile(e){return i(this,void 0,void 0,(function*(){this.voiceProfileType=e.profileType.toString();const t=new o.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(s.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const n=this.connectImpl(),i=this.sendPreAudioMessages(e,t),a=yield this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),l=yield this.privSpeakerAudioSource.format,u=yield this.privSpeakerAudioSource.deviceInfo,c=new r.ReplayableAudioNode(a,l.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(c,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:u};try{yield n,yield i}catch(p){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,p)}const h=new s.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,h),this.receiveMessage();return this.sendAudio(c).then((()=>{}),(e=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)})),t.promise}))}sendPreAudioMessages(e,t){return i(this,void 0,void 0,(function*(){const n=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,t),yield this.sendBaseRequest(n,"enroll",this.scenarioFrom(e.profileType),e)}))}sendPhrasesRequest(e,t,n){return i(this,void 0,void 0,(function*(){const i=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const r=this.scenarioFrom(t),s={locale:n,scenario:r};return i.send(new l.SpeechConnectionMessage(o.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(s)))}))}sendCreateProfile(e,t,n){return i(this,void 0,void 0,(function*(){const i=yield this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,e);const r=t===s.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":t===s.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",a={locale:n,number:"1",scenario:r};return i.send(new l.SpeechConnectionMessage(o.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(a)))}))}sendCommonRequest(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return i(this,void 0,void 0,(function*(){const i=this.connectImpl();try{const r=new o.Deferred;this.privRequestSession.onSpeechContext(),yield i;const s=yield this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,r),yield this.sendBaseRequest(s,e,this.scenarioFrom(t),n),this.receiveMessage(),r.promise}catch(r){throw r}}))}sendBaseRequest(e,t,n,r){return i(this,void 0,void 0,(function*(){const i={scenario:n};return r?i.profileIds=[r.profileId]:i.maxPageSize=-1,e.send(new l.SpeechConnectionMessage(o.MessageType.Text,"speaker.profile.".concat(t),this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(i)))}))}extractSpeakerContext(e){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:e.profileIds,scenario:e.scenario}}handlePhrasesResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error("Voice Profile get activation phrases request for requestID ".concat(t," not found"));if("success"!==e.status.statusCode.toLowerCase()){const n=s.ResultReason.Canceled,i=new s.VoiceProfilePhraseResult(n,e.status.statusCode,e.passPhraseType,[]);this.privDeferralMap.complete(t,i)}else{if(!(e.phrases&&e.phrases.length>0))throw new Error("Voice Profile get activation phrases failed, no phrases received");{const n=s.ResultReason.EnrollingVoiceProfile,i=new s.VoiceProfilePhraseResult(n,e.status.statusCode,e.passPhraseType,e.phrases);this.privDeferralMap.complete(t,i)}}}handleCreateResponse(e,t){if(!(e.profiles&&e.profiles.length>0))throw new Error("Voice Profile create failed, no profile id received");if(!this.privDeferralMap.getId(t))throw new Error("Voice Profile create request for requestID ".concat(t," not found"));{const n=e.profiles.map((e=>e.profileId));this.privDeferralMap.complete(t,n)}}handleResultResponse(e,t){if(!this.privDeferralMap.getId(t))throw new Error("Voice Profile create request for requestID ".concat(t," not found"));{const n="delete"===e.operation.toLowerCase()?s.ResultReason.DeletedVoiceProfile:s.ResultReason.ResetVoiceProfile,i="success"===e.status.statusCode.toLowerCase()?n:s.ResultReason.Canceled,r=new s.VoiceProfileResult(i,"statusCode: ".concat(e.status.statusCode,", errorDetails: ").concat(e.status.reason));this.privDeferralMap.complete(t,r)}}handleFetchResponse(e,t){if(!this.privDeferralMap.getId(t)||!e.profiles[0])throw new Error("Voice Profile fetch request for requestID ".concat(t," not found"));if(this.privExpectedProfileId&&1===e.profiles.length&&e.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const n=e.profiles[0],i=new s.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(n.enrollmentStatus),JSON.stringify(n),e.status.reason);this.privDeferralMap.complete(t,i)}else if(e.profiles.length>0){const n=e.profiles,i=[];for(const t of n)i.push(new s.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(t.enrollmentStatus),JSON.stringify(t),e.status.reason));this.privDeferralMap.complete(t,i)}}enrollmentReasonFrom(e){switch(e.toLowerCase()){case"enrolled":return s.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return s.ResultReason.Canceled;default:return s.ResultReason.EnrollingVoiceProfile}}scenarioFrom(e){return e===s.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":e===s.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}}t.VoiceServiceRecognizer=u},1791:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageFormatter=void 0;const i=n(6606);t.WebsocketMessageFormatter=class{toConnectionMessage(e){const t=new i.Deferred;try{if(e.messageType===i.MessageType.Text){const n=e.textContent;let r={},o=null;if(n){const e=n.split("\r\n\r\n");e&&e.length>0&&(r=this.parseHeaders(e[0]),e.length>1&&(o=e[1]))}t.resolve(new i.ConnectionMessage(e.messageType,o,r,e.id))}else if(e.messageType===i.MessageType.Binary){const n=e.binaryContent;let r={},o=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const s=new DataView(n),a=s.getInt16(0);if(n.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let l="";for(let e=0;e<a;e++)l+=String.fromCharCode(s.getInt8(e+2));r=this.parseHeaders(l),n.byteLength>a+2&&(o=n.slice(2+a)),t.resolve(new i.ConnectionMessage(e.messageType,o,r,e.id))}}catch(n){t.reject("Error formatting the message. Error: ".concat(n))}return t.promise}fromConnectionMessage(e){const t=new i.Deferred;try{if(e.messageType===i.MessageType.Text){const n="".concat(this.makeHeaders(e)).concat("\r\n").concat(e.textBody?e.textBody:"");t.resolve(new i.RawWebsocketMessage(i.MessageType.Text,n,e.id))}else if(e.messageType===i.MessageType.Binary){const n=this.makeHeaders(e),r=e.binaryBody,o=this.stringToArrayBuffer(n),s=new Int8Array(o),a=s.byteLength,l=new Int8Array(2+a+(r?r.byteLength:0));if(l[0]=a>>8&255,l[1]=255&a,l.set(s,2),r){const e=new Int8Array(r);l.set(e,2+a)}const u=l.buffer;t.resolve(new i.RawWebsocketMessage(i.MessageType.Binary,u,e.id))}}catch(n){t.reject("Error formatting the message. ".concat(n))}return t.promise}makeHeaders(e){let t="";if(e.headers)for(const n in e.headers)n&&(t+="".concat(n,": ").concat(e.headers[n]).concat("\r\n"));return t}parseHeaders(e){const t={};if(e){const n=e.match(/[^\r\n]+/g);if(t)for(const e of n)if(e){const n=e.indexOf(":"),i=n>0?e.substr(0,n).trim().toLowerCase():e,r=n>0&&e.length>n+1?e.substr(n+1).trim():"";t[i]=r}}return t}stringToArrayBuffer(e){const t=new ArrayBuffer(e.length),n=new DataView(t);for(let i=0;i<e.length;i++)n.setUint8(i,e.charCodeAt(i));return t}}},3379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamNodeErrorEvent=t.AudioStreamNodeDetachedEvent=t.AudioStreamNodeAttachedEvent=t.AudioStreamNodeAttachingEvent=t.AudioStreamNodeEvent=t.AudioSourceErrorEvent=t.AudioSourceOffEvent=t.AudioSourceReadyEvent=t.AudioSourceInitializingEvent=t.AudioSourceEvent=void 0;const i=n(3934);class r extends i.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.EventType.Info),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}t.AudioSourceEvent=r;t.AudioSourceInitializingEvent=class extends r{constructor(e){super("AudioSourceInitializingEvent",e)}};t.AudioSourceReadyEvent=class extends r{constructor(e){super("AudioSourceReadyEvent",e)}};t.AudioSourceOffEvent=class extends r{constructor(e){super("AudioSourceOffEvent",e)}};t.AudioSourceErrorEvent=class extends r{constructor(e,t){super("AudioSourceErrorEvent",e,i.EventType.Error),this.privError=t}get error(){return this.privError}};class o extends r{constructor(e,t,n){super(e,t),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}t.AudioStreamNodeEvent=o;t.AudioStreamNodeAttachingEvent=class extends o{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}};t.AudioStreamNodeAttachedEvent=class extends o{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}};t.AudioStreamNodeDetachedEvent=class extends o{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}};t.AudioStreamNodeErrorEvent=class extends o{constructor(e,t,n){super("AudioStreamNodeErrorEvent",e,t),this.privError=n}get error(){return this.privError}}},6042:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundEvent=void 0;const i=n(6606);class r extends i.PlatformEvent{constructor(e){super("BackgroundEvent",i.EventType.Error),this.privError=e}get error(){return this.privError}}t.BackgroundEvent=r},4693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedArrayBufferStream=void 0;const i=n(6606);class r extends i.Stream{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const n=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),i=new Uint8Array(this.privNextBufferToWrite),r=new Uint8Array(e.buffer.slice(t,n+t));i.set(r,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=n,t+=n,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}t.ChunkedArrayBufferStream=r},2853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageSentEvent=t.ConnectionMessageReceivedEvent=t.ConnectionEstablishErrorEvent=t.ConnectionErrorEvent=t.ConnectionClosedEvent=t.ConnectionEstablishedEvent=t.ConnectionStartEvent=t.ConnectionEvent=t.ServiceEvent=void 0;const i=n(3934);class r extends i.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.EventType.Info),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}t.ServiceEvent=r;class o extends i.PlatformEvent{constructor(e,t){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.EventType.Info),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}t.ConnectionEvent=o;t.ConnectionStartEvent=class extends o{constructor(e,t,n){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}};t.ConnectionEstablishedEvent=class extends o{constructor(e){super("ConnectionEstablishedEvent",e)}};t.ConnectionClosedEvent=class extends o{constructor(e,t,n){super("ConnectionClosedEvent",e,i.EventType.Debug),this.privReason=n,this.privStatusCode=t}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};t.ConnectionErrorEvent=class extends o{constructor(e,t,n){super("ConnectionErrorEvent",e,i.EventType.Debug),this.privMessage=t,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}};t.ConnectionEstablishErrorEvent=class extends o{constructor(e,t,n){super("ConnectionEstablishErrorEvent",e,i.EventType.Error),this.privStatusCode=t,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}};t.ConnectionMessageReceivedEvent=class extends o{constructor(e,t,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}};t.ConnectionMessageSentEvent=class extends o{constructor(e,t,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}},46:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;const i=n(6943),r=n(6036);var o;!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(o=t.MessageType||(t.MessageType={}));t.ConnectionMessage=class{constructor(e,t,n,s){if(this.privBody=null,e===o.Text&&t&&"string"!==typeof t)throw new i.InvalidOperationError("Payload must be a string");if(e===o.Binary&&t&&!(t instanceof ArrayBuffer))throw new i.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=n||{},this.privId=s||r.createNoDashGuid(),this.messageType){case o.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case o.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===o.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===o.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}},650:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionOpenResponse=void 0;t.ConnectionOpenResponse=class{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}},9393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeferralMap=void 0;t.DeferralMap=class{constructor(){this.privMap={}}add(e,t){this.privMap[e]=t}getId(e){return this.privMap[e]}complete(e,t){try{this.privMap[e].resolve(t)}catch(n){this.privMap[e].reject(n)}finally{this.privMap[e]=void 0}}}},6917:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendingAgentContextMessageEvent=t.DialogEvent=void 0;const i=n(3934);class r extends i.PlatformEvent{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.EventType.Info)}}t.DialogEvent=r;t.SendingAgentContextMessageEvent=class extends r{constructor(e){super("SendingAgentContextMessageEvent"),this.privAgentConfig=e}get agentConfig(){return this.privAgentConfig}}},6943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.InvalidOperationError=t.ArgumentNullError=void 0;class n extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}t.ArgumentNullError=n;class i extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}t.InvalidOperationError=i;class r extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}t.ObjectDisposedError=r},568:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventSource=void 0;const i=n(6943),r=n(6036);t.EventSource=class{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=e}onEvent(e){if(this.isDisposed())throw new i.ObjectDisposedError("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)}attach(e){const t=r.createNoDashGuid();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}}attachListener(e){return this.attach((t=>e.onEvent(t)))}attachConsoleListener(e){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach((t=>e.onEvent(t))),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}},8785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;const i=n(6943),r=n(568);class o{static setEventSource(e){if(!e)throw new i.ArgumentNullError("eventSource");o.privInstance=e}static get instance(){return o.privInstance}}t.Events=o,o.privInstance=new r.EventSource},6606:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(3379),t),r(n(2853),t),r(n(46),t),r(n(650),t),r(n(9393),t),r(n(6917),t),r(n(6943),t),r(n(8785),t),r(n(568),t),r(n(6036),t),r(n(1698),t),r(n(7252),t),r(n(9786),t),r(n(1571),t),r(n(9274),t),r(n(4204),t),r(n(6585),t),r(n(7470),t),r(n(2298),t),r(n(7414),t),r(n(5286),t),r(n(3934),t),r(n(8986),t),r(n(1960),t),r(n(1161),t),r(n(7073),t),r(n(4047),t);var o=n(3960);Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return o.TranslationStatus}}),r(n(4693),t),r(n(7941),t),r(n(9983),t),r(n(5576),t),r(n(6042),t)},6036:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNoDashGuid=t.createGuid=void 0;const i=n(8086),r=()=>i.v4();t.createGuid=r;t.createNoDashGuid=()=>r().replace(new RegExp("-","g"),"").toUpperCase()},7941:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1698:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7252:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(t.ConnectionState||(t.ConnectionState={}))},9786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1571:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9274:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7470:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4204:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2298:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7414:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5286:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;const i=n(6943);class r{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],e)for(const t of e)this.privList.push(t)}get(e){return this.throwIfDisposed(),this.privList[e]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(e){this.throwIfDisposed(),this.insertAt(this.privList.length,e)}insertAt(e,t){this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(e){return this.throwIfDisposed(),this.remove(e,1)[0]}remove(e,t){this.throwIfDisposed();const n=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}}onRemoved(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}}onDisposed(e){this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}}join(e){return this.throwIfDisposed(),this.privList.join(e)}toArray(){const e=Array();return this.privList.forEach((t=>{e.push(t)})),e}any(e){return this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0}all(e){return this.throwIfDisposed(),this.where(e).length()===this.length()}forEach(e){this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)}select(e){this.throwIfDisposed();const t=[];for(let n=0;n<this.privList.length;n++)t.push(e(this.privList[n],n));return new r(t)}where(e){this.throwIfDisposed();const t=new r;for(let n=0;n<this.privList.length;n++)e(this.privList[n],n)&&t.add(this.privList[n]);return t}orderBy(e){this.throwIfDisposed();const t=this.toArray().sort(e);return new r(t)}orderByDesc(e){return this.throwIfDisposed(),this.orderBy(((t,n)=>e(n,t)))}clone(){return this.throwIfDisposed(),new r(this.toArray())}concat(e){return this.throwIfDisposed(),new r(this.privList.concat(e.toArray()))}concatArray(e){return this.throwIfDisposed(),new r(this.privList.concat(e))}isDisposed(){return null==this.privList}dispose(e){this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new i.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(e){if(e)for(const t in e)t&&e[t]()}}t.List=r},5576:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OCSPCacheUpdateErrorEvent=t.OCSPResponseRetrievedEvent=t.OCSPCacheFetchErrorEvent=t.OCSPVerificationFailedEvent=t.OCSPCacheHitEvent=t.OCSPCacheEntryNeedsRefreshEvent=t.OCSPCacheEntryExpiredEvent=t.OCSPWSUpgradeStartedEvent=t.OCSPStapleReceivedEvent=t.OCSPCacheUpdateCompleteEvent=t.OCSPDiskCacheStoreEvent=t.OCSPMemoryCacheStoreEvent=t.OCSPCacheUpdateNeededEvent=t.OCSPDiskCacheHitEvent=t.OCSPCacheMissEvent=t.OCSPMemoryCacheHitEvent=t.OCSPEvent=void 0;const i=n(3934);class r extends i.PlatformEvent{constructor(e,t,n){super(e,t),this.privSignature=n}}t.OCSPEvent=r;t.OCSPMemoryCacheHitEvent=class extends r{constructor(e){super("OCSPMemoryCacheHitEvent",i.EventType.Debug,e)}};t.OCSPCacheMissEvent=class extends r{constructor(e){super("OCSPCacheMissEvent",i.EventType.Debug,e)}};t.OCSPDiskCacheHitEvent=class extends r{constructor(e){super("OCSPDiskCacheHitEvent",i.EventType.Debug,e)}};t.OCSPCacheUpdateNeededEvent=class extends r{constructor(e){super("OCSPCacheUpdateNeededEvent",i.EventType.Debug,e)}};t.OCSPMemoryCacheStoreEvent=class extends r{constructor(e){super("OCSPMemoryCacheStoreEvent",i.EventType.Debug,e)}};t.OCSPDiskCacheStoreEvent=class extends r{constructor(e){super("OCSPDiskCacheStoreEvent",i.EventType.Debug,e)}};t.OCSPCacheUpdateCompleteEvent=class extends r{constructor(e){super("OCSPCacheUpdateCompleteEvent",i.EventType.Debug,e)}};t.OCSPStapleReceivedEvent=class extends r{constructor(){super("OCSPStapleReceivedEvent",i.EventType.Debug,"")}};t.OCSPWSUpgradeStartedEvent=class extends r{constructor(e){super("OCSPWSUpgradeStartedEvent",i.EventType.Debug,e)}};t.OCSPCacheEntryExpiredEvent=class extends r{constructor(e,t){super("OCSPCacheEntryExpiredEvent",i.EventType.Debug,e),this.privExpireTime=t}};t.OCSPCacheEntryNeedsRefreshEvent=class extends r{constructor(e,t,n){super("OCSPCacheEntryNeedsRefreshEvent",i.EventType.Debug,e),this.privExpireTime=n,this.privStartTime=t}};t.OCSPCacheHitEvent=class extends r{constructor(e,t,n){super("OCSPCacheHitEvent",i.EventType.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}};t.OCSPVerificationFailedEvent=class extends r{constructor(e,t){super("OCSPVerificationFailedEvent",i.EventType.Debug,e),this.privError=t}};t.OCSPCacheFetchErrorEvent=class extends r{constructor(e,t){super("OCSPCacheFetchErrorEvent",i.EventType.Debug,e),this.privError=t}};t.OCSPResponseRetrievedEvent=class extends r{constructor(e){super("OCSPResponseRetrievedEvent",i.EventType.Debug,e)}};t.OCSPCacheUpdateErrorEvent=class extends r{constructor(e,t){super("OCSPCacheUpdateErrorEvent",i.EventType.Debug,e),this.privError=t}}},3934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;const i=n(6036);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.None=4]="None"}(t.EventType||(t.EventType={}));t.PlatformEvent=class{constructor(e,t){this.privName=e,this.privEventId=i.createNoDashGuid(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}},8986:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0,function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(n=t.PromiseState||(t.PromiseState={}));class i{constructor(e){this.throwIfError=()=>{if(this.isError)throw this.error},e.on((e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=e)}),(e=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=e)}))}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}t.PromiseResult=i;class r{constructor(){this.setResult=e=>{this.privOnSetResult(e)},this.setError=e=>{this.privOnSetError(e)},this.on=(e,t)=>{this.privOnSetResult=e,this.privOnSetError=t}}}t.PromiseResultEventSource=r;t.Deferred=class{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise(((e,t)=>{this.privResolve=e,this.privReject=t}))}get promise(){return this.privPromise}};t.Sink=class{constructor(){this.privState=n.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new r,this.privPromiseResult=new i(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(e){if(this.privState!==n.None)throw new Error("'Cannot resolve a completed promise'");this.privState=n.Resolved,this.privPromiseResultEvents.setResult(e);for(let t=0;t<this.privSuccessHandlers.length;t++)this.executeSuccessCallback(e,this.privSuccessHandlers[t],this.privErrorHandlers[t]);this.detachHandlers()}reject(e){if(this.privState!==n.None)throw new Error("'Cannot reject a completed promise'");this.privState=n.Rejected,this.privPromiseResultEvents.setError(e);for(const t of this.privErrorHandlers)this.executeErrorCallback(e,t);this.detachHandlers()}on(e,t){null==e&&(e=()=>{}),this.privState===n.None?(this.privSuccessHandlers.push(e),this.privErrorHandlers.push(t)):(this.privState===n.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,e,t):this.privState===n.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,t),this.detachHandlers())}executeSuccessCallback(e,t,n){try{t(e)}catch(i){this.executeErrorCallback("'Unhandled callback error: ".concat(i,"'"),n)}}executeErrorCallback(e,t){if(!t)throw new Error("'Unhandled error: ".concat(e,"'"));try{t(e)}catch(n){throw new Error("'Unhandled callback error: ".concat(n,". InnerError: ").concat(e,"'"))}}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}},t.marshalPromiseToCallbacks=function(e,t,n){e.then((e=>{try{t&&t(e)}catch(i){if(n)try{if(i instanceof Error){const e=i;n(e.name+": "+e.message)}else n(i)}catch(i){}}}),(e=>{if(n)try{if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e)}catch(e){}}))}},1960:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;const r=n(6943),o=n(5286),s=n(8986);var a;!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(a||(a={}));t.Queue=class{constructor(e){this.privPromiseStore=new o.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=e||new o.List,this.privDetachables=[],this.privSubscribers=new o.List,this.privDetachables.push(this.privList.onAdded((()=>this.drain())))}enqueue(e){this.throwIfDispose(),this.enqueueFromPromise(new Promise((t=>t(e))))}enqueueFromPromise(e){this.throwIfDispose(),e.then((e=>{this.privList.add(e)}),(()=>{}))}dequeue(){this.throwIfDispose();const e=new s.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:a.Dequeue}),this.drain()),e.promise}peek(){this.throwIfDispose();const e=new s.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:a.Peek}),this.drain()),e.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return null==this.privSubscribers}drainAndDispose(e,t){return i(this,void 0,void 0,(function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;){n.removeFirst().deferral.resolve(void 0)}this.privSubscribers===n&&(this.privSubscribers=n)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach((e=>{t.push(e)})),Promise.all(t).finally((()=>{this.privSubscribers=null,this.privList.forEach((t=>{e(t)})),this.privList=null})).then()}this.privSubscribers=null,this.privList=null}}))}dispose(e){return i(this,void 0,void 0,(function*(){yield this.drainAndDispose(null,e)}))}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const n=e.removeFirst();if(n.type===a.Peek)n.deferral.resolve(t.first());else{const e=t.removeFirst();n.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed()){if(this.privDisposeReason)throw new r.InvalidOperationError(this.privDisposeReason);throw new r.ObjectDisposedError("Queue")}if(this.privIsDisposing)throw new r.InvalidOperationError("Queue disposing")}}},1161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawWebsocketMessage=void 0;const i=n(46),r=n(6943),o=n(6036);t.RawWebsocketMessage=class{constructor(e,t,n){if(this.privPayload=null,!t)throw new r.ArgumentNullError("payload");if(e===i.MessageType.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new r.InvalidOperationError("Payload must be ArrayBuffer");if(e===i.MessageType.Text&&"string"!==typeof t)throw new r.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=n||o.createNoDashGuid()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===i.MessageType.Binary)throw new r.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===i.MessageType.Text)throw new r.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}},7073:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RiffPcmEncoder=void 0;t.RiffPcmEncoder=class{constructor(e,t){this.privActualSampleRate=e,this.privDesiredSampleRate=t}encode(e){const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const n=2*t.length,i=new ArrayBuffer(n),r=new DataView(i);return this.floatTo16BitPCM(r,0,t),i}setString(e,t,n){for(let i=0;i<n.length;i++)e.setUint8(t+i,n.charCodeAt(i))}floatTo16BitPCM(e,t,n){for(let i=0;i<n.length;i++,t+=2){const r=Math.max(-1,Math.min(1,n[i]));e.setInt16(t,r<0?32768*r:32767*r,!0)}}downSampleAudioFrame(e,t,n){if(!e)return null;if(n===t||n>t)return e;const i=t/n,r=Math.round(e.length/i),o=new Float32Array(r);let s=0,a=0;for(;a<r;){const t=Math.round((a+1)*i);let n=0,r=0;for(;s<t&&s<e.length;)n+=e[s++],r++;o[a++]=n/r}return o}}},4047:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;const r=n(6943),o=n(6036),s=n(1960);t.Stream=class{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=e||o.createNoDashGuid(),this.privReaderQueue=new s.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(t){}}read(){if(this.privIsReadEnded)throw new r.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then((e=>i(this,void 0,void 0,(function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e}))))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new s.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new r.InvalidOperationError("Stream closed")}}},350:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;t.StringUtils=class{static formatString(e,t){if(!e)return"";if(!t)return e;let n="",i="";const r=e=>{n+=e},o=e=>{i+=e};let s=r;for(let a=0;a<e.length;a++){const l=e[a],u=a+1<e.length?e[a+1]:"";switch(l){case"{":"{"===u?(s("{"),a++):s=o;break;case"}":"}"===u?(s("}"),a++):(t.hasOwnProperty(i)&&(n+=t[i]),s=r,i="");break;default:s(l)}}return n}}},9983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timeout=void 0;class n{static load(){const e=new Map([[0,()=>{}]]),t=new Map,i="data:text/javascript;base64,"+btoa('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'),r=new Worker(i);r.addEventListener("message",(i=>{let{data:r}=i;if(n.isCallNotification(r)){const{params:{timerId:n}}=r,i=e.get(n);if("number"===typeof i){const e=t.get(i);if(void 0===e||e!==n)throw new Error("The timer is in an undefined state.")}else{if("undefined"===typeof i)throw new Error("The timer is in an undefined state.");i(),e.delete(n)}}else{if(!n.isClearResponse(r)){const{error:{message:e}}=r;throw new Error(e)}{const{id:n}=r,i=t.get(n);if(void 0===i)throw new Error("The timer is in an undefined state.");t.delete(n),e.delete(i)}}}));return{clearTimeout:n=>{const i=Math.random();t.set(i,n),e.set(n,i),r.postMessage({id:i,method:"clear",params:{timerId:n}})},setTimeout:(t,n)=>{const i=Math.random();return e.set(i,t),r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:i}}),i}}}static loadWorkerTimers(){return()=>(null!==n.workerTimers||(n.workerTimers=n.load()),n.workerTimers)}static isCallNotification(e){return void 0!==e.method&&"call"===e.method}static isClearResponse(e){return null===e.error&&"number"===typeof e.id}}t.Timeout=n,n.workerTimers=null,n.clearTimeout=e=>n.timers().clearTimeout(e),n.setTimeout=(e,t)=>n.timers().setTimeout(e,t),n.timers=n.loadWorkerTimers()},9605:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityReceivedEventArgs=void 0;t.ActivityReceivedEventArgs=class{constructor(e,t){this.privActivity=e,this.privAudioStream=t}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}},1566:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputConfigImpl=t.AudioConfigImpl=t.AudioConfig=void 0;const i=n(4583),r=n(3720),o=n(7419),s=n(4865),a=n(2065),l=n(6625);class u{static fromDefaultMicrophoneInput(){const e=new i.PcmRecorder(!0);return new c(new i.MicAudioSource(e))}static fromMicrophoneInput(e){const t=new i.PcmRecorder(!0);return new c(new i.MicAudioSource(t,e))}static fromWavFileInput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamedBuffer.wav";return new c(new i.FileAudioSource(e,t))}static fromStreamInput(e){if(e instanceof o.PullAudioInputStreamCallback)return new c(new a.PullAudioInputStreamImpl(e));if(e instanceof o.AudioInputStream)return new c(e);if("undefined"!==typeof MediaStream&&e instanceof MediaStream){const t=new i.PcmRecorder(!1);return new c(new i.MicAudioSource(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new h(new o.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(void 0===e)return u.fromDefaultSpeakerOutput();if(e instanceof o.SpeakerAudioDestination)return new h(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new h(new s.AudioFileWriter(e))}static fromStreamOutput(e){if(e instanceof o.PushAudioOutputStreamCallback)return new h(new l.PushAudioOutputStreamImpl(e));if(e instanceof o.PushAudioOutputStream)return new h(e);if(e instanceof o.PullAudioOutputStream)return new h(e);throw new Error("Not Supported Type")}}t.AudioConfig=u;class c extends u{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then((()=>{e&&e()}),(e=>{t&&t(e)}))}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(r.Contracts.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}t.AudioConfigImpl=c;class h extends u{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}t.AudioOutputConfigImpl=h},4865:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioFileWriter=void 0;const s=o(n(2088)),a=n(3720);t.AudioFileWriter=class{constructor(e){a.Contracts.throwIfNullOrUndefined(s.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=s.openSync(e,"w")}set format(e){a.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=s.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){a.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",(()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),s.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),s.closeSync(this.privFd),this.privFd=void 0})),this.privWriteStream.end())}id(){return this.privId}}},2065:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamImpl=t.PullAudioInputStream=t.PushAudioInputStreamImpl=t.PushAudioInputStream=t.AudioInputStream=void 0;const r=n(9831),o=n(6606),s=n(6036),a=n(7419),l=n(9495);class u{constructor(){}static createPushStream(e){return c.create(e)}static createPullStream(e,t){return p.create(e,t)}}t.AudioInputStream=u;class c extends u{static create(e){return new h(e)}}t.PushAudioInputStream=c;class h extends c{constructor(e){super(),this.privFormat=void 0===e?l.AudioStreamFormatImpl.getDefaultInputFormat():e,this.privEvents=new o.EventSource,this.privId=s.createNoDashGuid(),this.privStream=new o.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new o.AudioSourceInitializingEvent(this.privId)),this.onEvent(new o.AudioSourceReadyEvent(this.privId))}attach(e){return i(this,void 0,void 0,(function*(){this.onEvent(new o.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn();const t=this.privStream;return this.onEvent(new o.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>i(this,void 0,void 0,(function*(){return this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()}}))}detach(e){this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(e){this.privEvents.onEvent(e),o.Events.instance.onEvent(e)}toBuffer(e){const t=Buffer.alloc(e.byteLength),n=new Uint8Array(e);for(let i=0;i<t.length;++i)t[i]=n[i];return t}}t.PushAudioInputStreamImpl=h;class p extends u{constructor(){super()}static create(e,t){return new d(e,t)}}t.PullAudioInputStream=p;class d extends p{constructor(e,t){super(),this.privFormat=void 0===t?a.AudioStreamFormat.getDefaultInputFormat():t,this.privEvents=new o.EventSource,this.privId=s.createNoDashGuid(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new o.AudioSourceInitializingEvent(this.privId)),this.onEvent(new o.AudioSourceReadyEvent(this.privId))}attach(e){return i(this,void 0,void 0,(function*(){return this.onEvent(new o.AudioStreamNodeAttachingEvent(this.privId,e)),yield this.turnOn(),this.onEvent(new o.AudioStreamNodeAttachedEvent(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const n=new ArrayBuffer(this.privBufferSize-t),i=this.privCallback.read(n);if(void 0===e)e=n;else{new Int8Array(e).set(new Int8Array(n),t)}if(0===i)break;t+=i}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}}))}detach(e){this.onEvent(new o.AudioStreamNodeDetachedEvent(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:r.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:r.type.Stream})}onEvent(e){this.privEvents.onEvent(e),o.Events.instance.onEvent(e)}}t.PullAudioInputStreamImpl=d},2231:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputFormatImpl=void 0;const i=n(4848),r=n(9495);class o extends r.AudioStreamFormatImpl{constructor(e,t,n,i,r,o,s,a,l){super(n,o,t,e),this.formatTag=e,this.avgBytesPerSec=i,this.blockAlign=r,this.priAudioFormatString=s,this.priRequestAudioFormatString=a,this.priHasHeader=l}static fromSpeechSynthesisOutputFormat(e){return void 0===e?o.getDefaultOutputFormat():o.fromSpeechSynthesisOutputFormatString(o.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new o(r.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new o(r.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new o(r.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new o(r.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new o(r.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new o(r.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new o(r.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new o(r.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new o(r.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new o(r.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new o(r.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new o(r.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new o(r.AudioFormatTag.OPUS,1,16e3,4e3,2,16,e,e,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new o(r.AudioFormatTag.OPUS,1,24e3,6e3,2,16,e,e,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new o(r.AudioFormatTag.OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new o(r.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new o(r.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new o(r.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new o(r.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new o(r.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,22050,44100,2,16,e,e,!1);case"riff-22050hz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,22050,44100,2,16,e,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,44100,88200,2,16,e,e,!1);case"riff-44100hz-16bit-mono-pcm":return new o(r.AudioFormatTag.PCM,1,44100,88200,2,16,e,"raw-44100hz-16bit-mono-pcm",!0);default:return new o(r.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return o.fromSpeechSynthesisOutputFormatString("undefined"!==typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){const t=new DataView(this.privHeader);t.setUint32(4,e+this.privHeader.byteLength-8,!0),t.setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(e){if(!this.hasHeader)return e;this.updateHeader(e.byteLength);const t=new Uint8Array(e.byteLength+this.header.byteLength);return t.set(new Uint8Array(this.header),0),t.set(new Uint8Array(e),this.header.byteLength),t.buffer}}t.AudioOutputFormatImpl=o,o.SpeechSynthesisOutputFormatToString={[i.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[i.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[i.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[i.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[i.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[i.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[i.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[i.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[i.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[i.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[i.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[i.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[i.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[i.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[i.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[i.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm"}},6625:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamImpl=t.PushAudioOutputStream=t.PullAudioOutputStreamImpl=t.PullAudioOutputStream=t.AudioOutputStream=void 0;const r=n(6606),o=n(3720),s=n(2231);class a{constructor(){}static createPullStream(){return l.create()}}t.AudioOutputStream=a;class l extends a{static create(){return new u}}t.PullAudioOutputStream=l;class u extends l{constructor(){super(),this.privId=r.createNoDashGuid(),this.privStream=new r.Stream}set format(e){void 0!==e&&null!==e||(this.privFormat=s.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return i(this,void 0,void 0,(function*(){const t=new Int8Array(e);let n=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){const i=yield this.privStream.read();if(void 0===i||i.isEnd)this.privStream.readEnded();else{let r;i.buffer.byteLength>e.byteLength-n?(r=i.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(i.buffer.slice(e.byteLength-n))):r=i.buffer,t.set(new Int8Array(r),n),n+=r.byteLength}}return n}))}write(e){o.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}t.PullAudioOutputStreamImpl=u;class c extends a{constructor(){super()}static create(e){return new h(e)}}t.PushAudioOutputStream=c;class h extends c{constructor(e){super(),this.privId=r.createNoDashGuid(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}t.PushAudioOutputStreamImpl=h},9495:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0,function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw",e[e.FLAC=9]="FLAC",e[e.OPUS=10]="OPUS"}(n=t.AudioFormatTag||(t.AudioFormatTag={}));class i{static getDefaultInputFormat(){return r.getDefaultInputFormat()}static getWaveFormat(e,t,n,i){return new r(e,t,n,i)}static getWaveFormatPCM(e,t,n){return new r(e,t,n)}}t.AudioStreamFormat=i;class r extends i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.PCM;super();let o=!0;switch(r){case n.PCM:this.formatTag=1;break;case n.ALaw:this.formatTag=6;break;case n.MuLaw:this.formatTag=7;break;default:o=!1}if(this.bitsPerSample=t,this.samplesPerSec=e,this.channels=i,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),o){this.privHeader=new ArrayBuffer(44);const e=new DataView(this.privHeader);this.setString(e,0,"RIFF"),e.setUint32(4,0,!0),this.setString(e,8,"WAVEfmt "),e.setUint32(16,16,!0),e.setUint16(20,this.formatTag,!0),e.setUint16(22,this.channels,!0),e.setUint32(24,this.samplesPerSec,!0),e.setUint32(28,this.avgBytesPerSec,!0),e.setUint16(32,this.channels*(this.bitsPerSample/8),!0),e.setUint16(34,this.bitsPerSample,!0),this.setString(e,36,"data"),e.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new r}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(e,t,n){for(let i=0;i<n.length;i++)e.setUint8(t+i,n.charCodeAt(i))}}t.AudioStreamFormatImpl=r},1292:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAudioPlayer=void 0;const r=n(6943),o=n(7419),s=n(9495);t.BaseAudioPlayer=class{constructor(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=o.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}playAudioSample(e,t,n){try{this.ensureInitializedContext();const n=this.formatAudioData(e),i=new Float32Array(this.samples.length+n.length);i.set(this.samples,0),i.set(n,this.samples.length),this.samples=i,t&&t()}catch(i){n&&n(i)}}stopAudio(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.audioContext=null)}init(e){this.audioFormat=e,this.samples=new Float32Array}ensureInitializedContext(){if(null===this.audioContext){this.createAudioContext();const e=200;this.autoUpdateBufferTimer=setInterval((()=>{this.updateAudioBuffer()}),e)}}createAudioContext(){this.audioContext=s.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new r.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(e,t){const n=new Float32Array(e.length);for(let i=0;i<e.length;i++)n[i]=e[i]/t;return n}updateAudioBuffer(){if(0===this.samples.length)return;const e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),n=this.samples.length/e,i=this.audioContext.createBuffer(e,n,this.audioFormat.samplesPerSec);for(let r=0;r<e;r++){let t=r;const n=i.getChannelData(r);for(let i=0;i<this.samples.length;i++,t+=e)n[i]=this.samples[t]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=i,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=i.duration,this.samples=new Float32Array}playAudio(e){return i(this,void 0,void 0,(function*(){null===this.audioContext&&this.createAudioContext();const t=this.audioContext.createBufferSource(),n=this.audioContext.destination;yield this.audioContext.decodeAudioData(e,(e=>{t.buffer=e,t.connect(n),t.start(0)}))}))}}},4319:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamCallback=void 0;t.PullAudioInputStreamCallback=class{}},4830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamCallback=void 0;t.PushAudioOutputStreamCallback=class{}},3637:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerAudioDestination=void 0;const r=n(6606),o=n(6625),s=n(9495),a={[s.AudioFormatTag.PCM]:"audio/wav",[s.AudioFormatTag.MuLaw]:"audio/x-wav",[s.AudioFormatTag.MP3]:"audio/mpeg",[s.AudioFormatTag.OGG_OPUS]:"audio/ogg",[s.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[s.AudioFormatTag.ALaw]:"audio/x-wav",[s.AudioFormatTag.FLAC]:"audio/flac"};t.SpeakerAudioDestination=class{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||r.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,n){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then((()=>{t&&t()}),(e=>{n&&n(e)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((()=>{e&&e()}),(e=>{t&&t(e)}));else if(void 0!==this.privAudioOutputStream&&"undefined"!==typeof window)if(this.privFormat.formatTag!==s.AudioFormatTag.PCM&&this.privFormat.formatTag!==s.AudioFormatTag.MuLaw&&this.privFormat.formatTag!==s.AudioFormatTag.ALaw||!1!==this.privFormat.hasHeader){let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then((()=>{n=this.privFormat.addHeader(n);const i=new Blob([n],{type:a[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then((()=>{e&&e()}),(e=>{t&&t(e)}))}),(e=>{t&&t(e)}))}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)}set format(e){if("undefined"!==typeof AudioContext||"undefined"!==typeof window&&"undefined"!==typeof window.webkitAudioContext){this.privFormat=e;const t=a[this.privFormat.formatTag];void 0===t?console.warn("Unknown mimeType for format ".concat(s.AudioFormatTag[this.privFormat.formatTag],"; playback is not supported.")):"undefined"!==typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch((e=>{r.Events.instance.onEvent(new r.BackgroundEvent(e))}))},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch((e=>{r.Events.instance.onEvent(new r.BackgroundEvent(e))}))},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((e=>{r.Events.instance.onEvent(new r.BackgroundEvent(e))}))):(console.warn("Format ".concat(s.AudioFormatTag[this.privFormat.formatTag]," could not be played by MSE, streaming playback is not enabled.")),this.privAudioOutputStream=new o.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var e,t;return null!==(t=null===(e=this.privAudio)||void 0===e?void 0:e.volume)&&void 0!==t?t:-1}set volume(e){this.privAudio&&(this.privAudio.volume=e)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return i(this,void 0,void 0,(function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch(e){return this.privAudioBuffer.unshift(t),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())}))}handleSourceBufferUpdateEnd(){return i(this,void 0,void 0,(function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())}))}notifyPlayback(){return i(this,void 0,void 0,(function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()))}))}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}},6434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageConfig=void 0;const i=n(9831),r=n(3720),o=n(7419),s=n(484);class a{constructor(){this.privProperties=new o.PropertyCollection,this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=s.LanguageIdMode.AtStart}static fromOpenRange(){const e=new a;return e.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,i.AutoDetectSourceLanguagesOpenRangeOptionName),e}static fromLanguages(e){r.Contracts.throwIfArrayEmptyOrWhitespace(e,"languages");const t=new a;return t.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.join()),t}static fromSourceLanguageConfigs(e){if(e.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const t=new a,n=[];return e.forEach((e=>{if(n.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){const n=e.language+o.PropertyId.SpeechServiceConnection_EndpointId.toString();t.properties.setProperty(n,e.endpointId)}})),t.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,n.join()),t}get properties(){return this.privProperties}set mode(e){e===s.LanguageIdMode.Continuous?(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=e}}t.AutoDetectSourceLanguageConfig=a},4642:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageResult=void 0;const i=n(3720);class r{constructor(e,t){i.Contracts.throwIfNullOrUndefined(e,"language"),i.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}static fromResult(e){return new r(e.language,e.languageDetectionConfidence)}static fromConversationTranscriptionResult(e){return new r(e.language,e.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}t.AutoDetectSourceLanguageResult=r},5002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarConfig=void 0;const i=n(3720),r=n(7419);t.AvatarConfig=class{constructor(e,t,n){this.privCustomized=!1,i.Contracts.throwIfNullOrWhitespace(e,"character"),this.character=e,this.style=t,void 0===n&&(n=new r.AvatarVideoFormat),this.videoFormat=n}get customized(){return this.privCustomized}set customized(e){this.privCustomized=e}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(e){this.privBackgroundColor=e}}},993:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarEventArgs=t.AvatarEventTypes=void 0,function(e){e.SwitchedToSpeaking="SwitchedToSpeaking",e.SwitchedToIdle="SwitchedToIdle",e.SessionClosed="SessionClosed"}(t.AvatarEventTypes||(t.AvatarEventTypes={}));t.AvatarEventArgs=class{constructor(e,t){this.privOffset=e,this.privDescription=t}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}},3508:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarSynthesizer=void 0;const r=n(8587),o=n(9831),s=n(6606),a=n(2231),l=n(7419),u=n(3720),c=n(8554);class h extends l.Synthesizer{constructor(e,t){super(e),u.Contracts.throwIfNullOrUndefined(t,"avatarConfig"),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.privAvatarConfig=t,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=a.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(l.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}startAvatarAsync(e){return i(this,void 0,void 0,(function*(){u.Contracts.throwIfNullOrUndefined(e,"peerConnection"),this.privIceServers=e.getConfiguration().iceServers,u.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const t=new s.Deferred;e.onicegatheringstatechange=()=>{s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering state: "+e.iceGatheringState,s.EventType.Debug)),"complete"===e.iceGatheringState&&(s.Events.instance.onEvent(new s.PlatformEvent("peer connection: ice gathering complete.",s.EventType.Info)),t.resolve())};const n=yield e.createOffer();yield e.setLocalDescription(n),yield t.promise,s.Events.instance.onEvent(new s.PlatformEvent("peer connection: got local SDP.",s.EventType.Info)),this.privProperties.setProperty(l.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(e.localDescription));const i=yield this.speak("",!1);if(i.reason!==l.ResultReason.SynthesizingAudioCompleted)return new l.SynthesisResult(i.resultId,i.reason,i.errorDetails,i.properties);const r=atob(i.properties.getProperty(l.PropertyId.TalkingAvatarService_WebRTC_SDP)),o=new RTCSessionDescription(JSON.parse(r));return yield e.setRemoteDescription(o),new l.SynthesisResult(i.resultId,i.reason,void 0,i.properties)}))}speakTextAsync(e){return i(this,void 0,void 0,(function*(){const t=yield this.speak(e,!1);return new l.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)}))}speakSsmlAsync(e){return i(this,void 0,void 0,(function*(){const t=yield this.speak(e,!0);return new l.SynthesisResult(t.resultId,t.reason,t.errorDetails,t.properties)}))}stopSpeakingAsync(){return i(this,void 0,void 0,(function*(){for(;this.synthesisRequestQueue.length()>0;){(yield this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.")}return this.privAdapter.stopSpeaking()}))}stopAvatarAsync(){return i(this,void 0,void 0,(function*(){return u.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}))}close(){return i(this,void 0,void 0,(function*(){if(!this.privDisposed)return this.dispose(!0)}))}get iceServers(){return this.privIceServers}createSynthesisAdapter(e,t,n){return new o.AvatarSynthesisAdapter(e,t,n,this,this.privAvatarConfig)}createRestSynthesisAdapter(e,t){}createSynthesizerConfig(e){const t=super.createSynthesizerConfig(e);return t.avatarEnabled=!0,t}speak(e,t){return i(this,void 0,void 0,(function*(){const n=s.createNoDashGuid(),i=new s.Deferred;return this.synthesisRequestQueue.enqueue(new c.SynthesisRequest(n,e,t,(e=>{i.resolve(e),this.privSynthesizing=!1,this.adapterSpeak()}),(e=>{i.reject(e),this.privSynthesizing=!1}))),this.adapterSpeak(),i.promise}))}}t.AvatarSynthesizer=h},236:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarVideoFormat=t.Coordinate=void 0;t.Coordinate=class{constructor(e,t){this.x=e,this.y=t}};t.AvatarVideoFormat=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"H264",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1920,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1080;this.codec=e,this.bitrate=t,this.width=n,this.height=i}setCropRange(e,t){this.cropRange={bottomRight:t,topLeft:e}}}},9269:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvatarWebRTCConnectionResult=void 0;const i=n(7419);class r extends i.SynthesisResult{constructor(e,t,n,i,r){super(t,n,i,r),this.privSDPAnswer=e}get SDPAnswer(){return this.privSDPAnswer}}t.AvatarWebRTCConnectionResult=r},8973:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BotFrameworkConfig=void 0;const i=n(3720),r=n(172),o=n(7419);class s extends r.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"subscription"),i.Contracts.throwIfNullOrWhitespace(t,"region");const s=new r.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(o.PropertyId.SpeechServiceConnection_Key,e),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n&&s.setProperty(o.PropertyId.Conversation_ApplicationId,n),s}static fromAuthorizationToken(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(t,"region");const s=new r.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n&&s.setProperty(o.PropertyId.Conversation_ApplicationId,n),s}static fromHost(e,t,n){i.Contracts.throwIfNullOrUndefined(e,"host");const s=e instanceof URL?e:new URL("wss://".concat(e,".convai.speech.azure.us"));i.Contracts.throwIfNullOrUndefined(s,"resolvedHost");const a=new r.DialogServiceConfigImpl;return a.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.BotFramework),a.setProperty(o.PropertyId.SpeechServiceConnection_Host,s.toString()),void 0!==t&&a.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),a}static fromEndpoint(e,t){i.Contracts.throwIfNull(e,"endpoint");const n=new r.DialogServiceConfigImpl;return n.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&n.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}}t.BotFrameworkConfig=s},5049:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetails=void 0;const i=n(9831),r=n(9342),o=n(7419);class s extends r.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(e){let t=o.CancellationReason.Error,n=o.CancellationErrorCode.NoError;if(e instanceof o.RecognitionResult&&e.json){const n=i.SimpleSpeechPhrase.fromJSON(e.json);t=i.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus)}return e.properties&&(n=o.CancellationErrorCode[e.properties.getProperty(i.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.NoError])]),new s(t,e.errorDetails||i.EnumTranslation.implTranslateErrorDetails(n),n)}}t.CancellationDetails=s},9342:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetailsBase=void 0;t.CancellationDetailsBase=class{constructor(e,t,n){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}},1717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(t.CancellationErrorCode||(t.CancellationErrorCode={}))},1601:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationEventArgsBase=void 0;const i=n(7419);class r extends i.RecognitionEventArgs{constructor(e,t,n,i,r){super(i,r),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}t.CancellationEventArgsBase=r},8561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(t.CancellationReason||(t.CancellationReason={}))},7826:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;const i=n(9831),r=n(6606),o=n(697),s=n(3720),a=n(7419);class l{static fromRecognizer(e){const t=e.internalData,n=new l;return n.privInternalData=t,n.setupEvents(),n}static fromSynthesizer(e){const t=e.internalData,n=new l;return n.privInternalData=t,n.setupEvents(),n}openConnection(e,t){r.marshalPromiseToCallbacks(this.privInternalData.connect(),e,t)}closeConnection(e,t){if(this.privInternalData instanceof i.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");r.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,t)}setMessageProperty(e,t,n){if(s.Contracts.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof i.ServiceRecognizerBase){if("speech.context"!==e.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,n)}else if(this.privInternalData instanceof i.SynthesisAdapterBase){if("synthesis.context"!==e.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,n)}}sendMessageAsync(e,t,n,i){r.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,t),n,i)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach((e=>{"ConnectionEstablishedEvent"===e.name?this.connected&&this.connected(new a.ConnectionEventArgs(e.connectionId)):"ConnectionClosedEvent"===e.name?this.disconnected&&this.disconnected(new a.ConnectionEventArgs(e.connectionId)):"ConnectionMessageSentEvent"===e.name?this.messageSent&&this.messageSent(new a.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(e.message))):"ConnectionMessageReceivedEvent"===e.name&&this.messageReceived&&this.messageReceived(new a.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(e.message)))})),this.privServiceEventListener=this.privInternalData.serviceEvents.attach((e=>{this.receivedServiceMessage&&this.receivedServiceMessage(new a.ServiceEventArgs(e.jsonString,e.name))}))}}t.Connection=l},1663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionEventArgs=void 0;const i=n(7419);class r extends i.SessionEventArgs{}t.ConnectionEventArgs=r},697:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageImpl=t.ConnectionMessage=void 0;const i=n(4891),r=n(6606),o=n(9621),s=n(5188);t.ConnectionMessage=class{};t.ConnectionMessageImpl=class{constructor(e){this.privConnectionMessage=e,this.privProperties=new o.PropertyCollection,this.privConnectionMessage.headers[i.HeaderNames.ConnectionId]&&this.privProperties.setProperty(s.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[i.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach((e=>{this.privProperties.setProperty(e,this.privConnectionMessage.headers[e])}))}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find((e=>e.toLowerCase()==="path".toLowerCase()))]}get isTextMessage(){return this.privConnectionMessage.messageType===r.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===r.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}},9990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageEventArgs=void 0;t.ConnectionMessageEventArgs=class{constructor(e){this.privConnectionMessage=e}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}},3720:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Contracts=void 0;class n{static throwIfNullOrUndefined(e,t){if(void 0===e||null===e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(n.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfNullOrTooLong(e,t,i){if(n.throwIfNullOrUndefined(e,t),(""+e).length>i)throw new Error("throwIfNullOrTooLong:"+t+" (more than "+i.toString()+" characters)")}static throwIfNullOrTooShort(e,t,i){if(n.throwIfNullOrUndefined(e,t),(""+e).length<i)throw new Error("throwIfNullOrTooShort:"+t+" (less than "+i.toString()+" characters)")}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(n.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const i of e)n.throwIfNullOrWhitespace(i,t)}static throwIfFileDoesNotExist(e,t){n.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}t.Contracts=n},6989:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionCanceledEventArgs=void 0;const i=n(1601);class r extends i.CancellationEventArgsBase{}t.ConversationTranscriptionCanceledEventArgs=r},8705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCommandsConfig=void 0;const i=n(3720),r=n(172),o=n(7419);class s extends r.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"applicationId"),i.Contracts.throwIfNullOrWhitespace(t,"subscription"),i.Contracts.throwIfNullOrWhitespace(n,"region");const s=new r.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.CustomCommands),s.setProperty(o.PropertyId.Conversation_ApplicationId,e),s.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),s}static fromAuthorizationToken(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"applicationId"),i.Contracts.throwIfNullOrWhitespace(t,"authorizationToken"),i.Contracts.throwIfNullOrWhitespace(n,"region");const s=new r.DialogServiceConfigImpl;return s.setProperty(o.PropertyId.Conversation_DialogType,r.DialogServiceConfig.DialogTypes.CustomCommands),s.setProperty(o.PropertyId.Conversation_ApplicationId,e),s.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,t),s.setProperty(o.PropertyId.SpeechServiceConnection_Region,n),s}set applicationId(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(o.PropertyId.Conversation_ApplicationId,e)}get applicationId(){return this.getProperty(o.PropertyId.Conversation_ApplicationId)}}t.CustomCommandsConfig=s},8579:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Diagnostics=void 0;const i=n(4583),r=n(6606);class o{static SetLoggingLevel(e){this.privListener=new i.ConsoleLoggingListener(e),r.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(e){if("undefined"!==typeof window)throw new Error("File system logging not available in browser.");this.privListener&&(this.privListener.logPath=e)}}t.Diagnostics=o,o.privListener=void 0},172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConfigImpl=t.DialogServiceConfig=void 0;const i=n(3720),r=n(7419);class o{constructor(){}set applicationId(e){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}}t.DialogServiceConfig=o;t.DialogServiceConfigImpl=class extends o{constructor(){super(),this.privSpeechConfig=new r.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(e){i.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(e){this.privSpeechConfig.outputFormat=e}setProperty(e,t){this.privSpeechConfig.setProperty(e,t)}getProperty(e,t){return this.privSpeechConfig.getProperty(e)}setProxy(e,t,n,i){this.setProperty(r.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(r.PropertyId.SpeechServiceConnection_ProxyPort,"".concat(t)),n&&this.setProperty(r.PropertyId.SpeechServiceConnection_ProxyUserName,n),i&&this.setProperty(r.PropertyId.SpeechServiceConnection_ProxyPassword,i)}setServiceProperty(e,t,n){this.privSpeechConfig.setServiceProperty(e,t)}close(){}}},9506:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConnector=void 0;const r=n(4429),o=n(9831),s=n(6606),a=n(3720),l=n(7419),u=n(5188);class c extends l.Recognizer{constructor(e,t){const n=e;a.Contracts.throwIfNull(e,"dialogConfig"),super(t,n.properties,new r.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=n.properties.clone();const i=this.buildAgentConfig();this.privReco.agentConfig.set(i)}connect(e,t){s.marshalPromiseToCallbacks(this.privReco.connect(),e,t)}disconnect(e,t){s.marshalPromiseToCallbacks(this.privReco.disconnect(),e,t)}get authorizationToken(){return this.properties.getProperty(u.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(u.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(u.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(e){this.properties.setProperty(u.PropertyId.Conversation_Speech_Activity_Template,e)}listenOnceAsync(e,t){if(this.isTurnComplete){a.Contracts.throwIfDisposed(this.privIsDisposed);const n=(()=>i(this,void 0,void 0,(function*(){yield this.privReco.connect(),yield this.implRecognizerStop(),this.isTurnComplete=!1;const e=new s.Deferred;yield this.privReco.recognize(o.RecognitionMode.Conversation,e.resolve,e.reject);const t=yield e.promise;return yield this.implRecognizerStop(),t})))();n.catch((()=>{this.dispose(!0).catch((()=>{}))})),s.marshalPromiseToCallbacks(n.finally((()=>{this.isTurnComplete=!0})),e,t)}}sendActivityAsync(e,t,n){s.marshalPromiseToCallbacks(this.privReco.sendMessage(e),t,n)}close(e,t){a.Contracts.throwIfDisposed(this.privIsDisposed),s.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){this.privIsDisposed||e&&(this.privIsDisposed=!0,yield this.implRecognizerStop(),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new o.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,i){const r=n;return new o.DialogServiceAdapter(e,t,r,i,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(u.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(u.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(u.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(u.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}}t.DialogServiceConnector=c},7419:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1566);Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return i.AudioConfig}});var r=n(9495);Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(t,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var o=n(2065);Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return o.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return o.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return o.PushAudioInputStream}});var s=n(6625);Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return s.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return s.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return s.PushAudioOutputStream}});var a=n(8561);Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return a.CancellationReason}});var l=n(4319);Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return l.PullAudioInputStreamCallback}});var u=n(4830);Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return u.PushAudioOutputStreamCallback}});var c=n(1399);Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var h=n(3071);Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return h.SessionEventArgs}});var p=n(4762);Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return p.RecognitionEventArgs}});var d=n(2616);Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return d.OutputFormat}});var f=n(3213);Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return f.IntentRecognitionEventArgs}});var m=n(6274);Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return m.RecognitionResult}});var g=n(1405);Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return g.SpeechRecognitionResult}});var v=n(6796);Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return v.IntentRecognitionResult}});var y=n(2600);Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var S=n(1542);Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return S.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return S.ConversationTranscriptionEventArgs}}),Object.defineProperty(t,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return S.MeetingTranscriptionEventArgs}});var R=n(9401);Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return R.SpeechRecognitionCanceledEventArgs}});var w=n(2442);Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return w.TranslationRecognitionEventArgs}});var L=n(4992);Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return L.TranslationSynthesisEventArgs}});var b=n(6234);Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return b.TranslationRecognitionResult}});var C=n(120);Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return C.TranslationSynthesisResult}});var _=n(7446);Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return _.ResultReason}});var A=n(7847);Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return A.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return A.SpeechConfigImpl}});var E=n(709);Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return E.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return E.SpeechTranslationConfigImpl}});var x=n(9621);Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return x.PropertyCollection}});var P=n(5188);Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return P.PropertyId}});var T=n(2636);Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return T.Recognizer}});var M=n(6368);Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return M.SpeechRecognizer}});var k=n(8367);Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return k.IntentRecognizer}});var I=n(1081);Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return I.VoiceProfileType}});var D=n(6419);Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return D.TranslationRecognizer}});var O=n(3237);Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return O.Translations}});var B=n(1570);Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return B.NoMatchReason}});var U=n(2773);Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return U.NoMatchDetails}});var N=n(1355);Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return N.TranslationRecognitionCanceledEventArgs}});var F=n(901);Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return F.IntentRecognitionCanceledEventArgs}});var z=n(9342);Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return z.CancellationDetailsBase}});var j=n(5049);Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return j.CancellationDetails}});var H=n(1717);Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return H.CancellationErrorCode}});var G=n(1663);Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return G.ConnectionEventArgs}});var W=n(9028);Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return W.ServiceEventArgs}});var q=n(7826);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return q.Connection}});var V=n(6410);Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return V.PhraseListGrammar}});var J=n(172);Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return J.DialogServiceConfig}});var K=n(8973);Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return K.BotFrameworkConfig}});var X=n(8705);Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return X.CustomCommandsConfig}});var Y=n(9506);Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return Y.DialogServiceConnector}});var Q=n(9605);Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Q.ActivityReceivedEventArgs}});var Z=n(6414);Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Z.TurnStatusReceivedEventArgs}});var $=n(9263);Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return $.ServicePropertyChannel}});var ee=n(3770);Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return ee.ProfanityOption}});var te=n(1292);Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return te.BaseAudioPlayer}});var ne=n(9990);Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return ne.ConnectionMessageEventArgs}});var ie=n(697);Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return ie.ConnectionMessage}});var re=n(7665);Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return re.VoiceProfile}});var oe=n(3900);Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return oe.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return oe.VoiceProfileEnrollmentCancellationDetails}});var se=n(1462);Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return se.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return se.VoiceProfileCancellationDetails}});var ae=n(5129);Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return ae.VoiceProfilePhraseResult}});var le=n(9496);Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return le.VoiceProfileClient}});var ue=n(130);Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return ue.SpeakerRecognizer}});var ce=n(6205);Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return ce.SpeakerIdentificationModel}});var he=n(250);Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return he.SpeakerVerificationModel}});var pe=n(6434);Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return pe.AutoDetectSourceLanguageConfig}});var de=n(4642);Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return de.AutoDetectSourceLanguageResult}});var fe=n(564);Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return fe.SourceLanguageConfig}});var me=n(7356);Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return me.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return me.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return me.SpeakerRecognitionCancellationDetails}});var ge=n(4659);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return ge.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return ge.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return ge.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return ge.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return ge.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return ge.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return ge.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return ge.ConversationTranscriber}}),Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return ge.ConversationTranscriptionResult}}),Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return ge.Meeting}}),Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return ge.MeetingTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return ge.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return ge.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return ge.User}});var ve=n(8554);Object.defineProperty(t,"Synthesizer",{enumerable:!0,get:function(){return ve.Synthesizer}});var ye=n(4848);Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return ye.SpeechSynthesisOutputFormat}});var Se=n(290);Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return Se.SpeechSynthesizer}});var Re=n(1034);Object.defineProperty(t,"SynthesisResult",{enumerable:!0,get:function(){return Re.SynthesisResult}});var we=n(4379);Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return we.SpeechSynthesisResult}});var Le=n(7521);Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return Le.SpeechSynthesisEventArgs}});var be=n(93);Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return be.SpeechSynthesisWordBoundaryEventArgs}});var Ce=n(7264);Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Ce.SpeechSynthesisBookmarkEventArgs}});var _e=n(1918);Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return _e.SpeechSynthesisVisemeEventArgs}});var Ae=n(9625);Object.defineProperty(t,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return Ae.SpeechSynthesisBoundaryType}});var Ee=n(9009);Object.defineProperty(t,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Ee.SynthesisVoicesResult}});var xe=n(8359);Object.defineProperty(t,"VoiceInfo",{enumerable:!0,get:function(){return xe.VoiceInfo}});var Pe=n(3637);Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return Pe.SpeakerAudioDestination}});var Te=n(6989);Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Te.ConversationTranscriptionCanceledEventArgs}});var Me=n(451);Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return Me.MeetingTranscriptionCanceledEventArgs}});var ke=n(9992);Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return ke.PronunciationAssessmentGradingSystem}});var Ie=n(6523);Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Ie.PronunciationAssessmentGranularity}});var De=n(8675);Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return De.PronunciationAssessmentConfig}});var Oe=n(6249);Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Oe.PronunciationAssessmentResult}});var Be=n(484);Object.defineProperty(t,"LanguageIdMode",{enumerable:!0,get:function(){return Be.LanguageIdMode}});var Ue=n(5002);Object.defineProperty(t,"AvatarConfig",{enumerable:!0,get:function(){return Ue.AvatarConfig}});var Ne=n(993);Object.defineProperty(t,"AvatarEventArgs",{enumerable:!0,get:function(){return Ne.AvatarEventArgs}});var Fe=n(3508);Object.defineProperty(t,"AvatarSynthesizer",{enumerable:!0,get:function(){return Fe.AvatarSynthesizer}});var ze=n(236);Object.defineProperty(t,"AvatarVideoFormat",{enumerable:!0,get:function(){return ze.AvatarVideoFormat}}),Object.defineProperty(t,"Coordinate",{enumerable:!0,get:function(){return ze.Coordinate}});var je=n(9269);Object.defineProperty(t,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return je.AvatarWebRTCConnectionResult}});var He=n(8579);Object.defineProperty(t,"Diagnostics",{enumerable:!0,get:function(){return He.Diagnostics}});var Ge=n(4533);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return Ge.LogLevel}})},901:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionCanceledEventArgs=void 0;const i=n(7419);class r extends i.IntentRecognitionEventArgs{constructor(e,t,n,i,r,o){super(i,r,o),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}t.IntentRecognitionCanceledEventArgs=r},3213:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionEventArgs=void 0;const i=n(7419);class r extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.IntentRecognitionEventArgs=r},6796:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionResult=void 0;const i=n(7419);class r extends i.SpeechRecognitionResult{constructor(e,t,n,i,r,o,s,a,l,u,c){super(t,n,i,r,o,s,a,void 0,l,u,c),this.privIntentId=e}get intentId(){return this.privIntentId}}t.IntentRecognitionResult=r},8367:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognizer=void 0;const r=n(9831),o=n(6606),s=n(3720),a=n(7419);class l extends a.Recognizer{constructor(e,t){s.Contracts.throwIfNullOrUndefined(e,"speechConfig");const n=e;s.Contracts.throwIfNullOrUndefined(n,"speechConfig"),super(t,n.properties,new r.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=n.properties,s.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e,t){if(s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars);this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}o.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(r.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){const e=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",e.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(e.ReferenceGrammars);this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}o.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){o.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,n){s.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){if(e)try{e()}catch(n){t&&t(n)}}addIntent(e,t){s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),s.Contracts.throwIfNullOrWhitespace(t,"intentId"),s.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])}addIntentWithLanguageModel(e,t,n){s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),s.Contracts.throwIfNullOrWhitespace(e,"intentId"),s.Contracts.throwIfNull(t,"model");const i=t;s.Contracts.throwIfNullOrWhitespace(i.appId,"model.appId"),this.privAddedLmIntents[e]=new r.AddedLmIntent(i,n)}addAllIntents(e,t){s.Contracts.throwIfNull(e,"model");const n=e;s.Contracts.throwIfNullOrWhitespace(n.appId,"model.appId"),this.privUmbrellaIntent=new r.AddedLmIntent(n,t)}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,i){const o=n;return new r.IntentServiceRecognizer(e,t,o,i,this)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,yield t.dispose.call(this,e))}))}buildSpeechContext(){let e,t,n;const i=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,n=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const r of Object.keys(this.privAddedLmIntents)){const o=this.privAddedLmIntents[r];if(void 0===e)e=o.modelImpl.appId;else if(e!==o.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=o.modelImpl.region;else if(t!==o.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===n)n=o.modelImpl.subscriptionKey;else if(n!==o.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const s="luis/"+e+"-PRODUCTION#"+r;i.push(s)}return{Intent:{id:e,key:void 0===n?this.privProperties.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_Key]):n,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?i:["luis/"+e+"-PRODUCTION"]}}}t.IntentRecognizer=l},1399:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordRecognitionModel=void 0;const i=n(3720);t.KeywordRecognitionModel=class{constructor(){this.privDisposed=!1}static fromFile(e){throw i.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")}static fromStream(e){throw i.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}},484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageIdMode=void 0,function(e){e[e.AtStart=0]="AtStart",e[e.Continuous=1]="Continuous"}(t.LanguageIdMode||(t.LanguageIdMode={}))},2600:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageUnderstandingModelImpl=t.LanguageUnderstandingModel=void 0;const i=n(3720);class r{constructor(){}static fromEndpoint(e){i.Contracts.throwIfNull(e,"uri"),i.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");const t=new o,n=e.host.indexOf(".");if(-1===n)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,n);const r=e.pathname.lastIndexOf("/")+1;if(-1===r)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(r),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t}static fromAppId(e){i.Contracts.throwIfNullOrWhitespace(e,"appId");const t=new o;return t.appId=e,t}static fromSubscription(e,t,n){i.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(t,"appId"),i.Contracts.throwIfNullOrWhitespace(n,"region");const r=new o;return r.appId=t,r.region=n,r.subscriptionKey=e,r}}t.LanguageUnderstandingModel=r;class o extends r{}t.LanguageUnderstandingModelImpl=o},4533:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0;const i=n(6606);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return i.EventType}})},451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionCanceledEventArgs=void 0;const i=n(1601);class r extends i.CancellationEventArgsBase{}t.MeetingTranscriptionCanceledEventArgs=r},2773:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchDetails=void 0;const i=n(9831),r=n(7419);class o{constructor(e){this.privReason=e}static fromResult(e){const t=i.SimpleSpeechPhrase.fromJSON(e.json);let n=r.NoMatchReason.NotRecognized;switch(t.RecognitionStatus){case i.RecognitionStatus.BabbleTimeout:n=r.NoMatchReason.InitialBabbleTimeout;break;case i.RecognitionStatus.InitialSilenceTimeout:n=r.NoMatchReason.InitialSilenceTimeout;break;default:n=r.NoMatchReason.NotRecognized}return new o(n)}get reason(){return this.privReason}}t.NoMatchDetails=o},1570:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(t.NoMatchReason||(t.NoMatchReason={}))},2616:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.OutputFormat||(t.OutputFormat={}))},6410:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhraseListGrammar=void 0;class n{constructor(e){this.privGrammerBuilder=e.dynamicGrammar}static fromRecognizer(e){const t=e.internalData;return new n(t)}addPhrase(e){this.privGrammerBuilder.addPhrase(e)}addPhrases(e){this.privGrammerBuilder.addPhrase(e)}clear(){this.privGrammerBuilder.clearPhrases()}}t.PhraseListGrammar=n},3770:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(t.ProfanityOption||(t.ProfanityOption={}))},8675:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentConfig=void 0;const i=n(3720),r=n(7419);class o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.PronunciationAssessmentGradingSystem.FivePoint,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.PronunciationAssessmentGranularity.Phoneme,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_GradingSystem,r.PronunciationAssessmentGradingSystem[t]),this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_Granularity,r.PronunciationAssessmentGranularity[n]),this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}static fromJSON(e){i.Contracts.throwIfNullOrUndefined(e,"json");const t=new o("");return t.privProperties=new r.PropertyCollection,t.properties.setProperty(r.PropertyId.PronunciationAssessment_Json,e),t}toJSON(){return this.updateJson(),this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_Params)}applyTo(e){this.updateJson();const t=e.internalData;t.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,t.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(r.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,t.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(r.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(e){i.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(r.PropertyId.PronunciationAssessment_ReferenceText,e)}set phonemeAlphabet(e){i.Contracts.throwIfNullOrWhitespace(e,"phonemeAlphabet"),this.privPhonemeAlphabet=e}set enableMiscue(e){const t=e?"true":"false";this.properties.setProperty(r.PropertyId.PronunciationAssessment_EnableMiscue,t)}get enableMiscue(){return"true"===this.properties.getProperty(r.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()}set nbestPhonemeCount(e){this.privNBestPhonemeCount=e}set enableProsodyAssessment(e){this.privEnableProsodyAssessment=e}enableContentAssessmentWithTopic(e){this.privContentAssessmentTopic=e}get properties(){return this.privProperties}updateJson(){const e=this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_Json,"{}"),t=JSON.parse(e),n=this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_ReferenceText);n&&(t.referenceText=n);const i=this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_GradingSystem);i&&(t.gradingSystem=i);const o=this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_Granularity);o&&(t.granularity=o),this.privPhonemeAlphabet&&(t.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(t.nbestPhonemeCount=this.privNBestPhonemeCount),t.enableProsodyAssessment=this.privEnableProsodyAssessment,t.dimension="Comprehensive";this.privProperties.getProperty(r.PropertyId.PronunciationAssessment_EnableMiscue)&&(t.enableMiscue=this.enableMiscue),this.privProperties.setProperty(r.PropertyId.PronunciationAssessment_Params,JSON.stringify(t))}}t.PronunciationAssessmentConfig=o},9992:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))},6523:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))},6249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentResult=t.ContentAssessmentResult=void 0;const i=n(3720),r=n(7419);class o{constructor(e){this.privPronJson=e}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}t.ContentAssessmentResult=o;class s{constructor(e){const t=JSON.parse(e);i.Contracts.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}static fromResult(e){i.Contracts.throwIfNullOrUndefined(e,"result");const t=e.properties.getProperty(r.PropertyId.SpeechServiceResponse_JsonResult);return i.Contracts.throwIfNullOrUndefined(t,"json"),new s(t)}get detailResult(){return this.privPronJson}get accuracyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.AccuracyScore}get pronunciationScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.PronScore}get completenessScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.CompletenessScore}get fluencyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.FluencyScore}get prosodyScore(){var e;return null===(e=this.detailResult.PronunciationAssessment)||void 0===e?void 0:e.ProsodyScore}get contentAssessmentResult(){if(void 0!==this.detailResult.ContentAssessment)return new o(this.detailResult)}}t.PronunciationAssessmentResult=s},9621:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyCollection=void 0;const i=n(7419);class r{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let n;n="string"===typeof e?e:i.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===n)return this.privValues[i];if(void 0!==t)return String(t)}setProperty(e,t){let n;n="string"===typeof e?e:i.PropertyId[e];for(let i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===n)return void(this.privValues[i]=t);this.privKeys.push(n),this.privValues.push(t)}clone(){const e=new r;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach((t=>{if(void 0===e.getProperty(t,void 0)){const n=this.getProperty(t);e.setProperty(t,n)}}))}get keys(){return this.privKeys}}t.PropertyCollection=r},5188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.Speech_SegmentationSilenceTimeoutMs=32]="Speech_SegmentationSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=33]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceConnection_LanguageIdMode=34]="SpeechServiceConnection_LanguageIdMode",e[e.SpeechServiceConnection_RecognitionEndpointVersion=35]="SpeechServiceConnection_RecognitionEndpointVersion",e[e.SpeechServiceConnection_SpeakerIdMode=36]="SpeechServiceConnection_SpeakerIdMode",e[e.SpeechServiceResponse_ProfanityOption=37]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=38]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=39]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=40]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=41]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=42]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.SpeechServiceResponse_RequestWordBoundary=43]="SpeechServiceResponse_RequestWordBoundary",e[e.SpeechServiceResponse_RequestPunctuationBoundary=44]="SpeechServiceResponse_RequestPunctuationBoundary",e[e.SpeechServiceResponse_RequestSentenceBoundary=45]="SpeechServiceResponse_RequestSentenceBoundary",e[e.Conversation_ApplicationId=46]="Conversation_ApplicationId",e[e.Conversation_DialogType=47]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=48]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=49]="Conversation_From_Id",e[e.Conversation_Conversation_Id=50]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=51]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=52]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=53]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=54]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=55]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=56]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=57]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=58]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=59]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=60]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=61]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=62]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=63]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=64]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=65]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=66]="SpeakerRecognition_Api_Version",e[e.WebWorkerLoadType=67]="WebWorkerLoadType",e[e.TalkingAvatarService_WebRTC_SDP=68]="TalkingAvatarService_WebRTC_SDP"}(t.PropertyId||(t.PropertyId={}))},4762:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEventArgs=void 0;const i=n(7419);class r extends i.SessionEventArgs{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}}t.RecognitionEventArgs=r},6274:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionResult=void 0;t.RecognitionResult=class{constructor(e,t,n,i,r,o,s,a,l,u){this.privResultId=e,this.privReason=t,this.privText=n,this.privDuration=i,this.privOffset=r,this.privLanguage=o,this.privLanguageDetectionConfidence=s,this.privErrorDetails=a,this.privJson=l,this.privProperties=u}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}},2636:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Recognizer=void 0;const r=n(9831),o=n(6606),s=n(3720),a=n(7419);class l{constructor(e,t,n){this.audioConfig=void 0!==e?e:a.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=n,this.implCommonRecognizerSetup()}close(e,t){s.Contracts.throwIfDisposed(this.privDisposed),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privReco}dispose(e){return i(this,void 0,void 0,(function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))}))}static get telemetryEnabled(){return r.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){r.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!==typeof window?"Browser":"Node",t="unknown",n="unknown";"undefined"!==typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,n=navigator.appVersion);const i=this.createRecognizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(e,t,n))));this.privReco=this.createServiceRecognizer(l.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,i)}recognizeOnceAsyncImpl(e){return i(this,void 0,void 0,(function*(){s.Contracts.throwIfDisposed(this.privDisposed);const t=new o.Deferred;yield this.implRecognizerStop(),yield this.privReco.recognize(e,t.resolve,t.reject);const n=yield t.promise;return yield this.implRecognizerStop(),n}))}startContinuousRecognitionAsyncImpl(e){return i(this,void 0,void 0,(function*(){s.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)}))}stopContinuousRecognitionAsyncImpl(){return i(this,void 0,void 0,(function*(){s.Contracts.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()}))}implRecognizerStop(){return i(this,void 0,void 0,(function*(){this.privReco&&(yield this.privReco.stopRecognizing())}))}static getAuthFromProperties(e){const t=e.getProperty(a.PropertyId.SpeechServiceConnection_Key,void 0);return t&&""!==t?new r.CognitiveSubscriptionKeyAuthentication(t):new r.CognitiveTokenAuthentication((()=>{const t=e.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}),(()=>{const t=e.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(t)}))}}t.Recognizer=l},7446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile",e[e.VoicesListRetrieved=18]="VoicesListRetrieved",e[e.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",e[e.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",e[e.TranslatedInstantMessage=21]="TranslatedInstantMessage",e[e.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(t.ResultReason||(t.ResultReason={}))},9028:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceEventArgs=void 0;const i=n(7419);class r extends i.SessionEventArgs{constructor(e,t,n){super(n),this.privJsonResult=e,this.privEventName=t}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}}t.ServiceEventArgs=r},9263:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))},3071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionEventArgs=void 0;t.SessionEventArgs=class{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}},564:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceLanguageConfig=void 0;const i=n(3720);class r{constructor(e,t){i.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}static fromLanguage(e,t){return new r(e,t)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}t.SourceLanguageConfig=r},6205:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerIdentificationModel=void 0;const i=n(3720),r=n(7419);class o{constructor(e){if(this.privVoiceProfiles=[],this.privProfileIds=[],i.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw new Error("Empty Voice Profiles array");for(const t of e){if(t.profileType!==r.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+t.profileId);this.privVoiceProfiles.push(t),this.privProfileIds.push(t.profileId)}}static fromProfiles(e){return new o(e)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}}t.SpeakerIdentificationModel=o},7356:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;const i=n(9831),r=n(7419);var o;!function(e){e[e.Verify=0]="Verify",e[e.Identify=1]="Identify"}(o=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));t.SpeakerRecognitionResult=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.ResultReason.RecognizedSpeaker,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.CancellationErrorCode.NoError,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.privProperties=new r.PropertyCollection;const a="TextIndependentIdentification"===e.scenario?o.Identify:o.Verify;this.privReason=t,this.privReason!==r.ResultReason.Canceled?a===o.Identify?(this.privProfileId=e.identificationResult.identifiedProfile.profileId,this.privScore=e.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=e.verificationResult.score,"accept"!==e.verificationResult.recognitionResult.toLowerCase()&&(this.privReason=r.ResultReason.NoMatch),void 0!==e.verificationResult.profileId&&""!==e.verificationResult.profileId&&(this.privProfileId=e.verificationResult.profileId)):(this.privErrorDetails=s,this.privProperties.setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[n])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(e))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}};class s extends r.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(e){const t=r.CancellationReason.Error;let n=r.CancellationErrorCode.NoError;return e.properties&&(n=r.CancellationErrorCode[e.properties.getProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(t,e.errorDetails,n)}}t.SpeakerRecognitionCancellationDetails=s},130:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognizer=void 0;const r=n(9831),o=n(3720),s=n(7419);class a extends s.Recognizer{constructor(e,t){o.Contracts.throwIfNullOrUndefined(e,"speechConfig");const n=e;o.Contracts.throwIfNullOrUndefined(n,"speechConfig"),super(t,n.properties,new r.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=t,o.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=n.properties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){o.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}recognizeOnceAsync(e){return i(this,void 0,void 0,(function*(){return o.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(e)}))}close(){return i(this,void 0,void 0,(function*(){o.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.dispose(!0)}))}recognizeSpeakerOnceAsyncImpl(e){return i(this,void 0,void 0,(function*(){o.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),yield this.implRecognizerStop();const t=yield this.privReco.recognizeSpeaker(e);return yield this.implRecognizerStop(),t}))}implRecognizerStop(){return i(this,void 0,void 0,(function*(){this.privReco&&(yield this.privReco.stopRecognizing())}))}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,i){const o=n;return new r.SpeakerServiceRecognizer(e,t,o,i,this)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){this.privDisposedSpeakerRecognizer||e&&(this.privDisposedSpeakerRecognizer=!0,yield t.dispose.call(this,e))}))}}t.SpeakerRecognizer=a},250:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerVerificationModel=void 0;const i=n(3720),r=n(7419);class o{constructor(e){if(i.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===r.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}static fromProfile(e){return new o(e)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===r.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}}t.SpeakerVerificationModel=o},7847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConfigImpl=t.SpeechConfig=void 0;const i=n(9831),r=n(3720),o=n(7419);class s{constructor(){}static fromSubscription(e,t){r.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),r.Contracts.throwIfNullOrWhitespace(t,"region");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n.setProperty(o.PropertyId.SpeechServiceConnection_IntentRegion,t),n.setProperty(o.PropertyId.SpeechServiceConnection_Key,e),n}static fromEndpoint(e,t){r.Contracts.throwIfNull(e,"endpoint");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&n.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}static fromHost(e,t){r.Contracts.throwIfNull(e,"hostName");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&n.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}static fromAuthorizationToken(e,t){r.Contracts.throwIfNull(e,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(t,"region");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n.setProperty(o.PropertyId.SpeechServiceConnection_IntentRegion,t),n.authorizationToken=e,n}close(){}}t.SpeechConfig=s;class a extends s{constructor(){super(),this.privProperties=new o.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=o.OutputFormat.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return o.OutputFormat[this.privProperties.getProperty(i.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privProperties.setProperty(i.OutputFormatPropertyName,o.OutputFormat[e])}get endpointId(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){r.Contracts.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,n,i){this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPassword],i)}setServiceProperty(e,t){const n=JSON.parse(this.privProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));n[e]=t,this.privProperties.setProperty(i.ServicePropertiesPropertyName,JSON.stringify(n))}setProfanity(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceResponse_ProfanityOption,o.ProfanityOption[e])}enableAudioLogging(){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(i.ForceDictationPropertyName,"true")}clone(){const e=new a;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return o.SpeechSynthesisOutputFormat[this.privProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,o.SpeechSynthesisOutputFormat[e])}}t.SpeechConfigImpl=a},9401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionCanceledEventArgs=void 0;const i=n(1601);class r extends i.CancellationEventArgsBase{}t.SpeechRecognitionCanceledEventArgs=r},1542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionEventArgs=t.ConversationTranscriptionEventArgs=t.SpeechRecognitionEventArgs=void 0;const i=n(7419);class r extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.SpeechRecognitionEventArgs=r;class o extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.ConversationTranscriptionEventArgs=o;t.MeetingTranscriptionEventArgs=class extends r{}},1405:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionResult=void 0;const i=n(7419);class r extends i.RecognitionResult{constructor(e,t,n,i,r,o,s,a,l,u,c){super(e,t,n,i,r,o,s,l,u,c),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}t.SpeechRecognitionResult=r},6368:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognizer=void 0;const r=n(9831),o=n(6606),s=n(3720),a=n(7419);class l extends a.Recognizer{constructor(e,t){const n=e;s.Contracts.throwIfNull(n,"speechConfig"),s.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,n.properties,new r.SpeechConnectionFactory),this.privDisposedRecognizer=!1}static FromConfig(e,t,n){const i=e;t.properties.mergeTo(i.properties);return new l(e,n)}get endpointId(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,a.OutputFormat[a.OutputFormat.Simple])===a.OutputFormat[a.OutputFormat.Simple]?a.OutputFormat.Simple:a.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){o.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(r.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){o.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){o.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,n){s.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e){e&&e()}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,i){const o=n;return new r.SpeechServiceRecognizer(e,t,o,i,this)}}t.SpeechRecognizer=l},7264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBookmarkEventArgs=void 0;t.SpeechSynthesisBookmarkEventArgs=class{constructor(e,t){this.privAudioOffset=e,this.privText=t}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}},9625:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBoundaryType=void 0,function(e){e.Word="WordBoundary",e.Punctuation="PunctuationBoundary",e.Sentence="SentenceBoundary"}(t.SpeechSynthesisBoundaryType||(t.SpeechSynthesisBoundaryType={}))},7521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisEventArgs=void 0;t.SpeechSynthesisEventArgs=class{constructor(e){this.privResult=e}get result(){return this.privResult}}},4848:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",e[e.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",e[e.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",e[e.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",e[e.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",e[e.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",e[e.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",e[e.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm"}(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))},4379:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisResult=void 0;const i=n(7419);class r extends i.SynthesisResult{constructor(e,t,n,i,r,o){super(e,t,i,r),this.privAudioData=n,this.privAudioDuration=o}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}}t.SpeechSynthesisResult=r},1918:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisVisemeEventArgs=void 0;t.SpeechSynthesisVisemeEventArgs=class{constructor(e,t,n){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}},93:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisWordBoundaryEventArgs=void 0;t.SpeechSynthesisWordBoundaryEventArgs=class{constructor(e,t,n,i,r,o){this.privAudioOffset=e,this.privDuration=t,this.privText=n,this.privWordLength=i,this.privTextOffset=r,this.privBoundaryType=o}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}},290:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesizer=void 0;const r=n(9831),o=n(6606),s=n(4865),a=n(2231),l=n(6625),u=n(3720),c=n(7419),h=n(8554);class p extends c.Synthesizer{constructor(e,t){super(e),null!==t&&(this.audioConfig=void 0===t?"undefined"===typeof window?void 0:c.AudioConfig.fromDefaultSpeakerOutput():t),this.privConnectionFactory=new r.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(e,t,n){const i=e;return t.properties.mergeTo(i.properties),new p(e,n)}speakTextAsync(e,t,n,i){this.speakImpl(e,!1,t,n,i)}speakSsmlAsync(e,t,n,i){this.speakImpl(e,!0,t,n,i)}getVoicesAsync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(this,void 0,void 0,(function*(){return this.getVoices(e)}))}close(e,t){u.Contracts.throwIfDisposed(this.privDisposed),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}get internalData(){return this.privAdapter}createSynthesisAdapter(e,t,n){return new r.SpeechSynthesisAdapter(e,t,n,this,this.audioConfig)}createRestSynthesisAdapter(e,t){return new r.SynthesisRestAdapter(t,e)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=a.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(c.SpeechSynthesisOutputFormat[this.properties.getProperty(c.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(e,t,n,i,r){try{u.Contracts.throwIfDisposed(this.privDisposed);const a=o.createNoDashGuid();let p;p=r instanceof c.PushAudioOutputStreamCallback?new l.PushAudioOutputStreamImpl(r):r instanceof c.PullAudioOutputStream?r:void 0!==r?new s.AudioFileWriter(r):void 0,this.synthesisRequestQueue.enqueue(new h.SynthesisRequest(a,e,t,(e=>{if(this.privSynthesizing=!1,n)try{n(e)}catch(e){i&&i(e)}n=void 0,this.adapterSpeak().catch((()=>{}))}),(e=>{i&&i(e)}),p)),this.adapterSpeak().catch((()=>{}))}catch(a){if(i)if(a instanceof Error){const e=a;i(e.name+": "+e.message)}else i(a);this.dispose(!0).catch((()=>{}))}}getVoices(e){return i(this,void 0,void 0,(function*(){const t=o.createNoDashGuid(),n=yield this.privRestAdapter.getVoicesList(t);if(n.ok&&Array.isArray(n.json)){let i=n.json;return e&&e.length>0&&(i=i.filter((t=>!!t.Locale&&t.Locale.toLowerCase()===e.toLowerCase()))),new c.SynthesisVoicesResult(t,i,void 0)}return new c.SynthesisVoicesResult(t,void 0,"Error: ".concat(n.status,": ").concat(n.statusText))}))}}t.SpeechSynthesizer=p},709:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechTranslationConfigImpl=t.SpeechTranslationConfig=void 0;const i=n(9831),r=n(3720),o=n(7419);class s extends o.SpeechConfig{constructor(){super()}static fromSubscription(e,t){r.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),r.Contracts.throwIfNullOrWhitespace(t,"region");const n=new a;return n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Key,e),n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n}static fromAuthorizationToken(e,t){r.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),r.Contracts.throwIfNullOrWhitespace(t,"region");const n=new a;return n.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e),n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Region,t),n}static fromHost(e,t){r.Contracts.throwIfNull(e,"hostName");const n=new a;return n.setProperty(o.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&n.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}static fromEndpoint(e,t){r.Contracts.throwIfNull(e,"endpoint"),r.Contracts.throwIfNull(t,"subscriptionKey");const n=new a;return n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Endpoint,e.href),n.properties.setProperty(o.PropertyId.SpeechServiceConnection_Key,t),n}}t.SpeechTranslationConfig=s;class a extends s{constructor(){super(),this.privSpeechProperties=new o.PropertyCollection,this.outputFormat=o.OutputFormat.Simple}set authorizationToken(e){r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,e)}set speechRecognitionLanguage(e){r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,e)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return o.OutputFormat[this.privSpeechProperties.getProperty(i.OutputFormatPropertyName,void 0)]}set outputFormat(e){this.privSpeechProperties.setProperty(i.OutputFormatPropertyName,o.OutputFormat[e])}get endpointId(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_EndpointId,e)}addTargetLanguage(e){r.Contracts.throwIfNullOrWhitespace(e,"value");const t=this.targetLanguages;t.includes(e)||(t.push(e),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))}get targetLanguages(){return void 0!==this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(e){r.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,e)}get region(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_Region)}setProxy(e,t,n,i){this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_ProxyPassword],i)}getProperty(e,t){return this.privSpeechProperties.getProperty(e,t)}setProperty(e,t){this.privSpeechProperties.setProperty(e,t)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(e,t){const n=JSON.parse(this.privSpeechProperties.getProperty(i.ServicePropertiesPropertyName,"{}"));n[e]=t,this.privSpeechProperties.setProperty(i.ServicePropertiesPropertyName,JSON.stringify(n))}setProfanity(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceResponse_ProfanityOption,o.ProfanityOption[e])}enableAudioLogging(){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(i.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return o.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privSpeechProperties.setProperty(o.PropertyId.SpeechServiceConnection_SynthOutputFormat,o.SpeechSynthesisOutputFormat[e])}}t.SpeechTranslationConfigImpl=a},1034:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisResult=void 0;t.SynthesisResult=class{constructor(e,t,n,i){this.privResultId=e,this.privReason=t,this.privErrorDetails=n,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}},9009:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisVoicesResult=void 0;const i=n(7419);class r extends i.SynthesisResult{constructor(e,t,n){if(Array.isArray(t)){super(e,i.ResultReason.VoicesListRetrieved,void 0,new i.PropertyCollection),this.privVoices=[];for(const e of t)this.privVoices.push(new i.VoiceInfo(e))}else super(e,i.ResultReason.Canceled,n||"Error information unavailable",new i.PropertyCollection)}get voices(){return this.privVoices}}t.SynthesisVoicesResult=r},8554:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRequest=t.Synthesizer=void 0;const r=n(9831),o=n(6606),s=n(3720),a=n(7419);class l{constructor(e){const t=e;s.Contracts.throwIfNull(t,"speechConfig"),this.privProperties=t.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new o.Queue}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(a.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===r.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(e){const t={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-JennyNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let n=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),i=this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthVoice,""),r=l.XMLEncode(e);return this.autoDetectSourceLanguage?n="en-US":i=i||t[n],i&&(r="<voice name='".concat(i,"'>").concat(r,"</voice>")),r="<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='".concat(n,"'>").concat(r,"</speak>"),r}dispose(e){return i(this,void 0,void 0,(function*(){this.privDisposed||(e&&this.privAdapter&&(yield this.privAdapter.dispose()),this.privDisposed=!0)}))}adapterSpeak(){return i(this,void 0,void 0,(function*(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const e=yield this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)}}))}createSynthesizerConfig(e){return new r.SynthesizerConfig(e,this.privProperties)}implCommonSynthesizeSetup(){let e="undefined"!==typeof window?"Browser":"Node",t="unknown",n="unknown";"undefined"!==typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,n=navigator.appVersion);const i=this.createSynthesizerConfig(new r.SpeechServiceConfig(new r.Context(new r.OS(e,t,n)))),o=this.privProperties.getProperty(a.PropertyId.SpeechServiceConnection_Key,void 0),s=o&&""!==o?new r.CognitiveSubscriptionKeyAuthentication(o):new r.CognitiveTokenAuthentication((()=>{const e=this.privProperties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)}),(()=>{const e=this.privProperties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(e)}));this.privAdapter=this.createSynthesisAdapter(s,this.privConnectionFactory,i),this.privRestAdapter=this.createRestSynthesisAdapter(s,i)}static XMLEncode(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}}t.Synthesizer=l;t.SynthesisRequest=class{constructor(e,t,n,i,r,o){this.requestId=e,this.text=t,this.isSSML=n,this.cb=i,this.err=r,this.dataStream=o}}},4952:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationImpl=t.Conversation=void 0;const r=n(9831),o=n(6606),s=n(3720),a=n(7419);class l{constructor(){}static createConversationAsync(e,t,n,l){let c,h,p;return s.Contracts.throwIfNullOrUndefined(e,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(e.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceAuthorization_Token])||s.Contracts.throwIfNullOrUndefined(e.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"===typeof t?(c=new u(e,t),o.marshalPromiseToCallbacks((()=>i(this,void 0,void 0,(function*(){})))(),n,l)):(c=new u(e),h=t,p=n,c.createConversationAsync((()=>{h&&h()}),(e=>{p&&p(e)}))),c}}t.Conversation=l;class u extends l{constructor(e,t){super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var t;this.privIsConnected=!0;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{var t;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{var n;try{(null===(n=this.privConversationTranslator)||void 0===n?void 0:n.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(t){}},this.onParticipantUpdateCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case r.ConversationTranslatorCommandTypes.changeNickname:e.displayName=t.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:e.isUsingTts=t.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:e.profanity=t.value;break;case r.ConversationTranslatorCommandTypes.setMute:e.isMuted=t.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.Updated,[this.toParticipant(e)],t.sessionId))}}catch(t){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach((e=>e.isMuted=!e.isHost&&t.isMuted)),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(t){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(t){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(t){}},this.onTranslationReceived=(e,t)=>{try{switch(t.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(t){}},this.onParticipantsListReceived=(e,t)=>{var n;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){const e=null===(n=this.privConversationTranslator)||void 0===n?void 0:n.properties.getProperty(a.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(t){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(t){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new a.PropertyCollection,this.privManager=new r.ConversationManager;if(e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),t)this.privConversationId=t;else{0===e.targetLanguages.length&&e.addTargetLanguage(this.privLanguage);e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceResponse_ProfanityOption])||e.setProfanity(a.ProfanityOption.Masked);let t=e.getProperty(a.PropertyId[a.PropertyId.ConversationTranslator_Name]);void 0!==t&&null!==t||(t="Host"),s.Contracts.throwIfNullOrTooLong(t,"nickname",50),s.Contracts.throwIfNullOrTooShort(t,"nickname",2),e.setProperty(a.PropertyId[a.PropertyId.ConversationTranslator_Name],t)}this.privConfig=e;const n=e;s.Contracts.throwIfNull(n,"speechConfig"),this.privProperties=n.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const e=this.conversationId,t=this.participants.map((e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}))),n={};for(const i of r.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(i,"");""!==e&&(n[i]=e)}return{id:e,participants:t,conversationProperties:n}}get canSend(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}set conversationTranslator(e){this.privConversationTranslator=e}onToken(e){this.privConversationTranslator.onToken(e)}createConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,(n=>{n||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=n,this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}startConversationAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=r.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}addParticipantAsync(e,t,n){s.Contracts.throwIfNullOrUndefined(e,"Participant"),o.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,n)}joinConversationAsync(e,t,n,i,r){try{s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,(e=>{s.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,i&&i(e.cognitiveSpeechAuthToken)}),(e=>{this.handleError(e,r)}))}catch(o){this.handleError(o,r)}}deleteConversationAsync(e,t){o.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,t)}deleteConversationImplAsync(){return i(this,void 0,void 0,(function*(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}))}endConversationAsync(e,t){o.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,t)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}muteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}muteParticipantAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}removeParticipantAsync(e,t,n){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))o.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,n);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),n);let i="";if("string"===typeof e)i=e;else if(e.hasOwnProperty("id")){i=e.id}else if(e.hasOwnProperty("userId")){i=e.userId}s.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId"));-1===this.participants.findIndex((e=>e.id===i))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}}catch(i){this.handleError(i,n)}}unlockConversationAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}unmuteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}unmuteParticipantAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}sendTextMessageAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}setTranslatedLanguagesAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}changeNicknameAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return i(this,void 0,void 0,(function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this}))}getKeepAlive(){const e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")}close(e){var t;return i(this,void 0,void 0,(function*(){try{this.privIsConnected=!1,yield null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(n){throw n}e&&this.dispose()}))}handleCallback(e,t){if(e){try{e()}catch(n){t&&t(n)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const n=e;t(n.name+": "+n.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map((e=>this.toParticipant(e)));return e?t:t.filter((e=>!1===e.isHost))}toParticipant(e){return new a.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:r.ConversationTranslatorMessageTypes.instantMessage})}}t.ConversationImpl=u},5174:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationCommon=void 0;t.ConversationCommon=class{constructor(e){this.privAudioConfig=e}handleCallback(e,t){if(e){try{e()}catch(n){t&&t(n)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const n=e;t(n.name+": "+n.message)}else t(e)}}},3463:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationExpirationEventArgs=void 0;const i=n(7419);class r extends i.SessionEventArgs{constructor(e,t){super(t),this.privExpirationTime=e}get expirationTime(){return this.privExpirationTime}}t.ConversationExpirationEventArgs=r},24:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationParticipantsChangedEventArgs=void 0;const i=n(7419);class r extends i.SessionEventArgs{constructor(e,t,n){super(n),this.privReason=e,this.privParticipant=t}get reason(){return this.privReason}get participants(){return this.privParticipant}}t.ConversationParticipantsChangedEventArgs=r},9914:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriber=void 0;const r=n(9831),o=n(6606),s=n(3720),a=n(7419);class l extends a.Recognizer{constructor(e,t){const n=e;s.Contracts.throwIfNull(n,"speechConfig"),s.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),super(t,n.properties,new r.ConversationTranscriberConnectionFactory),this.privProperties.setProperty(a.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(e,t,n){const i=e;t.properties.mergeTo(i.properties);return new l(e,n)}get endpointId(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.OutputFormatPropertyName,a.OutputFormat[a.OutputFormat.Simple])===a.OutputFormat[a.OutputFormat.Simple]?a.OutputFormat.Simple:a.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(e,t){o.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),e,t)}stopTranscribingAsync(e,t){o.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,i){const o=n;return i.isSpeakerDiarizationEnabled=!0,new r.ConversationTranscriptionServiceRecognizer(e,t,o,i,this)}}t.ConversationTranscriber=l},5752:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionResult=void 0;const i=n(7419);class r extends i.RecognitionResult{constructor(e,t,n,i,r,o,s,a,l,u,c){super(e,t,n,i,r,o,s,l,u,c),this.privSpeakerId=a}get speakerId(){return this.privSpeakerId}}t.ConversationTranscriptionResult=r},9308:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationCanceledEventArgs=void 0;const i=n(1601);class r extends i.CancellationEventArgsBase{}t.ConversationTranslationCanceledEventArgs=r},9523:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationEventArgs=void 0;const i=n(7419);class r extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.ConversationTranslationEventArgs=r},6285:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationResult=void 0;const i=n(6234);class r extends i.TranslationRecognitionResult{constructor(e,t,n,i,r,o,s,a,l,u,c){super(t,i,r,o,s,a,void 0,void 0,l,u,c),this.privId=e,this.privOrigLang=n}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}}t.ConversationTranslationResult=r},1031:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;const r=n(9831),o=n(7600),s=n(6606),a=n(3720),l=n(7419),u=n(4952),c=n(4659);var h;!function(e){e[e.Inactive=0]="Inactive",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(h=t.SpeechState||(t.SpeechState={}));class p extends l.TranslationRecognizer{constructor(e,t,n,r){super(e,t,new o.ConversationTranslatorConnectionFactory(r)),this.privSpeechState=h.Inactive,n&&(this.privTranslator=n,this.sessionStarted=()=>{this.privSpeechState=h.Connected},this.sessionStopped=()=>{this.privSpeechState=h.Inactive},this.recognizing=(e,t)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,t)},this.recognized=(e,t)=>i(this,void 0,void 0,(function*(){var e;(null===(e=t.result)||void 0===e?void 0:e.errorDetails)?(yield this.cancelSpeech(),this.fireCancelEvent(t.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,t)})),this.canceled=()=>i(this,void 0,void 0,(function*(){if(this.privSpeechState!==h.Inactive)try{yield this.cancelSpeech()}catch(e){this.privSpeechState=h.Inactive}})))}get state(){return this.privSpeechState}set state(e){this.privSpeechState=e}set authentication(e){this.privReco.authentication=e}onConnection(){this.privSpeechState=h.Connected}onCancelSpeech(){return i(this,void 0,void 0,(function*(){this.privSpeechState=h.Inactive,yield this.cancelSpeech()}))}fireCancelEvent(e){try{if(this.privTranslator.canceled){const t=new c.ConversationTranslationCanceledEventArgs(l.CancellationReason.Error,e,l.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,t)}}catch(t){}}cancelSpeech(){var e;return i(this,void 0,void 0,(function*(){try{this.stopContinuousRecognitionAsync(),yield null===(e=this.privReco)||void 0===e?void 0:e.disconnect(),this.privSpeechState=h.Inactive}catch(t){}}))}}class d extends c.ConversationCommon{constructor(e){super(e),this.privErrors=r.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new l.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer)&&(!this.privIsSpeaking&&this.privCTRecognizer.state!==h.Connected&&this.privCTRecognizer.state!==h.Connecting&&!this.privConversation.isMutedByHost)}onToken(e){this.privCTRecognizer.authentication=e}setServiceProperty(e,t){const n=JSON.parse(this.privProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));n[e]=t,this.privProperties.setProperty(r.ServicePropertiesPropertyName,JSON.stringify(n))}joinConversationAsync(e,t,n,i,o){try{if("string"===typeof e){a.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),a.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),o);let s=n;void 0!==s&&null!==s&&""!==s||(s=r.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=l.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(l.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(s),this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_RecoLanguage],s),this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.ConversationTranslator_Name],t);const c=[l.PropertyId.SpeechServiceConnection_Host,l.PropertyId.ConversationTranslator_Host,l.PropertyId.SpeechServiceConnection_Endpoint,l.PropertyId.SpeechServiceConnection_ProxyHostName,l.PropertyId.SpeechServiceConnection_ProxyPassword,l.PropertyId.SpeechServiceConnection_ProxyPort,l.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const e of c){const t=this.privProperties.getProperty(e);if(t){const n="string"===typeof e?e:l.PropertyId[e];this.privSpeechTranslationConfig.setProperty(n,t)}}const h=JSON.parse(this.privProperties.getProperty(r.ServicePropertiesPropertyName,"{}"));for(const e of Object.keys(h))this.privSpeechTranslationConfig.setServiceProperty(e,h[e],l.ServicePropertyChannel.UriQueryParameter);this.privConversation=new u.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,s,(e=>{e||this.handleError(new Error(this.privErrors.permissionDeniedConnect),o),this.privSpeechTranslationConfig.authorizationToken=e,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync((()=>{this.handleCallback(i,o)}),(e=>{this.handleError(e,o)}))}),(e=>{this.handleError(e,o)}))}else"object"===typeof e?(a.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),a.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(l.PropertyId.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,a.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),a.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(n,i)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),i)}catch(s){this.handleError(s,"string"===typeof n?o:i)}}leaveConversationAsync(e,t){s.marshalPromiseToCallbacks((()=>i(this,void 0,void 0,(function*(){yield this.cancelSpeech(),yield this.privConversation.endConversationImplAsync(),yield this.privConversation.deleteConversationImplAsync(),this.dispose()})))(),e,t)}sendTextMessageAsync(e,t,n){try{a.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),a.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),this.privConversation.sendTextMessageAsync(e,t,n)}catch(i){this.handleError(i,n)}}startTranscribingAsync(e,t){s.marshalPromiseToCallbacks((()=>i(this,void 0,void 0,(function*(){try{a.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),a.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0===this.privCTRecognizer&&(yield this.connectTranslatorRecognizer()),a.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),yield this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(e){throw this.privIsSpeaking=!1,yield this.cancelSpeech(),e}})))(),e,t)}stopTranscribingAsync(e,t){s.marshalPromiseToCallbacks((()=>i(this,void 0,void 0,(function*(){try{if(!this.privIsSpeaking)return void(yield this.cancelSpeech());this.privIsSpeaking=!1,yield new Promise(((e,t)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(e,t)}))}catch(e){yield this.cancelSpeech()}})))(),e,t)}isDisposed(){return this.privIsDisposed}dispose(e,t,n){s.marshalPromiseToCallbacks((()=>i(this,void 0,void 0,(function*(){this.isDisposed&&!this.privIsSpeaking||(yield this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})))(),t,n)}cancelSpeech(){var e;return i(this,void 0,void 0,(function*(){try{this.privIsSpeaking=!1,yield null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onCancelSpeech(),this.privCTRecognizer=void 0}catch(t){}}))}connectTranslatorRecognizer(){return i(this,void 0,void 0,(function*(){try{void 0===this.privAudioConfig&&(this.privAudioConfig=l.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_Key],"");const e=()=>this.privConversation;this.privCTRecognizer=new p(this.privSpeechTranslationConfig,this.privAudioConfig,this,e)}catch(e){throw yield this.cancelSpeech(),e}}))}startContinuousRecognition(){return new Promise(((e,t)=>{this.privCTRecognizer.startContinuousRecognitionAsync(e,t)}))}}t.ConversationTranslator=d},4659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4952);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return i.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return i.ConversationImpl}});var r=n(5174);Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var o=n(3463);Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return o.ConversationExpirationEventArgs}});var s=n(24);Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return s.ConversationParticipantsChangedEventArgs}});var a=n(9308);Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationCanceledEventArgs}});var l=n(9523);Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return l.ConversationTranslationEventArgs}});var u=n(6285);Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return u.ConversationTranslationResult}});var c=n(1031);Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var h=n(9914);Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return h.ConversationTranscriber}});var p=n(9911);Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return p.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return p.User}});var d=n(5809);Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return d.ParticipantChangedReason}});var f=n(7611);Object.defineProperty(t,"Meeting",{enumerable:!0,get:function(){return f.Meeting}}),Object.defineProperty(t,"MeetingImpl",{enumerable:!0,get:function(){return f.MeetingImpl}});var m=n(2806);Object.defineProperty(t,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return m.MeetingTranscriptionCanceledEventArgs}});var g=n(9222);Object.defineProperty(t,"MeetingTranscriber",{enumerable:!0,get:function(){return g.MeetingTranscriber}});var v=n(5752);Object.defineProperty(t,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return v.ConversationTranscriptionResult}})},9911:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Participant=t.User=void 0;const i=n(7419);t.User=class{constructor(e){this.privUserId=e}get userId(){return this.privUserId}};class r{constructor(e,t,n,r,o,s,a,l){this.privId=e,this.privAvatar=t,this.privDisplayName=n,this.privIsHost=r,this.privIsMuted=o,this.privIsUsingTts=s,this.privPreferredLanguage=a,this.privVoice=l,this.privProperties=new i.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(e,t,n){return new r(e,"",e,!1,!1,!1,t,n)}}t.Participant=r},7611:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingImpl=t.Meeting=void 0;const r=n(9831),o=n(6606),s=n(3720),a=n(7419);class l{constructor(){}static createMeetingAsync(e,t,n,l){if(s.Contracts.throwIfNullOrUndefined(e,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),s.Contracts.throwIfNullOrUndefined(e.region,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),s.Contracts.throwIfNull(t,"meetingId"),0===t.length)throw new Error("meetingId cannot be empty");e.subscriptionKey||e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceAuthorization_Token])||s.Contracts.throwIfNullOrUndefined(e.subscriptionKey,r.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const c=new u(e,t);return o.marshalPromiseToCallbacks((()=>i(this,void 0,void 0,(function*(){})))(),n,l),c}}t.Meeting=l;class u extends l{constructor(e,t){super(),this.privErrors=r.ConversationConnectionConfig.restErrors,this.onConnected=e=>{var t;this.privIsConnected=!0;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStarted)&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,e)}catch(e){}},this.onDisconnected=e=>{var t;try{(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e)}catch(e){}finally{this.close(!1)}},this.onCanceled=(e,t)=>{var n;try{(null===(n=this.privConversationTranslator)||void 0===n?void 0:n.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t)}catch(t){}},this.onParticipantUpdateCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.id);if(void 0!==e){switch(t.key){case r.ConversationTranslatorCommandTypes.changeNickname:e.displayName=t.value;break;case r.ConversationTranslatorCommandTypes.setUseTTS:e.isUsingTts=t.value;break;case r.ConversationTranslatorCommandTypes.setProfanityFiltering:e.profanity=t.value;break;case r.ConversationTranslatorCommandTypes.setMute:e.isMuted=t.value;break;case r.ConversationTranslatorCommandTypes.setTranslateToLanguages:e.translateToLanguages=t.value}this.privParticipants.addOrUpdateParticipant(e),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.Updated,[this.toParticipant(e)],t.sessionId))}}catch(t){}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(e,t)=>{try{this.privParticipants.participants.forEach((e=>e.isMuted=!e.isHost&&t.isMuted)),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.Updated,this.toParticipants(!1),t.sessionId))}catch(t){}},this.onParticipantJoinCommandReceived=(e,t)=>{try{const e=this.privParticipants.addOrUpdateParticipant(t.participant);void 0!==e&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.JoinedConversation,[this.toParticipant(e)],t.sessionId))}catch(t){}},this.onParticipantLeaveCommandReceived=(e,t)=>{try{const e=this.privParticipants.getParticipant(t.participant.id);void 0!==e&&(this.privParticipants.deleteParticipant(t.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.LeftConversation,[this.toParticipant(e)],t.sessionId)))}catch(t){}},this.onTranslationReceived=(e,t)=>{try{switch(t.command){case r.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case r.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId));break;case r.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new a.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId))}}catch(t){}},this.onParticipantsListReceived=(e,t)=>{var n;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(this.privRoom.token=t.sessionToken),this.privParticipants.participants=[...t.participants],void 0!==this.privParticipants.me&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new a.ConversationParticipantsChangedEventArgs(a.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),t.sessionId)),this.me.isHost){const e=null===(n=this.privConversationTranslator)||void 0===n?void 0:n.properties.getProperty(a.PropertyId.ConversationTranslator_Name);void 0!==e&&e.length>0&&e!==this.me.displayName&&this.changeNicknameAsync(e)}}catch(t){}},this.onConversationExpiration=(e,t)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,t)}catch(t){}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new a.PropertyCollection,this.privManager=new r.ConversationManager;e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage])||e.setProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage],r.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=e.getProperty(a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=t,this.privConfig=e;const n=e;s.Contracts.throwIfNull(n,"speechConfig"),this.privProperties=n.properties.clone(),this.privIsConnected=!1,this.privParticipants=new r.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var e,t;return!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const e=this.meetingId,t=this.participants.map((e=>({id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}))),n={};for(const i of r.ConversationConnectionConfig.transcriptionEventKeys){const e=this.properties.getProperty(i,"");""!==e&&(n[i]=e)}return{id:e,participants:t,meetingProperties:n}}get canSend(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)}get canSendAsHost(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e}createMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,(n=>{n||this.handleError(new Error(this.privErrors.permissionDeniedConnect),t),this.privRoom=n,this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}startMeetingAsync(e,t){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}addParticipantAsync(e,t,n){s.Contracts.throwIfNullOrUndefined(e,"Participant"),o.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,n)}joinMeetingAsync(e,t,n,i,r){try{s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),s.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,(e=>{s.Contracts.throwIfNullOrUndefined(e,this.privErrors.permissionDeniedConnect),this.privRoom=e,this.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,i&&i(e.cognitiveSpeechAuthToken)}),(e=>{this.handleError(e,r)}))}catch(o){this.handleError(o,r)}}deleteMeetingAsync(e,t){o.marshalPromiseToCallbacks(this.deleteMeetingImplAsync(),e,t)}deleteMeetingImplAsync(){return i(this,void 0,void 0,(function*(){s.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),s.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),yield this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}))}endMeetingAsync(e,t){o.marshalPromiseToCallbacks(this.endMeetingImplAsync(),e,t)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}muteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}muteParticipantAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!0),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}removeParticipantAsync(e,t,n){try{if(s.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))o.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,n);else{s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),n);let i="";if("string"===typeof e)i=e;else if(e.hasOwnProperty("id")){i=e.id}else if(e.hasOwnProperty("userId")){i=e.userId}s.Contracts.throwIfNullOrWhitespace(i,this.privErrors.invalidArgs.replace("{arg}","userId"));-1===this.participants.findIndex((e=>e.id===i))&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(i),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}}catch(i){this.handleError(i,n)}}unlockMeetingAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}unmuteAllParticipantsAsync(e,t){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),(()=>{this.handleCallback(e,t)}),(e=>{this.handleError(e,t)}))}catch(n){this.handleError(n,t)}}unmuteParticipantAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n);-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(e,!1),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}sendTextMessageAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}setTranslatedLanguagesAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfArrayEmptyOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","languages")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}changeNicknameAsync(e,t,n){try{s.Contracts.throwIfDisposed(this.privIsDisposed),s.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),s.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),s.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(e),(()=>{this.handleCallback(t,n)}),(e=>{this.handleError(e,n)}))}catch(i){this.handleError(i,n)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}connectTranscriberRecognizer(e){return i(this,void 0,void 0,(function*(){this.privTranscriberRecognizer&&(yield this.privTranscriberRecognizer.close()),yield e.enforceAudioGating(),this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.meeting=this}))}getKeepAlive(){const e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"join")}}removeParticipantImplAsync(e){this.privParticipants.deleteParticipant(e.id);const t=this.meetingInfo;return t.participants=[e],this.privTranscriberRecognizer.pushMeetingEvent(t,"leave")}close(e){var t;return i(this,void 0,void 0,(function*(){try{this.privIsConnected=!1,yield null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(n){throw n}e&&this.dispose()}))}handleCallback(e,t){if(e){try{e()}catch(n){t&&t(n)}e=void 0}}handleError(e,t){if(t)if(e instanceof Error){const n=e;t(n.name+": "+n.message)}else t(e)}toParticipants(e){const t=this.privParticipants.participants.map((e=>this.toParticipant(e)));return e?t:t.filter((e=>!1===e.isHost))}toParticipant(e){return new a.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)}getMuteAllCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMuteCommand(e,t){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:t})}getLockCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:e})}getEjectCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:e})}getChangeNicknameCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(e,"nickname"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:r.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:r.ConversationTranslatorMessageTypes.participantCommand,value:e})}getMessageCommand(e){return s.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),s.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),s.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:r.ConversationTranslatorMessageTypes.instantMessage})}}t.MeetingImpl=u},9222:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriber=void 0;const r=n(9831),o=n(6606),s=n(3720),a=n(7419),l=n(4659);t.MeetingTranscriber=class{constructor(e){this.privAudioConfig=e,this.privProperties=new a.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return a.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}joinMeetingAsync(e,t,n){const i=e;s.Contracts.throwIfNullOrUndefined(l.MeetingImpl,"Meeting"),this.privRecognizer=new r.TranscriberRecognizer(e.config,this.privAudioConfig),s.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),o.marshalPromiseToCallbacks(i.connectTranscriberRecognizer(this.privRecognizer),t,n)}startTranscribingAsync(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)}stopTranscribingAsync(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)}leaveMeetingAsync(e,t){this.privRecognizer.disconnectCallbacks(),o.marshalPromiseToCallbacks((()=>i(this,void 0,void 0,(function*(){})))(),e,t)}close(e,t){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}dispose(e){return i(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(this.privRecognizer&&(yield this.privRecognizer.close(),this.privRecognizer=void 0),e&&(this.privDisposedRecognizer=!0))}))}}},2806:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingTranscriptionCanceledEventArgs=void 0;const i=n(1601);class r extends i.CancellationEventArgsBase{}t.MeetingTranscriptionCanceledEventArgs=r},5809:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))},1355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionCanceledEventArgs=void 0;t.TranslationRecognitionCanceledEventArgs=class{constructor(e,t,n,i,r){this.privCancelReason=t,this.privErrorDetails=n,this.privResult=r,this.privSessionId=e,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}},2442:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionEventArgs=void 0;const i=n(7419);class r extends i.RecognitionEventArgs{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}t.TranslationRecognitionEventArgs=r},6234:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionResult=void 0;const i=n(7419);class r extends i.SpeechRecognitionResult{constructor(e,t,n,i,r,o,s,a,l,u,c){super(t,n,i,r,o,s,a,void 0,l,u,c),this.privTranslations=e}static fromSpeechRecognitionResult(e){return new r(void 0,e.resultId,e.reason,e.text,e.duration,e.offset,e.language,e.languageDetectionConfidence,e.errorDetails,e.json,e.properties)}get translations(){return this.privTranslations}}t.TranslationRecognitionResult=r},6419:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognizer=void 0;const r=n(9831),o=n(6606),s=n(7826),a=n(3720),l=n(7419);class u extends l.Recognizer{constructor(e,t,n){const i=e;a.Contracts.throwIfNull(i,"speechConfig"),super(t,i.properties,n||new r.TranslationConnectionFactory),this.privDisposedTranslationRecognizer=!1,void 0!==this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&a.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationVoice),l.PropertyId[l.PropertyId.SpeechServiceConnection_TranslationVoice]),a.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages),l.PropertyId[l.PropertyId.SpeechServiceConnection_TranslationToLanguages]),a.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage),l.PropertyId[l.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(e,t,n){const i=e;return t.properties.mergeTo(i.properties),new u(e,n)}get speechRecognitionLanguage(){return a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(l.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.properties.setProperty(l.PropertyId.SpeechServiceAuthorization_Token,e)}recognizeOnceAsync(e,t){a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),o.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(r.RecognitionMode.Interactive),e,t)}startContinuousRecognitionAsync(e,t){o.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(r.RecognitionMode.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){o.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)}removeTargetLanguage(e){if(a.Contracts.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){const t=this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),n=t.indexOf(e);n>-1&&(t.splice(n,1),this.properties.setProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}}addTargetLanguage(e){a.Contracts.throwIfNullOrUndefined(e,"language to be added");let t=[];void 0!==this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),t.includes(e)||(t.push(e),this.properties.setProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")))):(this.properties.setProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)}close(e,t){a.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),o.marshalPromiseToCallbacks(this.dispose(!0),e,t)}onConnection(){}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,e&&(yield this.implRecognizerStop(),yield t.dispose.call(this,e)))}))}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.privProperties)}createServiceRecognizer(e,t,n,i){const o=n;return new r.TranslationServiceRecognizer(e,t,o,i,this)}updateLanguages(e){const t=s.Connection.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))}}t.TranslationRecognizer=u},4992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEventArgs=void 0;const i=n(7419);class r extends i.SessionEventArgs{constructor(e,t){super(t),this.privResult=e}get result(){return this.privResult}}t.TranslationSynthesisEventArgs=r},120:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisResult=void 0;t.TranslationSynthesisResult=class{constructor(e,t){this.privReason=e,this.privAudio=t}get audio(){return this.privAudio}get reason(){return this.privReason}}},3237:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;const i=n(7419);t.Translations=class{constructor(){this.privMap=new i.PropertyCollection}get languages(){return this.privMap.keys}get(e,t){return this.privMap.getProperty(e,t)}set(e,t){this.privMap.setProperty(e,t)}}},6414:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusReceivedEventArgs=void 0;const i=n(9040);t.TurnStatusReceivedEventArgs=class{constructor(e){this.privTurnStatus=i.TurnStatusResponsePayload.fromJSON(e)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}},8359:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceInfo=t.SynthesisVoiceType=t.SynthesisVoiceGender=void 0,function(e){e[e.Unknown=0]="Unknown",e[e.Female=1]="Female",e[e.Male=2]="Male"}(n=t.SynthesisVoiceGender||(t.SynthesisVoiceGender={})),function(e){e[e.OnlineNeural=1]="OnlineNeural",e[e.OnlineStandard=2]="OnlineStandard",e[e.OfflineNeural=3]="OfflineNeural",e[e.OfflineStandard=4]="OfflineStandard"}(i=t.SynthesisVoiceType||(t.SynthesisVoiceType={}));t.VoiceInfo=class{constructor(e){if(this.privStyleList=[],this.privVoicePath="",e&&(this.privName=e.Name,this.privLocale=e.Locale,this.privShortName=e.ShortName,this.privLocaleName=e.LocaleName,this.privDisplayName=e.DisplayName,this.privLocalName=e.LocalName,this.privVoiceType=e.VoiceType.endsWith("Standard")?i.OnlineStandard:i.OnlineNeural,this.privGender="Male"===e.Gender?n.Male:"Female"===e.Gender?n.Female:n.Unknown,e.StyleList&&Array.isArray(e.StyleList)))for(const t of e.StyleList)this.privStyleList.push(t)}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get voicePath(){return this.privVoicePath}}},7665:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfile=void 0;t.VoiceProfile=class{constructor(e,t){this.privId=e,this.privProfileType=t}get profileId(){return this.privId}get profileType(){return this.privProfileType}}},9496:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileClient=void 0;const r=n(9831),o=n(1566),s=n(3720),a=n(7419);class l extends a.Recognizer{constructor(e){s.Contracts.throwIfNullOrUndefined(e,"speechConfig");const t=e;s.Contracts.throwIfNull(t,"speechConfig"),super(o.AudioConfig.fromStreamInput(a.AudioInputStream.createPushStream()),t.properties,new r.VoiceProfileConnectionFactory),this.privProperties=t.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)}createProfileAsync(e,t){return i(this,void 0,void 0,(function*(){const n=yield this.privVoiceAdapter.createProfile(e,t);return new a.VoiceProfile(n[0],e)}))}retrieveEnrollmentResultAsync(e){return i(this,void 0,void 0,(function*(){return this.privVoiceAdapter.retrieveEnrollmentResult(e)}))}getAllProfilesAsync(e){return i(this,void 0,void 0,(function*(){return this.privVoiceAdapter.getAllProfiles(e)}))}getActivationPhrasesAsync(e,t){return i(this,void 0,void 0,(function*(){return this.privVoiceAdapter.getActivationPhrases(e,t)}))}enrollProfileAsync(e,t){return i(this,void 0,void 0,(function*(){const n=t;return s.Contracts.throwIfNullOrUndefined(n,"audioConfig"),this.audioConfig=t,this.privVoiceAdapter.SpeakerAudioSource=n,this.privVoiceAdapter.enrollProfile(e)}))}deleteProfileAsync(e){return i(this,void 0,void 0,(function*(){return this.privVoiceAdapter.deleteProfile(e)}))}resetProfileAsync(e){return i(this,void 0,void 0,(function*(){return this.privVoiceAdapter.resetProfile(e)}))}close(){return i(this,void 0,void 0,(function*(){yield this.dispose(!0)}))}createServiceRecognizer(e,t,n,i){const o=n;return new r.VoiceServiceRecognizer(e,t,o,i,this)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return i(this,void 0,void 0,(function*(){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,e&&(yield t.dispose.call(this,e)))}))}createRecognizerConfig(e){return new r.RecognizerConfig(e,this.properties)}getResult(e,t){return new a.VoiceProfileResult(e.ok?t:a.ResultReason.Canceled,e.statusText)}}t.VoiceProfileClient=l},3900:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileEnrollmentCancellationDetails=t.VoiceProfileEnrollmentResult=void 0;const i=n(9831),r=n(7419);class o{constructor(e,t,n){this.privReason=e,this.privProperties=new r.PropertyCollection,this.privReason!==r.ResultReason.Canceled?t&&(this.privDetails=JSON.parse(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=r.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=n,this.privProperties.setProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(e){const t=[];for(const n of e.value){const e="enrolling"===n.enrollmentStatus.toLowerCase()?r.ResultReason.EnrollingVoiceProfile:"enrolled"===n.enrollmentStatus.toLowerCase()?r.ResultReason.EnrolledVoiceProfile:r.ResultReason.Canceled,i=new o(e,null,null);i.privDetails=this.getIdentificationDetails(n),t.push(i)}return t}static FromVerificationProfileList(e){const t=[];for(const n of e.value){const e="enrolling"===n.enrollmentStatus.toLowerCase()?r.ResultReason.EnrollingVoiceProfile:"enrolled"===n.enrollmentStatus.toLowerCase()?r.ResultReason.EnrolledVoiceProfile:r.ResultReason.Canceled,i=new o(e,null,null);i.privDetails=this.getVerificationDetails(n),t.push(i)}return t}static getIdentificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(e){return{audioLength:e.audioLength?parseFloat(e.audioLength):0,audioSpeechLength:e.audioSpeechLength?parseFloat(e.audioSpeechLength):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLength:e.enrollmentsLength?parseFloat(e.enrollmentsLength):0,enrollmentsSpeechLength:e.enrollmentsSpeechLength?parseFloat(e.enrollmentsSpeechLength):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:e.remainingEnrollmentsSpeechLength?parseFloat(e.remainingEnrollmentsSpeechLength):0}}}t.VoiceProfileEnrollmentResult=o;class s extends r.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(e){const t=r.CancellationReason.Error;let n=r.CancellationErrorCode.NoError;return e.properties&&(n=r.CancellationErrorCode[e.properties.getProperty(i.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(t,e.errorDetails,n)}}t.VoiceProfileEnrollmentCancellationDetails=s},5129:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfilePhraseResult=void 0;const i=n(3720),r=n(7419);class o extends r.VoiceProfileResult{constructor(e,t,n,r){super(e,t),this.privPhrases=[],i.Contracts.throwIfNullOrUndefined(r,"phrase array"),this.privType=n,r&&r[0]&&(this.privPhrases=r)}get phrases(){return this.privPhrases}get type(){return this.privType}}t.VoiceProfilePhraseResult=o},1462:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileCancellationDetails=t.VoiceProfileResult=void 0;const i=n(9831),r=n(3720),o=n(7419);t.VoiceProfileResult=class{constructor(e,t){this.privReason=e,this.privProperties=new o.PropertyCollection,e===o.ResultReason.Canceled&&(r.Contracts.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(i.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};class s extends o.CancellationDetailsBase{constructor(e,t,n){super(e,t,n)}static fromResult(e){const t=o.CancellationReason.Error;let n=o.CancellationErrorCode.NoError;return e.properties&&(n=o.CancellationErrorCode[e.properties.getProperty(i.CancellationErrorCodePropertyName,o.CancellationErrorCode[o.CancellationErrorCode.NoError])]),new s(t,e.errorDetails,n)}}t.VoiceProfileCancellationDetails=s},1081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(t.VoiceProfileType||(t.VoiceProfileType={}))},1729:(e,t,n)=>{"use strict";var i=n(9165);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,o,s){if(s!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},5192:(e,t,n)=>{e.exports=n(1729)()},9165:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7618:(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=__webpack_require__(5192)},function(e,t){e.exports=__webpack_require__(7313)},function(module,__nested_webpack_exports__,__nested_webpack_require_1455__){"use strict";__nested_webpack_require_1455__.r(__nested_webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_1455__(1),react__WEBPACK_IMPORTED_MODULE_0___default=__nested_webpack_require_1455__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__nested_webpack_require_1455__(0),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__nested_webpack_require_1455__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),enterModule;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){return function(){var t,n=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var i=_getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},ReactAudioPlayer=function(_Component){_inherits(ReactAudioPlayer,_Component);var _super=_createSuper(ReactAudioPlayer);function ReactAudioPlayer(){var e;_classCallCheck(this,ReactAudioPlayer);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(e=_super.call.apply(_super,[this].concat(n))),"audioEl",react__WEBPACK_IMPORTED_MODULE_0___default.a.createRef()),_defineProperty(_assertThisInitialized(e),"listenTracker",void 0),_defineProperty(_assertThisInitialized(e),"onError",(function(t){var n,i;return null===(n=(i=e.props).onError)||void 0===n?void 0:n.call(i,t)})),_defineProperty(_assertThisInitialized(e),"onCanPlay",(function(t){var n,i;return null===(n=(i=e.props).onCanPlay)||void 0===n?void 0:n.call(i,t)})),_defineProperty(_assertThisInitialized(e),"onCanPlayThrough",(function(t){var n,i;return null===(n=(i=e.props).onCanPlayThrough)||void 0===n?void 0:n.call(i,t)})),_defineProperty(_assertThisInitialized(e),"onPlay",(function(t){var n,i;e.setListenTrack(),null===(n=(i=e.props).onPlay)||void 0===n||n.call(i,t)})),_defineProperty(_assertThisInitialized(e),"onAbort",(function(t){var n,i;e.clearListenTrack(),null===(n=(i=e.props).onAbort)||void 0===n||n.call(i,t)})),_defineProperty(_assertThisInitialized(e),"onEnded",(function(t){var n,i;e.clearListenTrack(),null===(n=(i=e.props).onEnded)||void 0===n||n.call(i,t)})),_defineProperty(_assertThisInitialized(e),"onPause",(function(t){var n,i;e.clearListenTrack(),null===(n=(i=e.props).onPause)||void 0===n||n.call(i,t)})),_defineProperty(_assertThisInitialized(e),"onSeeked",(function(t){var n,i;null===(n=(i=e.props).onSeeked)||void 0===n||n.call(i,t)})),_defineProperty(_assertThisInitialized(e),"onLoadedMetadata",(function(t){var n,i;null===(n=(i=e.props).onLoadedMetadata)||void 0===n||n.call(i,t)})),_defineProperty(_assertThisInitialized(e),"onVolumeChanged",(function(t){var n,i;null===(n=(i=e.props).onVolumeChanged)||void 0===n||n.call(i,t)})),e}return _createClass(ReactAudioPlayer,[{key:"componentDidMount",value:function(){var e=this.audioEl.current;e&&(this.updateVolume(this.props.volume),e.addEventListener("error",this.onError),e.addEventListener("canplay",this.onCanPlay),e.addEventListener("canplaythrough",this.onCanPlayThrough),e.addEventListener("play",this.onPlay),e.addEventListener("abort",this.onAbort),e.addEventListener("ended",this.onEnded),e.addEventListener("pause",this.onPause),e.addEventListener("seeked",this.onSeeked),e.addEventListener("loadedmetadata",this.onLoadedMetadata),e.addEventListener("volumechange",this.onVolumeChanged))}},{key:"componentWillUnmount",value:function(){var e=this.audioEl.current;e&&(e.removeEventListener("error",this.onError),e.removeEventListener("canplay",this.onCanPlay),e.removeEventListener("canplaythrough",this.onCanPlayThrough),e.removeEventListener("play",this.onPlay),e.removeEventListener("abort",this.onAbort),e.removeEventListener("ended",this.onEnded),e.removeEventListener("pause",this.onPause),e.removeEventListener("seeked",this.onSeeked),e.removeEventListener("loadedmetadata",this.onLoadedMetadata),e.removeEventListener("volumechange",this.onVolumeChanged))}},{key:"componentDidUpdate",value:function(e){this.updateVolume(this.props.volume)}},{key:"setListenTrack",value:function(){var e=this;if(!this.listenTracker){var t=this.props.listenInterval;this.listenTracker=window.setInterval((function(){var t,n;e.audioEl.current&&(null===(t=(n=e.props).onListen)||void 0===t||t.call(n,e.audioEl.current.currentTime))}),t)}}},{key:"updateVolume",value:function(e){var t=this.audioEl.current;null!==t&&"number"==typeof e&&e!==(null==t?void 0:t.volume)&&(t.volume=e)}},{key:"clearListenTrack",value:function(){this.listenTracker&&(clearInterval(this.listenTracker),delete this.listenTracker)}},{key:"render",value:function(){var e=this.props.children||react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p",null,"Your browser does not support the ",react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("code",null,"audio")," element."),t=!(!1===this.props.controls),n=this.props.title?this.props.title:this.props.src,i={};return this.props.controlsList&&(i.controlsList=this.props.controlsList),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("audio",_extends({autoPlay:this.props.autoPlay,className:"react-audio-player ".concat(this.props.className),controls:t,crossOrigin:this.props.crossOrigin,id:this.props.id,loop:this.props.loop,muted:this.props.muted,preload:this.props.preload,ref:this.audioEl,src:this.props.src,style:this.props.style,title:n},i),e)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),ReactAudioPlayer}(react__WEBPACK_IMPORTED_MODULE_0__.Component);_defineProperty(ReactAudioPlayer,"propTypes",void 0),_defineProperty(ReactAudioPlayer,"defaultProps",void 0),ReactAudioPlayer.defaultProps={autoPlay:!1,children:null,className:"",controls:!1,controlsList:"",id:"",listenInterval:1e4,loop:!1,muted:!1,onAbort:function(){},onCanPlay:function(){},onCanPlayThrough:function(){},onEnded:function(){},onError:function(){},onListen:function(){},onPause:function(){},onPlay:function(){},onSeeked:function(){},onVolumeChanged:function(){},onLoadedMetadata:function(){},preload:"metadata",style:{},title:"",volume:1},ReactAudioPlayer.propTypes={autoPlay:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,children:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.element,className:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,controls:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,controlsList:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,crossOrigin:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,id:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,listenInterval:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number,loop:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,muted:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,onAbort:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onCanPlay:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onCanPlayThrough:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onEnded:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onError:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onListen:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onLoadedMetadata:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onPause:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onPlay:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onSeeked:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onVolumeChanged:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,preload:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOf(["","none","metadata","auto"]),src:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,style:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.objectOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string),title:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,volume:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number};var _default=ReactAudioPlayer,reactHotLoader,leaveModule;__nested_webpack_exports__.default=_default,reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(ReactAudioPlayer,"ReactAudioPlayer","/home/justin/Projects/react-audio-player/src/index.tsx"),reactHotLoader.register(_default,"default","/home/justin/Projects/react-audio-player/src/index.tsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)}.call(this,__nested_webpack_require_1455__(3)(module))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}])},534:(e,t,n)=>{"use strict";var i=n(7313),r=n(7108);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function m(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function S(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(f,e)||!h.call(d,e)&&(p.test(e)?f[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var R=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),L=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),E=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var B,U=Object.assign;function N(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var r=u.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function j(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case b:return"Fragment";case L:return"Portal";case _:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&S(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function pe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(de).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Re=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Le=null,be=null,Ce=null;function _e(e){if(e=Sr(e)){if("function"!==typeof Le)throw Error(o(280));var t=e.stateNode;t&&(t=wr(t),Le(e.stateNode,e.type,t))}}function Ae(e){be?Ce?Ce.push(e):Ce=[e]:be=e}function Ee(){if(be){var e=be,t=Ce;if(Ce=be=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function xe(e,t){return e(t)}function Pe(){}var Te=!1;function Me(e,t,n){if(Te)return e(t,n);Te=!0;try{return xe(e,t,n)}finally{Te=!1,(null!==be||null!==Ce)&&(Pe(),Ee())}}function ke(e,t){var n=e.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ie=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Ie=!1}function Oe(e,t,n,i,r,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Be=!1,Ue=null,Ne=!1,Fe=null,ze={onError:function(e){Be=!0,Ue=e}};function je(e,t,n,i,r,o,s,a,l){Be=!1,Ue=null,Oe.apply(ze,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(o(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return We(r),e;if(s===i)return We(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Je=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ye=r.unstable_requestPaint,Qe=r.unstable_now,Ze=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=ht(a):0!==(o&=s)&&(i=ht(o))}else 0!==(s=n&~r)?i=ht(s):0!==o&&(i=ht(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-st(t)),i|=e[n],t&=~r;return i}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-st(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var St=0;function Rt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Lt,bt,Ct,_t,At=!1,Et=[],xt=null,Pt=null,Tt=null,Mt=new Map,kt=new Map,It=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function Bt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=Sr(t))&&Lt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ut(e){var t=yr(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void _t(e.priority,(function(){bt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Sr(n))&&Lt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Re=i,n.target.dispatchEvent(i),Re=null,t.shift()}return!0}function Ft(e,t,n){Nt(e)&&n.delete(t)}function zt(){At=!1,null!==xt&&Nt(xt)&&(xt=null),null!==Pt&&Nt(Pt)&&(Pt=null),null!==Tt&&Nt(Tt)&&(Tt=null),Mt.forEach(Ft),kt.forEach(Ft)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zt)))}function Ht(e){function t(t){return jt(t,e)}if(0<Et.length){jt(Et[0],e);for(var n=1;n<Et.length;n++){var i=Et[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==xt&&jt(xt,e),null!==Pt&&jt(Pt,e),null!==Tt&&jt(Tt,e),Mt.forEach(t),kt.forEach(t),n=0;n<It.length;n++)(i=It[n]).blockedOn===e&&(i.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Ut(n),null===n.blockedOn&&It.shift()}var Gt=R.ReactCurrentBatchConfig,Wt=!0;function qt(e,t,n,i){var r=St,o=Gt.transition;Gt.transition=null;try{St=1,Jt(e,t,n,i)}finally{St=r,Gt.transition=o}}function Vt(e,t,n,i){var r=St,o=Gt.transition;Gt.transition=null;try{St=4,Jt(e,t,n,i)}finally{St=r,Gt.transition=o}}function Jt(e,t,n,i){if(Wt){var r=Xt(e,t,n,i);if(null===r)Wi(e,t,i,Kt,n),Ot(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return xt=Bt(xt,e,t,n,i,r),!0;case"dragenter":return Pt=Bt(Pt,e,t,n,i,r),!0;case"mouseover":return Tt=Bt(Tt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Mt.set(o,Bt(Mt.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,kt.set(o,Bt(kt.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Ot(e,i),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var o=Sr(r);if(null!==o&&wt(o),null===(o=Xt(e,t,n,i))&&Wi(e,t,i,Kt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Kt=null;function Xt(e,t,n,i){if(Kt=null,null!==(e=yr(e=we(i))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,i=n.length,r="value"in Qt?Qt.value:Qt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=U({},un,{view:0,detail:0}),pn=on(hn),dn=U({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(dn),mn=on(U({},dn,{dataTransfer:0})),gn=on(U({},hn,{relatedTarget:0})),vn=on(U({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sn=on(yn),Rn=on(U({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function _n(){return Cn}var An=U({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ln[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=on(An),xn=on(U({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=on(U({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Tn=on(U({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=U({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kn=on(Mn),In=[9,13,27,32],Dn=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Bn=c&&"TextEvent"in window&&!On,Un=c&&(!Dn||On&&8<On&&11>=On),Nn=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function qn(e,t,n,i){Ae(i),0<(t=Vi(t,"onChange")).length&&(n=new cn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Vn=null,Jn=null;function Kn(e){Ni(e,0)}function Xn(e){if(J(Rr(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(c){var Zn;if(c){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}Zn=$n}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function ti(){Vn&&(Vn.detachEvent("onpropertychange",ni),Jn=Vn=null)}function ni(e){if("value"===e.propertyName&&Xn(Jn)){var t=[];qn(t,Jn,e,we(e)),Me(Kn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Jn=n,(Vn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Jn)}function oi(e,t){if("click"===e)return Xn(t)}function si(e,t){if("input"===e||"change"===e)return Xn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ui(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ci(e,t){var n,i=ui(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ui(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pi(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=pi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&di(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=ci(n,o);var s=ci(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=c&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,Si=!1;function Ri(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Si||null==gi||gi!==K(i)||("selectionStart"in(i=gi)&&di(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Vi(vi,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Li={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},bi={},Ci={};function _i(e){if(bi[e])return bi[e];if(!Li[e])return e;var t,n=Li[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ci)return bi[e]=n[t];return e}c&&(Ci=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);var Ai=_i("animationend"),Ei=_i("animationiteration"),xi=_i("animationstart"),Pi=_i("transitionend"),Ti=new Map,Mi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(e,t){Ti.set(e,t),l(t,[e])}for(var Ii=0;Ii<Mi.length;Ii++){var Di=Mi[Ii];ki(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}ki(Ai,"onAnimationEnd"),ki(Ei,"onAnimationIteration"),ki(xi,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(Pi,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Ui(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,a,l,u){if(je.apply(this,arguments),Be){if(!Be)throw Error(o(198));var c=Ue;Be=!1,Ue=null,Ne||(Ne=!0,Fe=c)}}(i,t,void 0,e),e.currentTarget=null}function Ni(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;Ui(r,a,u),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;Ui(r,a,u),o=l}}}if(Ne)throw e=Fe,Ne=!1,Fe=null,e}function Fi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Gi(t,e,2,!1),n.add(i))}function zi(e,t,n){var i=0;t&&(i|=4),Gi(n,e,i,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[ji]){e[ji]=!0,s.forEach((function(t){"selectionchange"!==t&&(Bi.has(t)||zi(t,!1,e),zi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ji]||(t[ji]=!0,zi("selectionchange",!1,t))}}function Gi(e,t,n,i){switch(Yt(t)){case 1:var r=qt;break;case 4:r=Vt;break;default:r=Jt}n=r.bind(null,t,n,e),r=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=yr(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue e}a=a.parentNode}}i=i.return}Me((function(){var i=o,r=we(n),s=[];e:{var a=Ti.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Ai:case Ei:case xi:l=vn;break;case Pi:l=Tn;break;case"scroll":l=pn;break;case"wheel":l=kn;break;case"copy":case"cut":case"paste":l=Sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var c=0!==(4&t),h=!c&&"scroll"===e,p=c?null!==a?a+"Capture":null:a;c=[];for(var d,f=i;null!==f;){var m=(d=f).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==p&&(null!=(m=ke(f,p))&&c.push(qi(f,m,d)))),h)break;f=f.return}0<c.length&&(a=new l(a,u,null,n,r),s.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Re||!(u=n.relatedTarget||n.fromElement)||!yr(u)&&!u[fr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(u=(u=n.relatedTarget||n.toElement)?yr(u):null)&&(u!==(h=He(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=i),l!==u)){if(c=fn,m="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=xn,m="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==l?a:Rr(l),d=null==u?a:Rr(u),(a=new c(m,f+"leave",l,n,r)).target=h,a.relatedTarget=d,m=null,yr(r)===i&&((c=new c(p,f+"enter",u,n,r)).target=d,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(p=u,f=0,d=c=l;d;d=Ji(d))f++;for(d=0,m=p;m;m=Ji(m))d++;for(;0<f-d;)c=Ji(c),f--;for(;0<d-f;)p=Ji(p),d--;for(;f--;){if(c===p||null!==p&&c===p.alternate)break e;c=Ji(c),p=Ji(p)}c=null}else c=null;null!==l&&Ki(s,a,l,c,!1),null!==u&&null!==h&&Ki(s,h,u,c,!0)}if("select"===(l=(a=i?Rr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Wn(a))if(Qn)g=si;else{g=ri;var v=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=oi);switch(g&&(g=g(e,i))?qn(s,g,n,r):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?Rr(i):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":Si=!0;break;case"contextmenu":case"mouseup":case"dragend":Si=!1,Ri(s,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":Ri(s,n,r)}var y;if(Dn)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Hn?zn(e,n)&&(S="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(S="onCompositionStart");S&&(Un&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==S?"onCompositionEnd"===S&&Hn&&(y=en()):(Zt="value"in(Qt=r)?Qt.value:Qt.textContent,Hn=!0)),0<(v=Vi(i,S)).length&&(S=new Rn(S,e,null,n,r),s.push({event:S,listeners:v}),y?S.data=y:null!==(y=jn(n))&&(S.data=y))),(y=Bn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Dn&&zn(e,t)?(e=en(),$t=Zt=Qt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Vi(i,"onBeforeInput")).length&&(r=new Rn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=y))}Ni(s,t)}))}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=ke(e,n))&&i.unshift(qi(e,o,r)),null!=(o=ke(e,t))&&i.push(qi(e,o,r))),e=e.return}return i}function Ji(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ki(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==u&&(a=u,r?null!=(l=ke(n,o))&&s.unshift(qi(n,l,a)):r||null!=(l=ke(n,o))&&s.push(qi(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xi=/\r\n?/g,Yi=/\u0000|\uFFFD/g;function Qi(e){return("string"===typeof e?e:""+e).replace(Xi,"\n").replace(Yi,"")}function Zi(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(o(425))}function $i(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ht(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ht(t)}function ur(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),pr="__reactFiber$"+hr,dr="__reactProps$"+hr,fr="__reactContainer$"+hr,mr="__reactEvents$"+hr,gr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(e){var t=e[pr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[pr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cr(e);null!==e;){if(n=e[pr])return n;e=cr(e)}return t}n=(e=n).parentNode}return null}function Sr(e){return!(e=e[pr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Rr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wr(e){return e[dr]||null}var Lr=[],br=-1;function Cr(e){return{current:e}}function _r(e){0>br||(e.current=Lr[br],Lr[br]=null,br--)}function Ar(e,t){br++,Lr[br]=e.current,e.current=t}var Er={},xr=Cr(Er),Pr=Cr(!1),Tr=Er;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Er;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function kr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ir(){_r(Pr),_r(xr)}function Dr(e,t,n){if(xr.current!==Er)throw Error(o(168));Ar(xr,t),Ar(Pr,n)}function Or(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,G(e)||"Unknown",r));return U({},n,i)}function Br(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Tr=xr.current,Ar(xr,e),Ar(Pr,Pr.current),!0}function Ur(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Or(e,t,Tr),i.__reactInternalMemoizedMergedChildContext=e,_r(Pr),_r(xr),Ar(xr,e)):_r(Pr),Ar(Pr,n)}var Nr=null,Fr=!1,zr=!1;function jr(e){null===Nr?Nr=[e]:Nr.push(e)}function Hr(){if(!zr&&null!==Nr){zr=!0;var e=0,t=St;try{var n=Nr;for(St=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Nr=null,Fr=!1}catch(r){throw null!==Nr&&(Nr=Nr.slice(e+1)),Je($e,Hr),r}finally{St=t,zr=!1}}return null}var Gr=[],Wr=0,qr=null,Vr=0,Jr=[],Kr=0,Xr=null,Yr=1,Qr="";function Zr(e,t){Gr[Wr++]=Vr,Gr[Wr++]=qr,qr=e,Vr=t}function $r(e,t,n){Jr[Kr++]=Yr,Jr[Kr++]=Qr,Jr[Kr++]=Xr,Xr=e;var i=Yr;e=Qr;var r=32-st(i)-1;i&=~(1<<r),n+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Yr=1<<32-st(t)+r|n<<r|i,Qr=o+e}else Yr=1<<o|n<<r|i,Qr=e}function eo(e){null!==e.return&&(Zr(e,1),$r(e,1,0))}function to(e){for(;e===qr;)qr=Gr[--Wr],Gr[Wr]=null,Vr=Gr[--Wr],Gr[Wr]=null;for(;e===Xr;)Xr=Jr[--Kr],Jr[Kr]=null,Qr=Jr[--Kr],Jr[Kr]=null,Yr=Jr[--Kr],Jr[Kr]=null}var no=null,io=null,ro=!1,oo=null;function so(e,t){var n=ku(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=ur(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xr?{id:Yr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=ku(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(ro){var t=io;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ur(n.nextSibling);var i=no;t&&ao(e,t)?so(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return co(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=ur(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=ur(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?ur(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=ur(e.nextSibling)}function fo(){io=no=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=R.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Cr(null),So=null,Ro=null,wo=null;function Lo(){wo=Ro=So=null}function bo(e){var t=yo.current;_r(yo),e._currentValue=t}function Co(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function _o(e,t){So=e,wo=Ro=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ra=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===Ro){if(null===So)throw Error(o(308));Ro=e,So.dependencies={lanes:0,firstContext:e}}else Ro=Ro.next=e;return t}var Eo=null;function xo(e){null===Eo?Eo=[e]:Eo.push(e)}function Po(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,xo(t)):(n.next=r.next,r.next=n),t.interleaved=n,To(e,i)}function To(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function ko(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Do(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Pl)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,To(e,n)}return null===(r=i.interleaved)?(t.next=t,xo(i)):(t.next=r.next,r.next=t),i.interleaved=t,To(e,n)}function Bo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Uo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function No(e,t,n,i){var r=e.updateQueue;Mo=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=r.baseState;for(s=0,c=u=l=null,a=o;;){var p=a.lane,d=a.eventTime;if((i&p)===p){null!==c&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(p=t,d=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(d,h,p);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=m.payload)?f.call(d,h,p):f)||void 0===p)break e;h=U({},h,p);break e;case 2:Mo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(p=r.effects)?r.effects=[a]:p.push(a))}else d={eventTime:d,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=d,l=h):c=c.next=d,s|=p;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(p=a).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}if(null===c&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);Ul|=s,e.lanes=s,e.memoizedState=h}}function Fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var zo=(new i.Component).refs;function jo(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ho={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tu(),r=nu(e),o=Do(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Oo(e,o,r))&&(iu(t,e,r,i),Bo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tu(),r=nu(e),o=Do(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Oo(e,o,r))&&(iu(t,e,r,i),Bo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),i=nu(e),r=Do(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Oo(e,r,i))&&(iu(t,e,i,n),Bo(t,e,i))}};function Go(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function Wo(e,t,n){var i=!1,r=Er,o=t.contextType;return"object"===typeof o&&null!==o?o=Ao(o):(r=kr(t)?Tr:xr.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Mr(e,r):Er),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ho,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function qo(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function Vo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=zo,ko(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Ao(o):(o=kr(t)?Tr:xr.current,r.context=Mr(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(jo(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Ho.enqueueReplaceState(r,r.state,null),No(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Jo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===zo&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ko(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Nu(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function u(e,t,n,i){var o=n.type;return o===b?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===k&&Xo(o)===t.type)?((i=r(t,n.props)).ref=Jo(e,t,n),i.return=e,i):((i=Ou(n.type,n.key,n.props,null,e.mode,i)).ref=Jo(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,o){return null===t||7!==t.tag?((t=Bu(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Nu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ou(t.type,t.key,t.props,null,e.mode,n)).ref=Jo(e,null,t),n.return=e,n;case L:return(t=Fu(t,e.mode,n)).return=e,t;case k:return p(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Bu(t,e.mode,n,null)).return=e,t;Ko(e,t)}return null}function d(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?u(e,t,n,i):null;case L:return n.key===r?c(e,t,n,i):null;case k:return d(e,t,(r=n._init)(n._payload),i)}if(te(n)||O(n))return null!==r?null:h(e,t,n,i,null);Ko(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case L:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case k:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||O(i))return h(t,e=e.get(n)||null,i,r,null);Ko(t,i)}return null}function m(r,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=d(r,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(r,h),o=s(v,o,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===a.length)return n(r,h),ro&&Zr(r,m),u;if(null===h){for(;m<a.length;m++)null!==(h=p(r,a[m],l))&&(o=s(h,o,m),null===c?u=h:c.sibling=h,c=h);return ro&&Zr(r,m),u}for(h=i(r,h);m<a.length;m++)null!==(g=f(h,r,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(r,e)})),ro&&Zr(r,m),u}function g(r,a,l,u){var c=O(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var S=d(r,m,y.value,u);if(null===S){null===m&&(m=v);break}e&&m&&null===S.alternate&&t(r,m),a=s(S,a,g),null===h?c=S:h.sibling=S,h=S,m=v}if(y.done)return n(r,m),ro&&Zr(r,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=p(r,y.value,u))&&(a=s(y,a,g),null===h?c=y:h.sibling=y,h=y);return ro&&Zr(r,g),c}for(m=i(r,m);!y.done;g++,y=l.next())null!==(y=f(m,r,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(r,e)})),ro&&Zr(r,g),c}return function e(i,o,s,l){if("object"===typeof s&&null!==s&&s.type===b&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var u=s.key,c=o;null!==c;){if(c.key===u){if((u=s.type)===b){if(7===c.tag){n(i,c.sibling),(o=r(c,s.props.children)).return=i,i=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===k&&Xo(u)===c.type){n(i,c.sibling),(o=r(c,s.props)).ref=Jo(i,c,s),o.return=i,i=o;break e}n(i,c);break}t(i,c),c=c.sibling}s.type===b?((o=Bu(s.props.children,i.mode,l,s.key)).return=i,i=o):((l=Ou(s.type,s.key,s.props,null,i.mode,l)).ref=Jo(i,o,s),l.return=i,i=l)}return a(i);case L:e:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Fu(s,i.mode,l)).return=i,i=o}return a(i);case k:return e(i,o,(c=s._init)(s._payload),l)}if(te(s))return m(i,o,s,l);if(O(s))return g(i,o,s,l);Ko(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=Nu(s,i.mode,l)).return=i,i=o),a(i)):n(i,o)}}var Qo=Yo(!0),Zo=Yo(!1),$o={},es=Cr($o),ts=Cr($o),ns=Cr($o);function is(e){if(e===$o)throw Error(o(174));return e}function rs(e,t){switch(Ar(ns,t),Ar(ts,e),Ar(es,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_r(es),Ar(es,t)}function os(){_r(es),_r(ts),_r(ns)}function ss(e){is(ns.current);var t=is(es.current),n=le(t,e.type);t!==n&&(Ar(ts,e),Ar(es,n))}function as(e){ts.current===e&&(_r(es),_r(ts))}var ls=Cr(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cs=[];function hs(){for(var e=0;e<cs.length;e++)cs[e]._workInProgressVersionPrimary=null;cs.length=0}var ps=R.ReactCurrentDispatcher,ds=R.ReactCurrentBatchConfig,fs=0,ms=null,gs=null,vs=null,ys=!1,Ss=!1,Rs=0,ws=0;function Ls(){throw Error(o(321))}function bs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function Cs(e,t,n,i,r,s){if(fs=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ps.current=null===e||null===e.memoizedState?aa:la,e=n(i,r),Ss){s=0;do{if(Ss=!1,Rs=0,25<=s)throw Error(o(301));s+=1,vs=gs=null,t.updateQueue=null,ps.current=ua,e=n(i,r)}while(Ss)}if(ps.current=sa,t=null!==gs&&null!==gs.next,fs=0,vs=gs=ms=null,ys=!1,t)throw Error(o(300));return e}function _s(){var e=0!==Rs;return Rs=0,e}function As(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?ms.memoizedState=vs=e:vs=vs.next=e,vs}function Es(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===vs?ms.memoizedState:vs.next;if(null!==t)vs=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===vs?ms.memoizedState=vs=e:vs=vs.next=e}return vs}function xs(e,t){return"function"===typeof t?t(e):t}function Ps(e){var t=Es(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=gs,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=a=null,u=null,c=s;do{var h=c.lane;if((fs&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=p,a=i):u=u.next=p,ms.lanes|=h,Ul|=h}c=c.next}while(null!==c&&c!==s);null===u?a=i:u.next=l,ai(i,t.memoizedState)||(Ra=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=u,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,ms.lanes|=s,Ul|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ts(e){var t=Es(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);ai(s,t.memoizedState)||(Ra=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Ms(){}function ks(e,t){var n=ms,i=Es(),r=t(),s=!ai(i.memoizedState,r);if(s&&(i.memoizedState=r,Ra=!0),i=i.queue,Ws(Os.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,Fs(9,Ds.bind(null,n,i,r,t),void 0,null),null===Tl)throw Error(o(349));0!==(30&fs)||Is(n,t,r)}return r}function Is(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ds(e,t,n,i){t.value=n,t.getSnapshot=i,Bs(t)&&Us(e)}function Os(e,t,n){return n((function(){Bs(t)&&Us(e)}))}function Bs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Us(e){var t=To(e,1);null!==t&&iu(t,e,1,-1)}function Ns(e){var t=As();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ms,e),[t.memoizedState,e]}function Fs(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function zs(){return Es().memoizedState}function js(e,t,n,i){var r=As();ms.flags|=e,r.memoizedState=Fs(1|t,n,void 0,void 0===i?null:i)}function Hs(e,t,n,i){var r=Es();i=void 0===i?null:i;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==i&&bs(i,s.deps))return void(r.memoizedState=Fs(t,n,o,i))}ms.flags|=e,r.memoizedState=Fs(1|t,n,o,i)}function Gs(e,t){return js(8390656,8,e,t)}function Ws(e,t){return Hs(2048,8,e,t)}function qs(e,t){return Hs(4,2,e,t)}function Vs(e,t){return Hs(4,4,e,t)}function Js(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ks(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Hs(4,4,Js.bind(null,t,e),n)}function Xs(){}function Ys(e,t){var n=Es();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&bs(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=Es();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&bs(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Zs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,Ra=!0),e.memoizedState=n):(ai(n,t)||(n=mt(),ms.lanes|=n,Ul|=n,e.baseState=!0),t)}function $s(e,t){var n=St;St=0!==n&&4>n?n:4,e(!0);var i=ds.transition;ds.transition={};try{e(!1),t()}finally{St=n,ds.transition=i}}function ea(){return Es().memoizedState}function ta(e,t,n){var i=nu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e))ra(t,n);else if(null!==(n=Po(e,t,n,i))){iu(n,e,i,tu()),oa(n,t,i)}}function na(e,t,n){var i=nu(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))ra(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,s)){var l=t.interleaved;return null===l?(r.next=r,xo(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(u){}null!==(n=Po(e,t,r,i))&&(iu(n,e,i,r=tu()),oa(n,t,i))}}function ia(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ra(e,t){Ss=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:Ao,useCallback:Ls,useContext:Ls,useEffect:Ls,useImperativeHandle:Ls,useInsertionEffect:Ls,useLayoutEffect:Ls,useMemo:Ls,useReducer:Ls,useRef:Ls,useState:Ls,useDebugValue:Ls,useDeferredValue:Ls,useTransition:Ls,useMutableSource:Ls,useSyncExternalStore:Ls,useId:Ls,unstable_isNewReconciler:!1},aa={readContext:Ao,useCallback:function(e,t){return As().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:Gs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,js(4194308,4,Js.bind(null,t,e),n)},useLayoutEffect:function(e,t){return js(4194308,4,e,t)},useInsertionEffect:function(e,t){return js(4,2,e,t)},useMemo:function(e,t){var n=As();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=As();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ta.bind(null,ms,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},As().memoizedState=e},useState:Ns,useDebugValue:Xs,useDeferredValue:function(e){return As().memoizedState=e},useTransition:function(){var e=Ns(!1),t=e[0];return e=$s.bind(null,e[1]),As().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ms,r=As();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Tl)throw Error(o(349));0!==(30&fs)||Is(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Gs(Os.bind(null,i,s,e),[e]),i.flags|=2048,Fs(9,Ds.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=As(),t=Tl.identifierPrefix;if(ro){var n=Qr;t=":"+t+"R"+(n=(Yr&~(1<<32-st(Yr)-1)).toString(32)+n),0<(n=Rs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ws++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ao,useCallback:Ys,useContext:Ao,useEffect:Ws,useImperativeHandle:Ks,useInsertionEffect:qs,useLayoutEffect:Vs,useMemo:Qs,useReducer:Ps,useRef:zs,useState:function(){return Ps(xs)},useDebugValue:Xs,useDeferredValue:function(e){return Zs(Es(),gs.memoizedState,e)},useTransition:function(){return[Ps(xs)[0],Es().memoizedState]},useMutableSource:Ms,useSyncExternalStore:ks,useId:ea,unstable_isNewReconciler:!1},ua={readContext:Ao,useCallback:Ys,useContext:Ao,useEffect:Ws,useImperativeHandle:Ks,useInsertionEffect:qs,useLayoutEffect:Vs,useMemo:Qs,useReducer:Ts,useRef:zs,useState:function(){return Ts(xs)},useDebugValue:Xs,useDeferredValue:function(e){var t=Es();return null===gs?t.memoizedState=e:Zs(t,gs.memoizedState,e)},useTransition:function(){return[Ts(xs)[0],Es().memoizedState]},useMutableSource:Ms,useSyncExternalStore:ks,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",i=t;do{n+=j(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function pa(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ql||(ql=!0,Vl=i),pa(0,t)},n}function ma(e,t,n){(n=Do(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){pa(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){pa(0,t),"function"!==typeof i&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new da;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Au.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Do(-1,1)).tag=2,Oo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var Sa=R.ReactCurrentOwner,Ra=!1;function wa(e,t,n,i){t.child=null===e?Zo(t,null,n,i):Qo(t,e.child,n,i)}function La(e,t,n,i,r){n=n.render;var o=t.ref;return _o(t,r),i=Cs(e,t,n,i,o,r),n=_s(),null===e||Ra?(ro&&n&&eo(t),t.flags|=1,wa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qa(e,t,r))}function ba(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Iu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ou(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ca(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,i)&&e.ref===t.ref)return qa(e,t,r)}return t.flags|=1,(e=Du(o,i)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(li(o,i)&&e.ref===t.ref){if(Ra=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,qa(e,t,r);0!==(131072&e.flags)&&(Ra=!0)}}return Ea(e,t,n,i,r)}function _a(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Dl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ar(Dl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Ar(Dl,Il),Il|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Ar(Dl,Il),Il|=i;return wa(e,t,r,n),t.child}function Aa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ea(e,t,n,i,r){var o=kr(n)?Tr:xr.current;return o=Mr(t,o),_o(t,r),n=Cs(e,t,n,i,o,r),i=_s(),null===e||Ra?(ro&&i&&eo(t),t.flags|=1,wa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,qa(e,t,r))}function xa(e,t,n,i,r){if(kr(n)){var o=!0;Br(t)}else o=!1;if(_o(t,r),null===t.stateNode)Wa(e,t),Wo(t,n,i),Vo(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ao(u):u=Mr(t,u=kr(n)?Tr:xr.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==u)&&qo(t,s,i,u),Mo=!1;var p=t.memoizedState;s.state=p,No(t,i,s,r),l=t.memoizedState,a!==i||p!==l||Pr.current||Mo?("function"===typeof c&&(jo(t,n,c,i),l=t.memoizedState),(a=Mo||Go(t,n,a,i,p,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=u,i=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Io(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:vo(t.type,a),s.props=u,h=t.pendingProps,p=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ao(l):l=Mr(t,l=kr(n)?Tr:xr.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||p!==l)&&qo(t,s,i,l),Mo=!1,p=t.memoizedState,s.state=p,No(t,i,s,r);var f=t.memoizedState;a!==h||p!==f||Pr.current||Mo?("function"===typeof d&&(jo(t,n,d,i),f=t.memoizedState),(u=Mo||Go(t,n,u,i,p,f,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=l,i=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return Pa(e,t,n,i,o,r)}function Pa(e,t,n,i,r,o){Aa(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&Ur(t,n,!1),qa(e,t,o);i=t.stateNode,Sa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,a,o)):wa(e,t,a,o),t.memoizedState=i.state,r&&Ur(t,n,!0),t.child}function Ta(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),rs(e,t.containerInfo)}function Ma(e,t,n,i,r){return fo(),mo(r),t.flags|=256,wa(e,t,n,i),t.child}var ka,Ia,Da,Oa,Ba={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Na(e,t,n){var i,r=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ar(ls,1&s),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Uu(l,r,0,null),e=Bu(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=Ba,e):Fa(t,l));if(null!==(s=e.memoizedState)&&null!==(i=s.dehydrated))return function(e,t,n,i,r,s,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,i=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=Uu({mode:"visible",children:i.children},r,0,null),(s=Bu(s,r,a,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&Qo(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=Ba,s);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,za(e,t,a,i=ha(s=Error(o(419)),i,void 0))}if(l=0!==(a&e.childLanes),Ra||l){if(null!==(i=Tl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,To(e,r),iu(i,e,r,-1))}return gu(),za(e,t,a,i=ha(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=xu.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,io=ur(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(Jr[Kr++]=Yr,Jr[Kr++]=Qr,Jr[Kr++]=Xr,Yr=e.id,Qr=e.overflow,Xr=t),t=Fa(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,s,n);if(a){a=r.fallback,l=t.mode,i=(s=e.child).sibling;var u={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=u,t.deletions=null):(r=Du(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==i?a=Du(i,a):(a=Bu(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Ua(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ba,r}return e=(a=e.child).sibling,r=Du(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fa(e,t){return(t=Uu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,i){return null!==i&&mo(i),Qo(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ja(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Co(e.return,t,n)}function Ha(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function Ga(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(wa(e,t,i.children,n),0!==(2&(i=ls.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ja(e,n,t);else if(19===e.tag)ja(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ar(ls,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===us(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ha(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===us(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ha(t,!0,n,null,o);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Va(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ja(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ka(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ja(t),null;case 1:case 17:return kr(t.type)&&Ir(),Ja(t),null;case 3:return i=t.stateNode,os(),_r(Pr),_r(xr),hs(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(au(oo),oo=null))),Ia(e,t),Ja(t),null;case 5:as(t);var r=is(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Ja(t),null}if(e=is(es.current),ho(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[pr]=t,i[dr]=s,e=0!==(1&t.mode),n){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(r=0;r<Oi.length;r++)Fi(Oi[r],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":Y(i,s),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Fi("invalid",i);break;case"textarea":re(i,s),Fi("invalid",i)}for(var l in ye(n,s),r=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?i.textContent!==u&&(!0!==s.suppressHydrationWarning&&Zi(i.textContent,u,e),r=["children",u]):"number"===typeof u&&i.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Zi(i.textContent,u,e),r=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fi("scroll",i)}switch(n){case"input":V(i),$(i,s,!0);break;case"textarea":V(i),se(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=$i)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[pr]=t,e[dr]=i,ka(e,t,!1,!1),t.stateNode=e;e:{switch(l=Se(n,i),n){case"dialog":Fi("cancel",e),Fi("close",e),r=i;break;case"iframe":case"object":case"embed":Fi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Oi.length;r++)Fi(Oi[r],e);r=i;break;case"source":Fi("error",e),r=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),r=i;break;case"details":Fi("toggle",e),r=i;break;case"input":Y(e,i),r=X(e,i),Fi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=U({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Fi("invalid",e)}for(s in ye(n,r),u=r)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?ge(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&pe(e,c):"number"===typeof c&&pe(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Fi("scroll",e):null!=c&&S(e,s,c,l))}switch(n){case"input":V(e),$(e,i,!1);break;case"textarea":V(e),se(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ne(e,!!i.multiple,s,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ja(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=is(ns.current),is(es.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[pr]=t,(s=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zi(i.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[pr]=t,t.stateNode=i}return Ja(t),null;case 13:if(_r(ls),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[pr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ja(t),s=!1}else null!==oo&&(au(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Ol&&(Ol=3):gu())),null!==t.updateQueue&&(t.flags|=4),Ja(t),null);case 4:return os(),Ia(e,t),null===e&&Hi(t.stateNode.containerInfo),Ja(t),null;case 10:return bo(t.type._context),Ja(t),null;case 19:if(_r(ls),null===(s=t.memoizedState))return Ja(t),null;if(i=0!==(128&t.flags),null===(l=s.rendering))if(i)Va(s,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=us(e))){for(t.flags|=128,Va(s,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ar(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Qe()>Gl&&(t.flags|=128,i=!0,Va(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=us(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Va(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return Ja(t),null}else 2*Qe()-s.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,i=!0,Va(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qe(),t.sibling=null,n=ls.current,Ar(ls,i?1&n|2:1&n),t):(Ja(t),null);case 22:case 23:return pu(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Ja(t),6&t.subtreeFlags&&(t.flags|=8192)):Ja(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xa(e,t){switch(to(t),t.tag){case 1:return kr(t.type)&&Ir(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),_r(Pr),_r(xr),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(_r(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _r(ls),null;case 4:return os(),null;case 10:return bo(t.type._context),null;case 22:case 23:return pu(),null;default:return null}}ka=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ia=function(){},Da=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,is(es.current);var o,s=null;switch(n){case"input":r=X(e,r),i=X(e,i),s=[];break;case"select":r=U({},r,{value:void 0}),i=U({},i,{value:void 0}),s=[];break;case"textarea":r=ie(e,r),i=ie(e,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(c in ye(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var l=r[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var u=i[c];if(l=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fi("scroll",e),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Oa=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ya=!1,Qa=!1,Za="function"===typeof WeakSet?WeakSet:Set,$a=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){_u(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){_u(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&tl(t,n,o)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pr],delete t[dr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,pl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:Qa||el(n,t);case 6:var i=hl,r=pl;hl=null,dl(e,t,n),pl=r,null!==(hl=i)&&(pl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(pl?(e=hl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ht(e)):lr(hl,n.stateNode));break;case 4:i=hl,r=pl,hl=n.stateNode.containerInfo,pl=!0,dl(e,t,n),hl=i,pl=r;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),r=r.next}while(r!==i)}dl(e,t,n);break;case 1:if(!Qa&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){_u(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Qa=(i=Qa)||null!==n.memoizedState,dl(e,t,n),Qa=i):dl(e,t,n);break;default:dl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var i=Pu.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,pl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));fl(s,a,r),hl=null,pl=!1;var u=r.alternate;null!==u&&(u.return=null),r.return=null}catch(c){_u(r,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(g){_u(e,e.return,g)}try{il(5,e,e.return)}catch(g){_u(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{pe(r,"")}catch(g){_u(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(r,s),Se(l,a);var c=Se(l,s);for(a=0;a<u.length;a+=2){var h=u[a],p=u[a+1];"style"===h?ge(r,p):"dangerouslySetInnerHTML"===h?he(r,p):"children"===h?pe(r,p):S(r,h,p,c)}switch(l){case"input":Z(r,s);break;case"textarea":oe(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(r,!!s.multiple,f,!1):d!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[dr]=s}catch(g){_u(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(g){_u(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){_u(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||(Hl=Qe())),4&i&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(c=Qa)||h,gl(t,e),Qa=c):gl(t,e),yl(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(p=$a=h;null!==$a;){switch(f=(d=$a).child,d.tag){case 0:case 11:case 14:case 15:il(4,d,d.return);break;case 1:el(d,d.return);var m=d.stateNode;if("function"===typeof m.componentWillUnmount){i=d,n=d.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){_u(i,n,g)}}break;case 5:el(d,d.return);break;case 22:if(null!==d.memoizedState){Ll(p);continue}}null!==f?(f.return=d,$a=f):Ll(p)}h=h.sibling}e:for(h=null,p=e;;){if(5===p.tag){if(null===h){h=p;try{r=p.stateNode,c?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=p.stateNode,a=void 0!==(u=p.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(g){_u(e,e.return,g)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){_u(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gl(t,e),yl(e),4&i&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(pe(r,""),i.flags&=-33),cl(e,ll(e),r);break;case 3:case 4:var s=i.stateNode.containerInfo;ul(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){_u(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Sl(e,t,n){$a=e,Rl(e,t,n)}function Rl(e,t,n){for(var i=0!==(1&e.mode);null!==$a;){var r=$a,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||Ya;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ya;var u=Qa;if(Ya=s,(Qa=l)&&!u)for($a=r;null!==$a;)l=(s=$a).child,22===s.tag&&null!==s.memoizedState?bl(r):null!==l?(l.return=s,$a=l):bl(r);for(;null!==o;)$a=o,Rl(o,t,n),o=o.sibling;$a=r,Ya=a,Qa=u}wl(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,$a=o):wl(e)}}function wl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Qa)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Fo(t,s,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var p=h.dehydrated;null!==p&&Ht(p)}}}break;default:throw Error(o(163))}Qa||512&t.flags&&ol(t)}catch(d){_u(t,t.return,d)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function Ll(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function bl(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_u(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){_u(t,r,l)}}var o=t.return;try{ol(t)}catch(l){_u(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){_u(t,s,l)}}}catch(l){_u(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Cl,_l=Math.ceil,Al=R.ReactCurrentDispatcher,El=R.ReactCurrentOwner,xl=R.ReactCurrentBatchConfig,Pl=0,Tl=null,Ml=null,kl=0,Il=0,Dl=Cr(0),Ol=0,Bl=null,Ul=0,Nl=0,Fl=0,zl=null,jl=null,Hl=0,Gl=1/0,Wl=null,ql=!1,Vl=null,Jl=null,Kl=!1,Xl=null,Yl=0,Ql=0,Zl=null,$l=-1,eu=0;function tu(){return 0!==(6&Pl)?Qe():-1!==$l?$l:$l=Qe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==kl?kl&-kl:null!==go.transition?(0===eu&&(eu=mt()),eu):0!==(e=St)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function iu(e,t,n,i){if(50<Ql)throw Ql=0,Zl=null,Error(o(185));vt(e,n,i),0!==(2&Pl)&&e===Tl||(e===Tl&&(0===(2&Pl)&&(Nl|=n),4===Ol&&lu(e,kl)),ru(e,i),1===n&&0===Pl&&0===(1&t.mode)&&(Gl=Qe()+500,Fr&&Hr()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=dt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=pt(e,e===Tl?kl:0);if(0===i)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Fr=!0,jr(e)}(uu.bind(null,e)):jr(uu.bind(null,e)),sr((function(){0===(6&Pl)&&Hr()})),n=null;else{switch(Rt(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Tu(n,ou.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ou(e,t){if($l=-1,eu=0,0!==(6&Pl))throw Error(o(327));var n=e.callbackNode;if(bu()&&e.callbackNode!==n)return null;var i=pt(e,e===Tl?kl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=vu(e,i);else{t=i;var r=Pl;Pl|=2;var s=mu();for(Tl===e&&kl===t||(Wl=null,Gl=Qe()+500,du(e,t));;)try{Su();break}catch(l){fu(e,l)}Lo(),Al.current=s,Pl=r,null!==Ml?t=0:(Tl=null,kl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=su(e,r))),1===t)throw n=Bl,du(e,0),lu(e,i),ru(e,Qe()),n;if(6===t)lu(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=vu(e,i))&&(0!==(s=ft(e))&&(i=s,t=su(e,s))),1===t))throw n=Bl,du(e,0),lu(e,i),ru(e,Qe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:Lu(e,jl,Wl);break;case 3:if(lu(e,i),(130023424&i)===i&&10<(t=Hl+500-Qe())){if(0!==pt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tu(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(Lu.bind(null,e,jl,Wl),t);break}Lu(e,jl,Wl);break;case 4:if(lu(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-st(i);s=1<<a,(a=t[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*_l(i/1960))-i)){e.timeoutHandle=ir(Lu.bind(null,e,jl,Wl),i);break}Lu(e,jl,Wl);break;default:throw Error(o(329))}}}return ru(e,Qe()),e.callbackNode===n?ou.bind(null,e):null}function su(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=vu(e,t))&&(t=jl,jl=n,null!==t&&au(t)),e}function au(e){null===jl?jl=e:jl.push.apply(jl,e)}function lu(e,t){for(t&=~Fl,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),i=1<<n;e[n]=-1,t&=~i}}function uu(e){if(0!==(6&Pl))throw Error(o(327));bu();var t=pt(e,0);if(0===(1&t))return ru(e,Qe()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=su(e,i))}if(1===n)throw n=Bl,du(e,0),lu(e,t),ru(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lu(e,jl,Wl),ru(e,Qe()),null}function cu(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Gl=Qe()+500,Fr&&Hr())}}function hu(e){null!==Xl&&0===Xl.tag&&0===(6&Pl)&&bu();var t=Pl;Pl|=1;var n=xl.transition,i=St;try{if(xl.transition=null,St=1,e)return e()}finally{St=i,xl.transition=n,0===(6&(Pl=t))&&Hr()}}function pu(){Il=Dl.current,_r(Dl)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ml)for(n=Ml.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Ir();break;case 3:os(),_r(Pr),_r(xr),hs();break;case 5:as(i);break;case 4:os();break;case 13:case 19:_r(ls);break;case 10:bo(i.type._context);break;case 22:case 23:pu()}n=n.return}if(Tl=e,Ml=e=Du(e.current,null),kl=Il=t,Ol=0,Bl=null,Fl=Nl=Ul=0,jl=zl=null,null!==Eo){for(t=0;t<Eo.length;t++)if(null!==(i=(n=Eo[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}Eo=null}return e}function fu(e,t){for(;;){var n=Ml;try{if(Lo(),ps.current=sa,ys){for(var i=ms.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ys=!1}if(fs=0,vs=gs=ms=null,Ss=!1,Rs=0,El.current=null,null===n||null===n.return){Ol=1,Bl=t,Ml=null;break}e:{var s=e,a=n.return,l=n,u=t;if(t=kl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,p=h.tag;if(0===(1&h.mode)&&(0===p||11===p||15===p)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=va(a);if(null!==f){f.flags&=-257,ya(f,a,l,0,t),1&f.mode&&ga(s,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ga(s,c,t),gu();break e}u=Error(o(426))}else if(ro&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),mo(ca(u,l));break e}}s=u=ca(u,l),4!==Ol&&(Ol=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Uo(s,fa(0,u,t));break e;case 1:l=u;var y=s.type,S=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==S&&"function"===typeof S.componentDidCatch&&(null===Jl||!Jl.has(S)))){s.flags|=65536,t&=-t,s.lanes|=t,Uo(s,ma(s,l,t));break e}}s=s.return}while(null!==s)}wu(n)}catch(R){t=R,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function mu(){var e=Al.current;return Al.current=sa,null===e?sa:e}function gu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Tl||0===(268435455&Ul)&&0===(268435455&Nl)||lu(Tl,kl)}function vu(e,t){var n=Pl;Pl|=2;var i=mu();for(Tl===e&&kl===t||(Wl=null,du(e,t));;)try{yu();break}catch(r){fu(e,r)}if(Lo(),Pl=n,Al.current=i,null!==Ml)throw Error(o(261));return Tl=null,kl=0,Ol}function yu(){for(;null!==Ml;)Ru(Ml)}function Su(){for(;null!==Ml&&!Xe();)Ru(Ml)}function Ru(e){var t=Cl(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?wu(e):Ml=t,El.current=null}function wu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ka(n,t,Il)))return void(Ml=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Ol=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Ol&&(Ol=5)}function Lu(e,t,n){var i=St,r=xl.transition;try{xl.transition=null,St=1,function(e,t,n,i){do{bu()}while(null!==Xl);if(0!==(6&Pl))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,s),e===Tl&&(Ml=Tl=null,kl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Tu(tt,(function(){return bu(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=xl.transition,xl.transition=null;var a=St;St=1;var l=Pl;Pl|=4,El.current=null,function(e,t){if(er=Wt,di(e=pi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,p=e,d=null;t:for(;;){for(var f;p!==n||0!==r&&3!==p.nodeType||(l=a+r),p!==s||0!==i&&3!==p.nodeType||(u=a+i),3===p.nodeType&&(a+=p.nodeValue.length),null!==(f=p.firstChild);)d=p,p=f;for(;;){if(p===e)break t;if(d===n&&++c===r&&(l=a),d===s&&++h===i&&(u=a),null!==(f=p.nextSibling))break;d=(p=d).parentNode}p=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,S=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var R=t.stateNode.containerInfo;1===R.nodeType?R.textContent="":9===R.nodeType&&R.documentElement&&R.removeChild(R.documentElement);break;default:throw Error(o(163))}}catch(w){_u(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}m=nl,nl=!1}(e,n),vl(n,e),fi(tr),Wt=!!er,tr=er=null,e.current=n,Sl(n,e,r),Ye(),Pl=l,St=a,xl.transition=s}else e.current=n;if(Kl&&(Kl=!1,Xl=e,Yl=r),s=e.pendingLanes,0===s&&(Jl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Qe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ql)throw ql=!1,e=Vl,Vl=null,e;0!==(1&Yl)&&0!==e.tag&&bu(),s=e.pendingLanes,0!==(1&s)?e===Zl?Ql++:(Ql=0,Zl=e):Ql=0,Hr()}(e,t,n,i)}finally{xl.transition=r,St=i}return null}function bu(){if(null!==Xl){var e=Rt(Yl),t=xl.transition,n=St;try{if(xl.transition=null,St=16>e?16:e,null===Xl)var i=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Pl))throw Error(o(331));var r=Pl;for(Pl|=4,$a=e.current;null!==$a;){var s=$a,a=s.child;if(0!==(16&$a.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for($a=c;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:il(8,h,s)}var p=h.child;if(null!==p)p.return=h,$a=p;else for(;null!==$a;){var d=(h=$a).sibling,f=h.return;if(sl(h),h===c){$a=null;break}if(null!==d){d.return=f,$a=d;break}$a=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$a=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,$a=a;else e:for(;null!==$a;){if(0!==(2048&(s=$a).flags))switch(s.tag){case 0:case 11:case 15:il(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,$a=y;break e}$a=s.return}}var S=e.current;for($a=S;null!==$a;){var R=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==R)R.return=a,$a=R;else e:for(a=S;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(L){_u(l,l.return,L)}if(l===a){$a=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$a=w;break e}$a=l.return}}if(Pl=r,Hr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(L){}i=!0}return i}finally{St=n,xl.transition=t}}return!1}function Cu(e,t,n){e=Oo(e,t=fa(0,t=ca(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),ru(e,t))}function _u(e,t,n){if(3===e.tag)Cu(e,e,n);else for(;null!==t;){if(3===t.tag){Cu(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Jl||!Jl.has(i))){t=Oo(t,e=ma(t,e=ca(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function Au(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(kl&n)===n&&(4===Ol||3===Ol&&(130023424&kl)===kl&&500>Qe()-Hl?du(e,0):Fl|=n),ru(e,t)}function Eu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=To(e,t))&&(vt(e,t,n),ru(e,n))}function xu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Eu(e,n)}function Pu(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Eu(e,n)}function Tu(e,t){return Je(e,t)}function Mu(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ku(e,t,n,i){return new Mu(e,t,n,i)}function Iu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=ku(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ou(e,t,n,i,r,s){var a=2;if(i=e,"function"===typeof e)Iu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case b:return Bu(n.children,r,s,t);case C:a=8,r|=8;break;case _:return(e=ku(12,n,t,2|r)).elementType=_,e.lanes=s,e;case P:return(e=ku(13,n,t,r)).elementType=P,e.lanes=s,e;case T:return(e=ku(19,n,t,r)).elementType=T,e.lanes=s,e;case I:return Uu(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:a=10;break e;case E:a=9;break e;case x:a=11;break e;case M:a=14;break e;case k:a=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=ku(a,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Bu(e,t,n,i){return(e=ku(7,e,i,t)).lanes=n,e}function Uu(e,t,n,i){return(e=ku(22,e,i,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Nu(e,t,n){return(e=ku(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=ku(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,i,r,o,s,a,l){return e=new zu(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=ku(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ko(o),e}function Hu(e){if(!e)return Er;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(kr(n))return Or(e,n,t)}return t}function Gu(e,t,n,i,r,o,s,a,l){return(e=ju(n,i,!0,e,0,o,0,a,l)).context=Hu(null),n=e.current,(o=Do(i=tu(),r=nu(n))).callback=void 0!==t&&null!==t?t:null,Oo(n,o,r),e.current.lanes=r,vt(e,r,i),ru(e,i),e}function Wu(e,t,n,i){var r=t.current,o=tu(),s=nu(r);return n=Hu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Do(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Oo(r,t,s))&&(iu(e,r,s,o),Bo(e,r,s)),s}function qu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ju(e,t){Vu(e,t),(e=e.alternate)&&Vu(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)Ra=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ra=!1,function(e,t,n){switch(t.tag){case 3:Ta(t),fo();break;case 5:ss(t);break;case 1:kr(t.type)&&Br(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Ar(yo,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Ar(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Na(e,t,n):(Ar(ls,1&ls.current),null!==(e=qa(e,t,n))?e.sibling:null);Ar(ls,1&ls.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ga(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ar(ls,ls.current),i)break;return null;case 22:case 23:return t.lanes=0,_a(e,t,n)}return qa(e,t,n)}(e,t,n);Ra=0!==(131072&e.flags)}else Ra=!1,ro&&0!==(1048576&t.flags)&&$r(t,Vr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var r=Mr(t,xr.current);_o(t,n),r=Cs(null,t,i,e,r,n);var s=_s();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kr(i)?(s=!0,Br(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ko(t),r.updater=Ho,t.stateNode=r,r._reactInternals=t,Vo(t,i,e,n),t=Pa(null,t,i,!0,s,n)):(t.tag=0,ro&&s&&eo(t),wa(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Iu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===M)return 14}return 2}(i),e=vo(i,e),r){case 0:t=Ea(null,t,i,e,n);break e;case 1:t=xa(null,t,i,e,n);break e;case 11:t=La(null,t,i,e,n);break e;case 14:t=ba(null,t,i,vo(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ea(e,t,i,r=t.elementType===i?r:vo(i,r),n);case 1:return i=t.type,r=t.pendingProps,xa(e,t,i,r=t.elementType===i?r:vo(i,r),n);case 3:e:{if(Ta(t),null===e)throw Error(o(387));i=t.pendingProps,r=(s=t.memoizedState).element,Io(e,t),No(t,i,null,n);var a=t.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ma(e,t,i,n,r=ca(Error(o(423)),t));break e}if(i!==r){t=Ma(e,t,i,n,r=ca(Error(o(424)),t));break e}for(io=ur(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=Zo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===r){t=qa(e,t,n);break e}wa(e,t,i,n)}t=t.child}return t;case 5:return ss(t),null===e&&uo(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==s&&nr(i,s)&&(t.flags|=32),Aa(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Na(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Qo(t,null,i,n):wa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,La(e,t,i,r=t.elementType===i?r:vo(i,r),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Ar(yo,i._currentValue),i._currentValue=a,null!==s)if(ai(s.value,a)){if(s.children===r.children&&!Pr.current){t=qa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===i){if(1===s.tag){(u=Do(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Co(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Co(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,_o(t,n),i=i(r=Ao(r)),t.flags|=1,wa(e,t,i,n),t.child;case 14:return r=vo(i=t.type,t.pendingProps),ba(e,t,i,r=vo(i.type,r),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:vo(i,r),Wa(e,t),t.tag=1,kr(i)?(e=!0,Br(t)):e=!1,_o(t,n),Wo(t,i,r),Vo(t,i,r,n),Pa(null,t,i,!0,e,n);case 19:return Ga(e,t,n);case 22:return _a(e,t,n)}throw Error(o(156,t.tag))};var Ku="function"===typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function ec(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var e=qu(s);a.call(e)}}Wu(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=qu(s);o.call(e)}}var s=Gu(t,i,e,0,null,!1,0,"",$u);return e._reactRootContainer=s,e[fr]=s.current,Hi(8===e.nodeType?e.parentNode:e),hu(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=qu(l);a.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=l,e[fr]=l.current,Hi(8===e.nodeType?e.parentNode:e),hu((function(){Wu(t,l,n,i)})),l}(n,t,e,r,i);return qu(s)}Yu.prototype.render=Xu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wu(e,t,null,null)},Yu.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Wu(null,e,null,null)})),t[fr]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Ut(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Qe()),0===(6&Pl)&&(Gl=Qe()+500,Hr()))}break;case 13:hu((function(){var t=To(e,1);if(null!==t){var n=tu();iu(t,e,1,n)}})),Ju(e,1)}},Lt=function(e){if(13===e.tag){var t=To(e,134217728);if(null!==t)iu(t,e,134217728,tu());Ju(e,134217728)}},bt=function(e){if(13===e.tag){var t=nu(e),n=To(e,t);if(null!==n)iu(n,e,t,tu());Ju(e,t)}},Ct=function(){return St},_t=function(e,t){var n=St;try{return St=e,t()}finally{St=n}},Le=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=wr(i);if(!r)throw Error(o(90));J(i),Z(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=cu,Pe=hu;var tc={usingClientEntryPoint:!1,Events:[Sr,Rr,wr,Ae,Ee,cu]},nc={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ic={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{rt=rc.inject(ic),ot=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:L,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qu(e))throw Error(o(299));var n=!1,i="",r=Ku;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Xu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Zu(t))throw Error(o(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qu(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=Ku;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Gu(t,null,e,1,null!=n?n:null,r,0,s,a),e[fr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Yu(t)},t.render=function(e,t,n){if(!Zu(t))throw Error(o(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(o(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Zu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},1739:(e,t,n)=>{"use strict";var i=n(1168);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},1168:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},1467:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],u=a+1,c=e[u];if(0>o(l,n))u<r&&0>o(c,l)?(e[i]=c,e[u]=n,i=u):(e[i]=l,e[a]=n,i=a);else{if(!(u<r&&0>o(c,n)))break e;e[i]=c,e[u]=n,i=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,p=null,d=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,S="undefined"!==typeof setImmediate?setImmediate:null;function R(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(u,t)}t=i(c)}}function w(e){if(g=!1,R(e),!m)if(null!==i(u))m=!0,I(L);else{var t=i(c);null!==t&&D(w,t.startTime-e)}}function L(e,n){m=!1,g&&(g=!1,y(A),A=-1),f=!0;var o=d;try{for(R(n),p=i(u);null!==p&&(!(p.expirationTime>n)||e&&!P());){var s=p.callback;if("function"===typeof s){p.callback=null,d=p.priorityLevel;var a=s(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?p.callback=a:p===i(u)&&r(u),R(n)}else r(u);p=i(u)}if(null!==p)var l=!0;else{var h=i(c);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{p=null,d=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var b,C=!1,_=null,A=-1,E=5,x=-1;function P(){return!(t.unstable_now()-x<E)}function T(){if(null!==_){var e=t.unstable_now();x=e;var n=!0;try{n=_(!0,e)}finally{n?b():(C=!1,_=null)}}else C=!1}if("function"===typeof S)b=function(){S(T)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,k=M.port2;M.port1.onmessage=T,b=function(){k.postMessage(null)}}else b=function(){v(T,0)};function I(e){_=e,C||(C=!0,b())}function D(e,n){A=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(L))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return i(u)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===i(u)&&e===i(c)&&(g?(y(A),A=-1):g=!0,D(w,o-s))):(e.sortIndex=a,n(u,e),m||f||(m=!0,I(L))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},7108:(e,t,n)=>{"use strict";e.exports=n(1467)},2354:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},8106:(e,t,n)=>{e.exports=function(e){var t={},i=n(7313),r=n(2224),o=Object.assign;function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var w=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=w&&e[w]||e["@@iterator"])?e:null}function b(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case c:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case d:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:b(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return b(e(t))}catch(n){}}return null}function C(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b(t);case 8:return t===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function _(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function A(e){if(_(e)!==e)throw Error(s(188))}function E(e){var t=e.alternate;if(!t){if(null===(t=_(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return A(r),e;if(o===i)return A(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}function x(e){return null!==(e=E(e))?P(e):null}function P(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=P(e);if(null!==t)return t;e=e.sibling}return null}function T(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=T(e);if(null!==t)return t}e=e.sibling}return null}var M,k=Array.isArray,I=e.getPublicInstance,D=e.getRootHostContext,O=e.getChildHostContext,B=e.prepareForCommit,U=e.resetAfterCommit,N=e.createInstance,F=e.appendInitialChild,z=e.finalizeInitialChildren,j=e.prepareUpdate,H=e.shouldSetTextContent,G=e.createTextInstance,W=e.scheduleTimeout,q=e.cancelTimeout,V=e.noTimeout,J=e.isPrimaryRenderer,K=e.supportsMutation,X=e.supportsPersistence,Y=e.supportsHydration,Q=e.getInstanceFromNode,Z=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,ie=e.supportsTestSelectors,re=e.findFiberRoot,oe=e.getBoundingRect,se=e.getTextContent,ae=e.isHiddenSubtree,le=e.matchAccessibilityRole,ue=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,he=e.appendChild,pe=e.appendChildToContainer,de=e.commitTextUpdate,fe=e.commitMount,me=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,Se=e.removeChildFromContainer,Re=e.resetTextContent,we=e.hideInstance,Le=e.hideTextInstance,be=e.unhideInstance,Ce=e.unhideTextInstance,_e=e.clearContainer,Ae=e.cloneInstance,Ee=e.createContainerChildSet,xe=e.appendChildToContainerChildSet,Pe=e.finalizeContainerChildren,Te=e.replaceContainerChildren,Me=e.cloneHiddenInstance,ke=e.cloneHiddenTextInstance,Ie=e.canHydrateInstance,De=e.canHydrateTextInstance,Oe=e.canHydrateSuspenseInstance,Be=e.isSuspenseInstancePending,Ue=e.isSuspenseInstanceFallback,Ne=e.registerSuspenseInstanceRetry,Fe=e.getNextHydratableSibling,ze=e.getFirstHydratableChild,je=e.getFirstHydratableChildWithinContainer,He=e.getFirstHydratableChildWithinSuspenseInstance,Ge=e.hydrateInstance,We=e.hydrateTextInstance,qe=e.hydrateSuspenseInstance,Ve=e.getNextHydratableInstanceAfterSuspenseInstance,Je=e.commitHydratedContainer,Ke=e.commitHydratedSuspenseInstance,Xe=e.clearSuspenseBoundary,Ye=e.clearSuspenseBoundaryFromContainer,Qe=e.shouldDeleteUnhydratedTailInstances,Ze=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var r=u.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var it=Object.prototype.hasOwnProperty,rt=[],ot=-1;function st(e){return{current:e}}function at(e){0>ot||(e.current=rt[ot],rt[ot]=null,ot--)}function lt(e,t){ot++,rt[ot]=e.current,e.current=t}var ut={},ct=st(ut),ht=st(!1),pt=ut;function dt(e,t){var n=e.type.contextTypes;if(!n)return ut;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ft(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mt(){at(ht),at(ct)}function gt(e,t,n){if(ct.current!==ut)throw Error(s(168));lt(ct,t),lt(ht,n)}function vt(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,C(e)||"Unknown",r));return o({},n,i)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ut,pt=ct.current,lt(ct,e),lt(ht,ht.current),!0}function St(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=vt(e,t,pt),i.__reactInternalMemoizedMergedChildContext=e,at(ht),at(ct),lt(ct,e)):at(ht),lt(ht,n)}var Rt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(wt(e)/Lt|0)|0},wt=Math.log,Lt=Math.LN2;var bt=64,Ct=4194304;function _t(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function At(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=_t(a):0!==(o&=s)&&(i=_t(o))}else 0!==(s=n&~r)?i=_t(s):0!==o&&(i=_t(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-Rt(t)),i|=e[n],t&=~r;return i}function Et(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Pt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Tt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-Rt(t)]=n}function Mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Rt(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var kt=0;function It(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Dt=r.unstable_scheduleCallback,Ot=r.unstable_cancelCallback,Bt=r.unstable_shouldYield,Ut=r.unstable_requestPaint,Nt=r.unstable_now,Ft=r.unstable_ImmediatePriority,zt=r.unstable_UserBlockingPriority,jt=r.unstable_NormalPriority,Ht=r.unstable_IdlePriority,Gt=null,Wt=null;var qt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Vt=null,Jt=!1,Kt=!1;function Xt(e){null===Vt?Vt=[e]:Vt.push(e)}function Yt(){if(!Kt&&null!==Vt){Kt=!0;var e=0,t=kt;try{var n=Vt;for(kt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Vt=null,Jt=!1}catch(r){throw null!==Vt&&(Vt=Vt.slice(e+1)),Dt(Ft,Yt),r}finally{kt=t,Kt=!1}}return null}var Qt=a.ReactCurrentBatchConfig;function Zt(e,t){if(qt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!it.call(t,r)||!qt(e[r],t[r]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=st(null),nn=null,rn=null,on=null;function sn(){on=rn=nn=null}function an(e,t,n){J?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;at(tn),J?e._currentValue=t:e._currentValue2=t}function un(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){nn=e,on=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Br=!0),e.firstContext=null)}function hn(e){var t=J?e._currentValue:e._currentValue2;if(on!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(s(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var pn=null,dn=!1;function fn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Xo&&0!==(1&e.mode)&&0===(2&Ko)?(null===(e=n.interleaved)?(t.next=t,null===pn?pn=[n]:pn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Mt(e,n)}}function Sn(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Rn(e,t,n,i){var r=e.updateQueue;dn=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var u=l,c=u.next;u.next=null,null===a?s=c:a.next=c,a=u;var h=e.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===l?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(null!==s){var p=r.baseState;for(a=0,h=c=u=null,l=s;;){var d=l.lane,f=l.eventTime;if((i&d)===d){null!==h&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(m=g.payload)){p=m.call(f,p,d);break e}p=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(f,p,d):m)||void 0===d)break e;p=o({},p,d);break e;case 2:dn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[l]:d.push(l))}else f={eventTime:f,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(c=h=f,u=p):h=h.next=f,a|=d;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(d=l).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===h&&(u=p),r.baseState=u,r.firstBaseUpdate=c,r.lastBaseUpdate=h,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);ns|=a,e.lanes=a,e.memoizedState=p}}function wn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Ln=(new i.Component).refs;function bn(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Cn={isMounted:function(e){return!!(e=e._reactInternals)&&_(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ws(),r=Ls(e),o=gn(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),vn(e,o),null!==(t=bs(e,r,i))&&yn(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ws(),r=Ls(e),o=gn(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),vn(e,o),null!==(t=bs(e,r,i))&&yn(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ws(),i=Ls(e),r=gn(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),vn(e,r),null!==(t=bs(e,i,n))&&yn(t,e,i)}};function _n(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!Zt(n,i)||!Zt(r,o))}function An(e,t,n){var i=!1,r=ut,o=t.contextType;return"object"===typeof o&&null!==o?o=hn(o):(r=ft(t)?pt:ct.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?dt(e,r):ut),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Cn,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function En(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Cn.enqueueReplaceState(t,t.state,null)}function xn(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Ln,fn(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=hn(o):(o=ft(t)?pt:ct.current,r.context=dt(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(bn(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Cn.enqueueReplaceState(r,r.state,null),Rn(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var Pn=[],Tn=0,Mn=null,kn=0,In=[],Dn=0,On=null,Bn=1,Un="";function Nn(e,t){Pn[Tn++]=kn,Pn[Tn++]=Mn,Mn=e,kn=t}function Fn(e,t,n){In[Dn++]=Bn,In[Dn++]=Un,In[Dn++]=On,On=e;var i=Bn;e=Un;var r=32-Rt(i)-1;i&=~(1<<r),n+=1;var o=32-Rt(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Bn=1<<32-Rt(t)+r|n<<r|i,Un=o+e}else Bn=1<<o|n<<r|i,Un=e}function zn(e){null!==e.return&&(Nn(e,1),Fn(e,1,0))}function jn(e){for(;e===Mn;)Mn=Pn[--Tn],Pn[Tn]=null,kn=Pn[--Tn],Pn[Tn]=null;for(;e===On;)On=In[--Dn],In[Dn]=null,Un=In[--Dn],In[Dn]=null,Bn=In[--Dn],In[Dn]=null}var Hn=null,Gn=null,Wn=!1,qn=!1,Vn=null;function Jn(e,t){var n=Zs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Kn(e,t){switch(e.tag){case 5:return null!==(t=Ie(t,e.type,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=ze(t),!0);case 6:return null!==(t=De(t,e.pendingProps))&&(e.stateNode=t,Hn=e,Gn=null,!0);case 13:if(null!==(t=Oe(t))){var n=null!==On?{id:Bn,overflow:Un}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Zs(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Hn=e,Gn=null,!0}return!1;default:return!1}}function Xn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Yn(e){if(Wn){var t=Gn;if(t){var n=t;if(!Kn(e,t)){if(Xn(e))throw Error(s(418));t=Fe(n);var i=Hn;t&&Kn(e,t)?Jn(i,n):(e.flags=-4097&e.flags|2,Wn=!1,Hn=e)}}else{if(Xn(e))throw Error(s(418));e.flags=-4097&e.flags|2,Wn=!1,Hn=e}}}function Qn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hn=e}function Zn(e){if(!Y||e!==Hn)return!1;if(!Wn)return Qn(e),Wn=!0,!1;if(3!==e.tag&&(5!==e.tag||Qe(e.type)&&!H(e.type,e.memoizedProps))){var t=Gn;if(t){if(Xn(e)){for(e=Gn;e;)e=Fe(e);throw Error(s(418))}for(;t;)Jn(e,t),t=Fe(t)}}if(Qn(e),13===e.tag){if(!Y)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));Gn=Ve(e)}else Gn=Hn?Fe(e.stateNode):null;return!0}function $n(){Y&&(Gn=Hn=null,qn=Wn=!1)}function ei(e){null===Vn?Vn=[e]:Vn.push(e)}function ti(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Ln&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function ri(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=ea(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function h(e,t,n,i){return null===t||6!==t.tag?((t=ra(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function p(e,t,n,i){var o=n.type;return o===c?f(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===S&&ii(o)===t.type)?((i=r(t,n.props)).ref=ti(e,t,n),i.return=e,i):((i=ta(n.type,n.key,n.props,null,e.mode,i)).ref=ti(e,t,n),i.return=e,i)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=oa(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function f(e,t,n,i,o){return null===t||7!==t.tag?((t=na(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=ra(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ta(t.type,t.key,t.props,null,e.mode,n)).ref=ti(e,null,t),n.return=e,n;case u:return(t=oa(t,e.mode,n)).return=e,t;case S:return m(e,(0,t._init)(t._payload),n)}if(k(t)||L(t))return(t=na(t,e.mode,n,null)).return=e,t;ni(e,t)}return null}function g(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:h(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===r?p(e,t,n,i):null;case u:return n.key===r?d(e,t,n,i):null;case S:return g(e,t,(r=n._init)(n._payload),i)}if(k(n)||L(n))return null!==r?null:f(e,t,n,i,null);ni(e,n)}return null}function v(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return h(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case l:return p(t,e=e.get(null===i.key?n:i.key)||null,i,r);case u:return d(t,e=e.get(null===i.key?n:i.key)||null,i,r);case S:return v(e,t,n,(0,i._init)(i._payload),r)}if(k(i)||L(i))return f(t,e=e.get(n)||null,i,r,null);ni(t,i)}return null}function y(r,s,a,l){for(var u=null,c=null,h=s,p=s=0,d=null;null!==h&&p<a.length;p++){h.index>p?(d=h,h=null):d=h.sibling;var f=g(r,h,a[p],l);if(null===f){null===h&&(h=d);break}e&&h&&null===f.alternate&&t(r,h),s=o(f,s,p),null===c?u=f:c.sibling=f,c=f,h=d}if(p===a.length)return n(r,h),Wn&&Nn(r,p),u;if(null===h){for(;p<a.length;p++)null!==(h=m(r,a[p],l))&&(s=o(h,s,p),null===c?u=h:c.sibling=h,c=h);return Wn&&Nn(r,p),u}for(h=i(r,h);p<a.length;p++)null!==(d=v(h,r,p,a[p],l))&&(e&&null!==d.alternate&&h.delete(null===d.key?p:d.key),s=o(d,s,p),null===c?u=d:c.sibling=d,c=d);return e&&h.forEach((function(e){return t(r,e)})),Wn&&Nn(r,p),u}function R(r,a,l,u){var c=L(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,p=a,d=a=0,f=null,y=l.next();null!==p&&!y.done;d++,y=l.next()){p.index>d?(f=p,p=null):f=p.sibling;var S=g(r,p,y.value,u);if(null===S){null===p&&(p=f);break}e&&p&&null===S.alternate&&t(r,p),a=o(S,a,d),null===h?c=S:h.sibling=S,h=S,p=f}if(y.done)return n(r,p),Wn&&Nn(r,d),c;if(null===p){for(;!y.done;d++,y=l.next())null!==(y=m(r,y.value,u))&&(a=o(y,a,d),null===h?c=y:h.sibling=y,h=y);return Wn&&Nn(r,d),c}for(p=i(r,p);!y.done;d++,y=l.next())null!==(y=v(p,r,d,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?d:y.key),a=o(y,a,d),null===h?c=y:h.sibling=y,h=y);return e&&p.forEach((function(e){return t(r,e)})),Wn&&Nn(r,d),c}return function e(i,o,s,h){if("object"===typeof s&&null!==s&&s.type===c&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case l:e:{for(var p=s.key,d=o;null!==d;){if(d.key===p){if((p=s.type)===c){if(7===d.tag){n(i,d.sibling),(o=r(d,s.props.children)).return=i,i=o;break e}}else if(d.elementType===p||"object"===typeof p&&null!==p&&p.$$typeof===S&&ii(p)===d.type){n(i,d.sibling),(o=r(d,s.props)).ref=ti(i,d,s),o.return=i,i=o;break e}n(i,d);break}t(i,d),d=d.sibling}s.type===c?((o=na(s.props.children,i.mode,h,s.key)).return=i,i=o):((h=ta(s.type,s.key,s.props,null,i.mode,h)).ref=ti(i,o,s),h.return=i,i=h)}return a(i);case u:e:{for(d=s.key;null!==o;){if(o.key===d){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=oa(s,i.mode,h)).return=i,i=o}return a(i);case S:return e(i,o,(d=s._init)(s._payload),h)}if(k(s))return y(i,o,s,h);if(L(s))return R(i,o,s,h);ni(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=ra(s,i.mode,h)).return=i,i=o),a(i)):n(i,o)}}var oi=ri(!0),si=ri(!1),ai={},li=st(ai),ui=st(ai),ci=st(ai);function hi(e){if(e===ai)throw Error(s(174));return e}function pi(e,t){lt(ci,t),lt(ui,e),lt(li,ai),e=D(t),at(li),lt(li,e)}function di(){at(li),at(ui),at(ci)}function fi(e){var t=hi(ci.current),n=hi(li.current);n!==(t=O(n,e.type,t))&&(lt(ui,e),lt(li,t))}function mi(e){ui.current===e&&(at(li),at(ui))}var gi=st(0);function vi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Be(n)||Ue(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yi=[];function Si(){for(var e=0;e<yi.length;e++){var t=yi[e];J?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yi.length=0}var Ri=a.ReactCurrentDispatcher,wi=a.ReactCurrentBatchConfig,Li=0,bi=null,Ci=null,_i=null,Ai=!1,Ei=!1,xi=0,Pi=0;function Ti(){throw Error(s(321))}function Mi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qt(e[n],t[n]))return!1;return!0}function ki(e,t,n,i,r,o){if(Li=o,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ri.current=null===e||null===e.memoizedState?fr:mr,e=n(i,r),Ei){o=0;do{if(Ei=!1,xi=0,25<=o)throw Error(s(301));o+=1,_i=Ci=null,t.updateQueue=null,Ri.current=gr,e=n(i,r)}while(Ei)}if(Ri.current=dr,t=null!==Ci&&null!==Ci.next,Li=0,_i=Ci=bi=null,Ai=!1,t)throw Error(s(300));return e}function Ii(){var e=0!==xi;return xi=0,e}function Di(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_i?bi.memoizedState=_i=e:_i=_i.next=e,_i}function Oi(){if(null===Ci){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=Ci.next;var t=null===_i?bi.memoizedState:_i.next;if(null!==t)_i=t,Ci=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Ci=e).memoizedState,baseState:Ci.baseState,baseQueue:Ci.baseQueue,queue:Ci.queue,next:null},null===_i?bi.memoizedState=_i=e:_i=_i.next=e}return _i}function Bi(e,t){return"function"===typeof t?t(e):t}function Ui(e){var t=Oi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=Ci,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((Li&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=p,a=i):u=u.next=p,bi.lanes|=h,ns|=h}c=c.next}while(null!==c&&c!==o);null===u?a=i:u.next=l,qt(i,t.memoizedState)||(Br=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=u,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,bi.lanes|=o,ns|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ni(e){var t=Oi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);qt(o,t.memoizedState)||(Br=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Fi(){}function zi(e,t){var n=bi,i=Oi(),r=t(),o=!qt(i.memoizedState,r);if(o&&(i.memoizedState=r,Br=!0),i=i.queue,Qi(Gi.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==_i&&1&_i.memoizedState.tag){if(n.flags|=2048,Vi(9,Hi.bind(null,n,i,r,t),void 0,null),null===Xo)throw Error(s(349));0!==(30&Li)||ji(n,t,r)}return r}function ji(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bi.updateQueue)?(t={lastEffect:null,stores:null},bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Hi(e,t,n,i){t.value=n,t.getSnapshot=i,Wi(t)&&bs(e,1,-1)}function Gi(e,t,n){return n((function(){Wi(t)&&bs(e,1,-1)}))}function Wi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qt(e,n)}catch(i){return!0}}function qi(e){var t=Di();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:e},t.queue=e,e=e.dispatch=lr.bind(null,bi,e),[t.memoizedState,e]}function Vi(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=bi.updateQueue)?(t={lastEffect:null,stores:null},bi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ji(){return Oi().memoizedState}function Ki(e,t,n,i){var r=Di();bi.flags|=e,r.memoizedState=Vi(1|t,n,void 0,void 0===i?null:i)}function Xi(e,t,n,i){var r=Oi();i=void 0===i?null:i;var o=void 0;if(null!==Ci){var s=Ci.memoizedState;if(o=s.destroy,null!==i&&Mi(i,s.deps))return void(r.memoizedState=Vi(t,n,o,i))}bi.flags|=e,r.memoizedState=Vi(1|t,n,o,i)}function Yi(e,t){return Ki(8390656,8,e,t)}function Qi(e,t){return Xi(2048,8,e,t)}function Zi(e,t){return Xi(4,2,e,t)}function $i(e,t){return Xi(4,4,e,t)}function er(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function tr(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Xi(4,4,er.bind(null,t,e),n)}function nr(){}function ir(e,t){var n=Oi();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Mi(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rr(e,t){var n=Oi();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Mi(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function or(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var i=wi.transition;wi.transition={};try{e(!1),t()}finally{kt=n,wi.transition=i}}function sr(){return Oi().memoizedState}function ar(e,t,n){var i=Ls(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ur(e)?cr(t,n):(hr(e,t,n),null!==(e=bs(e,i,n=ws()))&&pr(e,t,i))}function lr(e,t,n){var i=Ls(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ur(e))cr(t,r);else{hr(e,t,r);var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,qt(a,s))return}catch(l){}null!==(e=bs(e,i,n=ws()))&&pr(e,t,i)}}function ur(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function cr(e,t){Ei=Ai=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hr(e,t,n){null!==Xo&&0!==(1&e.mode)&&0===(2&Ko)?(null===(e=t.interleaved)?(n.next=n,null===pn?pn=[t]:pn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function pr(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Mt(e,n)}}var dr={readContext:hn,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useInsertionEffect:Ti,useLayoutEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useMutableSource:Ti,useSyncExternalStore:Ti,useId:Ti,unstable_isNewReconciler:!1},fr={readContext:hn,useCallback:function(e,t){return Di().memoizedState=[e,void 0===t?null:t],e},useContext:hn,useEffect:Yi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ki(4194308,4,er.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ki(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ki(4,2,e,t)},useMemo:function(e,t){var n=Di();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Di();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ar.bind(null,bi,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Di().memoizedState=e},useState:qi,useDebugValue:nr,useDeferredValue:function(e){var t=qi(e),n=t[0],i=t[1];return Yi((function(){var t=wi.transition;wi.transition={};try{i(e)}finally{wi.transition=t}}),[e]),n},useTransition:function(){var e=qi(!1),t=e[0];return e=or.bind(null,e[1]),Di().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=bi,r=Di();if(Wn){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Xo)throw Error(s(349));0!==(30&Li)||ji(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Yi(Gi.bind(null,i,o,e),[e]),i.flags|=2048,Vi(9,Hi.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Di(),t=Xo.identifierPrefix;if(Wn){var n=Un;t=":"+t+"R"+(n=(Bn&~(1<<32-Rt(Bn)-1)).toString(32)+n),0<(n=xi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Pi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mr={readContext:hn,useCallback:ir,useContext:hn,useEffect:Qi,useImperativeHandle:tr,useInsertionEffect:Zi,useLayoutEffect:$i,useMemo:rr,useReducer:Ui,useRef:Ji,useState:function(){return Ui(Bi)},useDebugValue:nr,useDeferredValue:function(e){var t=Ui(Bi),n=t[0],i=t[1];return Qi((function(){var t=wi.transition;wi.transition={};try{i(e)}finally{wi.transition=t}}),[e]),n},useTransition:function(){return[Ui(Bi)[0],Oi().memoizedState]},useMutableSource:Fi,useSyncExternalStore:zi,useId:sr,unstable_isNewReconciler:!1},gr={readContext:hn,useCallback:ir,useContext:hn,useEffect:Qi,useImperativeHandle:tr,useInsertionEffect:Zi,useLayoutEffect:$i,useMemo:rr,useReducer:Ni,useRef:Ji,useState:function(){return Ni(Bi)},useDebugValue:nr,useDeferredValue:function(e){var t=Ni(Bi),n=t[0],i=t[1];return Qi((function(){var t=wi.transition;wi.transition={};try{i(e)}finally{wi.transition=t}}),[e]),n},useTransition:function(){return[Ni(Bi)[0],Oi().memoizedState]},useMutableSource:Fi,useSyncExternalStore:zi,useId:sr,unstable_isNewReconciler:!1};function vr(e,t){try{var n="",i=t;do{n+=$t(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r}}function yr(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var Sr,Rr,wr,Lr,br="function"===typeof WeakMap?WeakMap:Map;function Cr(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){hs||(hs=!0,ps=i),yr(0,t)},n}function _r(e,t,n){(n=gn(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){yr(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){yr(0,t),"function"!==typeof i&&(null===ds?ds=new Set([this]):ds.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ar(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new br;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Vs.bind(null,e,t,n),t.then(e,e))}function Er(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xr(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function Pr(e){e.flags|=4}function Tr(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(K)Sr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)F(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rr=function(){},wr=function(e,t,n,i,r){if((e=e.memoizedProps)!==i){var o=t.stateNode,s=hi(li.current);n=j(o,n,e,i,r,s),(t.updateQueue=n)&&Pr(t)}},Lr=function(e,t,n,i){n!==i&&Pr(t)};else if(X){Sr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var o=r.stateNode;n&&i&&(o=Me(o,r.type,r.memoizedProps,r)),F(e,o)}else if(6===r.tag)o=r.stateNode,n&&i&&(o=ke(o,r.memoizedProps,r)),F(e,o);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(o=r.child)&&(o.return=r),Sr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var Mr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var o=r.stateNode;n&&i&&(o=Me(o,r.type,r.memoizedProps,r)),xe(e,o)}else if(6===r.tag)o=r.stateNode,n&&i&&(o=ke(o,r.memoizedProps,r)),xe(e,o);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(o=r.child)&&(o.return=r),Mr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Rr=function(e,t){var n=t.stateNode;if(!Tr(e,t)){e=n.containerInfo;var i=Ee(e);Mr(i,t,!1,!1),n.pendingChildren=i,Pr(t),Pe(e,i)}},wr=function(e,t,n,i,r){var o=e.stateNode,s=e.memoizedProps;if((e=Tr(e,t))&&s===i)t.stateNode=o;else{var a=t.stateNode,l=hi(li.current),u=null;s!==i&&(u=j(a,n,s,i,r,l)),e&&null===u?t.stateNode=o:(o=Ae(o,u,n,s,i,t,e,a),z(o,n,i,r,l)&&Pr(t),t.stateNode=o,e?Pr(t):Sr(o,t,!1,!1))}},Lr=function(e,t,n,i){n!==i?(e=hi(ci.current),n=hi(li.current),t.stateNode=G(i,e,n,t),Pr(t)):t.stateNode=e.stateNode}}else Rr=function(){},wr=function(){},Lr=function(){};function kr(e,t){if(!Wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ir(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Dr(e,t,n){var i=t.pendingProps;switch(jn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ir(t),null;case 1:case 17:return ft(t.type)&&mt(),Ir(t),null;case 3:return i=t.stateNode,di(),at(ht),at(ct),Si(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Zn(t)?Pr(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Vn&&(xs(Vn),Vn=null))),Rr(e,t),Ir(t),null;case 5:mi(t),n=hi(ci.current);var r=t.type;if(null!==e&&null!=t.stateNode)wr(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Ir(t),null}if(e=hi(li.current),Zn(t)){if(!Y)throw Error(s(175));e=Ge(t.stateNode,t.type,t.memoizedProps,n,e,t,!qn),t.updateQueue=e,null!==e&&Pr(t)}else{var o=N(r,i,n,e,t);Sr(o,t,!1,!1),t.stateNode=o,z(o,r,i,n,e)&&Pr(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ir(t),null;case 6:if(e&&null!=t.stateNode)Lr(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(e=hi(ci.current),n=hi(li.current),Zn(t)){if(!Y)throw Error(s(176));if(e=t.stateNode,i=t.memoizedProps,(n=We(e,i,t,!qn))&&null!==(r=Hn))switch(o=0!==(1&r.mode),r.tag){case 3:Ze(r.stateNode.containerInfo,e,i,o);break;case 5:$e(r.type,r.memoizedProps,r.stateNode,e,i,o)}n&&Pr(t)}else t.stateNode=G(i,e,n,t)}return Ir(t),null;case 13:if(at(gi),i=t.memoizedState,Wn&&null!==Gn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Gn;e;)e=Fe(e);return $n(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=Zn(t),null===e){if(!i)throw Error(s(318));if(!Y)throw Error(s(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(s(317));qe(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Ir(t),null}return null!==Vn&&(xs(Vn),Vn=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?Zn(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&gi.current)?0===es&&(es=3):Bs())),null!==t.updateQueue&&(t.flags|=4),Ir(t),null);case 4:return di(),Rr(e,t),null===e&&Z(t.stateNode.containerInfo),Ir(t),null;case 10:return ln(t.type._context),Ir(t),null;case 19:if(at(gi),null===(r=t.memoizedState))return Ir(t),null;if(i=0!==(128&t.flags),null===(o=r.rendering))if(i)kr(r,!1);else{if(0!==es||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=vi(e))){for(t.flags|=128,kr(r,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;null!==i;)r=e,(n=i).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return lt(gi,1&gi.current|2),t.child}e=e.sibling}null!==r.tail&&Nt()>ls&&(t.flags|=128,i=!0,kr(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=vi(o))){if(t.flags|=128,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),kr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!Wn)return Ir(t),null}else 2*Nt()-r.renderingStartTime>ls&&1073741824!==n&&(t.flags|=128,i=!0,kr(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=r.last)?e.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Nt(),t.sibling=null,e=gi.current,lt(gi,i?1&e|2:1&e),t):(Ir(t),null);case 22:case 23:return ks(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Zo)&&(Ir(t),K&&6&t.subtreeFlags&&(t.flags|=8192)):Ir(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}var Or=a.ReactCurrentOwner,Br=!1;function Ur(e,t,n,i){t.child=null===e?si(t,null,n,i):oi(t,e.child,n,i)}function Nr(e,t,n,i,r){n=n.render;var o=t.ref;return cn(t,r),i=ki(e,t,n,i,o,r),n=Ii(),null===e||Br?(Wn&&n&&zn(t),t.flags|=1,Ur(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ro(e,t,r))}function Fr(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||$s(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ta(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,zr(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:Zt)(s,i)&&e.ref===t.ref)return ro(e,t,r)}return t.flags|=1,(e=ea(o,i)).ref=t.ref,e.return=t,t.child=e}function zr(e,t,n,i,r){if(null!==e&&Zt(e.memoizedProps,i)&&e.ref===t.ref){if(Br=!1,0===(e.lanes&r))return t.lanes=e.lanes,ro(e,t,r);0!==(131072&e.flags)&&(Br=!0)}return Gr(e,t,n,i,r)}function jr(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt($o,Zo),Zo|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt($o,Zo),Zo|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==o?o.baseLanes:n,lt($o,Zo),Zo|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,lt($o,Zo),Zo|=i;return Ur(e,t,r,n),t.child}function Hr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gr(e,t,n,i,r){var o=ft(n)?pt:ct.current;return o=dt(t,o),cn(t,r),n=ki(e,t,n,i,o,r),i=Ii(),null===e||Br?(Wn&&i&&zn(t),t.flags|=1,Ur(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ro(e,t,r))}function Wr(e,t,n,i,r){if(ft(n)){var o=!0;yt(t)}else o=!1;if(cn(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),An(t,n,i),xn(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=hn(u):u=dt(t,u=ft(n)?pt:ct.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==u)&&En(t,s,i,u),dn=!1;var p=t.memoizedState;s.state=p,Rn(t,i,s,r),l=t.memoizedState,a!==i||p!==l||ht.current||dn?("function"===typeof c&&(bn(t,n,c,i),l=t.memoizedState),(a=dn||_n(t,n,a,i,p,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=u,i=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,mn(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:en(t.type,a),s.props=u,h=t.pendingProps,p=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=hn(l):l=dt(t,l=ft(n)?pt:ct.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||p!==l)&&En(t,s,i,l),dn=!1,p=t.memoizedState,s.state=p,Rn(t,i,s,r);var f=t.memoizedState;a!==h||p!==f||ht.current||dn?("function"===typeof d&&(bn(t,n,d,i),f=t.memoizedState),(u=dn||_n(t,n,u,i,p,f,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=l,i=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return qr(e,t,n,i,o,r)}function qr(e,t,n,i,r,o){Hr(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&St(t,n,!1),ro(e,t,o);i=t.stateNode,Or.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=oi(t,e.child,null,o),t.child=oi(t,null,a,o)):Ur(e,t,a,o),t.memoizedState=i.state,r&&St(t,n,!0),t.child}function Vr(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),pi(e,t.containerInfo)}function Jr(e,t,n,i,r){return $n(),ei(r),t.flags|=256,Ur(e,t,n,i),t.child}var Kr={dehydrated:null,treeContext:null,retryLane:0};function Xr(e){return{baseLanes:e,cachePool:null}}function Yr(e,t,n){var i,r=t.pendingProps,o=gi.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),lt(gi,1&o),null===e)return Yn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Ue(e)?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=o):a=ia(o,r,0,null),e=na(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Xr(n),t.memoizedState=Kr,e):Qr(t,o));if(null!==(o=e.memoizedState)){if(null!==(i=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,eo(e,t,n,Error(s(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=ia({mode:"visible",children:r.children},o,0,null),(a=na(a,o,n,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&oi(t,e.child,null,n),t.child.memoizedState=Xr(n),t.memoizedState=Kr,a);if(0===(1&t.mode))t=eo(e,t,n,null);else if(Ue(i))t=eo(e,t,n,Error(s(419)));else if(r=0!==(n&e.childLanes),Br||r){if(null!==(r=Xo)){switch(n&-n){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(r=0!==(a&(r.suspendedLanes|n))?0:a)&&r!==o.retryLane&&(o.retryLane=r,bs(e,r,-1))}Bs(),t=eo(e,t,n,Error(s(421)))}else Be(i)?(t.flags|=128,t.child=e.child,t=Ks.bind(null,e),Ne(i,t),t=null):(n=o.treeContext,Y&&(Gn=He(i),Hn=t,Wn=!0,Vn=null,qn=!1,null!==n&&(In[Dn++]=Bn,In[Dn++]=Un,In[Dn++]=On,Bn=n.id,Un=n.overflow,On=t)),(t=Qr(t,t.pendingProps.children)).flags|=4096);return t}return a?(r=$r(e,t,r.children,r.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?Xr(n):{baseLanes:o.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=Kr,r):(n=Zr(e,t,r.children,n),t.memoizedState=null,n)}return a?(r=$r(e,t,r.children,r.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?Xr(n):{baseLanes:o.baseLanes|n,cachePool:null},a.childLanes=e.childLanes&~n,t.memoizedState=Kr,r):(n=Zr(e,t,r.children,n),t.memoizedState=null,n)}function Qr(e,t){return(t=ia({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Zr(e,t,n,i){var r=e.child;return e=r.sibling,n=ea(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function $r(e,t,n,i,r){var o=t.mode,s=(e=e.child).sibling,a={mode:"hidden",children:n};return 0===(1&o)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=a,t.deletions=null):(n=ea(e,a)).subtreeFlags=14680064&e.subtreeFlags,null!==s?i=ea(s,i):(i=na(i,o,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function eo(e,t,n,i){return null!==i&&ei(i),oi(t,e.child,null,n),(e=Qr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function to(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),un(e.return,t,n)}function no(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function io(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(Ur(e,t,i.children,n),0!==(2&(i=gi.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&to(e,n,t);else if(19===e.tag)to(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(lt(gi,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===vi(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),no(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===vi(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}no(t,!0,n,null,o);break;case"together":no(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ro(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ns|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=ea(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=ea(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function oo(e,t){switch(jn(t),t.tag){case 1:return ft(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return di(),at(ht),at(ct),Si(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return mi(t),null;case 13:if(at(gi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return at(gi),null;case 4:return di(),null;case 10:return ln(t.type._context),null;case 22:case 23:return ks(),null;default:return null}}var so=!1,ao=!1,lo="function"===typeof WeakSet?WeakSet:Set,uo=null;function co(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){qs(e,t,i)}else n.current=null}function ho(e,t,n){try{n()}catch(i){qs(e,t,i)}}var po=!1;function fo(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&ho(t,n,o)}r=r.next}while(r!==i)}}function mo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function go(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=I(n);else e=n;"function"===typeof t?t(e):t.current=e}}function vo(e,t,n){if(Wt&&"function"===typeof Wt.onCommitFiberUnmount)try{Wt.onCommitFiberUnmount(Gt,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var r=i,o=r.destroy;r=r.tag,void 0!==o&&(0!==(2&r)||0!==(4&r))&&ho(t,n,o),i=i.next}while(i!==e)}break;case 1:if(co(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){qs(t,n,s)}break;case 5:co(t,n);break;case 4:K?_o(e,t,n):X&&X&&(t=t.stateNode.containerInfo,n=Ee(t),Te(t,n))}}function yo(e,t,n){for(var i=t;;)if(vo(e,i,n),null===i.child||K&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function So(e){var t=e.alternate;null!==t&&(e.alternate=null,So(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ro(e){return 5===e.tag||3===e.tag||4===e.tag}function wo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ro(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Lo(e){if(K){e:{for(var t=e.return;null!==t;){if(Ro(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(Re(t),n.flags&=-33),Co(e,n=wo(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,bo(e,n=wo(e),t);break;default:throw Error(s(161))}}}function bo(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ve(n,e,t):pe(n,e);else if(4!==i&&null!==(e=e.child))for(bo(e,t,n),e=e.sibling;null!==e;)bo(e,t,n),e=e.sibling}function Co(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ge(n,e,t):he(n,e);else if(4!==i&&null!==(e=e.child))for(Co(e,t,n),e=e.sibling;null!==e;)Co(e,t,n),e=e.sibling}function _o(e,t,n){for(var i,r,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(i=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag)yo(e,o,n),r?Se(i,o.stateNode):ye(i,o.stateNode);else if(18===o.tag)r?Ye(i,o.stateNode):Xe(i,o.stateNode);else if(4===o.tag){if(null!==o.child){i=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(vo(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Ao(e,t){if(K){switch(t.tag){case 0:case 11:case 14:case 15:return fo(3,t,t.return),mo(3,t),void fo(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var r=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&me(n,o,r,e,i,t)}return;case 6:if(null===t.stateNode)throw Error(s(162));return n=t.memoizedProps,void de(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Y&&null!==e&&e.memoizedState.isDehydrated&&Je(t.stateNode.containerInfo));case 13:case 19:return void Eo(t)}throw Error(s(163))}switch(t.tag){case 0:case 11:case 14:case 15:return fo(3,t,t.return),mo(3,t),void fo(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Eo(t);case 3:Y&&null!==e&&e.memoizedState.isDehydrated&&Je(t.stateNode.containerInfo)}e:if(X){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Te(t.containerInfo,t.pendingChildren);break e}throw Error(s(163))}}function Eo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new lo),t.forEach((function(t){var i=Xs.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function xo(e,t,n){uo=e,Po(e,t,n)}function Po(e,t,n){for(var i=0!==(1&e.mode);null!==uo;){var r=uo,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||so;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||ao;a=so;var u=ao;if(so=s,(ao=l)&&!u)for(uo=r;null!==uo;)l=(s=uo).child,22===s.tag&&null!==s.memoizedState?ko(r):null!==l?(l.return=s,uo=l):ko(r);for(;null!==o;)uo=o,Po(o,t,n),o=o.sibling;uo=r,so=a,ao=u}To(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,uo=o):To(e)}}function To(e){for(;null!==uo;){var t=uo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:ao||mo(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!ao)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&wn(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=I(t.child.stateNode);break;case 1:n=t.child.stateNode}wn(t,a,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&fe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Y&&null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var h=c.dehydrated;null!==h&&Ke(h)}}}break;default:throw Error(s(163))}ao||512&t.flags&&go(t)}catch(p){qs(t,t.return,p)}}if(t===e){uo=null;break}if(null!==(n=t.sibling)){n.return=t.return,uo=n;break}uo=t.return}}function Mo(e){for(;null!==uo;){var t=uo;if(t===e){uo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,uo=n;break}uo=t.return}}function ko(e){for(;null!==uo;){var t=uo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mo(4,t)}catch(l){qs(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){qs(t,r,l)}}var o=t.return;try{go(t)}catch(l){qs(t,o,l)}break;case 5:var s=t.return;try{go(t)}catch(l){qs(t,s,l)}}}catch(l){qs(t,t.return,l)}if(t===e){uo=null;break}var a=t.sibling;if(null!==a){a.return=t.return,uo=a;break}uo=t.return}}var Io=0,Do=1,Oo=2,Bo=3,Uo=4;if("function"===typeof Symbol&&Symbol.for){var No=Symbol.for;Io=No("selector.component"),Do=No("selector.has_pseudo_class"),Oo=No("selector.role"),Bo=No("selector.test_id"),Uo=No("selector.text")}function Fo(e){var t=Q(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(s(364));return t}if(null===(e=re(e)))throw Error(s(362));return e.stateNode.current}function zo(e,t){switch(t.$$typeof){case Io:if(e.type===t.value)return!0;break;case Do:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],r=e[n++],o=t[r];if(5!==i.tag||!ae(i)){for(;null!=o&&zo(i,o);)o=t[++r];if(r===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,r),i=i.sibling}}t=!1}return t;case Oo:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Uo:if((5===e.tag||6===e.tag)&&(null!==(e=se(e))&&0<=e.indexOf(t.value)))return!0;break;case Bo:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function jo(e){switch(e.$$typeof){case Io:return"<"+(b(e.value)||"Unknown")+">";case Do:return":has("+(jo(e)||"")+")";case Oo:return'[role="'+e.value+'"]';case Uo:return'"'+e.value+'"';case Bo:return'[data-testname="'+e.value+'"]';default:throw Error(s(365))}}function Ho(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],o=e[i++],s=t[o];if(5!==r.tag||!ae(r)){for(;null!=s&&zo(r,s);)s=t[++o];if(o===t.length)n.push(r);else for(r=r.child;null!==r;)e.push(r,o),r=r.sibling}}return n}function Go(e,t){if(!ie)throw Error(s(363));e=Ho(e=Fo(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(5===i.tag)ae(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}var Wo=Math.ceil,qo=a.ReactCurrentDispatcher,Vo=a.ReactCurrentOwner,Jo=a.ReactCurrentBatchConfig,Ko=0,Xo=null,Yo=null,Qo=0,Zo=0,$o=st(0),es=0,ts=null,ns=0,is=0,rs=0,os=null,ss=null,as=0,ls=1/0;function us(){ls=Nt()+500}var cs,hs=!1,ps=null,ds=null,fs=!1,ms=null,gs=0,vs=0,ys=null,Ss=-1,Rs=0;function ws(){return 0!==(6&Ko)?Nt():-1!==Ss?Ss:Ss=Nt()}function Ls(e){return 0===(1&e.mode)?1:0!==(2&Ko)&&0!==Qo?Qo&-Qo:null!==Qt.transition?(0===Rs&&(e=bt,0===(4194240&(bt<<=1))&&(bt=64),Rs=e),Rs):0!==(e=kt)?e:$()}function bs(e,t,n){if(50<vs)throw vs=0,ys=null,Error(s(185));var i=Cs(e,t);return null===i?null:(Tt(i,t,n),0!==(2&Ko)&&i===Xo||(i===Xo&&(0===(2&Ko)&&(is|=t),4===es&&Ps(i,Qo)),_s(i,n),1===t&&0===Ko&&0===(1&e.mode)&&(us(),Jt&&Yt())),i)}function Cs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function _s(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Rt(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=Et(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=At(e,e===Xo?Qo:0);if(0===i)null!==n&&Ot(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ot(n),1===t)0===e.tag?function(e){Jt=!0,Xt(e)}(Ts.bind(null,e)):Xt(Ts.bind(null,e)),te?ne((function(){0===Ko&&Yt()})):Dt(Ft,Yt),n=null;else{switch(It(i)){case 1:n=Ft;break;case 4:n=zt;break;case 16:default:n=jt;break;case 536870912:n=Ht}n=Ys(n,As.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function As(e,t){if(Ss=-1,Rs=0,0!==(6&Ko))throw Error(s(327));var n=e.callbackNode;if(Gs()&&e.callbackNode!==n)return null;var i=At(e,e===Xo?Qo:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=Us(e,i);else{t=i;var r=Ko;Ko|=2;var o=Os();for(Xo===e&&Qo===t||(us(),Is(e,t));;)try{Fs();break}catch(l){Ds(e,l)}sn(),qo.current=o,Ko=r,null!==Yo?t=0:(Xo=null,Qo=0,t=es)}if(0!==t){if(2===t&&(0!==(r=xt(e))&&(i=r,t=Es(e,r))),1===t)throw n=ts,Is(e,0),Ps(e,i),_s(e,Nt()),n;if(6===t)Ps(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!qt(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=Us(e,i))&&(0!==(o=xt(e))&&(i=o,t=Es(e,o))),1===t))throw n=ts,Is(e,0),Ps(e,i),_s(e,Nt()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:Hs(e,ss);break;case 3:if(Ps(e,i),(130023424&i)===i&&10<(t=as+500-Nt())){if(0!==At(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ws(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=W(Hs.bind(null,e,ss),t);break}Hs(e,ss);break;case 4:if(Ps(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-Rt(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Nt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Wo(i/1960))-i)){e.timeoutHandle=W(Hs.bind(null,e,ss),i);break}Hs(e,ss);break;default:throw Error(s(329))}}}return _s(e,Nt()),e.callbackNode===n?As.bind(null,e):null}function Es(e,t){var n=os;return e.current.memoizedState.isDehydrated&&(Is(e,t).flags|=256),2!==(e=Us(e,t))&&(t=ss,ss=n,null!==t&&xs(t)),e}function xs(e){null===ss?ss=e:ss.push.apply(ss,e)}function Ps(e,t){for(t&=~rs,t&=~is,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rt(t),i=1<<n;e[n]=-1,t&=~i}}function Ts(e){if(0!==(6&Ko))throw Error(s(327));Gs();var t=At(e,0);if(0===(1&t))return _s(e,Nt()),null;var n=Us(e,t);if(0!==e.tag&&2===n){var i=xt(e);0!==i&&(t=i,n=Es(e,i))}if(1===n)throw n=ts,Is(e,0),Ps(e,t),_s(e,Nt()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hs(e,ss),_s(e,Nt()),null}function Ms(e){null!==ms&&0===ms.tag&&0===(6&Ko)&&Gs();var t=Ko;Ko|=1;var n=Jo.transition,i=kt;try{if(Jo.transition=null,kt=1,e)return e()}finally{kt=i,Jo.transition=n,0===(6&(Ko=t))&&Yt()}}function ks(){Zo=$o.current,at($o)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==V&&(e.timeoutHandle=V,q(n)),null!==Yo)for(n=Yo.return;null!==n;){var i=n;switch(jn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&mt();break;case 3:di(),at(ht),at(ct),Si();break;case 5:mi(i);break;case 4:di();break;case 13:case 19:at(gi);break;case 10:ln(i.type._context);break;case 22:case 23:ks()}n=n.return}if(Xo=e,Yo=e=ea(e.current,null),Qo=Zo=t,es=0,ts=null,rs=is=ns=0,ss=os=null,null!==pn){for(t=0;t<pn.length;t++)if(null!==(i=(n=pn[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}pn=null}return e}function Ds(e,t){for(;;){var n=Yo;try{if(sn(),Ri.current=dr,Ai){for(var i=bi.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Ai=!1}if(Li=0,_i=Ci=bi=null,Ei=!1,xi=0,Vo.current=null,null===n||null===n.return){es=1,ts=t,Yo=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Qo,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,p=h.tag;if(0===(1&h.mode)&&(0===p||11===p||15===p)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Er(a);if(null!==f){f.flags&=-257,xr(f,a,l,0,t),1&f.mode&&Ar(o,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){Ar(o,c,t),Bs();break e}u=Error(s(426))}else if(Wn&&1&l.mode){var v=Er(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),xr(v,a,l,0,t),ei(u);break e}}o=u,4!==es&&(es=2),null===os?os=[o]:os.push(o),u=vr(u,l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,Sn(l,Cr(0,u,t));break e;case 1:o=u;var y=l.type,S=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==S&&"function"===typeof S.componentDidCatch&&(null===ds||!ds.has(S)))){l.flags|=65536,t&=-t,l.lanes|=t,Sn(l,_r(l,o,t));break e}}l=l.return}while(null!==l)}js(n)}catch(R){t=R,Yo===n&&null!==n&&(Yo=n=n.return);continue}break}}function Os(){var e=qo.current;return qo.current=dr,null===e?dr:e}function Bs(){0!==es&&3!==es&&2!==es||(es=4),null===Xo||0===(268435455&ns)&&0===(268435455&is)||Ps(Xo,Qo)}function Us(e,t){var n=Ko;Ko|=2;var i=Os();for(Xo===e&&Qo===t||Is(e,t);;)try{Ns();break}catch(r){Ds(e,r)}if(sn(),Ko=n,qo.current=i,null!==Yo)throw Error(s(261));return Xo=null,Qo=0,es}function Ns(){for(;null!==Yo;)zs(Yo)}function Fs(){for(;null!==Yo&&!Bt();)zs(Yo)}function zs(e){var t=cs(e.alternate,e,Zo);e.memoizedProps=e.pendingProps,null===t?js(e):Yo=t,Vo.current=null}function js(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Dr(n,t,Zo)))return void(Yo=n)}else{if(null!==(n=oo(n,t)))return n.flags&=32767,void(Yo=n);if(null===e)return es=6,void(Yo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Yo=t);Yo=t=e}while(null!==t);0===es&&(es=5)}function Hs(e,t){var n=kt,i=Jo.transition;try{Jo.transition=null,kt=1,function(e,t,n){do{Gs()}while(null!==ms);if(0!==(6&Ko))throw Error(s(327));var i=e.finishedWork,r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Rt(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,o),e===Xo&&(Yo=Xo=null,Qo=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||fs||(fs=!0,Ys(jt,(function(){return Gs(),null}))),o=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||o){o=Jo.transition,Jo.transition=null;var a=kt;kt=1;var l=Ko;Ko|=4,Vo.current=null,function(e,t){for(B(e.containerInfo),uo=t;null!==uo;)if(t=(e=uo).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,uo=t;else for(;null!==uo;){e=uo;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,r=n.memoizedState,o=e.stateNode,a=o.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),r);o.__reactInternalSnapshotBeforeUpdate=a}break;case 3:K&&_e(e.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(l){qs(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,uo=t;break}uo=e.return}n=po,po=!1}(e,i),function(e,t){for(uo=t;null!==uo;){var n=(t=uo).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e;K?_o(o,r,t):yo(o,r,t);var s=r.alternate;null!==s&&(s.return=null),r.return=null}catch(w){qs(r,t,w)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,uo=n;else for(;null!==uo;){t=uo;try{var a=t.flags;if(32&a&&K&&Re(t.stateNode),512&a){var l=t.alternate;if(null!==l){var u=l.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}if(8192&a)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(as=Nt())}break;case 22:var h=null!==t.memoizedState,p=t.alternate,d=null!==p&&null!==p.memoizedState;if(n=t,K)e:if(i=n,r=h,o=null,K)for(var f=i;;){if(5===f.tag){if(null===o){o=f;var m=f.stateNode;r?we(m):be(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===o){var g=f.stateNode;r?Le(g):Ce(g,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===i)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===i)break;for(;null===f.sibling;){if(null===f.return||f.return===i)break e;o===f&&(o=null),f=f.return}o===f&&(o=null),f.sibling.return=f.return,f=f.sibling}if(h&&!d&&0!==(1&n.mode)){uo=n;for(var v=n.child;null!==v;){for(n=uo=v;null!==uo;){var y=(i=uo).child;switch(i.tag){case 0:case 11:case 14:case 15:fo(4,i,i.return);break;case 1:co(i,i.return);var S=i.stateNode;if("function"===typeof S.componentWillUnmount){var R=i.return;try{S.props=i.memoizedProps,S.state=i.memoizedState,S.componentWillUnmount()}catch(w){qs(i,R,w)}}break;case 5:co(i,i.return);break;case 22:if(null!==i.memoizedState){Mo(n);continue}}null!==y?(y.return=i,uo=y):Mo(n)}v=v.sibling}}}switch(4102&a){case 2:Lo(t),t.flags&=-3;break;case 6:Lo(t),t.flags&=-3,Ao(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Ao(t.alternate,t);break;case 4:Ao(t.alternate,t)}}catch(w){qs(t,t.return,w)}if(null!==(n=t.sibling)){n.return=t.return,uo=n;break}uo=t.return}}}(e,i),U(e.containerInfo),e.current=i,xo(i,e,r),Ut(),Ko=l,kt=a,Jo.transition=o}else e.current=i;if(fs&&(fs=!1,ms=e,gs=r),o=e.pendingLanes,0===o&&(ds=null),function(e){if(Wt&&"function"===typeof Wt.onCommitFiberRoot)try{Wt.onCommitFiberRoot(Gt,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),_s(e,Nt()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(hs)throw hs=!1,e=ps,ps=null,e;0!==(1&gs)&&0!==e.tag&&Gs(),o=e.pendingLanes,0!==(1&o)?e===ys?vs++:(vs=0,ys=e):vs=0,Yt()}(e,t,n)}finally{Jo.transition=i,kt=n}return null}function Gs(){if(null!==ms){var e=It(gs),t=Jo.transition,n=kt;try{if(Jo.transition=null,kt=16>e?16:e,null===ms)var i=!1;else{if(e=ms,ms=null,gs=0,0!==(6&Ko))throw Error(s(331));var r=Ko;for(Ko|=4,uo=e.current;null!==uo;){var o=uo,a=o.child;if(0!==(16&uo.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(uo=c;null!==uo;){var h=uo;switch(h.tag){case 0:case 11:case 15:fo(8,h,o)}var p=h.child;if(null!==p)p.return=h,uo=p;else for(;null!==uo;){var d=(h=uo).sibling,f=h.return;if(So(h),h===c){uo=null;break}if(null!==d){d.return=f,uo=d;break}uo=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}uo=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,uo=a;else e:for(;null!==uo;){if(0!==(2048&(o=uo).flags))switch(o.tag){case 0:case 11:case 15:fo(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,uo=y;break e}uo=o.return}}var S=e.current;for(uo=S;null!==uo;){var R=(a=uo).child;if(0!==(2064&a.subtreeFlags)&&null!==R)R.return=a,uo=R;else e:for(a=S;null!==uo;){if(0!==(2048&(l=uo).flags))try{switch(l.tag){case 0:case 11:case 15:mo(9,l)}}catch(L){qs(l,l.return,L)}if(l===a){uo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,uo=w;break e}uo=l.return}}if(Ko=r,Yt(),Wt&&"function"===typeof Wt.onPostCommitFiberRoot)try{Wt.onPostCommitFiberRoot(Gt,e)}catch(L){}i=!0}return i}finally{kt=n,Jo.transition=t}}return!1}function Ws(e,t,n){vn(e,t=Cr(0,t=vr(n,t),1)),t=ws(),null!==(e=Cs(e,1))&&(Tt(e,1,t),_s(e,t))}function qs(e,t,n){if(3===e.tag)Ws(e,e,n);else for(;null!==t;){if(3===t.tag){Ws(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ds||!ds.has(i))){vn(t,e=_r(t,e=vr(n,e),1)),e=ws(),null!==(t=Cs(t,1))&&(Tt(t,1,e),_s(t,e));break}}t=t.return}}function Vs(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ws(),e.pingedLanes|=e.suspendedLanes&n,Xo===e&&(Qo&n)===n&&(4===es||3===es&&(130023424&Qo)===Qo&&500>Nt()-as?Is(e,0):rs|=n),_s(e,t)}function Js(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Ct,0===(130023424&(Ct<<=1))&&(Ct=4194304)));var n=ws();null!==(e=Cs(e,t))&&(Tt(e,t,n),_s(e,n))}function Ks(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Js(e,n)}function Xs(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Js(e,n)}function Ys(e,t){return Dt(e,t)}function Qs(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(e,t,n,i){return new Qs(e,t,n,i)}function $s(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ea(e,t){var n=e.alternate;return null===n?((n=Zs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ta(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)$s(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case c:return na(n.children,r,o,t);case h:a=8,r|=8;break;case p:return(e=Zs(12,n,t,2|r)).elementType=p,e.lanes=o,e;case g:return(e=Zs(13,n,t,r)).elementType=g,e.lanes=o,e;case v:return(e=Zs(19,n,t,r)).elementType=v,e.lanes=o,e;case R:return ia(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case d:a=10;break e;case f:a=9;break e;case m:a=11;break e;case y:a=14;break e;case S:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Zs(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function na(e,t,n,i){return(e=Zs(7,e,i,t)).lanes=n,e}function ia(e,t,n,i){return(e=Zs(22,e,i,t)).elementType=R,e.lanes=n,e.stateNode={},e}function ra(e,t,n){return(e=Zs(6,e,null,t)).lanes=n,e}function oa(e,t,n){return(t=Zs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sa(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=V,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pt(0),this.expirationTimes=Pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.identifierPrefix=i,this.onRecoverableError=r,Y&&(this.mutableSourceEagerHydrationData=null)}function aa(e,t,n,i,r,o,s,a,l){return e=new sa(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Zs(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},fn(o),e}function la(e){if(!e)return ut;e:{if(_(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ft(n))return vt(e,n,t)}return t}function ua(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=x(t))?null:e.stateNode}function ca(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ha(e,t){ca(e,t),(e=e.alternate)&&ca(e,t)}function pa(e){return null===(e=x(e))?null:e.stateNode}function da(){return null}return cs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ht.current)Br=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Br=!1,function(e,t,n){switch(t.tag){case 3:Vr(t),$n();break;case 5:fi(t);break;case 1:ft(t.type)&&yt(t);break;case 4:pi(t,t.stateNode.containerInfo);break;case 10:an(0,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(lt(gi,1&gi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Yr(e,t,n):(lt(gi,1&gi.current),null!==(e=ro(e,t,n))?e.sibling:null);lt(gi,1&gi.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return io(e,t,n);t.flags|=128}var r=t.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(gi,gi.current),i)break;return null;case 22:case 23:return t.lanes=0,jr(e,t,n)}return ro(e,t,n)}(e,t,n);Br=0!==(131072&e.flags)}else Br=!1,Wn&&0!==(1048576&t.flags)&&Fn(t,kn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=dt(t,ct.current);cn(t,n),r=ki(null,t,i,e,r,n);var o=Ii();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(i)?(o=!0,yt(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,fn(t),r.updater=Cn,t.stateNode=r,r._reactInternals=t,xn(t,i,e,n),t=qr(null,t,i,!0,o,n)):(t.tag=0,Wn&&o&&zn(t),Ur(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return $s(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===m)return 11;if(e===y)return 14}return 2}(i),e=en(i,e),r){case 0:t=Gr(null,t,i,e,n);break e;case 1:t=Wr(null,t,i,e,n);break e;case 11:t=Nr(null,t,i,e,n);break e;case 14:t=Fr(null,t,i,en(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Gr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 1:return i=t.type,r=t.pendingProps,Wr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 3:e:{if(Vr(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,mn(e,t),Rn(t,i,null,n);var a=t.memoizedState;if(i=a.element,Y&&o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Jr(e,t,i,n,r=Error(s(423)));break e}if(i!==r){t=Jr(e,t,i,n,r=Error(s(424)));break e}for(Y&&(Gn=je(t.stateNode.containerInfo),Hn=t,Wn=!0,Vn=null,qn=!1),n=si(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===r){t=ro(e,t,n);break e}Ur(e,t,i,n)}t=t.child}return t;case 5:return fi(t),null===e&&Yn(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,H(i,r)?a=null:null!==o&&H(i,o)&&(t.flags|=32),Hr(e,t),Ur(e,t,a,n),t.child;case 6:return null===e&&Yn(t),null;case 13:return Yr(e,t,n);case 4:return pi(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=oi(t,null,i,n):Ur(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Nr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 7:return Ur(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ur(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,an(0,i,a=r.value),null!==o)if(qt(o.value,a)){if(o.children===r.children&&!ht.current){t=ro(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===i){if(1===o.tag){(u=gn(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),un(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),un(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ur(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,cn(t,n),i=i(r=hn(r)),t.flags|=1,Ur(e,t,i,n),t.child;case 14:return r=en(i=t.type,t.pendingProps),Fr(e,t,i,r=en(i.type,r),n);case 15:return zr(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:en(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ft(i)?(e=!0,yt(t)):e=!1,cn(t,n),An(t,i,r),xn(t,i,r,n),qr(null,t,i,!0,e,n);case 19:return io(e,t,n);case 22:return jr(e,t,n)}throw Error(s(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(bs(e,134217728,ws()),ha(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=ws(),n=Ls(e);bs(e,n,t),ha(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=_t(t.pendingLanes);0!==n&&(Mt(t,1|n),_s(t,Nt()),0===(6&Ko)&&(us(),Yt()))}break;case 13:var i=ws();Ms((function(){return bs(e,1,i)})),ha(e,1)}},t.batchedUpdates=function(e,t){var n=Ko;Ko|=1;try{return e(t)}finally{0===(Ko=n)&&(us(),Jt&&Yt())}},t.createComponentSelector=function(e){return{$$typeof:Io,value:e}},t.createContainer=function(e,t,n,i,r,o,s){return aa(e,t,!1,null,0,i,0,o,s)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Do,value:e}},t.createHydrationContainer=function(e,t,n,i,r,o,s,a,l){return(e=aa(n,i,!0,e,0,o,0,a,l)).context=la(null),n=e.current,(o=gn(i=ws(),r=Ls(n))).callback=void 0!==t&&null!==t?t:null,vn(n,o),e.current.lanes=r,Tt(e,r,i),_s(e,i),e},t.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Oo,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Bo,value:e}},t.createTextSelector=function(e){return{$$typeof:Uo,value:e}},t.deferredUpdates=function(e){var t=kt,n=Jo.transition;try{return Jo.transition=null,kt=16,e()}finally{kt=t,Jo.transition=n}},t.discreteUpdates=function(e,t,n,i,r){var o=kt,s=Jo.transition;try{return Jo.transition=null,kt=1,e(t,n,i,r)}finally{kt=o,Jo.transition=s,0===Ko&&us()}},t.findAllNodes=Go,t.findBoundingRects=function(e,t){if(!ie)throw Error(s(363));t=Go(e,t),e=[];for(var n=0;n<t.length;n++)e.push(oe(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,r=i+n.width,o=n.y,a=o+n.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,h=c+u.width,p=u.y,d=p+u.height;if(i>=c&&o>=p&&r<=h&&a<=d){e.splice(t,1);break}if(!(i!==c||n.width!==u.width||d<o||p>a)){p>o&&(u.height+=p-o,u.y=o),d<a&&(u.height=a-p),e.splice(t,1);break}if(!(o!==p||n.height!==u.height||h<i||c>r)){c>i&&(u.width+=c-i,u.x=i),h<r&&(u.width=r-c),e.splice(t,1);break}}return e},t.findHostInstance=ua,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=E(e))?T(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return ua(e)},t.flushControlled=function(e){var t=Ko;Ko|=1;var n=Jo.transition,i=kt;try{Jo.transition=null,kt=1,e()}finally{kt=i,Jo.transition=n,0===(Ko=t)&&(us(),Yt())}},t.flushPassiveEffects=Gs,t.flushSync=Ms,t.focusWithin=function(e,t){if(!ie)throw Error(s(363));for(t=Ho(e=Fo(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!ae(n)){if(5===n.tag&&ue(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return kt},t.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(s(363));var n=0,i=[];e=[Fo(e),0];for(var r=0;r<e.length;){var o=e[r++],a=e[r++],l=t[a];if((5!==o.tag||!ae(o))&&(zo(o,l)&&(i.push(jo(l)),++a>n&&(n=a)),a<t.length))for(o=o.child;null!==o;)e.push(o,a),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(jo(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?I(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:pa,findFiberByHostInstance:e.findFiberByHostInstance||da,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Gt=t.inject(e),Wt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,i){if(!ie)throw Error(s(363));e=Go(e,t);var r=ce(e,n,i).disconnect;return{disconnect:function(){r()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,i){var r=t.current,o=ws(),s=Ls(r);return n=la(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),vn(r,t),null!==(e=bs(r,s,o))&&yn(e,r,s),s},t}},223:(e,t,n)=>{"use strict";e.exports=n(2354)},5914:(e,t,n)=>{"use strict";e.exports=n(8106)},5918:(e,t,n)=>{"use strict";var i=n(7313),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var i,o={},u=null,c=null;for(i in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:u,ref:c,props:o,_owner:a.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},306:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function S(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var R=S.prototype=new y;R.constructor=S,m(R,v.prototype),R.isPureReactComponent=!0;var w=Array.isArray,L=Object.prototype.hasOwnProperty,b={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,i){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)L.call(t,r)&&!C.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:b.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=e),e=""===o?"."+x(l,0):o,w(s)?(r="",null!=e&&(r=e.replace(E,"$&/")+"/"),P(s,t,r,"",(function(e){return e}))):null!=s&&(A(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var c=o+x(a=e[u],u);l+=P(a,t,r,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=P(a=a.value,t,r,c=o+x(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k={current:null},I={transition:null},D={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:I,ReactCurrentOwner:b};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=S,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)L.call(t,u)&&!C.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=i;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return k.current.useCallback(e,t)},t.useContext=function(e){return k.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return k.current.useDeferredValue(e)},t.useEffect=function(e,t){return k.current.useEffect(e,t)},t.useId=function(){return k.current.useId()},t.useImperativeHandle=function(e,t,n){return k.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.current.useMemo(e,t)},t.useReducer=function(e,t,n){return k.current.useReducer(e,t,n)},t.useRef=function(e){return k.current.useRef(e)},t.useState=function(e){return k.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.current.useTransition()},t.version="18.2.0"},7313:(e,t,n)=>{"use strict";e.exports=n(306)},6417:(e,t,n)=>{"use strict";e.exports=n(5918)},3095:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],u=a+1,c=e[u];if(0>o(l,n))u<r&&0>o(c,l)?(e[i]=c,e[u]=n,i=u):(e[i]=l,e[a]=n,i=a);else{if(!(u<r&&0>o(c,n)))break e;e[i]=c,e[u]=n,i=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,p=null,d=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,S="undefined"!==typeof setImmediate?setImmediate:null;function R(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(u,t)}t=i(c)}}function w(e){if(g=!1,R(e),!m)if(null!==i(u))m=!0,I(L);else{var t=i(c);null!==t&&D(w,t.startTime-e)}}function L(e,n){m=!1,g&&(g=!1,y(A),A=-1),f=!0;var o=d;try{for(R(n),p=i(u);null!==p&&(!(p.expirationTime>n)||e&&!P());){var s=p.callback;if("function"===typeof s){p.callback=null,d=p.priorityLevel;var a=s(p.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?p.callback=a:p===i(u)&&r(u),R(n)}else r(u);p=i(u)}if(null!==p)var l=!0;else{var h=i(c);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{p=null,d=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var b,C=!1,_=null,A=-1,E=5,x=-1;function P(){return!(t.unstable_now()-x<E)}function T(){if(null!==_){var e=t.unstable_now();x=e;var n=!0;try{n=_(!0,e)}finally{n?b():(C=!1,_=null)}}else C=!1}if("function"===typeof S)b=function(){S(T)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,k=M.port2;M.port1.onmessage=T,b=function(){k.postMessage(null)}}else b=function(){v(T,0)};function I(e){_=e,C||(C=!0,b())}function D(e,n){A=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(L))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return i(u)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===i(u)&&e===i(c)&&(g?(y(A),A=-1):g=!0,D(w,o-s))):(e.sortIndex=a,n(u,e),m||f||(m=!0,I(L))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},2224:(e,t,n)=>{"use strict";e.exports=n(3095)},8086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return l.default}});var i=p(n(4121)),r=p(n(9054)),o=p(n(3654)),s=p(n(2790)),a=p(n(5979)),l=p(n(1028)),u=p(n(9244)),c=p(n(5707)),h=p(n(3745));function p(e){return e&&e.__esModule?e:{default:e}}},8185:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function i(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function r(e,t,n,r,o,s){return i((a=i(i(t,e),i(r,s)))<<(l=o)|a>>>32-l,n);var a,l}function o(e,t,n,i,o,s,a){return r(t&n|~t&i,e,t,o,s,a)}function s(e,t,n,i,o,s,a){return r(t&i|n&~i,e,t,o,s,a)}function a(e,t,n,i,o,s,a){return r(t^n^i,e,t,o,s,a)}function l(e,t,n,i,o,s,a){return r(n^(t|~i),e,t,o,s,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){if("string"===typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,i="0123456789abcdef";for(let r=0;r<n;r+=8){const n=e[r>>5]>>>r%32&255,o=parseInt(i.charAt(n>>>4&15)+i.charAt(15&n),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,u=-271733879,c=-1732584194,h=271733878;for(let n=0;n<e.length;n+=16){const t=r,p=u,d=c,f=h;r=o(r,u,c,h,e[n],7,-680876936),h=o(h,r,u,c,e[n+1],12,-389564586),c=o(c,h,r,u,e[n+2],17,606105819),u=o(u,c,h,r,e[n+3],22,-1044525330),r=o(r,u,c,h,e[n+4],7,-176418897),h=o(h,r,u,c,e[n+5],12,1200080426),c=o(c,h,r,u,e[n+6],17,-1473231341),u=o(u,c,h,r,e[n+7],22,-45705983),r=o(r,u,c,h,e[n+8],7,1770035416),h=o(h,r,u,c,e[n+9],12,-1958414417),c=o(c,h,r,u,e[n+10],17,-42063),u=o(u,c,h,r,e[n+11],22,-1990404162),r=o(r,u,c,h,e[n+12],7,1804603682),h=o(h,r,u,c,e[n+13],12,-40341101),c=o(c,h,r,u,e[n+14],17,-1502002290),u=o(u,c,h,r,e[n+15],22,1236535329),r=s(r,u,c,h,e[n+1],5,-165796510),h=s(h,r,u,c,e[n+6],9,-1069501632),c=s(c,h,r,u,e[n+11],14,643717713),u=s(u,c,h,r,e[n],20,-373897302),r=s(r,u,c,h,e[n+5],5,-701558691),h=s(h,r,u,c,e[n+10],9,38016083),c=s(c,h,r,u,e[n+15],14,-660478335),u=s(u,c,h,r,e[n+4],20,-405537848),r=s(r,u,c,h,e[n+9],5,568446438),h=s(h,r,u,c,e[n+14],9,-1019803690),c=s(c,h,r,u,e[n+3],14,-187363961),u=s(u,c,h,r,e[n+8],20,1163531501),r=s(r,u,c,h,e[n+13],5,-1444681467),h=s(h,r,u,c,e[n+2],9,-51403784),c=s(c,h,r,u,e[n+7],14,1735328473),u=s(u,c,h,r,e[n+12],20,-1926607734),r=a(r,u,c,h,e[n+5],4,-378558),h=a(h,r,u,c,e[n+8],11,-2022574463),c=a(c,h,r,u,e[n+11],16,1839030562),u=a(u,c,h,r,e[n+14],23,-35309556),r=a(r,u,c,h,e[n+1],4,-1530992060),h=a(h,r,u,c,e[n+4],11,1272893353),c=a(c,h,r,u,e[n+7],16,-155497632),u=a(u,c,h,r,e[n+10],23,-1094730640),r=a(r,u,c,h,e[n+13],4,681279174),h=a(h,r,u,c,e[n],11,-358537222),c=a(c,h,r,u,e[n+3],16,-722521979),u=a(u,c,h,r,e[n+6],23,76029189),r=a(r,u,c,h,e[n+9],4,-640364487),h=a(h,r,u,c,e[n+12],11,-421815835),c=a(c,h,r,u,e[n+15],16,530742520),u=a(u,c,h,r,e[n+2],23,-995338651),r=l(r,u,c,h,e[n],6,-198630844),h=l(h,r,u,c,e[n+7],10,1126891415),c=l(c,h,r,u,e[n+14],15,-1416354905),u=l(u,c,h,r,e[n+5],21,-57434055),r=l(r,u,c,h,e[n+12],6,1700485571),h=l(h,r,u,c,e[n+3],10,-1894986606),c=l(c,h,r,u,e[n+10],15,-1051523),u=l(u,c,h,r,e[n+1],21,-2054922799),r=l(r,u,c,h,e[n+8],6,1873313359),h=l(h,r,u,c,e[n+15],10,-30611744),c=l(c,h,r,u,e[n+6],15,-1560198380),u=l(u,c,h,r,e[n+13],21,1309151649),r=l(r,u,c,h,e[n+4],6,-145523070),h=l(h,r,u,c,e[n+11],10,-1120210379),c=l(c,h,r,u,e[n+2],15,718787259),u=l(u,c,h,r,e[n+9],21,-343485551),r=i(r,t),u=i(u,p),c=i(c,d),h=i(h,f)}return[r,u,c,h]}(function(e){if(0===e.length)return[];const t=8*e.length,i=new Uint32Array(n(t));for(let n=0;n<t;n+=8)i[n>>5]|=(255&e[n/8])<<n%32;return i}(e),8*e.length))};t.default=u},1605:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},5979:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default="00000000-0000-0000-0000-000000000000"},3745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(9244))&&i.__esModule?i:{default:i};var o=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};t.default=o},3282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},714:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};const i=new Uint8Array(16)},7752:(e,t)=>{"use strict";function n(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:case 3:return t^n^i;case 2:return t&n^t&i^n&i}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"===typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const o=e.length/4+2,s=Math.ceil(o/16),a=new Array(s);for(let n=0;n<s;++n){const t=new Uint32Array(16);for(let i=0;i<16;++i)t[i]=e[64*n+4*i]<<24|e[64*n+4*i+1]<<16|e[64*n+4*i+2]<<8|e[64*n+4*i+3];a[n]=t}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(let l=0;l<s;++l){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=a[l][t];for(let t=16;t<80;++t)e[t]=i(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let o=r[0],s=r[1],u=r[2],c=r[3],h=r[4];for(let r=0;r<80;++r){const a=Math.floor(r/20),l=i(o,5)+n(a,s,u,c)+h+t[a]+e[r]>>>0;h=c,c=u,u=i(s,30)>>>0,s=o,o=l}r[0]=r[0]+o>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+c>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};t.default=r},5707:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var i,r=(i=n(9244))&&i.__esModule?i:{default:i};const o=[];for(let l=0;l<256;++l)o.push((l+256).toString(16).slice(1));function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]}var a=function(e){const t=s(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0);if(!(0,r.default)(t))throw TypeError("Stringified UUID is invalid");return t};t.default=a},4121:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(714))&&i.__esModule?i:{default:i},o=n(5707);let s,a,l=0,u=0;var c=function(e,t,n){let i=t&&n||0;const c=t||new Array(16);let h=(e=e||{}).node||s,p=void 0!==e.clockseq?e.clockseq:a;if(null==h||null==p){const t=e.random||(e.rng||r.default)();null==h&&(h=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==p&&(p=a=16383&(t[6]<<8|t[7]))}let d=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:u+1;const m=d-l+(f-u)/1e4;if(m<0&&void 0===e.clockseq&&(p=p+1&16383),(m<0||d>l)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=d,u=f,a=p,d+=122192928e5;const g=(1e4*(268435455&d)+f)%4294967296;c[i++]=g>>>24&255,c[i++]=g>>>16&255,c[i++]=g>>>8&255,c[i++]=255&g;const v=d/4294967296*1e4&268435455;c[i++]=v>>>8&255,c[i++]=255&v,c[i++]=v>>>24&15|16,c[i++]=v>>>16&255,c[i++]=p>>>8|128,c[i++]=255&p;for(let r=0;r<6;++r)c[i+r]=h[r];return t||(0,o.unsafeStringify)(c)};t.default=c},9054:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9061)),r=o(n(8185));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.default)("v3",48,r.default);t.default=s},9061:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function i(e,i,s,a){var l;if("string"===typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"===typeof i&&(i=(0,o.default)(i)),16!==(null===(l=i)||void 0===l?void 0:l.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(i),u.set(e,i.length),u=n(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,s){a=a||0;for(let e=0;e<16;++e)s[a+e]=u[e];return s}return(0,r.unsafeStringify)(u)}try{i.name=e}catch(l){}return i.DNS=s,i.URL=a,i};var i,r=n(5707),o=(i=n(3745))&&i.__esModule?i:{default:i};const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=a},3654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(1605)),r=s(n(714)),o=n(5707);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,n){if(i.default.randomUUID&&!t&&!e)return i.default.randomUUID();const s=(e=e||{}).random||(e.rng||r.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=s[e];return t}return(0,o.unsafeStringify)(s)};t.default=a},2790:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(9061)),r=o(n(7752));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.default)("v5",80,r.default);t.default=s},9244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(3282))&&i.__esModule?i:{default:i};var o=function(e){return"string"===typeof e&&r.default.test(e)};t.default=o},1028:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=(i=n(9244))&&i.__esModule?i:{default:i};var o=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};t.default=o},6916:()=>{},9271:()=>{},2104:()=>{},4151:()=>{},4270:()=>{},2914:()=>{},2088:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var r=Object.create(null);__webpack_require__.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,__webpack_require__.d(r,o),r}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.p="/";var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{ACESFilmicToneMapping:()=>Ot,AddEquation:()=>et,AddOperation:()=>Tt,AdditiveAnimationBlendMode:()=>gi,AdditiveBlending:()=>Ye,AgXToneMapping:()=>Ut,AlphaFormat:()=>vn,AlwaysCompare:()=>rr,AlwaysDepth:()=>wt,AlwaysStencilFunc:()=>Yi,AmbientLight:()=>zf,AnimationAction:()=>Pm,AnimationClip:()=>cf,AnimationLoader:()=>Sf,AnimationMixer:()=>Mm,AnimationObjectGroup:()=>xm,AnimationUtils:()=>Yd,ArcCurve:()=>fp,ArrayCamera:()=>wc,ArrowHelper:()=>Lg,AttachedBindMode:()=>Nt,Audio:()=>dm,AudioAnalyser:()=>Sm,AudioContext:()=>em,AudioListener:()=>pm,AudioLoader:()=>tm,AxesHelper:()=>bg,BackSide:()=>qe,BasicDepthPacking:()=>Li,BasicShadowMap:()=>ze,BatchedMesh:()=>jh,Bone:()=>hh,BooleanKeyframeTrack:()=>nf,Box2:()=>Gm,Box3:()=>go,Box3Helper:()=>vg,BoxGeometry:()=>Ea,BoxHelper:()=>gg,BufferAttribute:()=>Gs,BufferGeometry:()=>aa,BufferGeometryLoader:()=>Jf,ByteType:()=>an,Cache:()=>pf,Camera:()=>Ia,CameraHelper:()=>dg,CanvasTexture:()=>hp,CapsuleGeometry:()=>Op,CatmullRomCurve3:()=>Rp,CineonToneMapping:()=>Dt,CircleGeometry:()=>Bp,ClampToEdgeWrapping:()=>Jt,Clock:()=>sm,Color:()=>Ms,ColorKeyframeTrack:()=>rf,ColorManagement:()=>Jr,CompressedArrayTexture:()=>up,CompressedCubeTexture:()=>cp,CompressedTexture:()=>lp,CompressedTextureLoader:()=>Rf,ConeGeometry:()=>Np,ConstantAlphaFactor:()=>yt,ConstantColorFactor:()=>gt,CubeCamera:()=>Ba,CubeReflectionMapping:()=>jt,CubeRefractionMapping:()=>Ht,CubeTexture:()=>Ua,CubeTextureLoader:()=>Lf,CubeUVReflectionMapping:()=>qt,CubicBezierCurve:()=>Cp,CubicBezierCurve3:()=>_p,CubicInterpolant:()=>Zd,CullFaceBack:()=>Ue,CullFaceFront:()=>Ne,CullFaceFrontBack:()=>Fe,CullFaceNone:()=>Be,Curve:()=>pp,CurvePath:()=>kp,CustomBlending:()=>$e,CustomToneMapping:()=>Bt,CylinderGeometry:()=>Up,Cylindrical:()=>jm,Data3DTexture:()=>lo,DataArrayTexture:()=>so,DataTexture:()=>ph,DataTextureLoader:()=>bf,DataUtils:()=>zs,DecrementStencilOp:()=>Fi,DecrementWrapStencilOp:()=>ji,DefaultLoadingManager:()=>ff,DepthFormat:()=>wn,DepthStencilFormat:()=>Ln,DepthTexture:()=>Tl,DetachedBindMode:()=>Ft,DirectionalLight:()=>Ff,DirectionalLightHelper:()=>cg,DiscreteInterpolant:()=>ef,DisplayP3ColorSpace:()=>Pi,DodecahedronGeometry:()=>zp,DoubleSide:()=>Ve,DstAlphaFactor:()=>ht,DstColorFactor:()=>dt,DynamicCopyUsage:()=>pr,DynamicDrawUsage:()=>sr,DynamicReadUsage:()=>ur,EdgesGeometry:()=>qp,EllipseCurve:()=>dp,EqualCompare:()=>$i,EqualDepth:()=>Ct,EqualStencilFunc:()=>qi,EquirectangularReflectionMapping:()=>Gt,EquirectangularRefractionMapping:()=>Wt,Euler:()=>$o,EventDispatcher:()=>Sr,ExtrudeGeometry:()=>wd,FileLoader:()=>yf,Float16BufferAttribute:()=>Qs,Float32BufferAttribute:()=>Zs,Float64BufferAttribute:()=>$s,FloatType:()=>pn,Fog:()=>Mc,FogExp2:()=>Tc,FramebufferTexture:()=>ap,FrontSide:()=>We,Frustum:()=>qa,GLBufferAttribute:()=>Bm,GLSL1:()=>fr,GLSL3:()=>mr,GreaterCompare:()=>tr,GreaterDepth:()=>At,GreaterEqualCompare:()=>ir,GreaterEqualDepth:()=>_t,GreaterEqualStencilFunc:()=>Xi,GreaterStencilFunc:()=>Ji,GridHelper:()=>og,Group:()=>Lc,HalfFloatType:()=>dn,HemisphereLight:()=>Af,HemisphereLightHelper:()=>rg,IcosahedronGeometry:()=>bd,ImageBitmapLoader:()=>Zf,ImageLoader:()=>wf,ImageUtils:()=>Qr,IncrementStencilOp:()=>Ni,IncrementWrapStencilOp:()=>zi,InstancedBufferAttribute:()=>gh,InstancedBufferGeometry:()=>Vf,InstancedInterleavedBuffer:()=>Om,InstancedMesh:()=>Ch,Int16BufferAttribute:()=>Js,Int32BufferAttribute:()=>Xs,Int8BufferAttribute:()=>Ws,IntType:()=>cn,InterleavedBuffer:()=>Ic,InterleavedBufferAttribute:()=>Oc,Interpolant:()=>Qd,InterpolateDiscrete:()=>ui,InterpolateLinear:()=>ci,InterpolateSmooth:()=>hi,InvertStencilOp:()=>Hi,KeepStencilOp:()=>Bi,KeyframeTrack:()=>tf,LOD:()=>eh,LatheGeometry:()=>Dp,Layers:()=>es,LessCompare:()=>Zi,LessDepth:()=>Lt,LessEqualCompare:()=>er,LessEqualDepth:()=>bt,LessEqualStencilFunc:()=>Vi,LessStencilFunc:()=>Wi,Light:()=>_f,LightProbe:()=>Gf,Line:()=>Kh,Line3:()=>Vm,LineBasicMaterial:()=>Hh,LineCurve:()=>Ap,LineCurve3:()=>Ep,LineDashedMaterial:()=>Wd,LineLoop:()=>Zh,LineSegments:()=>Qh,LinearDisplayP3ColorSpace:()=>Ti,LinearEncoding:()=>Ri,LinearFilter:()=>en,LinearInterpolant:()=>$d,LinearMipMapLinearFilter:()=>on,LinearMipMapNearestFilter:()=>nn,LinearMipmapLinearFilter:()=>rn,LinearMipmapNearestFilter:()=>tn,LinearSRGBColorSpace:()=>xi,LinearToneMapping:()=>kt,LinearTransfer:()=>Mi,Loader:()=>mf,LoaderUtils:()=>qf,LoadingManager:()=>df,LoopOnce:()=>si,LoopPingPong:()=>li,LoopRepeat:()=>ai,LuminanceAlphaFormat:()=>Rn,LuminanceFormat:()=>Sn,MOUSE:()=>De,Material:()=>Ds,MaterialLoader:()=>Wf,MathUtils:()=>kr,Matrix3:()=>Dr,Matrix4:()=>Go,MaxEquation:()=>rt,Mesh:()=>_a,MeshBasicMaterial:()=>Os,MeshDepthMaterial:()=>mc,MeshDistanceMaterial:()=>gc,MeshLambertMaterial:()=>Hd,MeshMatcapMaterial:()=>Gd,MeshNormalMaterial:()=>jd,MeshPhongMaterial:()=>Fd,MeshPhysicalMaterial:()=>Nd,MeshStandardMaterial:()=>Ud,MeshToonMaterial:()=>zd,MinEquation:()=>it,MirroredRepeatWrapping:()=>Kt,MixOperation:()=>Pt,MultiplyBlending:()=>Ze,MultiplyOperation:()=>xt,NearestFilter:()=>Xt,NearestMipMapLinearFilter:()=>$t,NearestMipMapNearestFilter:()=>Qt,NearestMipmapLinearFilter:()=>Zt,NearestMipmapNearestFilter:()=>Yt,NeverCompare:()=>Qi,NeverDepth:()=>Rt,NeverStencilFunc:()=>Gi,NoBlending:()=>Ke,NoColorSpace:()=>Ai,NoToneMapping:()=>Mt,NormalAnimationBlendMode:()=>mi,NormalBlending:()=>Xe,NotEqualCompare:()=>nr,NotEqualDepth:()=>Et,NotEqualStencilFunc:()=>Ki,NumberKeyframeTrack:()=>of,Object3D:()=>fs,ObjectLoader:()=>Kf,ObjectSpaceNormalMap:()=>_i,OctahedronGeometry:()=>Cd,OneFactor:()=>st,OneMinusConstantAlphaFactor:()=>St,OneMinusConstantColorFactor:()=>vt,OneMinusDstAlphaFactor:()=>pt,OneMinusDstColorFactor:()=>ft,OneMinusSrcAlphaFactor:()=>ct,OneMinusSrcColorFactor:()=>lt,OrthographicCamera:()=>ol,P3Primaries:()=>Di,PCFShadowMap:()=>je,PCFSoftShadowMap:()=>He,PMREMGenerator:()=>gl,Path:()=>Ip,PerspectiveCamera:()=>Da,Plane:()=>Ha,PlaneGeometry:()=>Ka,PlaneHelper:()=>yg,PointLight:()=>Uf,PointLightHelper:()=>eg,Points:()=>rp,PointsMaterial:()=>$h,PolarGridHelper:()=>sg,PolyhedronGeometry:()=>Fp,PositionalAudio:()=>ym,PropertyBinding:()=>Em,PropertyMixer:()=>Rm,QuadraticBezierCurve:()=>xp,QuadraticBezierCurve3:()=>Pp,Quaternion:()=>ho,QuaternionKeyframeTrack:()=>af,QuaternionLinearInterpolant:()=>sf,RED_GREEN_RGTC2_Format:()=>ri,RED_RGTC1_Format:()=>ni,REVISION:()=>Ie,RGBADepthPacking:()=>bi,RGBAFormat:()=>yn,RGBAIntegerFormat:()=>En,RGBA_ASTC_10x10_Format:()=>Yn,RGBA_ASTC_10x5_Format:()=>Jn,RGBA_ASTC_10x6_Format:()=>Kn,RGBA_ASTC_10x8_Format:()=>Xn,RGBA_ASTC_12x10_Format:()=>Qn,RGBA_ASTC_12x12_Format:()=>Zn,RGBA_ASTC_4x4_Format:()=>Fn,RGBA_ASTC_5x4_Format:()=>zn,RGBA_ASTC_5x5_Format:()=>jn,RGBA_ASTC_6x5_Format:()=>Hn,RGBA_ASTC_6x6_Format:()=>Gn,RGBA_ASTC_8x5_Format:()=>Wn,RGBA_ASTC_8x6_Format:()=>qn,RGBA_ASTC_8x8_Format:()=>Vn,RGBA_BPTC_Format:()=>$n,RGBA_ETC2_EAC_Format:()=>Nn,RGBA_PVRTC_2BPPV1_Format:()=>On,RGBA_PVRTC_4BPPV1_Format:()=>Dn,RGBA_S3TC_DXT1_Format:()=>Pn,RGBA_S3TC_DXT3_Format:()=>Tn,RGBA_S3TC_DXT5_Format:()=>Mn,RGB_BPTC_SIGNED_Format:()=>ei,RGB_BPTC_UNSIGNED_Format:()=>ti,RGB_ETC1_Format:()=>Bn,RGB_ETC2_Format:()=>Un,RGB_PVRTC_2BPPV1_Format:()=>In,RGB_PVRTC_4BPPV1_Format:()=>kn,RGB_S3TC_DXT1_Format:()=>xn,RGFormat:()=>_n,RGIntegerFormat:()=>An,RawShaderMaterial:()=>Bd,Ray:()=>Ho,Raycaster:()=>Um,Rec709Primaries:()=>Ii,RectAreaLight:()=>jf,RedFormat:()=>bn,RedIntegerFormat:()=>Cn,ReinhardToneMapping:()=>It,RenderTarget:()=>ro,RepeatWrapping:()=>Vt,ReplaceStencilOp:()=>Ui,ReverseSubtractEquation:()=>nt,RingGeometry:()=>_d,SIGNED_RED_GREEN_RGTC2_Format:()=>oi,SIGNED_RED_RGTC1_Format:()=>ii,SRGBColorSpace:()=>Ei,SRGBTransfer:()=>ki,Scene:()=>kc,ShaderChunk:()=>Xa,ShaderLib:()=>Qa,ShaderMaterial:()=>ka,ShadowMaterial:()=>Od,Shape:()=>Vp,ShapeGeometry:()=>Ad,ShapePath:()=>Cg,ShapeUtils:()=>yd,ShortType:()=>ln,Skeleton:()=>mh,SkeletonHelper:()=>Zm,SkinnedMesh:()=>ch,Source:()=>$r,Sphere:()=>Do,SphereGeometry:()=>Ed,Spherical:()=>zm,SphericalHarmonics3:()=>Hf,SplineCurve:()=>Tp,SpotLight:()=>kf,SpotLightHelper:()=>Km,Sprite:()=>Yc,SpriteMaterial:()=>Bc,SrcAlphaFactor:()=>ut,SrcAlphaSaturateFactor:()=>mt,SrcColorFactor:()=>at,StaticCopyUsage:()=>hr,StaticDrawUsage:()=>or,StaticReadUsage:()=>lr,StereoCamera:()=>om,StreamCopyUsage:()=>dr,StreamDrawUsage:()=>ar,StreamReadUsage:()=>cr,StringKeyframeTrack:()=>lf,SubtractEquation:()=>tt,SubtractiveBlending:()=>Qe,TOUCH:()=>Oe,TangentSpaceNormalMap:()=>Ci,TetrahedronGeometry:()=>xd,Texture:()=>no,TextureLoader:()=>Cf,TorusGeometry:()=>Pd,TorusKnotGeometry:()=>Td,Triangle:()=>As,TriangleFanDrawMode:()=>Si,TriangleStripDrawMode:()=>yi,TrianglesDrawMode:()=>vi,TubeGeometry:()=>Md,TwoPassDoubleSide:()=>Je,UVMapping:()=>zt,Uint16BufferAttribute:()=>Ks,Uint32BufferAttribute:()=>Ys,Uint8BufferAttribute:()=>qs,Uint8ClampedBufferAttribute:()=>Vs,Uniform:()=>km,UniformsGroup:()=>Dm,UniformsLib:()=>Ya,UniformsUtils:()=>Ma,UnsignedByteType:()=>sn,UnsignedInt248Type:()=>gn,UnsignedIntType:()=>hn,UnsignedShort4444Type:()=>fn,UnsignedShort5551Type:()=>mn,UnsignedShortType:()=>un,VSMShadowMap:()=>Ge,Vector2:()=>Ir,Vector3:()=>po,Vector4:()=>io,VectorKeyframeTrack:()=>uf,VideoTexture:()=>sp,WebGL1Renderer:()=>Pc,WebGL3DRenderTarget:()=>uo,WebGLArrayRenderTarget:()=>ao,WebGLCoordinateSystem:()=>vr,WebGLCubeRenderTarget:()=>Na,WebGLMultipleRenderTargets:()=>co,WebGLRenderTarget:()=>oo,WebGLRenderer:()=>xc,WebGLUtils:()=>Rc,WebGPUCoordinateSystem:()=>yr,WireframeGeometry:()=>kd,WrapAroundEnding:()=>fi,ZeroCurvatureEnding:()=>pi,ZeroFactor:()=>ot,ZeroSlopeEnding:()=>di,ZeroStencilOp:()=>Oi,_SRGBAFormat:()=>gr,createCanvasElement:()=>zr,sRGBEncoding:()=>wi});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{hasBrowserEnv:()=>xb,hasStandardBrowserEnv:()=>Pb,hasStandardBrowserWebWorkerEnv:()=>Mb});var n,i=__webpack_require__(7313),r=__webpack_require__.t(i,2),o=__webpack_require__(1739),s=__webpack_require__(1168),a=__webpack_require__.t(s,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const u="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,i){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function g(e,t,i,r){void 0===r&&(r={});let{window:o=document.defaultView,v5Compat:s=!1}=r,a=o.history,h=n.Pop,m=null,g=v();function v(){return(a.state||{idx:null}).idx}function y(){h=n.Pop;let e=v(),t=null==e?null:e-g;g=e,m&&m({action:h,location:R.location,delta:t})}function S(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let R={get action(){return h},get location(){return e(o,a)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(u,y),m=e,()=>{o.removeEventListener(u,y),m=null}},createHref:e=>t(o,e),createURL:S,encodeLocation(e){let t=S(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h=n.Push;let r=d(R.location,e,t);i&&i(r,e),g=v()+1;let l=p(r,g),u=R.createHref(r);try{a.pushState(l,"",u)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;o.location.assign(u)}s&&m&&m({action:h,location:R.location,delta:1})},replace:function(e,t){h=n.Replace;let r=d(R.location,e,t);i&&i(r,e),g=v();let o=p(r,g),l=R.createHref(r);a.replaceState(o,"",l),s&&m&&m({action:h,location:R.location,delta:0})},go:e=>a.go(e)};return R}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let i=k(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let r=S(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let o=null;for(let s=0;null==o&&s<r.length;++s)o=P(r[s],M(i));return o}function S(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};s.relativePath.startsWith("/")&&(c(s.relativePath.startsWith(i),'Absolute route path "'+s.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(i.length));let a=U([i,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),S(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:x(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of R(e.path))r(e,t,i);else r(e,t)})),t}function R(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===i.length)return r?[o,""]:[o];let s=R(i.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),r&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:[\w-]+$/,L=3,b=2,C=1,_=10,A=-2,E=e=>"*"===e;function x(e,t){let n=e.split("/"),i=n.length;return n.some(E)&&(i+=A),t&&(i+=b),n.filter((e=>!E(e))).reduce(((e,t)=>e+(w.test(t)?L:""===t?C:_)),i)}function P(e,t){let{routesMeta:n}=e,i={},r="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,l="/"===r?t:t.slice(r.length)||"/",u=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!u)return null;Object.assign(i,u.params);let c=e.route;o.push({params:i,pathname:U([r,u.pathname]),pathnameBase:N(U([r,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(r=U([r,u.pathnameBase]))}return o}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let o=new RegExp(r,t?void 0:"i");return[o,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce(((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return h(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",i),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function M(e){try{return decodeURI(e)}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function k(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function I(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=D(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function B(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=m(e):(r=l({},e),c(!r.pathname||!r.pathname.includes("?"),I("?","pathname","search",r)),c(!r.pathname||!r.pathname.includes("#"),I("#","pathname","hash",r)),c(!r.search||!r.search.includes("#"),I("#","search","hash",r)));let o,s=""===e||""===r.pathname,a=s?"/":r.pathname;if(null==a)o=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?m(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:F(i),hash:z(r)}}(r,o),h=a&&"/"!==a&&a.endsWith("/"),p=(s||"."===a)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!p||(u.pathname+="/"),u}const U=e=>e.join("/").replace(/\/\/+/g,"/"),N=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function j(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],G=(new Set(H),["get",...H]);new Set(G),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W.apply(this,arguments)}const q=i.createContext(null);const V=i.createContext(null);const J=i.createContext(null);const K=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=i.createContext(null);function Q(){return null!=i.useContext(K)}function Z(){return Q()||c(!1),i.useContext(K).location}function $(e){i.useContext(J).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=ce(le.UseNavigateStable),t=pe(ue.UseNavigateStable),n=i.useRef(!1);return $((()=>{n.current=!0})),i.useCallback((function(i,r){void 0===r&&(r={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,W({fromRouteId:t},r)))}),[e,t])}():function(){Q()||c(!1);let e=i.useContext(q),{basename:t,future:n,navigator:r}=i.useContext(J),{matches:o}=i.useContext(X),{pathname:s}=Z(),a=JSON.stringify(O(o,n.v7_relativeSplatPath)),l=i.useRef(!1);return $((()=>{l.current=!0})),i.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let o=B(n,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:U([t,o.pathname])),(i.replace?r.replace:r.push)(o,i.state,i)}),[t,r,a,s,e])}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(J),{matches:o}=i.useContext(X),{pathname:s}=Z(),a=JSON.stringify(O(o,r.v7_relativeSplatPath));return i.useMemo((()=>B(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function ne(e,t,r,o){Q()||c(!1);let{navigator:s}=i.useContext(J),{matches:a}=i.useContext(X),l=a[a.length-1],u=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let p,d=Z();if(t){var f;let e="string"===typeof t?m(t):t;"/"===h||(null==(f=e.pathname)?void 0:f.startsWith(h))||c(!1),p=e}else p=d;let g=p.pathname||"/",v=y(e,{pathname:"/"===h?g:g.slice(h.length)||"/"});let S=ae(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:U([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:U([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,r,o);return t&&S?i.createElement(K.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:n.Pop}},S):S}function ie(){let e=function(){var e;let t=i.useContext(Y),n=he(ue.UseRouteError),r=pe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=j(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,null)}const re=i.createElement(ie,null);class oe extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:r}=e,o=i.useContext(q);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function ae(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let a=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=i),e.route.id){let{loaderData:t,errors:i}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||r){u=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,r,o)=>{let s,c=!1,p=null,d=null;var f;n&&(s=l&&r.route.id?l[r.route.id]:void 0,p=r.route.errorElement||re,u&&(h<0&&0===o?(f="route-fallback",!1||de[f]||(de[f]=!0),c=!0,d=null):h===o&&(c=!0,d=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,o+1)),g=()=>{let t;return t=s?p:c?d:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(se,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(oe,{location:n.location,revalidation:n.revalidation,component:p,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function ce(e){let t=i.useContext(q);return t||c(!1),t}function he(e){let t=i.useContext(V);return t||c(!1),t}function pe(e){let t=function(e){let t=i.useContext(X);return t||c(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const de={};r.startTransition;function fe(e){c(!1)}function me(e){let{basename:t="/",children:r=null,location:o,navigationType:s=n.Pop,navigator:a,static:l=!1,future:u}=e;Q()&&c(!1);let h=t.replace(/^\/*/,"/"),p=i.useMemo((()=>({basename:h,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},u)})),[h,u,a,l]);"string"===typeof o&&(o=m(o));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:y="default"}=o,S=i.useMemo((()=>{let e=k(d,h);return null==e?null:{location:{pathname:e,search:f,hash:g,state:v,key:y},navigationType:s}}),[h,d,f,g,v,y,s]);return null==S?null:i.createElement(J.Provider,{value:p},i.createElement(K.Provider,{children:r,value:S}))}function ge(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise((()=>{}));i.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let o=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,ve(e.props.children,o));e.type!==fe&&c(!1),e.props.index&&e.props.children&&c(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ve(e.props.children,o)),n.push(s)})),n}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ye.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Re=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],we=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];const Le=i.createContext({isTransitioning:!1});new Map;const be=r.startTransition;a.flushSync,r.useId;function Ce(e){let{basename:t,children:n,future:r,window:o}=e,s=i.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),g((function(e,t){let{pathname:n,search:i,hash:r}=e.location;return d("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,a)));let l=s.current,[u,c]=i.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},p=i.useCallback((e=>{h&&be?be((()=>c(e))):c(e)}),[c,h]);return i.useLayoutEffect((()=>l.listen(p)),[l,p]),i.createElement(me,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:r})}const _e="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ae=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee=i.forwardRef((function(e,t){let n,{onClick:r,relative:o,reloadDocument:s,replace:a,state:l,target:u,to:h,preventScrollReset:p,unstable_viewTransition:d}=e,m=Se(e,Re),{basename:g}=i.useContext(J),v=!1;if("string"===typeof h&&Ae.test(h)&&(n=h,_e))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=k(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(R){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Q()||c(!1);let{basename:r,navigator:o}=i.useContext(J),{hash:s,pathname:a,search:l}=te(e,{relative:n}),u=a;return"/"!==r&&(u="/"===a?r:U([r,a])),o.createHref({pathname:u,search:l,hash:s})}(h,{relative:o}),S=function(e,t){let{target:n,replace:r,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,u=ee(),c=Z(),h=te(e,{relative:a});return i.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:f(c)===f(h);u(e,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l})}}),[c,u,h,r,o,n,e,s,a,l])}(h,{replace:a,state:l,target:u,preventScrollReset:p,relative:o,unstable_viewTransition:d});return i.createElement("a",ye({},m,{href:n||y,onClick:v||s?r:function(e){r&&r(e),e.defaultPrevented||S(e)},ref:t,target:u}))}));const xe=i.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:o="",end:s=!1,style:a,to:l,unstable_viewTransition:u,children:h}=e,p=Se(e,we),d=te(l,{relative:p.relative}),f=Z(),m=i.useContext(V),{navigator:g,basename:v}=i.useContext(J),y=null!=m&&function(e,t){void 0===t&&(t={});let n=i.useContext(Le);null==n&&c(!1);let{basename:r}=Me(Pe.useViewTransitionState),o=te(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=k(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=k(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=T(o.pathname,a)||null!=T(o.pathname,s)}(d)&&!0===u,S=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,R=f.pathname,w=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(R=R.toLowerCase(),w=w?w.toLowerCase():null,S=S.toLowerCase()),w&&v&&(w=k(w,v)||w);const L="/"!==S&&S.endsWith("/")?S.length-1:S.length;let b,C=R===S||!s&&R.startsWith(S)&&"/"===R.charAt(L),_=null!=w&&(w===S||!s&&w.startsWith(S)&&"/"===w.charAt(S.length)),A={isActive:C,isPending:_,isTransitioning:y},E=C?n:void 0;b="function"===typeof o?o(A):[o,C?"active":null,_?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let x="function"===typeof a?a(A):a;return i.createElement(Ee,ye({},p,{"aria-current":E,className:b,ref:t,style:x,to:l,unstable_viewTransition:u}),"function"===typeof h?h(A):h)}));var Pe,Te;function Me(e){let t=i.useContext(q);return t||c(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ke.apply(this,arguments)}const Ie="160",De={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Oe={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Be=0,Ue=1,Ne=2,Fe=3,ze=0,je=1,He=2,Ge=3,We=0,qe=1,Ve=2,Je=2,Ke=0,Xe=1,Ye=2,Qe=3,Ze=4,$e=5,et=100,tt=101,nt=102,it=103,rt=104,ot=200,st=201,at=202,lt=203,ut=204,ct=205,ht=206,pt=207,dt=208,ft=209,mt=210,gt=211,vt=212,yt=213,St=214,Rt=0,wt=1,Lt=2,bt=3,Ct=4,_t=5,At=6,Et=7,xt=0,Pt=1,Tt=2,Mt=0,kt=1,It=2,Dt=3,Ot=4,Bt=5,Ut=6,Nt="attached",Ft="detached",zt=300,jt=301,Ht=302,Gt=303,Wt=304,qt=306,Vt=1e3,Jt=1001,Kt=1002,Xt=1003,Yt=1004,Qt=1004,Zt=1005,$t=1005,en=1006,tn=1007,nn=1007,rn=1008,on=1008,sn=1009,an=1010,ln=1011,un=1012,cn=1013,hn=1014,pn=1015,dn=1016,fn=1017,mn=1018,gn=1020,vn=1021,yn=1023,Sn=1024,Rn=1025,wn=1026,Ln=1027,bn=1028,Cn=1029,_n=1030,An=1031,En=1033,xn=33776,Pn=33777,Tn=33778,Mn=33779,kn=35840,In=35841,Dn=35842,On=35843,Bn=36196,Un=37492,Nn=37496,Fn=37808,zn=37809,jn=37810,Hn=37811,Gn=37812,Wn=37813,qn=37814,Vn=37815,Jn=37816,Kn=37817,Xn=37818,Yn=37819,Qn=37820,Zn=37821,$n=36492,ei=36494,ti=36495,ni=36283,ii=36284,ri=36285,oi=36286,si=2200,ai=2201,li=2202,ui=2300,ci=2301,hi=2302,pi=2400,di=2401,fi=2402,mi=2500,gi=2501,vi=0,yi=1,Si=2,Ri=3e3,wi=3001,Li=3200,bi=3201,Ci=0,_i=1,Ai="",Ei="srgb",xi="srgb-linear",Pi="display-p3",Ti="display-p3-linear",Mi="linear",ki="srgb",Ii="rec709",Di="p3",Oi=0,Bi=7680,Ui=7681,Ni=7682,Fi=7683,zi=34055,ji=34056,Hi=5386,Gi=512,Wi=513,qi=514,Vi=515,Ji=516,Ki=517,Xi=518,Yi=519,Qi=512,Zi=513,$i=514,er=515,tr=516,nr=517,ir=518,rr=519,or=35044,sr=35048,ar=35040,lr=35045,ur=35049,cr=35041,hr=35046,pr=35050,dr=35042,fr="100",mr="300 es",gr=1035,vr=2e3,yr=2001;class Sr{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const Rr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let wr=1234567;const Lr=Math.PI/180,br=180/Math.PI;function Cr(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Rr[255&e]+Rr[e>>8&255]+Rr[e>>16&255]+Rr[e>>24&255]+"-"+Rr[255&t]+Rr[t>>8&255]+"-"+Rr[t>>16&15|64]+Rr[t>>24&255]+"-"+Rr[63&n|128]+Rr[n>>8&255]+"-"+Rr[n>>16&255]+Rr[n>>24&255]+Rr[255&i]+Rr[i>>8&255]+Rr[i>>16&255]+Rr[i>>24&255]).toLowerCase()}function _r(e,t,n){return Math.max(t,Math.min(n,e))}function Ar(e,t){return(e%t+t)%t}function Er(e,t,n){return(1-n)*e+n*t}function xr(e){return 0===(e&e-1)&&0!==e}function Pr(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Tr(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Mr(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const kr={DEG2RAD:Lr,RAD2DEG:br,generateUUID:Cr,clamp:_r,euclideanModulo:Ar,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Er,damp:function(e,t,n,i){return Er(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Ar(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(wr=e);let t=wr+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Lr},radToDeg:function(e){return e*br},isPowerOfTwo:xr,ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:Pr,setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),u=o((t+i)/2),c=s((t+i)/2),h=o((t-i)/2),p=s((t-i)/2),d=o((i-t)/2),f=s((i-t)/2);switch(r){case"XYX":e.set(a*c,l*h,l*p,a*u);break;case"YZY":e.set(l*p,a*c,l*h,a*u);break;case"ZXZ":e.set(l*h,l*p,a*c,a*u);break;case"XZX":e.set(a*c,l*f,l*d,a*u);break;case"YXY":e.set(l*d,a*c,l*f,a*u);break;case"ZYZ":e.set(l*f,l*d,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Mr,denormalize:Tr};class Ir{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Ir.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(_r(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*i+e.x,this.y=r*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Dr{constructor(e,t,n,i,r,o,s,a,l){Dr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,s,a,l)}set(e,t,n,i,r,o,s,a,l){const u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=t,u[4]=r,u[5]=a,u[6]=n,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],u=n[4],c=n[7],h=n[2],p=n[5],d=n[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],S=i[7],R=i[2],w=i[5],L=i[8];return r[0]=o*f+s*v+a*R,r[3]=o*m+s*y+a*w,r[6]=o*g+s*S+a*L,r[1]=l*f+u*v+c*R,r[4]=l*m+u*y+c*w,r[7]=l*g+u*S+c*L,r[2]=h*f+p*v+d*R,r[5]=h*m+p*y+d*w,r[8]=h*g+p*S+d*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8];return t*o*u-t*s*l-n*r*u+n*s*a+i*r*l-i*o*a}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=u*o-s*l,h=s*a-u*r,p=l*r-o*a,d=t*c+n*h+i*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const f=1/d;return e[0]=c*f,e[1]=(i*l-u*n)*f,e[2]=(s*n-i*o)*f,e[3]=h*f,e[4]=(u*t-i*a)*f,e[5]=(i*r-s*t)*f,e[6]=p*f,e[7]=(n*a-l*t)*f,e[8]=(o*t-n*r)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,o,s){const a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-i*l,i*a,-i*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(Or.makeScale(e,t)),this}rotate(e){return this.premultiply(Or.makeRotation(-e)),this}translate(e,t){return this.premultiply(Or.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Or=new Dr;function Br(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Ur={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Nr(e,t){return new Ur[e](t)}function Fr(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function zr(){const e=Fr("canvas");return e.style.display="block",e}const jr={};function Hr(e){e in jr||(jr[e]=!0,console.warn(e))}const Gr=(new Dr).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Wr=(new Dr).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),qr={[xi]:{transfer:Mi,primaries:Ii,toReference:e=>e,fromReference:e=>e},[Ei]:{transfer:ki,primaries:Ii,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[Ti]:{transfer:Mi,primaries:Di,toReference:e=>e.applyMatrix3(Wr),fromReference:e=>e.applyMatrix3(Gr)},[Pi]:{transfer:ki,primaries:Di,toReference:e=>e.convertSRGBToLinear().applyMatrix3(Wr),fromReference:e=>e.applyMatrix3(Gr).convertLinearToSRGB()}},Vr=new Set([xi,Ti]),Jr={enabled:!0,_workingColorSpace:xi,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Vr.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=qr[t].toReference;return(0,qr[n].fromReference)(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return qr[e].primaries},getTransfer:function(e){return e===Ai?Mi:qr[e].transfer}};function Kr(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Xr(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Yr;class Qr{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Yr&&(Yr=Fr("canvas")),Yr.width=e.width,Yr.height=e.height;const n=Yr.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Yr}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Fr("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*Kr(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Kr(t[e]/255)):t[e]=Kr(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Zr=0;class $r{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:Zr++}),this.uuid=Cr(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(eo(i[t].image)):e.push(eo(i[t]))}else e=eo(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function eo(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?Qr.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let to=0;class no extends Sr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:no.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:no.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jt,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jt,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:en,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rn,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yn,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:sn,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:no.DEFAULT_ANISOTROPY,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ai;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:to++}),this.uuid=Cr(),this.name="",this.source=new $r(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new Ir(0,0),this.repeat=new Ir(1,1),this.center=new Ir(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Dr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof u?this.colorSpace=u:(Hr("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===wi?Ei:Ai),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==zt)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Vt:e.x=e.x-Math.floor(e.x);break;case Jt:e.x=e.x<0?0:1;break;case Kt:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Vt:e.y=e.y-Math.floor(e.y);break;case Jt:e.y=e.y<0?0:1;break;case Kt:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Hr("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Ei?wi:Ri}set encoding(e){Hr("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===wi?Ei:Ai}}no.DEFAULT_IMAGE=null,no.DEFAULT_MAPPING=zt,no.DEFAULT_ANISOTROPY=1;class io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;io.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const o=.01,s=.1,a=e.elements,l=a[0],u=a[4],c=a[8],h=a[1],p=a[5],d=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(u-h)<o&&Math.abs(c-f)<o&&Math.abs(d-m)<o){if(Math.abs(u+h)<s&&Math.abs(c+f)<s&&Math.abs(d+m)<s&&Math.abs(l+p+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(p+1)/2,v=(g+1)/2,y=(u+h)/4,S=(c+f)/4,R=(d+m)/4;return e>a&&e>v?e<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=S/n):a>v?a<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=y/i,r=R/i):v<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=S/r,i=R/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-d)*(m-d)+(c-f)*(c-f)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(m-d)/v,this.y=(c-f)/v,this.z=(h-u)/v,this.w=Math.acos((l+p+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ro extends Sr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new io(0,0,e,t),this.scissorTest=!1,this.viewport=new io(0,0,e,t);const i={width:e,height:t,depth:1};void 0!==n.encoding&&(Hr("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===wi?Ei:Ai),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:en,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new no(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new $r(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class oo extends ro{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class so extends no{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Xt,this.minFilter=Xt,this.wrapR=Jt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ao extends oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new so(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class lo extends no{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Xt,this.minFilter=Xt,this.wrapR=Jt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class uo extends oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new lo(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class co extends oo{constructor(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLMultipleRenderTargets=!0;const t=this.texture;this.texture=[];for(let n=0;n<e;n++)this.texture[n]=t.clone(),this.texture[n].isRenderTargetTexture=!0}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ho{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,o,s){let a=n[i+0],l=n[i+1],u=n[i+2],c=n[i+3];const h=r[o+0],p=r[o+1],d=r[o+2],f=r[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===s)return e[t+0]=h,e[t+1]=p,e[t+2]=d,void(e[t+3]=f);if(c!==f||a!==h||l!==p||u!==d){let e=1-s;const t=a*h+l*p+u*d+c*f,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,t*n);e=Math.sin(e*o)/r,s=Math.sin(s*o)/r}const r=s*n;if(a=a*e+h*r,l=l*e+p*r,u=u*e+d*r,c=c*e+f*r,e===1-s){const e=1/Math.sqrt(a*a+l*l+u*u+c*c);a*=e,l*=e,u*=e,c*=e}}e[t]=a,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,i,r,o){const s=n[i],a=n[i+1],l=n[i+2],u=n[i+3],c=r[o],h=r[o+1],p=r[o+2],d=r[o+3];return e[t]=s*d+u*c+a*p-l*h,e[t+1]=a*d+u*h+l*c-s*p,e[t+2]=l*d+u*p+s*h-a*c,e[t+3]=u*d-s*c-a*h-l*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,i=e._y,r=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),u=s(i/2),c=s(r/2),h=a(n/2),p=a(i/2),d=a(r/2);switch(o){case"XYZ":this._x=h*u*c+l*p*d,this._y=l*p*c-h*u*d,this._z=l*u*d+h*p*c,this._w=l*u*c-h*p*d;break;case"YXZ":this._x=h*u*c+l*p*d,this._y=l*p*c-h*u*d,this._z=l*u*d-h*p*c,this._w=l*u*c+h*p*d;break;case"ZXY":this._x=h*u*c-l*p*d,this._y=l*p*c+h*u*d,this._z=l*u*d+h*p*c,this._w=l*u*c-h*p*d;break;case"ZYX":this._x=h*u*c-l*p*d,this._y=l*p*c+h*u*d,this._z=l*u*d-h*p*c,this._w=l*u*c+h*p*d;break;case"YZX":this._x=h*u*c+l*p*d,this._y=l*p*c+h*u*d,this._z=l*u*d-h*p*c,this._w=l*u*c-h*p*d;break;case"XZY":this._x=h*u*c-l*p*d,this._y=l*p*c-h*u*d,this._z=l*u*d+h*p*c,this._w=l*u*c+h*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],o=t[1],s=t[5],a=t[9],l=t[2],u=t[6],c=t[10],h=n+s+c;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(u-a)*e,this._y=(r-l)*e,this._z=(o-i)*e}else if(n>s&&n>c){const e=2*Math.sqrt(1+n-s-c);this._w=(u-a)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(r+l)/e}else if(s>c){const e=2*Math.sqrt(1+s-n-c);this._w=(r-l)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(a+u)/e}else{const e=2*Math.sqrt(1+c-n-s);this._w=(o-i)/e,this._x=(r+l)/e,this._y=(a+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_r(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,o=e._w,s=t._x,a=t._y,l=t._z,u=t._w;return this._x=n*u+o*s+i*l-r*a,this._y=i*u+o*a+r*s-n*l,this._z=r*u+o*l+n*a-i*s,this._w=o*u-n*s-i*a-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,o=this._w;let s=o*e._w+n*e._x+i*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}const l=Math.sqrt(a),u=Math.atan2(l,s),c=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=o*c+this._w*h,this._x=n*c+this._x*h,this._y=i*c+this._y*h,this._z=r*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class po{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;po.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mo.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mo.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,o=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,o=e.y,s=e.z,a=e.w,l=2*(o*i-s*n),u=2*(s*t-r*i),c=2*(r*n-o*t);return this.x=t+a*l+o*c-s*u,this.y=n+a*u+s*l-r*c,this.z=i+a*c+r*u-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,o=t.x,s=t.y,a=t.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return fo.copy(this).projectOnVector(e),this.sub(fo)}reflect(e){return this.sub(fo.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(_r(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fo=new po,mo=new ho;class go{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(yo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(yo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=yo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,n=i.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,yo):yo.fromBufferAttribute(i,t),yo.applyMatrix4(e.matrixWorld),this.expandByPoint(yo);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),So.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),So.copy(n.boundingBox)),So.applyMatrix4(e.matrixWorld),this.union(So)}const i=e.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,yo),yo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ao),Eo.subVectors(this.max,Ao),Ro.subVectors(e.a,Ao),wo.subVectors(e.b,Ao),Lo.subVectors(e.c,Ao),bo.subVectors(wo,Ro),Co.subVectors(Lo,wo),_o.subVectors(Ro,Lo);let t=[0,-bo.z,bo.y,0,-Co.z,Co.y,0,-_o.z,_o.y,bo.z,0,-bo.x,Co.z,0,-Co.x,_o.z,0,-_o.x,-bo.y,bo.x,0,-Co.y,Co.x,0,-_o.y,_o.x,0];return!!To(t,Ro,wo,Lo,Eo)&&(t=[1,0,0,0,1,0,0,0,1],!!To(t,Ro,wo,Lo,Eo)&&(xo.crossVectors(bo,Co),t=[xo.x,xo.y,xo.z],To(t,Ro,wo,Lo,Eo)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(yo).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(vo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const vo=[new po,new po,new po,new po,new po,new po,new po,new po],yo=new po,So=new go,Ro=new po,wo=new po,Lo=new po,bo=new po,Co=new po,_o=new po,Ao=new po,Eo=new po,xo=new po,Po=new po;function To(e,t,n,i,r){for(let o=0,s=e.length-3;o<=s;o+=3){Po.fromArray(e,o);const s=r.x*Math.abs(Po.x)+r.y*Math.abs(Po.y)+r.z*Math.abs(Po.z),a=t.dot(Po),l=n.dot(Po),u=i.dot(Po);if(Math.max(-Math.max(a,l,u),Math.min(a,l,u))>s)return!1}return!0}const Mo=new go,ko=new po,Io=new po;class Do{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Mo.setFromPoints(e).getCenter(n);let i=0;for(let r=0,o=e.length;r<o;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ko.subVectors(e,this.center);const t=ko.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(ko,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Io.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ko.copy(e.center).add(Io)),this.expandByPoint(ko.copy(e.center).sub(Io))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Oo=new po,Bo=new po,Uo=new po,No=new po,Fo=new po,zo=new po,jo=new po;class Ho{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Oo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Oo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Oo.copy(this.origin).addScaledVector(this.direction,t),Oo.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Bo.copy(e).add(t).multiplyScalar(.5),Uo.copy(t).sub(e).normalize(),No.copy(this.origin).sub(Bo);const r=.5*e.distanceTo(t),o=-this.direction.dot(Uo),s=No.dot(this.direction),a=-No.dot(Uo),l=No.lengthSq(),u=Math.abs(1-o*o);let c,h,p,d;if(u>0)if(c=o*a-s,h=o*s-a,d=r*u,c>=0)if(h>=-d)if(h<=d){const e=1/u;c*=e,h*=e,p=c*(c+o*h+2*s)+h*(o*c+h+2*a)+l}else h=r,c=Math.max(0,-(o*h+s)),p=-c*c+h*(h+2*a)+l;else h=-r,c=Math.max(0,-(o*h+s)),p=-c*c+h*(h+2*a)+l;else h<=-d?(c=Math.max(0,-(-o*r+s)),h=c>0?-r:Math.min(Math.max(-r,-a),r),p=-c*c+h*(h+2*a)+l):h<=d?(c=0,h=Math.min(Math.max(-r,-a),r),p=h*(h+2*a)+l):(c=Math.max(0,-(o*r+s)),h=c>0?r:Math.min(Math.max(-r,-a),r),p=-c*c+h*(h+2*a)+l);else h=o>0?-r:r,c=Math.max(0,-(o*h+s)),p=-c*c+h*(h+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),i&&i.copy(Bo).addScaledVector(Uo,h),p}intersectSphere(e,t){Oo.subVectors(e.center,this.origin);const n=Oo.dot(this.direction),i=Oo.dot(Oo)-n*n,r=e.radius*e.radius;if(i>r)return null;const o=Math.sqrt(r-i),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,o,s,a;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(r=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||r>i?null:((r>n||isNaN(n))&&(n=r),(o<i||isNaN(i))&&(i=o),c>=0?(s=(e.min.z-h.z)*c,a=(e.max.z-h.z)*c):(s=(e.max.z-h.z)*c,a=(e.min.z-h.z)*c),n>a||s>i?null:((s>n||n!==n)&&(n=s),(a<i||i!==i)&&(i=a),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,Oo)}intersectTriangle(e,t,n,i,r){Fo.subVectors(t,e),zo.subVectors(n,e),jo.crossVectors(Fo,zo);let o,s=this.direction.dot(jo);if(s>0){if(i)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}No.subVectors(this.origin,e);const a=o*this.direction.dot(zo.crossVectors(No,zo));if(a<0)return null;const l=o*this.direction.dot(Fo.cross(No));if(l<0)return null;if(a+l>s)return null;const u=-o*No.dot(jo);return u<0?null:this.at(u/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Go{constructor(e,t,n,i,r,o,s,a,l,u,c,h,p,d,f,m){Go.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,i,r,o,s,a,l,u,c,h,p,d,f,m)}set(e,t,n,i,r,o,s,a,l,u,c,h,p,d,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Go).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Wo.setFromMatrixColumn(e,0).length(),r=1/Wo.setFromMatrixColumn(e,1).length(),o=1/Wo.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),l=Math.sin(i),u=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){const e=o*u,n=o*c,i=s*u,r=s*c;t[0]=a*u,t[4]=-a*c,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-s*a,t[2]=r-e*l,t[6]=i+n*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*u,n=a*c,i=l*u,r=l*c;t[0]=e+r*s,t[4]=i*s-n,t[8]=o*l,t[1]=o*c,t[5]=o*u,t[9]=-s,t[2]=n*s-i,t[6]=r+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*u,n=a*c,i=l*u,r=l*c;t[0]=e-r*s,t[4]=-o*c,t[8]=i+n*s,t[1]=n+i*s,t[5]=o*u,t[9]=r-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*u,n=o*c,i=s*u,r=s*c;t[0]=a*u,t[4]=i*l-n,t[8]=e*l+r,t[1]=a*c,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*u,t[4]=r-e*c,t[8]=i*c+n,t[1]=c,t[5]=o*u,t[9]=-s*u,t[2]=-l*u,t[6]=n*c+i,t[10]=e-r*c}else if("XZY"===e.order){const e=o*a,n=o*l,i=s*a,r=s*l;t[0]=a*u,t[4]=-c,t[8]=l*u,t[1]=e*c+r,t[5]=o*u,t[9]=n*c-i,t[2]=i*c-n,t[6]=s*u,t[10]=r*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Vo,e,Jo)}lookAt(e,t,n){const i=this.elements;return Yo.subVectors(e,t),0===Yo.lengthSq()&&(Yo.z=1),Yo.normalize(),Ko.crossVectors(n,Yo),0===Ko.lengthSq()&&(1===Math.abs(n.z)?Yo.x+=1e-4:Yo.z+=1e-4,Yo.normalize(),Ko.crossVectors(n,Yo)),Ko.normalize(),Xo.crossVectors(Yo,Ko),i[0]=Ko.x,i[4]=Xo.x,i[8]=Yo.x,i[1]=Ko.y,i[5]=Xo.y,i[9]=Yo.y,i[2]=Ko.z,i[6]=Xo.z,i[10]=Yo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],u=n[1],c=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],S=n[11],R=n[15],w=i[0],L=i[4],b=i[8],C=i[12],_=i[1],A=i[5],E=i[9],x=i[13],P=i[2],T=i[6],M=i[10],k=i[14],I=i[3],D=i[7],O=i[11],B=i[15];return r[0]=o*w+s*_+a*P+l*I,r[4]=o*L+s*A+a*T+l*D,r[8]=o*b+s*E+a*M+l*O,r[12]=o*C+s*x+a*k+l*B,r[1]=u*w+c*_+h*P+p*I,r[5]=u*L+c*A+h*T+p*D,r[9]=u*b+c*E+h*M+p*O,r[13]=u*C+c*x+h*k+p*B,r[2]=d*w+f*_+m*P+g*I,r[6]=d*L+f*A+m*T+g*D,r[10]=d*b+f*E+m*M+g*O,r[14]=d*C+f*x+m*k+g*B,r[3]=v*w+y*_+S*P+R*I,r[7]=v*L+y*A+S*T+R*D,r[11]=v*b+y*E+S*M+R*O,r[15]=v*C+y*x+S*k+R*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],o=e[1],s=e[5],a=e[9],l=e[13],u=e[2],c=e[6],h=e[10],p=e[14];return e[3]*(+r*a*c-i*l*c-r*s*h+n*l*h+i*s*p-n*a*p)+e[7]*(+t*a*p-t*l*h+r*o*h-i*o*p+i*l*u-r*a*u)+e[11]*(+t*l*c-t*s*p-r*o*c+n*o*p+r*s*u-n*l*u)+e[15]*(-i*s*u-t*a*c+t*s*h+i*o*c-n*o*h+n*a*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11],d=e[12],f=e[13],m=e[14],g=e[15],v=c*m*l-f*h*l+f*a*p-s*m*p-c*a*g+s*h*g,y=d*h*l-u*m*l-d*a*p+o*m*p+u*a*g-o*h*g,S=u*f*l-d*c*l+d*s*p-o*f*p-u*s*g+o*c*g,R=d*c*a-u*f*a-d*s*h+o*f*h+u*s*m-o*c*m,w=t*v+n*y+i*S+r*R;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/w;return e[0]=v*L,e[1]=(f*h*r-c*m*r-f*i*p+n*m*p+c*i*g-n*h*g)*L,e[2]=(s*m*r-f*a*r+f*i*l-n*m*l-s*i*g+n*a*g)*L,e[3]=(c*a*r-s*h*r-c*i*l+n*h*l+s*i*p-n*a*p)*L,e[4]=y*L,e[5]=(u*m*r-d*h*r+d*i*p-t*m*p-u*i*g+t*h*g)*L,e[6]=(d*a*r-o*m*r-d*i*l+t*m*l+o*i*g-t*a*g)*L,e[7]=(o*h*r-u*a*r+u*i*l-t*h*l-o*i*p+t*a*p)*L,e[8]=S*L,e[9]=(d*c*r-u*f*r-d*n*p+t*f*p+u*n*g-t*c*g)*L,e[10]=(o*f*r-d*s*r+d*n*l-t*f*l-o*n*g+t*s*g)*L,e[11]=(u*s*r-o*c*r-u*n*l+t*c*l+o*n*p-t*s*p)*L,e[12]=R*L,e[13]=(u*f*i-d*c*i+d*n*h-t*f*h-u*n*m+t*c*m)*L,e[14]=(d*s*i-o*f*i-d*n*a+t*f*a+o*n*m-t*s*m)*L,e[15]=(o*c*i-u*s*i+u*n*a-t*c*a-o*n*h+t*s*h)*L,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,o=e.x,s=e.y,a=e.z,l=r*o,u=r*s;return this.set(l*o+n,l*s-i*a,l*a+i*s,0,l*s+i*a,u*s+n,u*a-i*o,0,l*a-i*s,u*a+i*o,r*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,o){return this.set(1,n,r,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,o=t._y,s=t._z,a=t._w,l=r+r,u=o+o,c=s+s,h=r*l,p=r*u,d=r*c,f=o*u,m=o*c,g=s*c,v=a*l,y=a*u,S=a*c,R=n.x,w=n.y,L=n.z;return i[0]=(1-(f+g))*R,i[1]=(p+S)*R,i[2]=(d-y)*R,i[3]=0,i[4]=(p-S)*w,i[5]=(1-(h+g))*w,i[6]=(m+v)*w,i[7]=0,i[8]=(d+y)*L,i[9]=(m-v)*L,i[10]=(1-(h+f))*L,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=Wo.set(i[0],i[1],i[2]).length();const o=Wo.set(i[4],i[5],i[6]).length(),s=Wo.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],qo.copy(this);const a=1/r,l=1/o,u=1/s;return qo.elements[0]*=a,qo.elements[1]*=a,qo.elements[2]*=a,qo.elements[4]*=l,qo.elements[5]*=l,qo.elements[6]*=l,qo.elements[8]*=u,qo.elements[9]*=u,qo.elements[10]*=u,t.setFromRotationMatrix(qo),n.x=r,n.y=o,n.z=s,this}makePerspective(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vr;const a=this.elements,l=2*r/(t-e),u=2*r/(n-i),c=(t+e)/(t-e),h=(n+i)/(n-i);let p,d;if(s===vr)p=-(o+r)/(o-r),d=-2*o*r/(o-r);else{if(s!==yr)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);p=-o/(o-r),d=-o*r/(o-r)}return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vr;const a=this.elements,l=1/(t-e),u=1/(n-i),c=1/(o-r),h=(t+e)*l,p=(n+i)*u;let d,f;if(s===vr)d=(o+r)*c,f=-2*c;else{if(s!==yr)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);d=r*c,f=-1*c}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=f,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Wo=new po,qo=new Go,Vo=new po(0,0,0),Jo=new po(1,1,1),Ko=new po,Xo=new po,Yo=new po,Qo=new Go,Zo=new ho;class $o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$o.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],o=i[4],s=i[8],a=i[1],l=i[5],u=i[9],c=i[2],h=i[6],p=i[10];switch(t){case"XYZ":this._y=Math.asin(_r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-_r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(_r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-_r(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(_r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-_r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Qo.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Qo,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return Zo.setFromEuler(this),this.setFromQuaternion(Zo,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}$o.DEFAULT_ORDER="XYZ";class es{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&(1<<e|0))}}let ts=0;const ns=new po,is=new ho,rs=new Go,os=new po,ss=new po,as=new po,ls=new ho,us=new po(1,0,0),cs=new po(0,1,0),hs=new po(0,0,1),ps={type:"added"},ds={type:"removed"};class fs extends Sr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ts++}),this.uuid=Cr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fs.DEFAULT_UP.clone();const e=new po,t=new $o,n=new ho,i=new po(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Go},normalMatrix:{value:new Dr}}),this.matrix=new Go,this.matrixWorld=new Go,this.matrixAutoUpdate=fs.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new es,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return is.setFromAxisAngle(e,t),this.quaternion.multiply(is),this}rotateOnWorldAxis(e,t){return is.setFromAxisAngle(e,t),this.quaternion.premultiply(is),this}rotateX(e){return this.rotateOnAxis(us,e)}rotateY(e){return this.rotateOnAxis(cs,e)}rotateZ(e){return this.rotateOnAxis(hs,e)}translateOnAxis(e,t){return ns.copy(e).applyQuaternion(this.quaternion),this.position.add(ns.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(us,e)}translateY(e){return this.translateOnAxis(cs,e)}translateZ(e){return this.translateOnAxis(hs,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(rs.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?os.copy(e):os.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),ss.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?rs.lookAt(ss,os,this.up):rs.lookAt(os,ss,this.up),this.quaternion.setFromRotationMatrix(rs),i&&(rs.extractRotation(i.matrixWorld),is.setFromRotationMatrix(rs),this.quaternion.premultiply(is.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(ps)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ds)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),rs.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),rs.multiply(e.parent.matrixWorld)),e.applyMatrix4(rs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ss,e,as),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ss,ls,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),null!==this.boundingBox&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=o(e.geometries),i=o(e.materials),r=o(e.textures),s=o(e.images),a=o(e.shapes),l=o(e.skeletons),u=o(e.animations),c=o(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=i,n;function o(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}fs.DEFAULT_UP=new po(0,1,0),fs.DEFAULT_MATRIX_AUTO_UPDATE=!0,fs.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ms=new po,gs=new po,vs=new po,ys=new po,Ss=new po,Rs=new po,ws=new po,Ls=new po,bs=new po,Cs=new po;let _s=!1;class As{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new po;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),ms.subVectors(e,t),i.cross(ms);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){ms.subVectors(i,t),gs.subVectors(n,t),vs.subVectors(e,t);const o=ms.dot(ms),s=ms.dot(gs),a=ms.dot(vs),l=gs.dot(gs),u=gs.dot(vs),c=o*l-s*s;if(0===c)return r.set(0,0,0),null;const h=1/c,p=(l*a-s*u)*h,d=(o*u-s*a)*h;return r.set(1-p-d,d,p)}static containsPoint(e,t,n,i){return null!==this.getBarycoord(e,t,n,i,ys)&&(ys.x>=0&&ys.y>=0&&ys.x+ys.y<=1)}static getUV(e,t,n,i,r,o,s,a){return!1===_s&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),_s=!0),this.getInterpolation(e,t,n,i,r,o,s,a)}static getInterpolation(e,t,n,i,r,o,s,a){return null===this.getBarycoord(e,t,n,i,ys)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(r,ys.x),a.addScaledVector(o,ys.y),a.addScaledVector(s,ys.z),a)}static isFrontFacing(e,t,n,i){return ms.subVectors(n,t),gs.subVectors(e,t),ms.cross(gs).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ms.subVectors(this.c,this.b),gs.subVectors(this.a,this.b),.5*ms.cross(gs).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return As.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return As.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return!1===_s&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),_s=!0),As.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}getInterpolation(e,t,n,i,r){return As.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return As.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return As.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let o,s;Ss.subVectors(i,n),Rs.subVectors(r,n),Ls.subVectors(e,n);const a=Ss.dot(Ls),l=Rs.dot(Ls);if(a<=0&&l<=0)return t.copy(n);bs.subVectors(e,i);const u=Ss.dot(bs),c=Rs.dot(bs);if(u>=0&&c<=u)return t.copy(i);const h=a*c-u*l;if(h<=0&&a>=0&&u<=0)return o=a/(a-u),t.copy(n).addScaledVector(Ss,o);Cs.subVectors(e,r);const p=Ss.dot(Cs),d=Rs.dot(Cs);if(d>=0&&p<=d)return t.copy(r);const f=p*l-a*d;if(f<=0&&l>=0&&d<=0)return s=l/(l-d),t.copy(n).addScaledVector(Rs,s);const m=u*d-p*c;if(m<=0&&c-u>=0&&p-d>=0)return ws.subVectors(r,i),s=(c-u)/(c-u+(p-d)),t.copy(i).addScaledVector(ws,s);const g=1/(m+f+h);return o=f*g,s=h*g,t.copy(n).addScaledVector(Ss,o).addScaledVector(Rs,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Es={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xs={h:0,s:0,l:0},Ps={h:0,s:0,l:0};function Ts(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Ms{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Jr.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jr.workingColorSpace;return this.r=e,this.g=t,this.b=n,Jr.toWorkingColorSpace(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jr.workingColorSpace;if(e=Ar(e,1),t=_r(t,0,1),n=_r(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=Ts(r,i,e+1/3),this.g=Ts(r,i,e),this.b=Ts(r,i,e-1/3)}return Jr.toWorkingColorSpace(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=t[1],s=t[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,n);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,n);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,n);if(6===r)return this.setHex(parseInt(i,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei;const n=Es[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Kr(e.r),this.g=Kr(e.g),this.b=Kr(e.b),this}copyLinearToSRGB(e){return this.r=Xr(e.r),this.g=Xr(e.g),this.b=Xr(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei;return Jr.fromWorkingColorSpace(ks.copy(this),e),65536*Math.round(_r(255*ks.r,0,255))+256*Math.round(_r(255*ks.g,0,255))+Math.round(_r(255*ks.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jr.workingColorSpace;Jr.fromWorkingColorSpace(ks.copy(this),t);const n=ks.r,i=ks.g,r=ks.b,o=Math.max(n,i,r),s=Math.min(n,i,r);let a,l;const u=(s+o)/2;if(s===o)a=0,l=0;else{const e=o-s;switch(l=u<=.5?e/(o+s):e/(2-o-s),o){case n:a=(i-r)/e+(i<r?6:0);break;case i:a=(r-n)/e+2;break;case r:a=(n-i)/e+4}a/=6}return e.h=a,e.s=l,e.l=u,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jr.workingColorSpace;return Jr.fromWorkingColorSpace(ks.copy(this),t),e.r=ks.r,e.g=ks.g,e.b=ks.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei;Jr.fromWorkingColorSpace(ks.copy(this),e);const t=ks.r,n=ks.g,i=ks.b;return e!==Ei?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*i),")")}offsetHSL(e,t,n){return this.getHSL(xs),this.setHSL(xs.h+e,xs.s+t,xs.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(xs),e.getHSL(Ps);const n=Er(xs.h,Ps.h,t),i=Er(xs.s,Ps.s,t),r=Er(xs.l,Ps.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ks=new Ms;Ms.NAMES=Es;let Is=0;class Ds extends Sr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Is++}),this.uuid=Cr(),this.name="",this.type="Material",this.blending=Xe,this.side=We,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ut,this.blendDst=ct,this.blendEquation=et,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ms(0,0,0),this.blendAlpha=0,this.depthFunc=bt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Yi,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bi,this.stencilZFail=Bi,this.stencilZPass=Bi,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Xe&&(n.blending=this.blending),this.side!==We&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==ut&&(n.blendSrc=this.blendSrc),this.blendDst!==ct&&(n.blendDst=this.blendDst),this.blendEquation!==et&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==bt&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Yi&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bi&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Bi&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Bi&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Os extends Ds{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ms(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=xt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Bs=Us();function Us(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,o[l]=e|t}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(a[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:o,exponentTable:s,offsetTable:a}}function Ns(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=_r(e,-65504,65504),Bs.floatView[0]=e;const t=Bs.uint32View[0],n=t>>23&511;return Bs.baseTable[n]+((8388607&t)>>Bs.shiftTable[n])}function Fs(e){const t=e>>10;return Bs.uint32View[0]=Bs.mantissaTable[Bs.offsetTable[t]+(1023&e)]+Bs.exponentTable[t],Bs.floatView[0]}const zs={toHalfFloat:Ns,fromHalfFloat:Fs},js=new po,Hs=new Ir;class Gs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=or,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=pn,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Hs.fromBufferAttribute(this,t),Hs.applyMatrix3(e),this.setXY(t,Hs.x,Hs.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)js.fromBufferAttribute(this,t),js.applyMatrix3(e),this.setXYZ(t,js.x,js.y,js.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)js.fromBufferAttribute(this,t),js.applyMatrix4(e),this.setXYZ(t,js.x,js.y,js.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)js.fromBufferAttribute(this,t),js.applyNormalMatrix(e),this.setXYZ(t,js.x,js.y,js.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)js.fromBufferAttribute(this,t),js.transformDirection(e),this.setXYZ(t,js.x,js.y,js.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Tr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Mr(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Tr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Tr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Tr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Tr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Mr(t,this.array),n=Mr(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Mr(t,this.array),n=Mr(n,this.array),i=Mr(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Mr(t,this.array),n=Mr(n,this.array),i=Mr(i,this.array),r=Mr(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==or&&(e.usage=this.usage),e}}class Ws extends Gs{constructor(e,t,n){super(new Int8Array(e),t,n)}}class qs extends Gs{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Vs extends Gs{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Js extends Gs{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Ks extends Gs{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Xs extends Gs{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Ys extends Gs{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Qs extends Gs{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Fs(this.array[e*this.itemSize]);return this.normalized&&(t=Tr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Mr(t,this.array)),this.array[e*this.itemSize]=Ns(t),this}getY(e){let t=Fs(this.array[e*this.itemSize+1]);return this.normalized&&(t=Tr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Mr(t,this.array)),this.array[e*this.itemSize+1]=Ns(t),this}getZ(e){let t=Fs(this.array[e*this.itemSize+2]);return this.normalized&&(t=Tr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Mr(t,this.array)),this.array[e*this.itemSize+2]=Ns(t),this}getW(e){let t=Fs(this.array[e*this.itemSize+3]);return this.normalized&&(t=Tr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Mr(t,this.array)),this.array[e*this.itemSize+3]=Ns(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Mr(t,this.array),n=Mr(n,this.array)),this.array[e+0]=Ns(t),this.array[e+1]=Ns(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Mr(t,this.array),n=Mr(n,this.array),i=Mr(i,this.array)),this.array[e+0]=Ns(t),this.array[e+1]=Ns(n),this.array[e+2]=Ns(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Mr(t,this.array),n=Mr(n,this.array),i=Mr(i,this.array),r=Mr(r,this.array)),this.array[e+0]=Ns(t),this.array[e+1]=Ns(n),this.array[e+2]=Ns(i),this.array[e+3]=Ns(r),this}}class Zs extends Gs{constructor(e,t,n){super(new Float32Array(e),t,n)}}class $s extends Gs{constructor(e,t,n){super(new Float64Array(e),t,n)}}let ea=0;const ta=new Go,na=new fs,ia=new po,ra=new go,oa=new go,sa=new po;class aa extends Sr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ea++}),this.uuid=Cr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Br(e)?Ys:Ks)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Dr).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ta.makeRotationFromQuaternion(e),this.applyMatrix4(ta),this}rotateX(e){return ta.makeRotationX(e),this.applyMatrix4(ta),this}rotateY(e){return ta.makeRotationY(e),this.applyMatrix4(ta),this}rotateZ(e){return ta.makeRotationZ(e),this.applyMatrix4(ta),this}translate(e,t,n){return ta.makeTranslation(e,t,n),this.applyMatrix4(ta),this}scale(e,t,n){return ta.makeScale(e,t,n),this.applyMatrix4(ta),this}lookAt(e){return na.lookAt(e),na.updateMatrix(),this.applyMatrix4(na.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ia).negate(),this.translate(ia.x,ia.y,ia.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Zs(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new go);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new po(-1/0,-1/0,-1/0),new po(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];ra.setFromBufferAttribute(e),this.morphTargetsRelative?(sa.addVectors(this.boundingBox.min,ra.min),this.boundingBox.expandByPoint(sa),sa.addVectors(this.boundingBox.max,ra.max),this.boundingBox.expandByPoint(sa)):(this.boundingBox.expandByPoint(ra.min),this.boundingBox.expandByPoint(ra.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Do);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new po,1/0);if(e){const n=this.boundingSphere.center;if(ra.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];oa.setFromBufferAttribute(n),this.morphTargetsRelative?(sa.addVectors(ra.min,oa.min),ra.expandByPoint(sa),sa.addVectors(ra.max,oa.max),ra.expandByPoint(sa)):(ra.expandByPoint(oa.min),ra.expandByPoint(oa.max))}ra.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)sa.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(sa));if(t)for(let r=0,o=t.length;r<o;r++){const o=t[r],s=this.morphTargetsRelative;for(let t=0,r=o.count;t<r;t++)sa.fromBufferAttribute(o,t),s&&(ia.fromBufferAttribute(e,t),sa.add(ia)),i=Math.max(i,n.distanceToSquared(sa))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,o=t.uv.array,s=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Gs(new Float32Array(4*s),4));const a=this.getAttribute("tangent").array,l=[],u=[];for(let _=0;_<s;_++)l[_]=new po,u[_]=new po;const c=new po,h=new po,p=new po,d=new Ir,f=new Ir,m=new Ir,g=new po,v=new po;function y(e,t,n){c.fromArray(i,3*e),h.fromArray(i,3*t),p.fromArray(i,3*n),d.fromArray(o,2*e),f.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(c),p.sub(c),f.sub(d),m.sub(d);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(p,-f.y).multiplyScalar(r),v.copy(p).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(v),u[t].add(v),u[n].add(v))}let S=this.groups;0===S.length&&(S=[{start:0,count:n.length}]);for(let _=0,A=S.length;_<A;++_){const e=S[_],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)y(n[i+0],n[i+1],n[i+2])}const R=new po,w=new po,L=new po,b=new po;function C(e){L.fromArray(r,3*e),b.copy(L);const t=l[e];R.copy(t),R.sub(L.multiplyScalar(L.dot(t))).normalize(),w.crossVectors(b,t);const n=w.dot(u[e])<0?-1:1;a[4*e]=R.x,a[4*e+1]=R.y,a[4*e+2]=R.z,a[4*e+3]=n}for(let _=0,A=S.length;_<A;++_){const e=S[_],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)C(n[i+0]),C(n[i+1]),C(n[i+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Gs(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new po,r=new po,o=new po,s=new po,a=new po,l=new po,u=new po,c=new po;if(e)for(let h=0,p=e.count;h<p;h+=3){const p=e.getX(h+0),d=e.getX(h+1),f=e.getX(h+2);i.fromBufferAttribute(t,p),r.fromBufferAttribute(t,d),o.fromBufferAttribute(t,f),u.subVectors(o,r),c.subVectors(i,r),u.cross(c),s.fromBufferAttribute(n,p),a.fromBufferAttribute(n,d),l.fromBufferAttribute(n,f),s.add(u),a.add(u),l.add(u),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),u.subVectors(o,r),c.subVectors(i,r),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)sa.fromBufferAttribute(e,t),sa.normalize(),e.setXYZ(t,sa.x,sa.y,sa.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,o=new n.constructor(t.length*i);let s=0,a=0;for(let l=0,u=t.length;l<u;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)o[a++]=n[s++]}return new Gs(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new aa,n=this.index.array,i=this.attributes;for(const s in i){const r=e(i[s],n);t.setAttribute(s,r)}const r=this.morphAttributes;for(const s in r){const i=[],o=r[s];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);i.push(r)}t.morphAttributes[s]=i}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const e=o[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const t=n[a];e.data.attributes[a]=t.toJSON(e.data)}const i={};let r=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[a]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const la=new Go,ua=new Ho,ca=new Do,ha=new po,pa=new po,da=new po,fa=new po,ma=new po,ga=new po,va=new Ir,ya=new Ir,Sa=new Ir,Ra=new po,wa=new po,La=new po,ba=new po,Ca=new po;class _a extends fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new aa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Os;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const s=this.morphTargetInfluences;if(r&&s){ga.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=s[n],a=r[n];0!==i&&(ma.fromBufferAttribute(a,e),o?ga.addScaledVector(ma,i):ga.addScaledVector(ma.sub(t),i))}t.add(ga)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),ca.copy(n.boundingSphere),ca.applyMatrix4(r),ua.copy(e.ray).recast(e.near),!1===ca.containsPoint(ua.origin)){if(null===ua.intersectSphere(ca,ha))return;if(ua.origin.distanceToSquared(ha)>(e.far-e.near)**2)return}la.copy(r).invert(),ua.copy(e.ray).applyMatrix4(la),null!==n.boundingBox&&!1===ua.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,ua)}}_computeIntersections(e,t,n){let i;const r=this.geometry,o=this.material,s=r.index,a=r.attributes.position,l=r.attributes.uv,u=r.attributes.uv1,c=r.attributes.normal,h=r.groups,p=r.drawRange;if(null!==s)if(Array.isArray(o))for(let d=0,f=h.length;d<f;d++){const r=h[d],a=o[r.materialIndex];for(let o=Math.max(r.start,p.start),h=Math.min(s.count,Math.min(r.start+r.count,p.start+p.count));o<h;o+=3){i=Aa(this,a,e,n,l,u,c,s.getX(o),s.getX(o+1),s.getX(o+2)),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,p.start),a=Math.min(s.count,p.start+p.count);r<a;r+=3){i=Aa(this,o,e,n,l,u,c,s.getX(r),s.getX(r+1),s.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}else if(void 0!==a)if(Array.isArray(o))for(let d=0,f=h.length;d<f;d++){const r=h[d],s=o[r.materialIndex];for(let o=Math.max(r.start,p.start),h=Math.min(a.count,Math.min(r.start+r.count,p.start+p.count));o<h;o+=3){i=Aa(this,s,e,n,l,u,c,o,o+1,o+2),i&&(i.faceIndex=Math.floor(o/3),i.face.materialIndex=r.materialIndex,t.push(i))}}else{for(let r=Math.max(0,p.start),s=Math.min(a.count,p.start+p.count);r<s;r+=3){i=Aa(this,o,e,n,l,u,c,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),t.push(i))}}}}function Aa(e,t,n,i,r,o,s,a,l,u){e.getVertexPosition(a,pa),e.getVertexPosition(l,da),e.getVertexPosition(u,fa);const c=function(e,t,n,i,r,o,s,a){let l;if(l=t.side===qe?i.intersectTriangle(s,o,r,!0,a):i.intersectTriangle(r,o,s,t.side===We,a),null===l)return null;Ca.copy(a),Ca.applyMatrix4(e.matrixWorld);const u=n.ray.origin.distanceTo(Ca);return u<n.near||u>n.far?null:{distance:u,point:Ca.clone(),object:e}}(e,t,n,i,pa,da,fa,ba);if(c){r&&(va.fromBufferAttribute(r,a),ya.fromBufferAttribute(r,l),Sa.fromBufferAttribute(r,u),c.uv=As.getInterpolation(ba,pa,da,fa,va,ya,Sa,new Ir)),o&&(va.fromBufferAttribute(o,a),ya.fromBufferAttribute(o,l),Sa.fromBufferAttribute(o,u),c.uv1=As.getInterpolation(ba,pa,da,fa,va,ya,Sa,new Ir),c.uv2=c.uv1),s&&(Ra.fromBufferAttribute(s,a),wa.fromBufferAttribute(s,l),La.fromBufferAttribute(s,u),c.normal=As.getInterpolation(ba,pa,da,fa,Ra,wa,La,new po),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const e={a:a,b:l,c:u,normal:new po,materialIndex:0};As.getNormal(pa,da,fa,e.normal),c.face=e}return c}class Ea extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const s=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const a=[],l=[],u=[],c=[];let h=0,p=0;function d(e,t,n,i,r,o,d,f,m,g,v){const y=o/m,S=d/g,R=o/2,w=d/2,L=f/2,b=m+1,C=g+1;let _=0,A=0;const E=new po;for(let s=0;s<C;s++){const o=s*S-w;for(let a=0;a<b;a++){const h=a*y-R;E[e]=h*i,E[t]=o*r,E[n]=L,l.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=f>0?1:-1,u.push(E.x,E.y,E.z),c.push(a/m),c.push(1-s/g),_+=1}}for(let s=0;s<g;s++)for(let e=0;e<m;e++){const t=h+e+b*s,n=h+e+b*(s+1),i=h+(e+1)+b*(s+1),r=h+(e+1)+b*s;a.push(t,n,r),a.push(n,i,r),A+=6}s.addGroup(p,A,v),p+=A,h+=_}d("z","y","x",-1,-1,n,t,e,o,r,0),d("z","y","x",1,-1,n,t,-e,o,r,1),d("x","z","y",1,1,e,n,t,i,o,2),d("x","z","y",1,-1,e,n,-t,i,o,3),d("x","y","z",1,-1,e,t,n,i,r,4),d("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new Zs(l,3)),this.setAttribute("normal",new Zs(u,3)),this.setAttribute("uv",new Zs(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ea(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function xa(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][i]=null):t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function Pa(e){const t={};for(let n=0;n<e.length;n++){const i=xa(e[n]);for(const e in i)t[e]=i[e]}return t}function Ta(e){return null===e.getRenderTarget()?e.outputColorSpace:Jr.workingColorSpace}const Ma={clone:xa,merge:Pa};class ka extends Ds{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=xa(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Ia extends fs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Go,this.projectionMatrix=new Go,this.projectionMatrixInverse=new Go,this.coordinateSystem=vr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Da extends Ia{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*br*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Lr*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*br*Math.atan(Math.tan(.5*Lr*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Lr*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/e,t-=o.offsetY*n/s,i*=o.width/e,n*=o.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Oa=-90;class Ba extends fs{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Da(Oa,1,e,t);i.layers=this.layers,this.add(i);const r=new Da(Oa,1,e,t);r.layers=this.layers,this.add(r);const o=new Da(Oa,1,e,t);o.layers=this.layers,this.add(o);const s=new Da(Oa,1,e,t);s.layers=this.layers,this.add(s);const a=new Da(Oa,1,e,t);a.layers=this.layers,this.add(a);const l=new Da(Oa,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,o,s,a]=t;for(const l of t)this.remove(l);if(e===vr)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==yr)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,s,a,l,u]=this.children,c=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),d=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,s),e.setRenderTarget(n,3,i),e.render(t,a),e.setRenderTarget(n,4,i),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,i),e.render(t,u),e.setRenderTarget(c,h,p),e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}class Ua extends no{constructor(e,t,n,i,r,o,s,a,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:jt,n,i,r,o,s,a,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Na extends oo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];void 0!==t.encoding&&(Hr("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===wi?Ei:Ai),this.texture=new Ua(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:en}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new Ea(5,5,5),s=new ka({name:"CubemapFromEquirect",uniforms:xa(n),vertexShader:i,fragmentShader:r,side:qe,blending:Ke});s.uniforms.tEquirect.value=t;const a=new _a(o,s),l=t.minFilter;t.minFilter===rn&&(t.minFilter=en);return new Ba(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(r)}}const Fa=new po,za=new po,ja=new Dr;class Ha{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Fa.subVectors(n,t).cross(za.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Fa),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||ja.getNormalMatrix(e),i=this.coplanarPoint(Fa).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ga=new Do,Wa=new po;class qa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ha,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ha,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ha,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ha,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ha,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Ha;this.planes=[e,t,n,i,r,o]}set(e,t,n,i,r,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(i),s[4].copy(r),s[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vr;const n=this.planes,i=e.elements,r=i[0],o=i[1],s=i[2],a=i[3],l=i[4],u=i[5],c=i[6],h=i[7],p=i[8],d=i[9],f=i[10],m=i[11],g=i[12],v=i[13],y=i[14],S=i[15];if(n[0].setComponents(a-r,h-l,m-p,S-g).normalize(),n[1].setComponents(a+r,h+l,m+p,S+g).normalize(),n[2].setComponents(a+o,h+u,m+d,S+v).normalize(),n[3].setComponents(a-o,h-u,m-d,S-v).normalize(),n[4].setComponents(a-s,h-c,m-f,S-y).normalize(),t===vr)n[5].setComponents(a+s,h+c,m+f,S+y).normalize();else{if(t!==yr)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,c,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Ga.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Ga.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ga)}intersectsSprite(e){return Ga.center.set(0,0,0),Ga.radius=.7071067811865476,Ga.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ga)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Wa.x=i.normal.x>0?e.max.x:e.min.x,Wa.y=i.normal.y>0?e.max.y:e.min.y,Wa.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Wa)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Va(){let e=null,t=!1,n=null,i=null;function r(t,o){n(t,o),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Ja(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=i.get(t);if(void 0===o)i.set(t,function(t,i){const r=t.array,o=t.usage,s=r.byteLength,a=e.createBuffer();let l;if(e.bindBuffer(i,a),e.bufferData(i,r,o),t.onUploadCallback(),r instanceof Float32Array)l=e.FLOAT;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=e.HALF_FLOAT}else l=e.UNSIGNED_SHORT;else if(r instanceof Int16Array)l=e.SHORT;else if(r instanceof Uint32Array)l=e.UNSIGNED_INT;else if(r instanceof Int32Array)l=e.INT;else if(r instanceof Int8Array)l=e.BYTE;else if(r instanceof Uint8Array)l=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);l=e.UNSIGNED_BYTE}return{buffer:a,type:l,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:s}}(t,r));else if(o.version<t.version){if(o.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,i,r){const o=i.array,s=i._updateRange,a=i.updateRanges;if(e.bindBuffer(r,t),-1===s.count&&0===a.length&&e.bufferSubData(r,0,o),0!==a.length){for(let t=0,i=a.length;t<i;t++){const i=a[t];n?e.bufferSubData(r,i.start*o.BYTES_PER_ELEMENT,o,i.start,i.count):e.bufferSubData(r,i.start*o.BYTES_PER_ELEMENT,o.subarray(i.start,i.start+i.count))}i.clearUpdateRanges()}-1!==s.count&&(n?e.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):e.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),i.onUploadCallback()}(o.buffer,t,r),o.version=t.version}}}}class Ka extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,o=t/2,s=Math.floor(n),a=Math.floor(i),l=s+1,u=a+1,c=e/s,h=t/a,p=[],d=[],f=[],m=[];for(let g=0;g<u;g++){const e=g*h-o;for(let t=0;t<l;t++){const n=t*c-r;d.push(n,-e,0),f.push(0,0,1),m.push(t/s),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),i=e+1+l*(g+1),r=e+1+l*g;p.push(t,n,r),p.push(n,i,r)}this.setIndex(p),this.setAttribute("position",new Zs(d,3)),this.setAttribute("normal",new Zs(f,3)),this.setAttribute("uv",new Zs(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ka(e.width,e.height,e.widthSegments,e.heightSegments)}}const Xa={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ya={common:{diffuse:{value:new Ms(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Dr},alphaMap:{value:null},alphaMapTransform:{value:new Dr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Dr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Dr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Dr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Dr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Dr},normalScale:{value:new Ir(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Dr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Dr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Dr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Dr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ms(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ms(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Dr},alphaTest:{value:0},uvTransform:{value:new Dr}},sprite:{diffuse:{value:new Ms(16777215)},opacity:{value:1},center:{value:new Ir(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Dr},alphaMap:{value:null},alphaMapTransform:{value:new Dr},alphaTest:{value:0}}},Qa={basic:{uniforms:Pa([Ya.common,Ya.specularmap,Ya.envmap,Ya.aomap,Ya.lightmap,Ya.fog]),vertexShader:Xa.meshbasic_vert,fragmentShader:Xa.meshbasic_frag},lambert:{uniforms:Pa([Ya.common,Ya.specularmap,Ya.envmap,Ya.aomap,Ya.lightmap,Ya.emissivemap,Ya.bumpmap,Ya.normalmap,Ya.displacementmap,Ya.fog,Ya.lights,{emissive:{value:new Ms(0)}}]),vertexShader:Xa.meshlambert_vert,fragmentShader:Xa.meshlambert_frag},phong:{uniforms:Pa([Ya.common,Ya.specularmap,Ya.envmap,Ya.aomap,Ya.lightmap,Ya.emissivemap,Ya.bumpmap,Ya.normalmap,Ya.displacementmap,Ya.fog,Ya.lights,{emissive:{value:new Ms(0)},specular:{value:new Ms(1118481)},shininess:{value:30}}]),vertexShader:Xa.meshphong_vert,fragmentShader:Xa.meshphong_frag},standard:{uniforms:Pa([Ya.common,Ya.envmap,Ya.aomap,Ya.lightmap,Ya.emissivemap,Ya.bumpmap,Ya.normalmap,Ya.displacementmap,Ya.roughnessmap,Ya.metalnessmap,Ya.fog,Ya.lights,{emissive:{value:new Ms(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xa.meshphysical_vert,fragmentShader:Xa.meshphysical_frag},toon:{uniforms:Pa([Ya.common,Ya.aomap,Ya.lightmap,Ya.emissivemap,Ya.bumpmap,Ya.normalmap,Ya.displacementmap,Ya.gradientmap,Ya.fog,Ya.lights,{emissive:{value:new Ms(0)}}]),vertexShader:Xa.meshtoon_vert,fragmentShader:Xa.meshtoon_frag},matcap:{uniforms:Pa([Ya.common,Ya.bumpmap,Ya.normalmap,Ya.displacementmap,Ya.fog,{matcap:{value:null}}]),vertexShader:Xa.meshmatcap_vert,fragmentShader:Xa.meshmatcap_frag},points:{uniforms:Pa([Ya.points,Ya.fog]),vertexShader:Xa.points_vert,fragmentShader:Xa.points_frag},dashed:{uniforms:Pa([Ya.common,Ya.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xa.linedashed_vert,fragmentShader:Xa.linedashed_frag},depth:{uniforms:Pa([Ya.common,Ya.displacementmap]),vertexShader:Xa.depth_vert,fragmentShader:Xa.depth_frag},normal:{uniforms:Pa([Ya.common,Ya.bumpmap,Ya.normalmap,Ya.displacementmap,{opacity:{value:1}}]),vertexShader:Xa.meshnormal_vert,fragmentShader:Xa.meshnormal_frag},sprite:{uniforms:Pa([Ya.sprite,Ya.fog]),vertexShader:Xa.sprite_vert,fragmentShader:Xa.sprite_frag},background:{uniforms:{uvTransform:{value:new Dr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xa.background_vert,fragmentShader:Xa.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Xa.backgroundCube_vert,fragmentShader:Xa.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xa.cube_vert,fragmentShader:Xa.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xa.equirect_vert,fragmentShader:Xa.equirect_frag},distanceRGBA:{uniforms:Pa([Ya.common,Ya.displacementmap,{referencePosition:{value:new po},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xa.distanceRGBA_vert,fragmentShader:Xa.distanceRGBA_frag},shadow:{uniforms:Pa([Ya.lights,Ya.fog,{color:{value:new Ms(0)},opacity:{value:1}}]),vertexShader:Xa.shadow_vert,fragmentShader:Xa.shadow_frag}};Qa.physical={uniforms:Pa([Qa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Dr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Dr},clearcoatNormalScale:{value:new Ir(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Dr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Dr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Dr},sheen:{value:0},sheenColor:{value:new Ms(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Dr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Dr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Dr},transmissionSamplerSize:{value:new Ir},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Dr},attenuationDistance:{value:0},attenuationColor:{value:new Ms(0)},specularColor:{value:new Ms(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Dr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Dr},anisotropyVector:{value:new Ir},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Dr}}]),vertexShader:Xa.meshphysical_vert,fragmentShader:Xa.meshphysical_frag};const Za={r:0,b:0,g:0};function $a(e,t,n,i,r,o,s){const a=new Ms(0);let l,u,c=!0===o?0:1,h=null,p=0,d=null;function f(t,n){t.getRGB(Za,Ta(e)),i.buffers.color.setClear(Za.r,Za.g,Za.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.set(e),c=t,f(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,f(a,c)},render:function(o,m){let g=!1,v=!0===m.isScene?m.background:null;if(v&&v.isTexture){v=(m.backgroundBlurriness>0?n:t).get(v)}null===v?f(a,c):v&&v.isColor&&(f(v,1),g=!0);const y=e.xr.getEnvironmentBlendMode();"additive"===y?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===y&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===qt)?(void 0===u&&(u=new _a(new Ea(1,1,1),new ka({name:"BackgroundCubeMaterial",uniforms:xa(Qa.backgroundCube.uniforms),vertexShader:Qa.backgroundCube.vertexShader,fragmentShader:Qa.backgroundCube.fragmentShader,side:qe,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=v,u.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=Jr.getTransfer(v.colorSpace)!==ki,h===v&&p===v.version&&d===e.toneMapping||(u.material.needsUpdate=!0,h=v,p=v.version,d=e.toneMapping),u.layers.enableAll(),o.unshift(u,u.geometry,u.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new _a(new Ka(2,2),new ka({name:"BackgroundMaterial",uniforms:xa(Qa.background.uniforms),vertexShader:Qa.background.vertexShader,fragmentShader:Qa.background.fragmentShader,side:We,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=Jr.getTransfer(v.colorSpace)!==ki,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),h===v&&p===v.version&&d===e.toneMapping||(l.material.needsUpdate=!0,h=v,p=v.version,d=e.toneMapping),l.layers.enableAll(),o.unshift(l,l.geometry,l.material,0,0,null))}}}function el(e,t,n,i){const r=e.getParameter(e.MAX_VERTEX_ATTRIBS),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||null!==o,a={},l=d(null);let u=l,c=!1;function h(t){return i.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function p(t){return i.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],i=[];for(let o=0;o<r;o++)t[o]=0,n[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function f(){const e=u.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,r){const o=u.newAttributes,s=u.enabledAttributes,a=u.attributeDivisors;if(o[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),a[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),a[n]=r}}function v(){const t=u.newAttributes,n=u.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function y(t,n,i,r,o,s,a){!0===a?e.vertexAttribIPointer(t,n,i,o,s):e.vertexAttribPointer(t,n,i,r,o,s)}function S(){R(),c=!0,u!==l&&(u=l,h(u.object))}function R(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,p,S,R){let w=!1;if(s){const t=function(t,n,r){const s=!0===r.wireframe;let l=a[t.id];void 0===l&&(l={},a[t.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[s];void 0===c&&(c=d(i.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),u[s]=c);return c}(S,p,l);u!==t&&(u=t,h(u.object)),w=function(e,t,n,i){const r=u.attributes,o=t.attributes;let s=0;const a=n.getAttributes();for(const l in a){if(a[l].location>=0){const t=r[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return u.attributesNum!==s||u.index!==i}(r,S,p,R),w&&function(e,t,n,i){const r={},o=t.attributes;let s=0;const a=n.getAttributes();for(const l in a){if(a[l].location>=0){let t=o[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[l]=n,s++}}u.attributes=r,u.attributesNum=s,u.index=i}(r,S,p,R)}else{const e=!0===l.wireframe;u.geometry===S.id&&u.program===p.id&&u.wireframe===e||(u.geometry=S.id,u.program=p.id,u.wireframe=e,w=!0)}null!==R&&n.update(R,e.ELEMENT_ARRAY_BUFFER),(w||c)&&(c=!1,function(r,o,s,a){if(!1===i.isWebGL2&&(r.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=a.attributes,u=s.getAttributes(),c=o.defaultAttributeValues;for(const t in u){const o=u[t];if(o.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,l=s.itemSize,u=n.get(s);if(void 0===u)continue;const c=u.buffer,h=u.type,p=u.bytesPerElement,d=!0===i.isWebGL2&&(h===e.INT||h===e.UNSIGNED_INT||s.gpuType===cn);if(s.isInterleavedBufferAttribute){const n=s.data,i=n.stride,u=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<o.locationSize;e++)g(o.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<o.locationSize;e++)m(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<o.locationSize;e++)y(o.location+e,l/o.locationSize,h,t,i*p,(u+l/o.locationSize*e)*p,d)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<o.locationSize;e++)g(o.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<o.locationSize;e++)m(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<o.locationSize;e++)y(o.location+e,l/o.locationSize,h,t,l*p,l/o.locationSize*e*p,d)}}else if(void 0!==c){const n=c[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(o.location,n);break;case 3:e.vertexAttrib3fv(o.location,n);break;case 4:e.vertexAttrib4fv(o.location,n);break;default:e.vertexAttrib1fv(o.location,n)}}}}v()}(r,l,p,S),null!==R&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(R).buffer))},reset:S,resetDefaultState:R,dispose:function(){S();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)p(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function(e){if(void 0===a[e.id])return;const t=a[e.id];for(const n in t){const e=t[n];for(const t in e)p(e[t].object),delete e[t];delete t[n]}delete a[e.id]},releaseStatesOfProgram:function(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)p(i[e].object),delete i[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function tl(e,t,n,i){const r=i.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,i){e.drawArrays(o,t,i),n.update(i,o,1)},this.renderInstances=function(i,s,a){if(0===a)return;let l,u;if(r)l=e,u="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](o,i,s,a),n.update(s,o,a)},this.renderMultiDraw=function(e,i,r){if(0===r)return;const s=t.get("WEBGL_multi_draw");if(null===s)for(let t=0;t<r;t++)this.render(e[t],i[t]);else{s.multiDrawArraysWEBGL(o,e,0,i,0,r);let t=0;for(let e=0;e<r;e++)t+=i[e];n.update(t,o,1)}}}function nl(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let s=void 0!==n.precision?n.precision:"highp";const a=r(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const l=o||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,S=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:S,floatVertexTextures:y&&S,maxSamples:o?e.getParameter(e.MAX_SAMPLES):0}}function il(e){const t=this;let n=null,i=0,r=!1,o=!1;const s=new Ha,a=new Dr,l={value:null,needsUpdate:!1};function u(e,n,i,r){const o=null!==e?e.length:0;let u=null;if(0!==o){if(u=l.value,!0!==r||null===u){const t=i+4*o,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===u||u.length<t)&&(u=new Float32Array(t));for(let n=0,l=i;n!==o;++n,l+=4)s.copy(e[n]).applyMatrix4(r,a),s.normal.toArray(u,l),u[l+3]=s.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(s,a,c){const h=s.clippingPlanes,p=s.clipIntersection,d=s.clipShadows,f=e.get(s);if(!r||null===h||0===h.length||o&&!d)o?u(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=o?0:i,t=4*e;let r=f.clippingState||null;l.value=r,r=u(h,a,t,c);for(let i=0;i!==t;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=e}}}function rl(e){let t=new WeakMap;function n(e,t){return t===Gt?e.mapping=jt:t===Wt&&(e.mapping=Ht),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping;if(o===Gt||o===Wt){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const o=r.image;if(o&&o.height>0){const s=new Na(o.height/2);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class ol extends Ia{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,s=i+t,a=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const sl=[.125,.215,.35,.446,.526,.582],al=20,ll=new ol,ul=new Ms;let cl=null,hl=0,pl=0;const dl=(1+Math.sqrt(5))/2,fl=1/dl,ml=[new po(1,1,1),new po(-1,1,1),new po(1,1,-1),new po(-1,1,-1),new po(0,dl,fl),new po(0,dl,-fl),new po(fl,0,dl),new po(-fl,0,dl),new po(dl,fl,0),new po(-dl,fl,0)];class gl{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;cl=this._renderer.getRenderTarget(),hl=this._renderer.getActiveCubeFace(),pl=this._renderer.getActiveMipmapLevel(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Rl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Sl(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cl,hl,pl),e.scissorTest=!1,yl(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===jt||e.mapping===Ht?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cl=this._renderer.getRenderTarget(),hl=this._renderer.getActiveCubeFace(),pl=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:en,minFilter:en,generateMipmaps:!1,type:dn,format:yn,colorSpace:xi,depthBuffer:!1},i=vl(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=vl(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const o=e-4+1+sl.length;for(let s=0;s<o;s++){const o=Math.pow(2,r);n.push(o);let a=1/o;s>e-4?a=sl[s-e+4-1]:0===s&&(a=0),i.push(a);const l=1/(o-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],p=6,d=6,f=3,m=2,g=1,v=new Float32Array(f*d*p),y=new Float32Array(m*d*p),S=new Float32Array(g*d*p);for(let e=0;e<p;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,f*d*e),y.set(h,m*d*e);const r=[e,e,e,e,e,e];S.set(r,g*d*e)}const R=new aa;R.setAttribute("position",new Gs(v,f)),R.setAttribute("uv",new Gs(y,m)),R.setAttribute("faceIndex",new Gs(S,g)),t.push(R),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(al),r=new po(0,1,0),o=new ka({name:"SphericalGaussianBlur",defines:{n:al,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Ke,depthTest:!1,depthWrite:!1});return o}(i,e,t)}return i}_compileMaterial(e){const t=new _a(this._lodPlanes[0],e);this._renderer.compile(t,ll)}_sceneToCubeUV(e,t,n,i){const r=new Da(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,u=a.toneMapping;a.getClearColor(ul),a.toneMapping=Mt,a.autoClear=!1;const c=new Os({name:"PMREM.Background",side:qe,depthWrite:!1,depthTest:!1}),h=new _a(new Ea,c);let p=!1;const d=e.background;d?d.isColor&&(c.color.copy(d),e.background=null,p=!0):(c.color.copy(ul),p=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(r.up.set(0,o[f],0),r.lookAt(s[f],0,0)):1===t?(r.up.set(0,0,o[f]),r.lookAt(0,s[f],0)):(r.up.set(0,o[f],0),r.lookAt(0,0,s[f]));const n=this._cubeSize;yl(i,t*n,f>2?n:0,n,n),a.setRenderTarget(i),p&&a.render(h,r),a.render(e,r)}h.geometry.dispose(),h.material.dispose(),a.toneMapping=u,a.autoClear=l,e.background=d}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===jt||e.mapping===Ht;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Rl()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Sl());const r=i?this._cubemapMaterial:this._equirectMaterial,o=new _a(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const s=this._cubeSize;yl(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(o,ll)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=ml[(i-1)%ml.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",r),this._halfBlur(o,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new _a(this._lodPlanes[i],l),c=l.uniforms,h=this._sizeLods[n]-1,p=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,d=r/p,f=isFinite(r)?1+Math.floor(3*d):al;f>al&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(al));const m=[];let g=0;for(let S=0;S<al;++S){const e=S/d,t=Math.exp(-e*e/2);m.push(t),0===S?g+=t:S<f&&(g+=2*t)}for(let S=0;S<m.length;S++)m[S]=m[S]/g;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===o,s&&(c.poleAxis.value=s);const{_lodMax:v}=this;c.dTheta.value=p,c.mipInt.value=v-n;const y=this._sizeLods[i];yl(t,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),a.setRenderTarget(t),a.render(u,ll)}}function vl(e,t,n){const i=new oo(e,t,n);return i.texture.mapping=qt,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function yl(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function Sl(){return new ka({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Ke,depthTest:!1,depthWrite:!1})}function Rl(){return new ka({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Ke,depthTest:!1,depthWrite:!1})}function wl(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const o=r.mapping,s=o===Gt||o===Wt,a=o===jt||o===Ht;if(s||a){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new gl(e)),i=s?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const o=r.image;if(s&&o&&o.height>0||a&&o&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(o)){null===n&&(n=new gl(e));const o=s?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,o),r.addEventListener("dispose",i),o.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Ll(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function bl(e,t,n,i){const r={},o=new WeakMap;function s(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const n in a.attributes)t.remove(a.attributes[n]);for(const n in a.morphAttributes){const e=a.morphAttributes[n];for(let n=0,i=e.length;n<i;n++)t.remove(e[n])}a.removeEventListener("dispose",s),delete r[a.id];const l=o.get(a);l&&(t.remove(l),o.delete(a)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],i=e.index,r=e.attributes.position;let s=0;if(null!==i){const e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],o=e[t+2];n.push(i,r,r,o,o,i)}}else{if(void 0===r)return;{const e=r.array;s=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}}const a=new(Br(n)?Ys:Ks)(n,1);a.version=s;const l=o.get(e);l&&t.remove(l),o.set(e,a)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,n.memory.geometries++),t},update:function(n){const i=n.attributes;for(const o in i)t.update(i[o],e.ARRAY_BUFFER);const r=n.morphAttributes;for(const o in r){const n=r[o];for(let i=0,r=n.length;i<r;i++)t.update(n[i],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return o.get(e)}}}function Cl(e,t,n,i){const r=i.isWebGL2;let o,s,a;this.setMode=function(e){o=e},this.setIndex=function(e){s=e.type,a=e.bytesPerElement},this.render=function(t,i){e.drawElements(o,i,s,t*a),n.update(i,o,1)},this.renderInstances=function(i,l,u){if(0===u)return;let c,h;if(r)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](o,l,s,i*a,u),n.update(l,o,u)},this.renderMultiDraw=function(e,i,r){if(0===r)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<r;t++)this.render(e[t]/a,i[t]);else{l.multiDrawElementsWEBGL(o,i,0,s,e,0,r);let t=0;for(let e=0;e<r;e++)t+=i[e];n.update(t,o,1)}}}function _l(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function Al(e,t){return e[0]-t[0]}function El(e,t){return Math.abs(t[1])-Math.abs(e[1])}function xl(e,t,n){const i={},r=new Float32Array(8),o=new WeakMap,s=new io,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function(l,u,c){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,d=void 0!==p?p.length:0;let f=o.get(u);if(void 0===f||f.count!==d){void 0!==f&&f.texture.dispose();const v=void 0!==u.morphAttributes.position,y=void 0!==u.morphAttributes.normal,S=void 0!==u.morphAttributes.color,R=u.morphAttributes.position||[],w=u.morphAttributes.normal||[],L=u.morphAttributes.color||[];let b=0;!0===v&&(b=1),!0===y&&(b=2),!0===S&&(b=3);let C=u.attributes.position.count*b,_=1;C>t.maxTextureSize&&(_=Math.ceil(C/t.maxTextureSize),C=t.maxTextureSize);const A=new Float32Array(C*_*4*d),E=new so(A,C,_,d);E.type=pn,E.needsUpdate=!0;const x=4*b;for(let T=0;T<d;T++){const M=R[T],k=w[T],I=L[T],D=C*_*4*T;for(let O=0;O<M.count;O++){const B=O*x;!0===v&&(s.fromBufferAttribute(M,O),A[D+B+0]=s.x,A[D+B+1]=s.y,A[D+B+2]=s.z,A[D+B+3]=0),!0===y&&(s.fromBufferAttribute(k,O),A[D+B+4]=s.x,A[D+B+5]=s.y,A[D+B+6]=s.z,A[D+B+7]=0),!0===S&&(s.fromBufferAttribute(I,O),A[D+B+8]=s.x,A[D+B+9]=s.y,A[D+B+10]=s.z,A[D+B+11]=4===I.itemSize?s.w:1)}}function P(){E.dispose(),o.delete(u),u.removeEventListener("dispose",P)}f={count:d,texture:E,size:new Ir(C,_)},o.set(u,f),u.addEventListener("dispose",P)}let m=0;for(let U=0;U<h.length;U++)m+=h[U];const g=u.morphTargetsRelative?1:1-m;c.getUniforms().setValue(e,"morphTargetBaseInfluence",g),c.getUniforms().setValue(e,"morphTargetInfluences",h),c.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),c.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const N=void 0===h?0:h.length;let F=i[u.id];if(void 0===F||F.length!==N){F=[];for(let W=0;W<N;W++)F[W]=[W,0];i[u.id]=F}for(let q=0;q<N;q++){const V=F[q];V[0]=q,V[1]=h[q]}F.sort(El);for(let J=0;J<8;J++)J<N&&F[J][1]?(a[J][0]=F[J][0],a[J][1]=F[J][1]):(a[J][0]=Number.MAX_SAFE_INTEGER,a[J][1]=0);a.sort(Al);const z=u.morphAttributes.position,j=u.morphAttributes.normal;let H=0;for(let K=0;K<8;K++){const X=a[K],Y=X[0],Q=X[1];Y!==Number.MAX_SAFE_INTEGER&&Q?(z&&u.getAttribute("morphTarget"+K)!==z[Y]&&u.setAttribute("morphTarget"+K,z[Y]),j&&u.getAttribute("morphNormal"+K)!==j[Y]&&u.setAttribute("morphNormal"+K,j[Y]),r[K]=Q,H+=Q):(z&&!0===u.hasAttribute("morphTarget"+K)&&u.deleteAttribute("morphTarget"+K),j&&!0===u.hasAttribute("morphNormal"+K)&&u.deleteAttribute("morphNormal"+K),r[K]=0)}const G=u.morphTargetsRelative?1:1-H;c.getUniforms().setValue(e,"morphTargetBaseInfluence",G),c.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function Pl(e,t,n,i){let r=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const a=i.render.frame,l=s.geometry,u=t.get(s,l);if(r.get(u)!==a&&(t.update(u),r.set(u,a)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",o)&&s.addEventListener("dispose",o),r.get(s)!==a&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),r.set(s,a))),s.isSkinnedMesh){const e=s.skeleton;r.get(e)!==a&&(e.update(),r.set(e,a))}return u},dispose:function(){r=new WeakMap}}}class Tl extends no{constructor(e,t,n,i,r,o,s,a,l,u){if((u=void 0!==u?u:wn)!==wn&&u!==Ln)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===wn&&(n=hn),void 0===n&&u===Ln&&(n=gn),super(null,i,r,o,s,a,u,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:Xt,this.minFilter=void 0!==a?a:Xt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const Ml=new no,kl=new Tl(1,1);kl.compareFunction=er;const Il=new so,Dl=new lo,Ol=new Ua,Bl=[],Ul=[],Nl=new Float32Array(16),Fl=new Float32Array(9),zl=new Float32Array(4);function jl(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let o=Bl[r];if(void 0===o&&(o=new Float32Array(r),Bl[r]=o),0!==t){i.toArray(o,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(o,r)}return o}function Hl(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Gl(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function Wl(e,t){let n=Ul[t];void 0===n&&(n=new Int32Array(t),Ul[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function ql(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Vl(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Hl(n,t))return;e.uniform2fv(this.addr,t),Gl(n,t)}}function Jl(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Hl(n,t))return;e.uniform3fv(this.addr,t),Gl(n,t)}}function Kl(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Hl(n,t))return;e.uniform4fv(this.addr,t),Gl(n,t)}}function Xl(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Hl(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Gl(n,t)}else{if(Hl(n,i))return;zl.set(i),e.uniformMatrix2fv(this.addr,!1,zl),Gl(n,i)}}function Yl(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Hl(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Gl(n,t)}else{if(Hl(n,i))return;Fl.set(i),e.uniformMatrix3fv(this.addr,!1,Fl),Gl(n,i)}}function Ql(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(Hl(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Gl(n,t)}else{if(Hl(n,i))return;Nl.set(i),e.uniformMatrix4fv(this.addr,!1,Nl),Gl(n,i)}}function Zl(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function $l(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Hl(n,t))return;e.uniform2iv(this.addr,t),Gl(n,t)}}function eu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Hl(n,t))return;e.uniform3iv(this.addr,t),Gl(n,t)}}function tu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Hl(n,t))return;e.uniform4iv(this.addr,t),Gl(n,t)}}function nu(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function iu(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Hl(n,t))return;e.uniform2uiv(this.addr,t),Gl(n,t)}}function ru(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Hl(n,t))return;e.uniform3uiv(this.addr,t),Gl(n,t)}}function ou(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Hl(n,t))return;e.uniform4uiv(this.addr,t),Gl(n,t)}}function su(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r);const o=this.type===e.SAMPLER_2D_SHADOW?kl:Ml;n.setTexture2D(t||o,r)}function au(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Dl,r)}function lu(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||Ol,r)}function uu(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Il,r)}function cu(e,t){e.uniform1fv(this.addr,t)}function hu(e,t){const n=jl(t,this.size,2);e.uniform2fv(this.addr,n)}function pu(e,t){const n=jl(t,this.size,3);e.uniform3fv(this.addr,n)}function du(e,t){const n=jl(t,this.size,4);e.uniform4fv(this.addr,n)}function fu(e,t){const n=jl(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function mu(e,t){const n=jl(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function gu(e,t){const n=jl(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function vu(e,t){e.uniform1iv(this.addr,t)}function yu(e,t){e.uniform2iv(this.addr,t)}function Su(e,t){e.uniform3iv(this.addr,t)}function Ru(e,t){e.uniform4iv(this.addr,t)}function wu(e,t){e.uniform1uiv(this.addr,t)}function Lu(e,t){e.uniform2uiv(this.addr,t)}function bu(e,t){e.uniform3uiv(this.addr,t)}function Cu(e,t){e.uniform4uiv(this.addr,t)}function _u(e,t,n){const i=this.cache,r=t.length,o=Wl(n,r);Hl(i,o)||(e.uniform1iv(this.addr,o),Gl(i,o));for(let s=0;s!==r;++s)n.setTexture2D(t[s]||Ml,o[s])}function Au(e,t,n){const i=this.cache,r=t.length,o=Wl(n,r);Hl(i,o)||(e.uniform1iv(this.addr,o),Gl(i,o));for(let s=0;s!==r;++s)n.setTexture3D(t[s]||Dl,o[s])}function Eu(e,t,n){const i=this.cache,r=t.length,o=Wl(n,r);Hl(i,o)||(e.uniform1iv(this.addr,o),Gl(i,o));for(let s=0;s!==r;++s)n.setTextureCube(t[s]||Ol,o[s])}function xu(e,t,n){const i=this.cache,r=t.length,o=Wl(n,r);Hl(i,o)||(e.uniform1iv(this.addr,o),Gl(i,o));for(let s=0;s!==r;++s)n.setTexture2DArray(t[s]||Il,o[s])}class Pu{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return ql;case 35664:return Vl;case 35665:return Jl;case 35666:return Kl;case 35674:return Xl;case 35675:return Yl;case 35676:return Ql;case 5124:case 35670:return Zl;case 35667:case 35671:return $l;case 35668:case 35672:return eu;case 35669:case 35673:return tu;case 5125:return nu;case 36294:return iu;case 36295:return ru;case 36296:return ou;case 35678:case 36198:case 36298:case 36306:case 35682:return su;case 35679:case 36299:case 36307:return au;case 35680:case 36300:case 36308:case 36293:return lu;case 36289:case 36303:case 36311:case 36292:return uu}}(t.type)}}class Tu{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return cu;case 35664:return hu;case 35665:return pu;case 35666:return du;case 35674:return fu;case 35675:return mu;case 35676:return gu;case 5124:case 35670:return vu;case 35667:case 35671:return yu;case 35668:case 35672:return Su;case 35669:case 35673:return Ru;case 5125:return wu;case 36294:return Lu;case 36295:return bu;case 36296:return Cu;case 35678:case 36198:case 36298:case 36306:case 35682:return _u;case 35679:case 36299:case 36307:return Au;case 35680:case 36300:case 36308:case 36293:return Eu;case 36289:case 36303:case 36311:case 36292:return xu}}(t.type)}}class Mu{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(e,t[o.id],n)}}}const ku=/(\w+)(\])?(\[|\.)?/g;function Iu(e,t){e.seq.push(t),e.map[t.id]=t}function Du(e,t,n){const i=e.name,r=i.length;for(ku.lastIndex=0;;){const o=ku.exec(i),s=ku.lastIndex;let a=o[1];const l="]"===o[2],u=o[3];if(l&&(a|=0),void 0===u||"["===u&&s+2===r){Iu(n,void 0===u?new Pu(a,e,t):new Tu(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new Mu(a),Iu(n,e)),n=e}}}class Ou{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);Du(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function Bu(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}const Uu=37297;let Nu=0;function Fu(e,t,n){const i=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const i=parseInt(o[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let s=r;s<o;s++){const e=s+1;i.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[s]))}return i.join("\n")}(e.getShaderSource(t),i)}return r}function zu(e,t){const n=function(e){const t=Jr.getPrimaries(Jr.workingColorSpace),n=Jr.getPrimaries(e);let i;switch(t===n?i="":t===Di&&n===Ii?i="LinearDisplayP3ToLinearSRGB":t===Ii&&n===Di&&(i="LinearSRGBToLinearDisplayP3"),e){case xi:case Ti:return[i,"LinearTransferOETF"];case Ei:case Pi:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[i,"LinearTransferOETF"]}}(t);return"vec4 ".concat(e,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function ju(e,t){let n;switch(t){case kt:n="Linear";break;case It:n="Reinhard";break;case Dt:n="OptimizedCineon";break;case Ot:n="ACESFilmic";break;case Ut:n="AgX";break;case Bt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Hu(e){return""!==e}function Gu(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Wu(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const qu=/^[ \t]*#include +<([\w\d./]+)>/gm;function Vu(e){return e.replace(qu,Ku)}const Ju=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Ku(e,t){let n=Xa[t];if(void 0===n){const e=Ju.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=Xa[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Vu(n)}const Xu=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Yu(e){return e.replace(Xu,Qu)}function Qu(e,t,n,i){let r="";for(let o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Zu(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function $u(e,t,n,i){const r=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===je?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===He?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Ge&&(t="SHADOWMAP_TYPE_VSM"),t}(n),u=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case jt:case Ht:t="ENVMAP_TYPE_CUBE";break;case qt:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===Ht&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case xt:t="ENVMAP_BLENDING_MULTIPLY";break;case Pt:t="ENVMAP_BLENDING_MIX";break;case Tt:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),d=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Hu).join("\n")}(n),f=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Hu).join("\n")}(n),m=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(o),g=r.createProgram();let v,y,S=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Hu).join("\n"),v.length>0&&(v+="\n"),y=[d,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(Hu).join("\n"),y.length>0&&(y+="\n")):(v=[Zu(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Hu).join("\n"),y=[d,Zu(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Mt?"#define TONE_MAPPING":"",n.toneMapping!==Mt?Xa.tonemapping_pars_fragment:"",n.toneMapping!==Mt?ju("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Xa.colorspace_pars_fragment,zu("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Hu).join("\n")),s=Vu(s),s=Gu(s,n),s=Wu(s,n),a=Vu(a),a=Gu(a,n),a=Wu(a,n),s=Yu(s),a=Yu(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(S="#version 300 es\n",v=[f,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,y=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===mr?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===mr?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const R=S+v+s,w=S+y+a,L=Bu(r,r.VERTEX_SHADER,R),b=Bu(r,r.FRAGMENT_SHADER,w);function C(t){if(e.debug.checkShaderErrors){const n=r.getProgramInfoLog(g).trim(),i=r.getShaderInfoLog(L).trim(),o=r.getShaderInfoLog(b).trim();let s=!0,a=!0;if(!1===r.getProgramParameter(g,r.LINK_STATUS))if(s=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(r,g,L,b);else{const e=Fu(r,L,"vertex"),t=Fu(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==i&&""!==o||(a=!1);a&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:i,prefix:v},fragmentShader:{log:o,prefix:y}})}r.deleteShader(L),r.deleteShader(b),_=new Ou(r,g),A=function(e,t){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),o=i.name;let s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),n[o]={type:i.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(r,g)}let _,A;r.attachShader(g,L),r.attachShader(g,b),void 0!==n.index0AttributeName?r.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),this.getUniforms=function(){return void 0===_&&C(this),_},this.getAttributes=function(){return void 0===A&&C(this),A};let E=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===E&&(E=r.getProgramParameter(g,Uu)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Nu++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=L,this.fragmentShader=b,this}let ec=0;class tc{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new nc(e),t.set(e,n)),n}}class nc{constructor(e){this.id=ec++,this.code=e,this.usedTimes=0}}function ic(e,t,n,i,r,o,s){const a=new es,l=new tc,u=[],c=r.isWebGL2,h=r.logarithmicDepthBuffer,p=r.vertexTextures;let d=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 0===e?"uv":"uv".concat(e)}return{getParameters:function(o,a,u,g,v){const y=g.fog,S=v.geometry,R=o.isMeshStandardMaterial?g.environment:null,w=(o.isMeshStandardMaterial?n:t).get(o.envMap||R),L=w&&w.mapping===qt?w.image.height:null,b=f[o.type];null!==o.precision&&(d=r.getMaxPrecision(o.precision),d!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",d,"instead."));const C=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,_=void 0!==C?C.length:0;let A,E,x,P,T=0;if(void 0!==S.morphAttributes.position&&(T=1),void 0!==S.morphAttributes.normal&&(T=2),void 0!==S.morphAttributes.color&&(T=3),b){const e=Qa[b];A=e.vertexShader,E=e.fragmentShader}else A=o.vertexShader,E=o.fragmentShader,l.update(o),x=l.getVertexShaderID(o),P=l.getFragmentShaderID(o);const M=e.getRenderTarget(),k=!0===v.isInstancedMesh,I=!0===v.isBatchedMesh,D=!!o.map,O=!!o.matcap,B=!!w,U=!!o.aoMap,N=!!o.lightMap,F=!!o.bumpMap,z=!!o.normalMap,j=!!o.displacementMap,H=!!o.emissiveMap,G=!!o.metalnessMap,W=!!o.roughnessMap,q=o.anisotropy>0,V=o.clearcoat>0,J=o.iridescence>0,K=o.sheen>0,X=o.transmission>0,Y=q&&!!o.anisotropyMap,Q=V&&!!o.clearcoatMap,Z=V&&!!o.clearcoatNormalMap,$=V&&!!o.clearcoatRoughnessMap,ee=J&&!!o.iridescenceMap,te=J&&!!o.iridescenceThicknessMap,ne=K&&!!o.sheenColorMap,ie=K&&!!o.sheenRoughnessMap,re=!!o.specularMap,oe=!!o.specularColorMap,se=!!o.specularIntensityMap,ae=X&&!!o.transmissionMap,le=X&&!!o.thicknessMap,ue=!!o.gradientMap,ce=!!o.alphaMap,he=o.alphaTest>0,pe=!!o.alphaHash,de=!!o.extensions,fe=!!S.attributes.uv1,me=!!S.attributes.uv2,ge=!!S.attributes.uv3;let ve=Mt;return o.toneMapped&&(null!==M&&!0!==M.isXRRenderTarget||(ve=e.toneMapping)),{isWebGL2:c,shaderID:b,shaderType:o.type,shaderName:o.name,vertexShader:A,fragmentShader:E,defines:o.defines,customVertexShaderID:x,customFragmentShaderID:P,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:d,batching:I,instancing:k,instancingColor:k&&null!==v.instanceColor,supportsVertexTextures:p,outputColorSpace:null===M?e.outputColorSpace:!0===M.isXRRenderTarget?M.texture.colorSpace:xi,map:D,matcap:O,envMap:B,envMapMode:B&&w.mapping,envMapCubeUVHeight:L,aoMap:U,lightMap:N,bumpMap:F,normalMap:z,displacementMap:p&&j,emissiveMap:H,normalMapObjectSpace:z&&o.normalMapType===_i,normalMapTangentSpace:z&&o.normalMapType===Ci,metalnessMap:G,roughnessMap:W,anisotropy:q,anisotropyMap:Y,clearcoat:V,clearcoatMap:Q,clearcoatNormalMap:Z,clearcoatRoughnessMap:$,iridescence:J,iridescenceMap:ee,iridescenceThicknessMap:te,sheen:K,sheenColorMap:ne,sheenRoughnessMap:ie,specularMap:re,specularColorMap:oe,specularIntensityMap:se,transmission:X,transmissionMap:ae,thicknessMap:le,gradientMap:ue,opaque:!1===o.transparent&&o.blending===Xe,alphaMap:ce,alphaTest:he,alphaHash:pe,combine:o.combine,mapUv:D&&m(o.map.channel),aoMapUv:U&&m(o.aoMap.channel),lightMapUv:N&&m(o.lightMap.channel),bumpMapUv:F&&m(o.bumpMap.channel),normalMapUv:z&&m(o.normalMap.channel),displacementMapUv:j&&m(o.displacementMap.channel),emissiveMapUv:H&&m(o.emissiveMap.channel),metalnessMapUv:G&&m(o.metalnessMap.channel),roughnessMapUv:W&&m(o.roughnessMap.channel),anisotropyMapUv:Y&&m(o.anisotropyMap.channel),clearcoatMapUv:Q&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:Z&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:ee&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:te&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:ne&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:ie&&m(o.sheenRoughnessMap.channel),specularMapUv:re&&m(o.specularMap.channel),specularColorMapUv:oe&&m(o.specularColorMap.channel),specularIntensityMapUv:se&&m(o.specularIntensityMap.channel),transmissionMapUv:ae&&m(o.transmissionMap.channel),thicknessMapUv:le&&m(o.thicknessMap.channel),alphaMapUv:ce&&m(o.alphaMap.channel),vertexTangents:!!S.attributes.tangent&&(z||q),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!S.attributes.color&&4===S.attributes.color.itemSize,vertexUv1s:fe,vertexUv2s:me,vertexUv3s:ge,pointsUvs:!0===v.isPoints&&!!S.attributes.uv&&(D||ce),fog:!!y,useFog:!0===o.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==S.morphAttributes.position,morphNormals:void 0!==S.morphAttributes.normal,morphColors:void 0!==S.morphAttributes.color,morphTargetsCount:_,morphTextureStride:T,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ve,useLegacyLights:e._useLegacyLights,decodeVideoTexture:D&&!0===o.map.isVideoTexture&&Jr.getTransfer(o.map.colorSpace)===ki,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===Ve,flipSided:o.side===qe,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:de&&!0===o.extensions.derivatives,extensionFragDepth:de&&!0===o.extensions.fragDepth,extensionDrawBuffers:de&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:de&&!0===o.extensions.shaderTextureLOD,extensionClipCullDistance:de&&o.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){a.disableAll(),t.isWebGL2&&a.enable(0);t.supportsVertexTextures&&a.enable(1);t.instancing&&a.enable(2);t.instancingColor&&a.enable(3);t.matcap&&a.enable(4);t.envMap&&a.enable(5);t.normalMapObjectSpace&&a.enable(6);t.normalMapTangentSpace&&a.enable(7);t.clearcoat&&a.enable(8);t.iridescence&&a.enable(9);t.alphaTest&&a.enable(10);t.vertexColors&&a.enable(11);t.vertexAlphas&&a.enable(12);t.vertexUv1s&&a.enable(13);t.vertexUv2s&&a.enable(14);t.vertexUv3s&&a.enable(15);t.vertexTangents&&a.enable(16);t.anisotropy&&a.enable(17);t.alphaHash&&a.enable(18);t.batching&&a.enable(19);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.skinning&&a.enable(4);t.morphTargets&&a.enable(5);t.morphNormals&&a.enable(6);t.morphColors&&a.enable(7);t.premultipliedAlpha&&a.enable(8);t.shadowMapEnabled&&a.enable(9);t.useLegacyLights&&a.enable(10);t.doubleSided&&a.enable(11);t.flipSided&&a.enable(12);t.useDepthPacking&&a.enable(13);t.dithering&&a.enable(14);t.transmission&&a.enable(15);t.sheen&&a.enable(16);t.opaque&&a.enable(17);t.pointsUvs&&a.enable(18);t.decodeVideoTexture&&a.enable(19);e.push(a.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Qa[t];n=Ma.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=u.length;e<r;e++){const t=u[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new $u(e,n,t,o),u.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function rc(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function oc(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function sc(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ac(){const e=[];let t=0;const n=[],i=[],r=[];function o(n,i,r,o,s,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,s,a,l,u){const c=o(e,t,s,a,l,u);s.transmission>0?i.push(c):!0===s.transparent?r.push(c):n.push(c)},unshift:function(e,t,s,a,l,u){const c=o(e,t,s,a,l,u);s.transmission>0?i.unshift(c):!0===s.transparent?r.unshift(c):n.unshift(c)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||oc),i.length>1&&i.sort(t||sc),r.length>1&&r.sort(t||sc)}}}function lc(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new ac,e.set(t,[r])):n>=i.length?(r=new ac,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function uc(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new po,color:new Ms};break;case"SpotLight":n={position:new po,direction:new po,color:new Ms,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new po,color:new Ms,distance:0,decay:0};break;case"HemisphereLight":n={direction:new po,skyColor:new Ms,groundColor:new Ms};break;case"RectAreaLight":n={color:new Ms,position:new po,halfWidth:new po,halfHeight:new po}}return e[t.id]=n,n}}}let cc=0;function hc(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function pc(e,t){const n=new uc,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ir};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ir,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)r.probe.push(new po);const o=new po,s=new Go,a=new Go;return{setup:function(o,s){let a=0,l=0,u=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let c=0,h=0,p=0,d=0,f=0,m=0,g=0,v=0,y=0,S=0,R=0;o.sort(hc);const w=!0===s?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],s=t.color,L=t.intensity,b=t.distance,C=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=s.r*L*w,l+=s.g*L*w,u+=s.b*L*w;else if(t.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],L);R++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[c]=n,r.directionalShadowMap[c]=C,r.directionalShadowMatrix[c]=t.shadow.matrix,m++}r.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(L*w),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[p]=e;const o=t.shadow;if(t.map&&(r.spotLightMap[y]=t.map,y++,o.updateMatrices(t),t.castShadow&&S++),r.spotLightMatrix[p]=o.matrix,t.castShadow){const e=i.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,r.spotShadow[p]=e,r.spotShadowMap[p]=C,v++}p++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(L),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[d]=e,d++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=C,r.pointShadowMatrix[h]=t.shadow.matrix,g++}r.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(L*w),e.groundColor.copy(t.groundColor).multiplyScalar(L*w),r.hemi[f]=e,f++}}d>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ya.LTC_FLOAT_1,r.rectAreaLTC2=Ya.LTC_FLOAT_2):(r.rectAreaLTC1=Ya.LTC_HALF_1,r.rectAreaLTC2=Ya.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ya.LTC_FLOAT_1,r.rectAreaLTC2=Ya.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Ya.LTC_HALF_1,r.rectAreaLTC2=Ya.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=a,r.ambient[1]=l,r.ambient[2]=u;const L=r.hash;L.directionalLength===c&&L.pointLength===h&&L.spotLength===p&&L.rectAreaLength===d&&L.hemiLength===f&&L.numDirectionalShadows===m&&L.numPointShadows===g&&L.numSpotShadows===v&&L.numSpotMaps===y&&L.numLightProbes===R||(r.directional.length=c,r.spot.length=p,r.rectArea.length=d,r.point.length=h,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+y-S,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=S,r.numLightProbes=R,L.directionalLength=c,L.pointLength=h,L.spotLength=p,L.rectAreaLength=d,L.hemiLength=f,L.numDirectionalShadows=m,L.numPointShadows=g,L.numSpotShadows=v,L.numSpotMaps=y,L.numLightProbes=R,r.version=cc++)},setupView:function(e,t){let n=0,i=0,l=0,u=0,c=0;const h=t.matrixWorldInverse;for(let p=0,d=e.length;p<d;p++){const t=e[p];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=r.rectArea[u];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),a.identity(),s.copy(t.matrixWorld),s.premultiply(h),a.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),u++}else if(t.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),i++}else if(t.isHemisphereLight){const e=r.hemi[c];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),c++}}},state:r}}function dc(e,t){const n=new pc(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function fc(e,t){let n=new WeakMap;return{get:function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const o=n.get(i);let s;return void 0===o?(s=new dc(e,t),n.set(i,[s])):r>=o.length?(s=new dc(e,t),o.push(s)):s=o[r],s},dispose:function(){n=new WeakMap}}}class mc extends Ds{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Li,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class gc extends Ds{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function vc(e,t,n){let i=new qa;const r=new Ir,o=new Ir,s=new io,a=new mc({depthPacking:bi}),l=new gc,u={},c=n.maxTextureSize,h={[We]:qe,[qe]:We,[Ve]:Ve},p=new ka({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ir},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=p.clone();d.defines.HORIZONTAL_PASS=1;const f=new aa;f.setAttribute("position",new Gs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new _a(f,p),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=je;let v=this.type;function y(n,i){const o=t.update(m);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,d.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new oo(r.x,r.y)),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,o,p,m,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,o,d,m,null)}function S(t,n,i,r){let o=null;const s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===i.isPointLight?l:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=o.uuid,t=n.uuid;let i=u[e];void 0===i&&(i={},u[e]=i);let r=i[t];void 0===r&&(r=o.clone(),i[t]=r,n.addEventListener("dispose",w)),o=r}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=r===Ge?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===i.isPointLight&&!0===o.isMeshDistanceMaterial){e.properties.get(o).light=i}return o}function R(n,r,o,s,a){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===Ge)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=t.update(n),l=n.material;if(Array.isArray(l)){const t=i.groups;for(let u=0,c=t.length;u<c;u++){const c=t[u],h=l[c.materialIndex];if(h&&h.visible){const t=S(n,h,s,a);n.onBeforeShadow(e,n,r,o,i,t,c),e.renderBufferDirect(o,null,i,t,n,c),n.onAfterShadow(e,n,r,o,i,t,c)}}}else if(l.visible){const t=S(n,l,s,a);n.onBeforeShadow(e,n,r,o,i,t,null),e.renderBufferDirect(o,null,i,t,n,null),n.onAfterShadow(e,n,r,o,i,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)R(l[e],r,o,s,a)}function w(e){e.target.removeEventListener("dispose",w);for(const t in u){const n=u[t],i=e.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(t,n,a){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.state;p.setBlending(Ke),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);const d=v!==Ge&&this.type===Ge,f=v===Ge&&this.type!==Ge;for(let m=0,g=t.length;m<g;m++){const l=t[m],u=l.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;r.copy(u.mapSize);const h=u.getFrameExtents();if(r.multiply(h),o.copy(u.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(o.x=Math.floor(c/h.x),r.x=o.x*h.x,u.mapSize.x=o.x),r.y>c&&(o.y=Math.floor(c/h.y),r.y=o.y*h.y,u.mapSize.y=o.y)),null===u.map||!0===d||!0===f){const e=this.type!==Ge?{minFilter:Xt,magFilter:Xt}:{};null!==u.map&&u.map.dispose(),u.map=new oo(r.x,r.y,e),u.map.texture.name=l.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const g=u.getViewportCount();for(let e=0;e<g;e++){const t=u.getViewport(e);s.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),p.viewport(s),u.updateMatrices(l,e),i=u.getFrustum(),R(n,a,u.camera,l,this.type)}!0!==u.isPointLightShadow&&this.type===Ge&&y(u,a),u.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,u,h)}}function yc(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new io;let i=null;const r=new io(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,o,s,a){!0===a&&(t*=s,i*=s,o*=s),n.set(t,i,o,s),!1===r.equals(n)&&(e.clearColor(t,i,o,s),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(t){t?H(e.DEPTH_TEST):G(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case Rt:e.depthFunc(e.NEVER);break;case wt:e.depthFunc(e.ALWAYS);break;case Lt:e.depthFunc(e.LESS);break;case bt:e.depthFunc(e.LEQUAL);break;case Ct:e.depthFunc(e.EQUAL);break;case _t:e.depthFunc(e.GEQUAL);break;case At:e.depthFunc(e.GREATER);break;case Et:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},s=new function(){let t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,u=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):G(e.STENCIL_TEST))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,s){i===t&&r===n&&o===s||(e.stencilFunc(t,n,s),i=t,r=n,o=s)},setOp:function(t,n,i){s===t&&a===n&&l===i||(e.stencilOp(t,n,i),s=t,a=n,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,i=null,r=null,o=null,s=null,a=null,l=null,u=null}}},a=new WeakMap,l=new WeakMap;let u={},c={},h=new WeakMap,p=[],d=null,f=!1,m=null,g=null,v=null,y=null,S=null,R=null,w=null,L=new Ms(0,0,0),b=0,C=!1,_=null,A=null,E=null,x=null,P=null;const T=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let M=!1,k=0;const I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(k=parseFloat(/^WebGL (\d)/.exec(I)[1]),M=k>=1):-1!==I.indexOf("OpenGL ES")&&(k=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),M=k>=2);let D=null,O={};const B=e.getParameter(e.SCISSOR_BOX),U=e.getParameter(e.VIEWPORT),N=(new io).fromArray(B),F=(new io).fromArray(U);function z(t,n,r,o){const s=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<r;l++)!i||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,o,0,e.RGBA,e.UNSIGNED_BYTE,s);return a}const j={};function H(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function G(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}j[e.TEXTURE_2D]=z(e.TEXTURE_2D,e.TEXTURE_2D,1),j[e.TEXTURE_CUBE_MAP]=z(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(j[e.TEXTURE_2D_ARRAY]=z(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),j[e.TEXTURE_3D]=z(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),o.setClear(1),s.setClear(0),H(e.DEPTH_TEST),o.setFunc(bt),J(!1),K(Ue),H(e.CULL_FACE),V(Ke);const W={[et]:e.FUNC_ADD,[tt]:e.FUNC_SUBTRACT,[nt]:e.FUNC_REVERSE_SUBTRACT};if(i)W[it]=e.MIN,W[rt]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(W[it]=e.MIN_EXT,W[rt]=e.MAX_EXT)}const q={[ot]:e.ZERO,[st]:e.ONE,[at]:e.SRC_COLOR,[ut]:e.SRC_ALPHA,[mt]:e.SRC_ALPHA_SATURATE,[dt]:e.DST_COLOR,[ht]:e.DST_ALPHA,[lt]:e.ONE_MINUS_SRC_COLOR,[ct]:e.ONE_MINUS_SRC_ALPHA,[ft]:e.ONE_MINUS_DST_COLOR,[pt]:e.ONE_MINUS_DST_ALPHA,[gt]:e.CONSTANT_COLOR,[vt]:e.ONE_MINUS_CONSTANT_COLOR,[yt]:e.CONSTANT_ALPHA,[St]:e.ONE_MINUS_CONSTANT_ALPHA};function V(t,n,i,r,o,s,a,l,u,c){if(t!==Ke){if(!1===f&&(H(e.BLEND),f=!0),t===$e)o=o||n,s=s||i,a=a||r,n===g&&o===S||(e.blendEquationSeparate(W[n],W[o]),g=n,S=o),i===v&&r===y&&s===R&&a===w||(e.blendFuncSeparate(q[i],q[r],q[s],q[a]),v=i,y=r,R=s,w=a),!1!==l.equals(L)&&u===b||(e.blendColor(l.r,l.g,l.b,u),L.copy(l),b=u),m=t,C=!1;else if(t!==m||c!==C){if(g===et&&S===et||(e.blendEquation(e.FUNC_ADD),g=et,S=et),c)switch(t){case Xe:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Ye:e.blendFunc(e.ONE,e.ONE);break;case Qe:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case Ze:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case Xe:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Ye:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case Qe:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case Ze:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,R=null,w=null,L.set(0,0,0),b=0,m=t,C=c}}else!0===f&&(G(e.BLEND),f=!1)}function J(t){_!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),_=t)}function K(t){t!==Be?(H(e.CULL_FACE),t!==A&&(t===Ue?e.cullFace(e.BACK):t===Ne?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):G(e.CULL_FACE),A=t}function X(t,n,i){t?(H(e.POLYGON_OFFSET_FILL),x===n&&P===i||(e.polygonOffset(n,i),x=n,P=i)):G(e.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:o,stencil:s},enable:H,disable:G,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,i&&(t===e.DRAW_FRAMEBUFFER&&(c[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(c[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(i,r){let o=p,s=!1;if(i)if(o=h.get(r),void 0===o&&(o=[],h.set(r,o)),i.isWebGLMultipleRenderTargets){const t=i.texture;if(o.length!==t.length||o[0]!==e.COLOR_ATTACHMENT0){for(let n=0,i=t.length;n<i;n++)o[n]=e.COLOR_ATTACHMENT0+n;o.length=t.length,s=!0}}else o[0]!==e.COLOR_ATTACHMENT0&&(o[0]=e.COLOR_ATTACHMENT0,s=!0);else o[0]!==e.BACK&&(o[0]=e.BACK,s=!0);s&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:V,setMaterial:function(t,n){t.side===Ve?G(e.CULL_FACE):H(e.CULL_FACE);let i=t.side===qe;n&&(i=!i),J(i),t.blending===Xe&&!1===t.transparent?V(Ke):V(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),r.setMask(t.colorWrite);const a=t.stencilWrite;s.setTest(a),a&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),X(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):G(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:J,setCullFace:K,setLineWidth:function(t){t!==E&&(M&&e.lineWidth(t),E=t)},setPolygonOffset:X,setScissorTest:function(t){t?H(e.SCISSOR_TEST):G(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+T-1),D!==t&&(e.activeTexture(t),D=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===D?e.TEXTURE0+T-1:D);let r=O[i];void 0===r&&(r={type:void 0,texture:void 0},O[i]=r),r.type===t&&r.texture===n||(D!==i&&(e.activeTexture(i),D=i),e.bindTexture(t,n||j[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=O[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=l.get(n).get(t);a.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),a.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===i&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},D=null,O={},c={},h=new WeakMap,p=[],d=null,f=!1,m=null,g=null,v=null,y=null,S=null,R=null,w=null,L=new Ms(0,0,0),b=0,C=!1,_=null,A=null,E=null,x=null,P=null,N.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),r.reset(),o.reset(),s.reset()}}}function Sc(e,t,n,i,r,o,s){const a=r.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new WeakMap;let h;const p=new WeakMap;let d=!1;try{d="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(F){}function f(e,t){return d?new OffscreenCanvas(e,t):Fr("canvas")}function m(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?Pr:Math.floor,o=i(r*e.width),s=i(r*e.height);void 0===h&&(h=f(o,s));const a=n?f(o,s):h;a.width=o,a.height=s;return a.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return xr(e.width)&&xr(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==Xt&&e.minFilter!==en}function y(t){e.generateMipmap(t)}function S(n,i,r,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===a)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;if(i===e.RED&&(r===e.FLOAT&&(l=e.R32F),r===e.HALF_FLOAT&&(l=e.R16F),r===e.UNSIGNED_BYTE&&(l=e.R8)),i===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(l=e.R8UI),r===e.UNSIGNED_SHORT&&(l=e.R16UI),r===e.UNSIGNED_INT&&(l=e.R32UI),r===e.BYTE&&(l=e.R8I),r===e.SHORT&&(l=e.R16I),r===e.INT&&(l=e.R32I)),i===e.RG&&(r===e.FLOAT&&(l=e.RG32F),r===e.HALF_FLOAT&&(l=e.RG16F),r===e.UNSIGNED_BYTE&&(l=e.RG8)),i===e.RGBA){const t=s?Mi:Jr.getTransfer(o);r===e.FLOAT&&(l=e.RGBA32F),r===e.HALF_FLOAT&&(l=e.RGBA16F),r===e.UNSIGNED_BYTE&&(l=t===ki?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function R(e,t,n){return!0===v(e,n)||e.isFramebufferTexture&&e.minFilter!==Xt&&e.minFilter!==en?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(t){return t===Xt||t===Yt||t===Zt?e.NEAREST:e.LINEAR}function L(e){const t=e.target;t.removeEventListener("dispose",L),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=p.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&C(e),0===Object.keys(r).length&&p.delete(n)}i.remove(e)}(t),t.isVideoTexture&&c.delete(t)}function b(t){const n=t.target;n.removeEventListener("dispose",b),function(t){const n=t.texture,r=i.get(t),o=i.get(n);void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(r.__webglFramebuffer[i]))for(let t=0;t<r.__webglFramebuffer[i].length;t++)e.deleteFramebuffer(r.__webglFramebuffer[i][t]);else e.deleteFramebuffer(r.__webglFramebuffer[i]);r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[i])}else{if(Array.isArray(r.__webglFramebuffer))for(let t=0;t<r.__webglFramebuffer.length;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let a=0,l=n.length;a<l;a++){const t=i.get(n[a]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),i.remove(n[a])}i.remove(n),i.remove(t)}(n)}function C(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete p.get(r)[n.__cacheKey],s.memory.textures--}let _=0;function A(t,r){const o=i.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;c.get(e)!==t&&(c.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void k(o,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+r)}const E={[Vt]:e.REPEAT,[Jt]:e.CLAMP_TO_EDGE,[Kt]:e.MIRRORED_REPEAT},x={[Xt]:e.NEAREST,[Yt]:e.NEAREST_MIPMAP_NEAREST,[Zt]:e.NEAREST_MIPMAP_LINEAR,[en]:e.LINEAR,[tn]:e.LINEAR_MIPMAP_NEAREST,[rn]:e.LINEAR_MIPMAP_LINEAR},P={[Qi]:e.NEVER,[rr]:e.ALWAYS,[Zi]:e.LESS,[er]:e.LEQUAL,[$i]:e.EQUAL,[ir]:e.GEQUAL,[tr]:e.GREATER,[nr]:e.NOTEQUAL};function T(n,o,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,E[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,E[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,E[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,x[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,x[o.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),o.wrapS===Jt&&o.wrapT===Jt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,w(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,w(o.minFilter)),o.minFilter!==Xt&&o.minFilter!==en&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,P[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(o.magFilter===Xt)return;if(o.minFilter!==Zt&&o.minFilter!==rn)return;if(o.type===pn&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&o.type===dn&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function M(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",L));const r=n.source;let o=p.get(r);void 0===o&&(o={},p.set(r,o));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(a!==t.__cacheKey){void 0===o[a]&&(o[a]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,i=!0),o[a].usedTimes++;const r=o[t.__cacheKey];void 0!==r&&(o[t.__cacheKey].usedTimes--,0===r.usedTimes&&C(n)),t.__cacheKey=a,t.__webglTexture=o[a].texture}return i}function k(t,s,l){let u=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(u=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(u=e.TEXTURE_3D);const c=M(t,s),h=s.source;n.bindTexture(u,t.__webglTexture,e.TEXTURE0+l);const p=i.get(h);if(h.version!==p.__version||!0===c){n.activeTexture(e.TEXTURE0+l);const t=Jr.getPrimaries(Jr.workingColorSpace),i=s.colorSpace===Ai?null:Jr.getPrimaries(s.colorSpace),d=s.colorSpace===Ai||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const f=function(e){return!a&&(e.wrapS!==Jt||e.wrapT!==Jt||e.minFilter!==Xt&&e.minFilter!==en)}(s)&&!1===g(s.image);let w=m(s.image,f,!1,r.maxTextureSize);w=N(s,w);const L=g(w)||a,b=o.convert(s.format,s.colorSpace);let C,_=o.convert(s.type),A=S(s.internalFormat,b,_,s.colorSpace,s.isVideoTexture);T(u,s,L);const E=s.mipmaps,x=a&&!0!==s.isVideoTexture&&A!==Bn,P=void 0===p.__version||!0===c,M=R(s,w,L);if(s.isDepthTexture)A=e.DEPTH_COMPONENT,a?A=s.type===pn?e.DEPTH_COMPONENT32F:s.type===hn?e.DEPTH_COMPONENT24:s.type===gn?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:s.type===pn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),s.format===wn&&A===e.DEPTH_COMPONENT&&s.type!==un&&s.type!==hn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),s.type=hn,_=o.convert(s.type)),s.format===Ln&&A===e.DEPTH_COMPONENT&&(A=e.DEPTH_STENCIL,s.type!==gn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),s.type=gn,_=o.convert(s.type))),P&&(x?n.texStorage2D(e.TEXTURE_2D,1,A,w.width,w.height):n.texImage2D(e.TEXTURE_2D,0,A,w.width,w.height,0,b,_,null));else if(s.isDataTexture)if(E.length>0&&L){x&&P&&n.texStorage2D(e.TEXTURE_2D,M,A,E[0].width,E[0].height);for(let t=0,i=E.length;t<i;t++)C=E[t],x?n.texSubImage2D(e.TEXTURE_2D,t,0,0,C.width,C.height,b,_,C.data):n.texImage2D(e.TEXTURE_2D,t,A,C.width,C.height,0,b,_,C.data);s.generateMipmaps=!1}else x?(P&&n.texStorage2D(e.TEXTURE_2D,M,A,w.width,w.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,w.width,w.height,b,_,w.data)):n.texImage2D(e.TEXTURE_2D,0,A,w.width,w.height,0,b,_,w.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){x&&P&&n.texStorage3D(e.TEXTURE_2D_ARRAY,M,A,E[0].width,E[0].height,w.depth);for(let t=0,i=E.length;t<i;t++)C=E[t],s.format!==yn?null!==b?x?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,C.width,C.height,w.depth,b,C.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,A,C.width,C.height,w.depth,0,C.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,C.width,C.height,w.depth,b,_,C.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,A,C.width,C.height,w.depth,0,b,_,C.data)}else{x&&P&&n.texStorage2D(e.TEXTURE_2D,M,A,E[0].width,E[0].height);for(let t=0,i=E.length;t<i;t++)C=E[t],s.format!==yn?null!==b?x?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,C.width,C.height,b,C.data):n.compressedTexImage2D(e.TEXTURE_2D,t,A,C.width,C.height,0,C.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x?n.texSubImage2D(e.TEXTURE_2D,t,0,0,C.width,C.height,b,_,C.data):n.texImage2D(e.TEXTURE_2D,t,A,C.width,C.height,0,b,_,C.data)}else if(s.isDataArrayTexture)x?(P&&n.texStorage3D(e.TEXTURE_2D_ARRAY,M,A,w.width,w.height,w.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,w.width,w.height,w.depth,b,_,w.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,A,w.width,w.height,w.depth,0,b,_,w.data);else if(s.isData3DTexture)x?(P&&n.texStorage3D(e.TEXTURE_3D,M,A,w.width,w.height,w.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,w.width,w.height,w.depth,b,_,w.data)):n.texImage3D(e.TEXTURE_3D,0,A,w.width,w.height,w.depth,0,b,_,w.data);else if(s.isFramebufferTexture){if(P)if(x)n.texStorage2D(e.TEXTURE_2D,M,A,w.width,w.height);else{let t=w.width,i=w.height;for(let r=0;r<M;r++)n.texImage2D(e.TEXTURE_2D,r,A,t,i,0,b,_,null),t>>=1,i>>=1}}else if(E.length>0&&L){x&&P&&n.texStorage2D(e.TEXTURE_2D,M,A,E[0].width,E[0].height);for(let t=0,i=E.length;t<i;t++)C=E[t],x?n.texSubImage2D(e.TEXTURE_2D,t,0,0,b,_,C):n.texImage2D(e.TEXTURE_2D,t,A,b,_,C);s.generateMipmaps=!1}else x?(P&&n.texStorage2D(e.TEXTURE_2D,M,A,w.width,w.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,b,_,w)):n.texImage2D(e.TEXTURE_2D,0,A,b,_,w);v(s,L)&&y(u),p.__version=h.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function I(t,r,s,a,u,c){const h=o.convert(s.format,s.colorSpace),p=o.convert(s.type),d=S(s.internalFormat,h,p,s.colorSpace);if(!i.get(r).__hasExternalTextures){const t=Math.max(1,r.width>>c),i=Math.max(1,r.height>>c);u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?n.texImage3D(u,c,d,t,i,r.depth,0,h,p,null):n.texImage2D(u,c,d,t,i,0,h,p,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),U(r)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,a,u,i.get(s).__webglTexture,0,B(r)):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,a,u,i.get(s).__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,n,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let r=!0===a?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(i||U(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===pn?r=e.DEPTH_COMPONENT32F:t.type===hn&&(r=e.DEPTH_COMPONENT24));const i=B(n);U(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,r,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,i,r,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,r,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=B(n);i&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):U(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){const s=t[r],a=o.convert(s.format,s.colorSpace),u=o.convert(s.type),c=S(s.internalFormat,a,u,s.colorSpace),h=B(n);i&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,c,n.width,n.height):U(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function O(t){const r=i.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),A(r.depthTexture,0);const o=i.get(r.depthTexture).__webglTexture,s=B(r);if(r.depthTexture.format===wn)U(r)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(r.depthTexture.format!==Ln)throw new Error("Unknown depthTexture format");U(r)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(r.__webglFramebuffer,t)}else if(o){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),D(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),D(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function B(e){return Math.min(r.maxSamples,e.samples)}function U(e){const n=i.get(e);return a&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function N(e,n){const i=e.colorSpace,r=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===gr||i!==xi&&i!==Ai&&(Jr.getTransfer(i)===ki?!1===a?!0===t.has("EXT_sRGB")&&r===yn?(e.format=gr,e.minFilter=en,e.generateMipmaps=!1):n=Qr.sRGBToLinear(n):r===yn&&o===sn||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),n}this.allocateTextureUnit=function(){const e=_;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),_+=1,e},this.resetTextureUnits=function(){_=0},this.setTexture2D=A,this.setTexture2DArray=function(t,r){const o=i.get(t);t.version>0&&o.__version!==t.version?k(o,t,r):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const o=i.get(t);t.version>0&&o.__version!==t.version?k(o,t,r):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,s){const l=i.get(t);t.version>0&&l.__version!==t.version?function(t,s,l){if(6!==s.image.length)return;const u=M(t,s),c=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);const h=i.get(c);if(c.version!==h.__version||!0===u){n.activeTexture(e.TEXTURE0+l);const t=Jr.getPrimaries(Jr.workingColorSpace),i=s.colorSpace===Ai?null:Jr.getPrimaries(s.colorSpace),p=s.colorSpace===Ai||t===i?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const d=s.isCompressedTexture||s.image[0].isCompressedTexture,f=s.image[0]&&s.image[0].isDataTexture,w=[];for(let e=0;e<6;e++)w[e]=d||f?f?s.image[e].image:s.image[e]:m(s.image[e],!1,!0,r.maxCubemapSize),w[e]=N(s,w[e]);const L=w[0],b=g(L)||a,C=o.convert(s.format,s.colorSpace),_=o.convert(s.type),A=S(s.internalFormat,C,_,s.colorSpace),E=a&&!0!==s.isVideoTexture,x=void 0===h.__version||!0===u;let P,M=R(s,L,b);if(T(e.TEXTURE_CUBE_MAP,s,b),d){E&&x&&n.texStorage2D(e.TEXTURE_CUBE_MAP,M,A,L.width,L.height);for(let t=0;t<6;t++){P=w[t].mipmaps;for(let i=0;i<P.length;i++){const r=P[i];s.format!==yn?null!==C?E?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,C,r.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,A,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,0,0,r.width,r.height,C,_,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,A,r.width,r.height,0,C,_,r.data)}}}else{P=s.mipmaps,E&&x&&(P.length>0&&M++,n.texStorage2D(e.TEXTURE_CUBE_MAP,M,A,w[0].width,w[0].height));for(let t=0;t<6;t++)if(f){E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,w[t].width,w[t].height,C,_,w[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,A,w[t].width,w[t].height,0,C,_,w[t].data);for(let i=0;i<P.length;i++){const r=P[i].image[t].image;E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,r.width,r.height,C,_,r.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,A,r.width,r.height,0,C,_,r.data)}}else{E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,C,_,w[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,A,C,_,w[t]);for(let i=0;i<P.length;i++){const r=P[i];E?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,0,0,C,_,r.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i+1,A,C,_,r.image[t])}}}v(s,b)&&y(e.TEXTURE_CUBE_MAP),h.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(l,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,r){const o=i.get(t);void 0!==n&&I(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&O(t)},this.setupRenderTarget=function(t){const l=t.texture,u=i.get(t),c=i.get(l);t.addEventListener("dispose",b),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=l.version,s.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,p=!0===t.isWebGLMultipleRenderTargets,d=g(t)||a;if(h){u.__webglFramebuffer=[];for(let t=0;t<6;t++)if(a&&l.mipmaps&&l.mipmaps.length>0){u.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)u.__webglFramebuffer[t][n]=e.createFramebuffer()}else u.__webglFramebuffer[t]=e.createFramebuffer()}else{if(a&&l.mipmaps&&l.mipmaps.length>0){u.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)u.__webglFramebuffer[t]=e.createFramebuffer()}else u.__webglFramebuffer=e.createFramebuffer();if(p)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&t.samples>0&&!1===U(t)){const i=p?l:[l];u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];u.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const s=o.convert(r.format,r.colorSpace),a=o.convert(r.type),l=S(r.internalFormat,s,a,r.colorSpace,!0===t.isXRRenderTarget),c=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,u.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),D(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){n.bindTexture(e.TEXTURE_CUBE_MAP,c.__webglTexture),T(e.TEXTURE_CUBE_MAP,l,d);for(let n=0;n<6;n++)if(a&&l.mipmaps&&l.mipmaps.length>0)for(let i=0;i<l.mipmaps.length;i++)I(u.__webglFramebuffer[n][i],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else I(u.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(l,d)&&y(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(p){const r=t.texture;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i.get(s);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),T(e.TEXTURE_2D,s,d),I(u.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D,0),v(s,d)&&y(e.TEXTURE_2D)}n.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(a?i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(i,c.__webglTexture),T(i,l,d),a&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)I(u.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,i,n);else I(u.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,i,0);v(l,d)&&y(i),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(t){const r=g(t)||a,o=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,a=o.length;s<a;s++){const a=o[s];if(v(a,r)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=i.get(a).__webglTexture;n.bindTexture(r,o),y(r),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(a&&t.samples>0&&!1===U(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,s=t.height;let a=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,h=i.get(t),p=!0===t.isWebGLMultipleRenderTargets;if(p)for(let t=0;t<r.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,h.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,h.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,h.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const d=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),p&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,h.__webglColorRenderbuffer[n]),!0===d&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),p){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,s,0,0,o,s,a,e.NEAREST),u&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),p)for(let t=0;t<r.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,h.__webglColorRenderbuffer[t]);const o=i.get(r[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,h.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=I,this.useMultisampledRTT=U}function Rc(e,t,n){const i=n.isWebGL2;return{convert:function(n){let r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ai;const s=Jr.getTransfer(o);if(n===sn)return e.UNSIGNED_BYTE;if(n===fn)return e.UNSIGNED_SHORT_4_4_4_4;if(n===mn)return e.UNSIGNED_SHORT_5_5_5_1;if(n===an)return e.BYTE;if(n===ln)return e.SHORT;if(n===un)return e.UNSIGNED_SHORT;if(n===cn)return e.INT;if(n===hn)return e.UNSIGNED_INT;if(n===pn)return e.FLOAT;if(n===dn)return i?e.HALF_FLOAT:(r=t.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(n===vn)return e.ALPHA;if(n===yn)return e.RGBA;if(n===Sn)return e.LUMINANCE;if(n===Rn)return e.LUMINANCE_ALPHA;if(n===wn)return e.DEPTH_COMPONENT;if(n===Ln)return e.DEPTH_STENCIL;if(n===gr)return r=t.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===bn)return e.RED;if(n===Cn)return e.RED_INTEGER;if(n===_n)return e.RG;if(n===An)return e.RG_INTEGER;if(n===En)return e.RGBA_INTEGER;if(n===xn||n===Pn||n===Tn||n===Mn)if(s===ki){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===xn)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Pn)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Tn)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Mn)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===xn)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Pn)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Tn)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Mn)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===kn||n===In||n===Dn||n===On){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===kn)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===In)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Dn)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===On)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Bn)return r=t.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Un||n===Nn){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===Un)return s===ki?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Nn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===Fn||n===zn||n===jn||n===Hn||n===Gn||n===Wn||n===qn||n===Vn||n===Jn||n===Kn||n===Xn||n===Yn||n===Qn||n===Zn){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===Fn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===zn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===jn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Hn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Gn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Wn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===qn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Vn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Jn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Kn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Xn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Yn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Qn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Zn)return s===ki?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===$n||n===ei||n===ti){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===$n)return s===ki?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===ei)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===ti)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===ni||n===ii||n===ri||n===oi){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===$n)return r.COMPRESSED_RED_RGTC1_EXT;if(n===ii)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===ri)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===oi)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===gn?i?e.UNSIGNED_INT_24_8:(r=t.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class wc extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class Lc extends fs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const bc={type:"move"};class Cc{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Lc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Lc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new po,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new po),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Lc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new po,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new po),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n),i=this._getHandJoint(l,o);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=i.position.distanceTo(r.position),a=.02,u=.005;l.inputState.pinching&&s>a+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=a-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(bc)))}return null!==s&&(s.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Lc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class _c extends Sr{constructor(e,t){super();const n=this;let i=null,r=1,o=null,s="local-floor",a=1,l=null,u=null,c=null,h=null,p=null,d=null;const f=t.getContextAttributes();let m=null,g=null;const v=[],y=[],S=new Ir;let R=null;const w=new Da;w.layers.enable(1),w.viewport=new io;const L=new Da;L.layers.enable(2),L.viewport=new io;const b=[w,L],C=new wc;C.layers.enable(1),C.layers.enable(2);let _=null,A=null;function E(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||o),n.dispatchEvent({type:e.type,data:e.inputSource}))}function x(){i.removeEventListener("select",E),i.removeEventListener("selectstart",E),i.removeEventListener("selectend",E),i.removeEventListener("squeeze",E),i.removeEventListener("squeezestart",E),i.removeEventListener("squeezeend",E),i.removeEventListener("end",x),i.removeEventListener("inputsourceschange",P);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}_=null,A=null,e.setRenderTarget(m),p=null,h=null,c=null,i=null,g=null,D.stop(),n.isPresenting=!1,e.setPixelRatio(R),e.setSize(S.width,S.height,!1),n.dispatchEvent({type:"sessionend"})}function P(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=y.indexOf(n);i>=0&&(y[i]=null,v[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=y.indexOf(n);if(-1===i){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),i=e;break}if(null===y[e]){y[e]=n,i=e;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new Cc,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new Cc,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new Cc,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:p},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(u){if(i=u,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",x),i.addEventListener("inputsourceschange",P),!0!==f.xrCompatible&&await t.makeXRCompatible(),R=e.getPixelRatio(),e.getSize(S),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};p=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),g=new oo(p.framebufferWidth,p.framebufferHeight,{format:yn,type:sn,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,o=null,s=null;f.depth&&(s=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?Ln:wn,o=f.stencil?gn:hn);const a={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};c=new XRWebGLBinding(i,t),h=c.createProjectionLayer(a),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),g=new oo(h.textureWidth,h.textureHeight,{format:yn,type:sn,depthTexture:new Tl(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0});e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await i.requestReferenceSpace(s),D.setContext(i),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode};const T=new po,M=new po;function k(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;C.near=L.near=w.near=e.near,C.far=L.far=w.far=e.far,_===C.near&&A===C.far||(i.updateRenderState({depthNear:C.near,depthFar:C.far}),_=C.near,A=C.far);const t=e.parent,n=C.cameras;k(C,t);for(let i=0;i<n.length;i++)k(n[i],t);2===n.length?function(e,t,n){T.setFromMatrixPosition(t.matrixWorld),M.setFromMatrixPosition(n.matrixWorld);const i=T.distanceTo(M),r=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(o[8]+1)/o[0],p=s*c,d=s*h,f=i/(-c+h),m=f*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+f,v=a+f,y=p-m,S=d+(i-m),R=l*a/v*g,w=u*a/v*g;e.projectionMatrix.makePerspective(y,S,R,w,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(C,w,L):C.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*br*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,C,t)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==h||null!==p)return a},this.setFoveation=function(e){a=e,null!==h&&(h.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)};let I=null;const D=new Va;D.setAnimationLoop((function(t,i){if(u=i.getViewerPose(l||o),d=i,null!==u){const t=u.views;null!==p&&(e.setRenderTargetFramebuffer(g,p.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==C.cameras.length&&(C.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let o=null;if(null!==p)o=p.getViewport(r);else{const t=c.getViewSubImage(h,r);o=t.viewport,0===i&&(e.setRenderTargetTextures(g,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=b[i];void 0===s&&(s=new Da,s.layers.enable(i),s.viewport=new io,b[i]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===i&&(C.matrix.copy(s.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===n&&C.cameras.push(s)}}for(let e=0;e<v.length;e++){const t=y[e],n=v[e];null!==t&&void 0!==n&&n.update(t,i,l||o)}I&&I(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),d=null})),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}}function Ac(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(i,r){i.opacity.value=r.opacity,r.color&&i.diffuse.value.copy(r.color),r.emissive&&i.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(i.map.value=r.map,n(r.map,i.mapTransform)),r.alphaMap&&(i.alphaMap.value=r.alphaMap,n(r.alphaMap,i.alphaMapTransform)),r.bumpMap&&(i.bumpMap.value=r.bumpMap,n(r.bumpMap,i.bumpMapTransform),i.bumpScale.value=r.bumpScale,r.side===qe&&(i.bumpScale.value*=-1)),r.normalMap&&(i.normalMap.value=r.normalMap,n(r.normalMap,i.normalMapTransform),i.normalScale.value.copy(r.normalScale),r.side===qe&&i.normalScale.value.negate()),r.displacementMap&&(i.displacementMap.value=r.displacementMap,n(r.displacementMap,i.displacementMapTransform),i.displacementScale.value=r.displacementScale,i.displacementBias.value=r.displacementBias),r.emissiveMap&&(i.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,i.emissiveMapTransform)),r.specularMap&&(i.specularMap.value=r.specularMap,n(r.specularMap,i.specularMapTransform)),r.alphaTest>0&&(i.alphaTest.value=r.alphaTest);const o=t.get(r).envMap;if(o&&(i.envMap.value=o,i.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,i.reflectivity.value=r.reflectivity,i.ior.value=r.ior,i.refractionRatio.value=r.refractionRatio),r.lightMap){i.lightMap.value=r.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;i.lightMapIntensity.value=r.lightMapIntensity*t,n(r.lightMap,i.lightMapTransform)}r.aoMap&&(i.aoMap.value=r.aoMap,i.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,i.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Ta(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,r,o,s,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(e,r):r.isMeshToonMaterial?(i(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(i(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(i(e,r),function(e,i){e.metalness.value=i.metalness,i.metalnessMap&&(e.metalnessMap.value=i.metalnessMap,n(i.metalnessMap,e.metalnessMapTransform));e.roughness.value=i.roughness,i.roughnessMap&&(e.roughnessMap.value=i.roughnessMap,n(i.roughnessMap,e.roughnessMapTransform));const r=t.get(i).envMap;r&&(e.envMapIntensity.value=i.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,i){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===qe&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=i.texture,e.transmissionSamplerSize.value.set(i.width,i.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,a)):r.isMeshMatcapMaterial?(i(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?i(e,r):r.isMeshDistanceMaterial?(i(e,r),function(e,n){const i=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(i.matrixWorld),e.nearDistance.value=i.shadow.camera.near,e.farDistance.value=i.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?i(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,i,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*i,e.scale.value=.5*r,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,o,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Ec(e,t,n,i){let r={},o={},s=[];const a=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n,i){const r=e.value,o=t+"_"+n;if(void 0===i[o])return i[o]="number"===typeof r||"boolean"===typeof r?r:r.clone(),!0;{const e=i[o];if("number"===typeof r||"boolean"===typeof r){if(e!==r)return i[o]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}function u(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){const n=t.target;n.removeEventListener("dispose",c);const i=s.indexOf(n.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,h){let p=r[n.id];void 0===p&&(!function(e){const t=e.uniforms;let n=0;const i=16;for(let o=0,s=t.length;o<s;o++){const e=Array.isArray(t[o])?t[o]:[t[o]];for(let t=0,r=e.length;t<r;t++){const r=e[t],o=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=o.length;e<t;e++){const t=u(o[e]),s=n%i;0!==s&&i-s<t.boundary&&(n+=i-s),r.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=t.storage}}}const r=n%i;r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),p=function(t){const n=function(){for(let e=0;e<a;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,i),e.bufferData(e.UNIFORM_BUFFER,r,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=p,n.addEventListener("dispose",c));const d=h.program;i.updateUBOMapping(n,d);const f=t.render.frame;o[n.id]!==f&&(!function(t){const n=r[t.id],i=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let r=0,s=i.length;r<s;r++){const t=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=t.length;n<i;n++){const i=t[n];if(!0===l(i,r,n,o)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let o=0;o<n.length;o++){const s=n[o],a=u(s);"number"===typeof s||"boolean"===typeof s?(i.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):s.isMatrix3?(i.__data[0]=s.elements[0],i.__data[1]=s.elements[1],i.__data[2]=s.elements[2],i.__data[3]=0,i.__data[4]=s.elements[3],i.__data[5]=s.elements[4],i.__data[6]=s.elements[5],i.__data[7]=0,i.__data[8]=s.elements[6],i.__data[9]=s.elements[7],i.__data[10]=s.elements[8],i.__data[11]=0):(s.toArray(i.__data,r),r+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),o[n.id]=f)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},o={}}}}class xc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=zr(),context:n=null,depth:i=!0,stencil:r=!0,alpha:o=!1,antialias:s=!1,premultipliedAlpha:a=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:c=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==n?n.getContextAttributes().alpha:o;const p=new Uint32Array(4),d=new Int32Array(4);let f=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ei,this._useLegacyLights=!1,this.toneMapping=Mt,this.toneMappingExposure=1;const y=this;let S=!1,R=0,w=0,L=null,b=-1,C=null;const _=new io,A=new io;let E=null;const x=new Ms(0);let P=0,T=t.width,M=t.height,k=1,I=null,D=null;const O=new io(0,0,T,M),B=new io(0,0,T,M);let U=!1;const N=new qa;let F=!1,z=!1,j=null;const H=new Go,G=new Ir,W=new po,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return null===L?k:1}let J,K,X,Y,Q,Z,$,ee,te,ne,ie,re,oe,se,ae,le,ue,ce,he,pe,de,fe,me,ge,ve=n;function ye(e,n){for(let i=0;i<e.length;i++){const r=e[i],o=t.getContext(r,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(Ie)),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",Le,!1),t.addEventListener("webglcontextcreationerror",be,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&t.shift(),ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&ve instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ne){throw console.error("THREE.WebGLRenderer: "+Ne.message),Ne}function Se(){J=new Ll(ve),K=new nl(ve,J,e),J.init(K),fe=new Rc(ve,J,K),X=new yc(ve,J,K),Y=new _l(ve),Q=new rc,Z=new Sc(ve,J,X,Q,K,fe,Y),$=new rl(y),ee=new wl(y),te=new Ja(ve,K),me=new el(ve,J,te,K),ne=new bl(ve,te,Y,me),ie=new Pl(ve,ne,te,Y),he=new xl(ve,K,Z),le=new il(Q),re=new ic(y,$,ee,J,K,me,le),oe=new Ac(y,Q),se=new lc,ae=new fc(J,K),ce=new $a(y,$,ee,X,ie,h,a),ue=new vc(y,ie,K),ge=new Ec(ve,Y,K,X),pe=new tl(ve,J,Y,K),de=new Cl(ve,J,Y,K),Y.programs=re.programs,y.capabilities=K,y.extensions=J,y.properties=Q,y.renderLists=se,y.shadowMap=ue,y.state=X,y.info=Y}Se();const Re=new _c(y,ve);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Le(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const e=Y.autoReset,t=ue.enabled,n=ue.autoUpdate,i=ue.needsUpdate,r=ue.type;Se(),Y.autoReset=e,ue.enabled=t,ue.autoUpdate=n,ue.needsUpdate=i,ue.type=r}function be(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ce(e){const t=e.target;t.removeEventListener("dispose",Ce),function(e){(function(e){const t=Q.get(e).programs;void 0!==t&&(t.forEach((function(e){re.releaseProgram(e)})),e.isShaderMaterial&&re.releaseShaderCache(e))})(e),Q.remove(e)}(t)}function _e(e,t,n){!0===e.transparent&&e.side===Ve&&!1===e.forceSinglePass?(e.side=qe,e.needsUpdate=!0,Oe(e,t,n),e.side=We,e.needsUpdate=!0,Oe(e,t,n),e.side=Ve):Oe(e,t,n)}this.xr=Re,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=J.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=J.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(T,M,!1))},this.getSize=function(e){return e.set(T,M)},this.setSize=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Re.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=e,M=n,t.width=Math.floor(e*k),t.height=Math.floor(n*k),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(T*k,M*k).floor()},this.setDrawingBufferSize=function(e,n,i){T=e,M=n,k=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(_)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,n,i){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,i),X.viewport(_.copy(O).multiplyScalar(k).floor())},this.getScissor=function(e){return e.copy(B)},this.setScissor=function(e,t,n,i){e.isVector4?B.set(e.x,e.y,e.z,e.w):B.set(e,t,n,i),X.scissor(A.copy(B).multiplyScalar(k).floor())},this.getScissorTest=function(){return U},this.setScissorTest=function(e){X.setScissorTest(U=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){D=e},this.getClearColor=function(e){return e.copy(ce.getClearColor())},this.setClearColor=function(){ce.setClearColor.apply(ce,arguments)},this.getClearAlpha=function(){return ce.getClearAlpha()},this.setClearAlpha=function(){ce.setClearAlpha.apply(ce,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==L){const t=L.texture.format;e=t===En||t===An||t===Cn}if(e){const e=L.texture.type,t=e===sn||e===hn||e===un||e===gn||e===fn||e===mn,n=ce.getClearColor(),i=ce.getClearAlpha(),r=n.r,o=n.g,s=n.b;t?(p[0]=r,p[1]=o,p[2]=s,p[3]=i,ve.clearBufferuiv(ve.COLOR,0,p)):(d[0]=r,d[1]=o,d[2]=s,d[3]=i,ve.clearBufferiv(ve.COLOR,0,d))}else n|=ve.COLOR_BUFFER_BIT}e&&(n|=ve.DEPTH_BUFFER_BIT),t&&(n|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",Le,!1),t.removeEventListener("webglcontextcreationerror",be,!1),se.dispose(),ae.dispose(),Q.dispose(),$.dispose(),ee.dispose(),ie.dispose(),me.dispose(),ge.dispose(),re.dispose(),Re.dispose(),Re.removeEventListener("sessionstart",Ee),Re.removeEventListener("sessionend",xe),j&&(j.dispose(),j=null),Pe.stop()},this.renderBufferDirect=function(e,t,n,i,r,o){null===t&&(t=q);const s=r.isMesh&&r.matrixWorld.determinant()<0,a=function(e,t,n,i,r){!0!==t.isScene&&(t=q);Z.resetTextureUnits();const o=t.fog,s=i.isMeshStandardMaterial?t.environment:null,a=null===L?y.outputColorSpace:!0===L.isXRRenderTarget?L.texture.colorSpace:xi,l=(i.isMeshStandardMaterial?ee:$).get(i.envMap||s),u=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),h=!!n.morphAttributes.position,p=!!n.morphAttributes.normal,d=!!n.morphAttributes.color;let f=Mt;i.toneMapped&&(null!==L&&!0!==L.isXRRenderTarget||(f=y.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,S=Q.get(i),R=m.state.lights;if(!0===F&&(!0===z||e!==C)){const t=e===C&&i.id===b;le.setState(i,e,t)}let w=!1;i.version===S.__version?S.needsLights&&S.lightsStateVersion!==R.state.version||S.outputColorSpace!==a||r.isBatchedMesh&&!1===S.batching?w=!0:r.isBatchedMesh||!0!==S.batching?r.isInstancedMesh&&!1===S.instancing?w=!0:r.isInstancedMesh||!0!==S.instancing?r.isSkinnedMesh&&!1===S.skinning?w=!0:r.isSkinnedMesh||!0!==S.skinning?r.isInstancedMesh&&!0===S.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===S.instancingColor&&null!==r.instanceColor||S.envMap!==l||!0===i.fog&&S.fog!==o?w=!0:void 0===S.numClippingPlanes||S.numClippingPlanes===le.numPlanes&&S.numIntersection===le.numIntersection?(S.vertexAlphas!==u||S.vertexTangents!==c||S.morphTargets!==h||S.morphNormals!==p||S.morphColors!==d||S.toneMapping!==f||!0===K.isWebGL2&&S.morphTargetsCount!==v)&&(w=!0):w=!0:w=!0:w=!0:w=!0:(w=!0,S.__version=i.version);let _=S.currentProgram;!0===w&&(_=Oe(i,t,r));let A=!1,E=!1,x=!1;const P=_.getUniforms(),T=S.uniforms;X.useProgram(_.program)&&(A=!0,E=!0,x=!0);i.id!==b&&(b=i.id,E=!0);if(A||C!==e){P.setValue(ve,"projectionMatrix",e.projectionMatrix),P.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=P.map.cameraPosition;void 0!==t&&t.setValue(ve,W.setFromMatrixPosition(e.matrixWorld)),K.logarithmicDepthBuffer&&P.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&P.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,E=!0,x=!0)}if(r.isSkinnedMesh){P.setOptional(ve,r,"bindMatrix"),P.setOptional(ve,r,"bindMatrixInverse");const e=r.skeleton;e&&(K.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),P.setValue(ve,"boneTexture",e.boneTexture,Z)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}r.isBatchedMesh&&(P.setOptional(ve,r,"batchingTexture"),P.setValue(ve,"batchingTexture",r._matricesTexture,Z));const I=n.morphAttributes;(void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===K.isWebGL2)&&he.update(r,n,_);(E||S.receiveShadow!==r.receiveShadow)&&(S.receiveShadow=r.receiveShadow,P.setValue(ve,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(T.envMap.value=l,T.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);E&&(P.setValue(ve,"toneMappingExposure",y.toneMappingExposure),S.needsLights&&(O=x,(D=T).ambientLightColor.needsUpdate=O,D.lightProbe.needsUpdate=O,D.directionalLights.needsUpdate=O,D.directionalLightShadows.needsUpdate=O,D.pointLights.needsUpdate=O,D.pointLightShadows.needsUpdate=O,D.spotLights.needsUpdate=O,D.spotLightShadows.needsUpdate=O,D.rectAreaLights.needsUpdate=O,D.hemisphereLights.needsUpdate=O),o&&!0===i.fog&&oe.refreshFogUniforms(T,o),oe.refreshMaterialUniforms(T,i,k,M,j),Ou.upload(ve,Be(S),T,Z));var D,O;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Ou.upload(ve,Be(S),T,Z),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&P.setValue(ve,"center",r.center);if(P.setValue(ve,"modelViewMatrix",r.modelViewMatrix),P.setValue(ve,"normalMatrix",r.normalMatrix),P.setValue(ve,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(K.isWebGL2){const n=e[t];ge.update(n,_),ge.bind(n,_)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return _}(e,t,n,i,r);X.setMaterial(i,s);let l=n.index,u=1;if(!0===i.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;u=2}const c=n.drawRange,h=n.attributes.position;let p=c.start*u,d=(c.start+c.count)*u;null!==o&&(p=Math.max(p,o.start*u),d=Math.min(d,(o.start+o.count)*u)),null!==l?(p=Math.max(p,0),d=Math.min(d,l.count)):void 0!==h&&null!==h&&(p=Math.max(p,0),d=Math.min(d,h.count));const f=d-p;if(f<0||f===1/0)return;let g;me.setup(r,i,a,n,l);let v=pe;if(null!==l&&(g=te.get(l),v=de,v.setIndex(g)),r.isMesh)!0===i.wireframe?(X.setLineWidth(i.wireframeLinewidth*V()),v.setMode(ve.LINES)):v.setMode(ve.TRIANGLES);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),X.setLineWidth(e*V()),r.isLineSegments?v.setMode(ve.LINES):r.isLineLoop?v.setMode(ve.LINE_LOOP):v.setMode(ve.LINE_STRIP)}else r.isPoints?v.setMode(ve.POINTS):r.isSprite&&v.setMode(ve.TRIANGLES);if(r.isBatchedMesh)v.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else if(r.isInstancedMesh)v.renderInstances(p,f,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(p,f,t)}else v.render(p,f)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),m=ae.get(n),m.init(),v.push(m),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights(y._useLegacyLights);const i=new Set;return e.traverse((function(e){const t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){const o=t[r];_e(o,n,e),i.add(o)}else _e(t,n,e),i.add(t)})),v.pop(),m=null,i},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.compile(e,t,n);return new Promise((t=>{function n(){i.forEach((function(e){Q.get(e).currentProgram.isReady()&&i.delete(e)})),0!==i.size?setTimeout(n,10):t(e)}null!==J.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Ae=null;function Ee(){Pe.stop()}function xe(){Pe.start()}const Pe=new Va;function Te(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){i&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=ie.update(e),r=e.material;r.visible&&f.push(e,t,r,n,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||N.intersectsObject(e))){const t=ie.update(e),r=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),W.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),W.copy(t.boundingSphere.center)),W.applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(r)){const i=t.groups;for(let o=0,s=i.length;o<s;o++){const s=i[o],a=r[s.materialIndex];a&&a.visible&&f.push(e,t,a,n,W.z,s)}}else r.visible&&f.push(e,t,r,n,W.z,null)}const r=e.children;for(let o=0,s=r.length;o<s;o++)Te(r[o],t,n,i)}function Me(e,t,n,i){const r=e.opaque,o=e.transmissive,s=e.transparent;m.setupLightsView(n),!0===F&&le.setGlobalState(y.clippingPlanes,n),o.length>0&&function(e,t,n,i){const r=!0===n.isScene?n.overrideMaterial:null;if(null!==r)return;const o=K.isWebGL2;null===j&&(j=new oo(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?dn:sn,minFilter:rn,samples:o?4:0}));y.getDrawingBufferSize(G),o?j.setSize(G.x,G.y):j.setSize(Pr(G.x),Pr(G.y));const s=y.getRenderTarget();y.setRenderTarget(j),y.getClearColor(x),P=y.getClearAlpha(),P<1&&y.setClearColor(16777215,.5);y.clear();const a=y.toneMapping;y.toneMapping=Mt,ke(e,n,i),Z.updateMultisampleRenderTarget(j),Z.updateRenderTargetMipmap(j);let l=!1;for(let u=0,c=t.length;u<c;u++){const e=t[u],r=e.object,o=e.geometry,s=e.material,a=e.group;if(s.side===Ve&&r.layers.test(i.layers)){const e=s.side;s.side=qe,s.needsUpdate=!0,De(r,n,i,o,s,a),s.side=e,s.needsUpdate=!0,l=!0}}!0===l&&(Z.updateMultisampleRenderTarget(j),Z.updateRenderTargetMipmap(j));y.setRenderTarget(s),y.setClearColor(x,P),y.toneMapping=a}(r,o,t,n),i&&X.viewport(_.copy(i)),r.length>0&&ke(r,t,n),o.length>0&&ke(o,t,n),s.length>0&&ke(s,t,n),X.buffers.depth.setTest(!0),X.buffers.depth.setMask(!0),X.buffers.color.setMask(!0),X.setPolygonOffset(!1)}function ke(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,o=e.length;r<o;r++){const o=e[r],s=o.object,a=o.geometry,l=null===i?o.material:i,u=o.group;s.layers.test(n.layers)&&De(s,t,n,a,l,u)}}function De(e,t,n,i,r,o){e.onBeforeRender(y,t,n,i,r,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(y,t,n,i,e,o),!0===r.transparent&&r.side===Ve&&!1===r.forceSinglePass?(r.side=qe,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,o),r.side=We,r.needsUpdate=!0,y.renderBufferDirect(n,t,i,r,e,o),r.side=Ve):y.renderBufferDirect(n,t,i,r,e,o),e.onAfterRender(y,t,n,i,r,o)}function Oe(e,t,n){!0!==t.isScene&&(t=q);const i=Q.get(e),r=m.state.lights,o=m.state.shadowsArray,s=r.state.version,a=re.getParameters(e,r.state,o,t,n),l=re.getProgramCacheKey(a);let u=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?ee:$).get(e.envMap||i.environment),void 0===u&&(e.addEventListener("dispose",Ce),u=new Map,i.programs=u);let c=u.get(l);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===s)return Ue(e,a),c}else a.uniforms=re.getUniforms(e),e.onBuild(n,a,y),e.onBeforeCompile(a,y),c=re.acquireProgram(a,l),u.set(l,c),i.uniforms=a.uniforms;const h=i.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=le.uniform),Ue(e,a),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=s,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=c,i.uniformsList=null,c}function Be(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=Ou.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Ue(e,t){const n=Q.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Pe.setAnimationLoop((function(e){Ae&&Ae(e)})),"undefined"!==typeof self&&Pe.setContext(self),this.setAnimationLoop=function(e){Ae=e,Re.setAnimationLoop(e),null===e?Pe.stop():Pe.start()},Re.addEventListener("sessionstart",Ee),Re.addEventListener("sessionend",xe),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===S)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Re.enabled&&!0===Re.isPresenting&&(!0===Re.cameraAutoUpdate&&Re.updateCamera(t),t=Re.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,L),m=ae.get(e,v.length),m.init(),v.push(m),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),N.setFromProjectionMatrix(H),z=this.localClippingEnabled,F=le.init(this.clippingPlanes,z),f=se.get(e,g.length),f.init(),g.push(f),Te(e,t,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(I,D),this.info.render.frame++,!0===F&&le.beginShadows();const n=m.state.shadowsArray;if(ue.render(n,e,t),!0===F&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ce.render(f,e),m.setupLights(y._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Me(f,e,i,i.viewport)}}else Me(f,e,t);null!==L&&(Z.updateMultisampleRenderTarget(L),Z.updateRenderTargetMipmap(L)),!0===e.isScene&&e.onAfterRender(y,e,t),me.resetDefaultState(),b=-1,C=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(e,t,n){Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=n;const i=Q.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===J.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;L=e,R=t,w=n;let i=!0,r=null,o=!1,s=!1;if(e){const a=Q.get(e);void 0!==a.__useDefaultFramebuffer?(X.bindFramebuffer(ve.FRAMEBUFFER,null),i=!1):void 0===a.__webglFramebuffer?Z.setupRenderTarget(e):a.__hasExternalTextures&&Z.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const u=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=Array.isArray(u[t])?u[t][n]:u[t],o=!0):r=K.isWebGL2&&e.samples>0&&!1===Z.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:Array.isArray(u)?u[n]:u,_.copy(e.viewport),A.copy(e.scissor),E=e.scissorTest}else _.copy(O).multiplyScalar(k).floor(),A.copy(B).multiplyScalar(k).floor(),E=U;if(X.bindFramebuffer(ve.FRAMEBUFFER,r)&&K.drawBuffers&&i&&X.drawBuffers(e,r),X.viewport(_),X.scissor(A),X.setScissorTest(E),o){const i=Q.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,n)}else if(s){const i=Q.get(e.texture),r=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,i.__webglTexture,n||0,r)}b=-1},this.readRenderTargetPixels=function(e,t,n,i,r,o,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){X.bindFramebuffer(ve.FRAMEBUFFER,a);try{const s=e.texture,a=s.format,l=s.type;if(a!==yn&&fe.convert(a)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===dn&&(J.has("EXT_color_buffer_half_float")||K.isWebGL2&&J.has("EXT_color_buffer_float"));if(l!==sn&&fe.convert(l)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==pn||!(K.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!u)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&ve.readPixels(t,n,i,r,fe.convert(a),fe.convert(l),o)}finally{const e=null!==L?Q.get(L).__webglFramebuffer:null;X.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),o=Math.floor(t.image.height*i);Z.setTexture2D(t,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,e.x,e.y,r,o),X.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=t.image.width,o=t.image.height,s=fe.convert(n.format),a=fe.convert(n.type);Z.setTexture2D(n,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,n.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,r,o,s,a,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ve.texSubImage2D(ve.TEXTURE_2D,i,e.x,e.y,s,a,t.image),0===i&&n.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),X.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,a=e.max.z-e.min.z+1,l=fe.convert(i.format),u=fe.convert(i.type);let c;if(i.isData3DTexture)Z.setTexture3D(i,0),c=ve.TEXTURE_3D;else{if(!i.isDataArrayTexture&&!i.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(i,0),c=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,i.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,i.unpackAlignment);const h=ve.getParameter(ve.UNPACK_ROW_LENGTH),p=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),d=ve.getParameter(ve.UNPACK_SKIP_PIXELS),f=ve.getParameter(ve.UNPACK_SKIP_ROWS),m=ve.getParameter(ve.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[r]:n.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,g.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,g.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,e.min.x),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,e.min.y),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(c,r,t.x,t.y,t.z,o,s,a,l,u,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(c,r,t.x,t.y,t.z,o,s,a,l,g.data)):ve.texSubImage3D(c,r,t.x,t.y,t.z,o,s,a,l,u,g),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,h),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,p),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,d),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,f),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,m),0===r&&i.generateMipmaps&&ve.generateMipmap(c),X.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Z.setTextureCube(e,0):e.isData3DTexture?Z.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Z.setTexture2DArray(e,0):Z.setTexture2D(e,0),X.unbindTexture()},this.resetState=function(){R=0,w=0,L=null,X.reset(),me.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return vr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Pi?"display-p3":"srgb",t.unpackColorSpace=Jr.workingColorSpace===Ti?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Ei?wi:Ri}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===wi?Ei:xi}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Pc extends xc{}Pc.prototype.isWebGL1Renderer=!0;class Tc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new Ms(e),this.density=t}clone(){return new Tc(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Mc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new Ms(e),this.near=t,this.far=n}clone(){return new Mc(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class kc extends fs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Ic{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=or,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Cr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Dc=new po;class Oc{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Dc.fromBufferAttribute(this,t),Dc.applyMatrix4(e),this.setXYZ(t,Dc.x,Dc.y,Dc.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Dc.fromBufferAttribute(this,t),Dc.applyNormalMatrix(e),this.setXYZ(t,Dc.x,Dc.y,Dc.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Dc.fromBufferAttribute(this,t),Dc.transformDirection(e),this.setXYZ(t,Dc.x,Dc.y,Dc.z);return this}setX(e,t){return this.normalized&&(t=Mr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Mr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Mr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Mr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Tr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Tr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Tr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Tr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mr(t,this.array),n=Mr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mr(t,this.array),n=Mr(n,this.array),i=Mr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Mr(t,this.array),n=Mr(n,this.array),i=Mr(i,this.array),r=Mr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Gs(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Oc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Bc extends Ds{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ms(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Uc;const Nc=new po,Fc=new po,zc=new po,jc=new Ir,Hc=new Ir,Gc=new Go,Wc=new po,qc=new po,Vc=new po,Jc=new Ir,Kc=new Ir,Xc=new Ir;class Yc extends fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Bc;if(super(),this.isSprite=!0,this.type="Sprite",void 0===Uc){Uc=new aa;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Ic(e,5);Uc.setIndex([0,1,2,0,2,3]),Uc.setAttribute("position",new Oc(t,3,0,!1)),Uc.setAttribute("uv",new Oc(t,2,3,!1))}this.geometry=Uc,this.material=e,this.center=new Ir(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Fc.setFromMatrixScale(this.matrixWorld),Gc.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),zc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Fc.multiplyScalar(-zc.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;Qc(Wc.set(-.5,-.5,0),zc,o,Fc,i,r),Qc(qc.set(.5,-.5,0),zc,o,Fc,i,r),Qc(Vc.set(.5,.5,0),zc,o,Fc,i,r),Jc.set(0,0),Kc.set(1,0),Xc.set(1,1);let s=e.ray.intersectTriangle(Wc,qc,Vc,!1,Nc);if(null===s&&(Qc(qc.set(-.5,.5,0),zc,o,Fc,i,r),Kc.set(0,1),s=e.ray.intersectTriangle(Wc,Vc,qc,!1,Nc),null===s))return;const a=e.ray.origin.distanceTo(Nc);a<e.near||a>e.far||t.push({distance:a,point:Nc.clone(),uv:As.getInterpolation(Nc,Wc,qc,Vc,Jc,Kc,Xc,new Ir),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Qc(e,t,n,i,r,o){jc.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Hc.x=o*jc.x-r*jc.y,Hc.y=r*jc.x+o*jc.y):Hc.copy(jc),e.copy(t),e.x+=Hc.x,e.y+=Hc.y,e.applyMatrix4(Gc)}const Zc=new po,$c=new po;class eh extends fs{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Zc.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Zc);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Zc.setFromMatrixPosition(e.matrixWorld),$c.setFromMatrixPosition(this.matrixWorld);const n=Zc.distanceTo($c)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const th=new po,nh=new io,ih=new io,rh=new po,oh=new Go,sh=new po,ah=new Do,lh=new Go,uh=new Ho;class ch extends _a{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Nt,this.bindMatrix=new Go,this.bindMatrixInverse=new Go,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new go),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,sh),this.boundingBox.expandByPoint(sh)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Do),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,sh),this.boundingSphere.expandByPoint(sh)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),ah.copy(this.boundingSphere),ah.applyMatrix4(i),!1!==e.ray.intersectsSphere(ah)&&(lh.copy(i).invert(),uh.copy(e.ray).applyMatrix4(lh),null!==this.boundingBox&&!1===uh.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,uh)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new io,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Nt?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ft?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;nh.fromBufferAttribute(i.attributes.skinIndex,e),ih.fromBufferAttribute(i.attributes.skinWeight,e),th.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=ih.getComponent(r);if(0!==e){const i=nh.getComponent(r);oh.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(rh.copy(th).applyMatrix4(oh),e)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class hh extends fs{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ph extends no{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:Xt,arguments.length>9&&void 0!==arguments[9]?arguments[9]:Xt,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const dh=new Go,fh=new Go;class mh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Cr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Go)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Go;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const i=e[r]?e[r].matrixWorld:fh;dh.multiplyMatrices(i,t[r]),dh.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new mh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new ph(t,e,e,yn,pn);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new hh),this.bones.push(r),this.boneInverses.push((new Go).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class gh extends Gs{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const vh=new Go,yh=new Go,Sh=[],Rh=new go,wh=new Go,Lh=new _a,bh=new Do;class Ch extends _a{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new gh(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,wh)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new go),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,vh),Rh.copy(e.boundingBox).applyMatrix4(vh),this.boundingBox.union(Rh)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Do),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,vh),bh.copy(e.boundingSphere).applyMatrix4(vh),this.boundingSphere.union(bh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Lh.geometry=this.geometry,Lh.material=this.material,void 0!==Lh.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),bh.copy(this.boundingSphere),bh.applyMatrix4(n),!1!==e.ray.intersectsSphere(bh)))for(let r=0;r<i;r++){this.getMatrixAt(r,vh),yh.multiplyMatrices(n,vh),Lh.matrixWorld=yh,Lh.raycast(e,Sh);for(let e=0,n=Sh.length;e<n;e++){const n=Sh[e];n.instanceId=r,n.object=this,t.push(n)}Sh.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new gh(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function _h(e,t){return e.z-t.z}function Ah(e,t){return t.z-e.z}class Eh{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const n=this.pool,i=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const r=n[this.index];i.push(r),this.index++,r.start=e.start,r.count=e.count,r.z=t}reset(){this.list.length=0,this.index=0}}const xh="batchId",Ph=new Go,Th=new Go,Mh=new Go,kh=new Go,Ih=new qa,Dh=new go,Oh=new Do,Bh=new po,Uh=new Eh,Nh=new _a,Fh=[];function zh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const r=e.count;for(let o=0;o<r;o++)for(let r=0;r<i;r++)t.setComponent(o+n,r,e.getComponent(o,r))}else t.array.set(e.array,n*i);t.needsUpdate=!0}class jh extends _a{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,i=arguments.length>3?arguments[3]:void 0;super(new aa,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxGeometryCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new ph(t,e,e,yn,pn);this._matricesTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxGeometryCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(const i in e.attributes){const r=e.getAttribute(i),{array:o,itemSize:s,normalized:a}=r,l=new o.constructor(n*s),u=new r.constructor(l,s,a);u.setUsage(r.usage),t.setAttribute(i,u)}if(null!==e.getIndex()){const e=n>65536?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Gs(e,1))}const o=i>65536?new Uint32Array(n):new Uint16Array(n);t.setAttribute(xh,new Gs(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(xh))throw new Error('BatchedMesh: Geometry cannot use attribute "'.concat(xh,'"'));const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(n===xh)continue;if(!e.hasAttribute(n))throw new Error('BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));const i=e.getAttribute(n),r=t.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new go);const e=this._geometryCount,t=this.boundingBox,n=this._active;t.makeEmpty();for(let i=0;i<e;i++)!1!==n[i]&&(this.getMatrixAt(i,Ph),this.getBoundingBoxAt(i,Dh).applyMatrix4(Ph),t.union(Dh))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Do);const e=this._geometryCount,t=this.boundingSphere,n=this._active;t.makeEmpty();for(let i=0;i<e;i++)!1!==n[i]&&(this.getMatrixAt(i,Ph),this.getBoundingSphereAt(i,Oh).applyMatrix4(Ph),t.union(Oh))}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let r=null;const o=this._reservedRanges,s=this._drawRanges,a=this._bounds;0!==this._geometryCount&&(r=o[o.length-1]),i.vertexCount=-1===t?e.getAttribute("position").count:t,i.vertexStart=null===r?0:r.vertexStart+r.vertexCount;const l=e.getIndex(),u=null!==l;if(u&&(i.indexCount=-1===n?l.count:n,i.indexStart=null===r?0:r.indexStart+r.indexCount),-1!==i.indexStart&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const c=this._visibility,h=this._active,p=this._matricesTexture,d=this._matricesTexture.image.data;c.push(!0),h.push(!0);const f=this._geometryCount;this._geometryCount++,Mh.toArray(d,16*f),p.needsUpdate=!0,o.push(i),s.push({start:u?i.indexStart:i.vertexStart,count:-1}),a.push({boxInitialized:!1,box:new go,sphereInitialized:!1,sphere:new Do});const m=this.geometry.getAttribute(xh);for(let g=0;g<i.vertexCount;g++)m.setX(i.vertexStart+g,f);return m.needsUpdate=!0,this.setGeometryAt(f,e),f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=null!==n.getIndex(),r=n.getIndex(),o=t.getIndex(),s=this._reservedRanges[e];if(i&&o.count>s.indexCount||t.attributes.position.count>s.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const a=s.vertexStart,l=s.vertexCount;for(const p in n.attributes){if(p===xh)continue;const e=t.getAttribute(p),i=n.getAttribute(p);zh(e,i,a);const r=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=a+t;for(let t=0;t<r;t++)i.setComponent(e,t,0)}i.needsUpdate=!0}if(i){const e=s.indexStart;for(let t=0;t<o.count;t++)r.setX(e+t,a+o.getX(t));for(let t=o.count,n=s.indexCount;t<n;t++)r.setX(e+t,a);r.needsUpdate=!0}const u=this._bounds[e];null!==t.boundingBox?(u.box.copy(t.boundingBox),u.boxInitialized=!0):u.boxInitialized=!1,null!==t.boundingSphere?(u.sphere.copy(t.boundingSphere),u.sphereInitialized=!0):u.sphereInitialized=!1;const c=this._drawRanges[e],h=t.getAttribute("position");return c.count=i?o.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||!1===t[e]||(t[e]=!1,this._visibilityChanged=!0),this}getBoundingBoxAt(e,t){if(!1===this._active[e])return this;const n=this._bounds[e],i=n.box,r=this.geometry;if(!1===n.boxInitialized){i.makeEmpty();const t=r.index,o=r.attributes.position,s=this._drawRanges[e];for(let e=s.start,n=s.start+s.count;e<n;e++){let n=e;t&&(n=t.getX(n)),i.expandByPoint(Bh.fromBufferAttribute(o,n))}n.boxInitialized=!0}return t.copy(i),t}getBoundingSphereAt(e,t){if(!1===this._active[e])return this;const n=this._bounds[e],i=n.sphere,r=this.geometry;if(!1===n.sphereInitialized){i.makeEmpty(),this.getBoundingBoxAt(e,Dh),Dh.getCenter(i.center);const t=r.index,o=r.attributes.position,s=this._drawRanges[e];let a=0;for(let e=s.start,n=s.start+s.count;e<n;e++){let n=e;t&&(n=t.getX(n)),Bh.fromBufferAttribute(o,n),a=Math.max(a,i.center.distanceToSquared(Bh))}i.radius=Math.sqrt(a),n.sphereInitialized=!0}return t.copy(i),t}setMatrixAt(e,t){const n=this._active,i=this._matricesTexture,r=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]||(t.toArray(r,16*e),i.needsUpdate=!0),this}getMatrixAt(e,t){const n=this._active,i=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]?null:t.fromArray(i,16*e)}setVisibleAt(e,t){const n=this._visibility,i=this._active;return e>=this._geometryCount||!1===i[e]||n[e]===t||(n[e]=t,this._visibilityChanged=!0),this}getVisibleAt(e){const t=this._visibility,n=this._active;return!(e>=this._geometryCount||!1===n[e])&&t[e]}raycast(e,t){const n=this._visibility,i=this._active,r=this._drawRanges,o=this._geometryCount,s=this.matrixWorld,a=this.geometry;Nh.material=this.material,Nh.geometry.index=a.index,Nh.geometry.attributes=a.attributes,null===Nh.geometry.boundingBox&&(Nh.geometry.boundingBox=new go),null===Nh.geometry.boundingSphere&&(Nh.geometry.boundingSphere=new Do);for(let l=0;l<o;l++){if(!n[l]||!i[l])continue;const o=r[l];Nh.geometry.setDrawRange(o.start,o.count),this.getMatrixAt(l,Nh.matrixWorld).premultiply(s),this.getBoundingBoxAt(l,Nh.geometry.boundingBox),this.getBoundingSphereAt(l,Nh.geometry.boundingSphere),Nh.raycast(e,Fh);for(let e=0,n=Fh.length;e<n;e++){const n=Fh[e];n.object=this,n.batchId=l,t.push(n)}Fh.length=0}Nh.material=null,Nh.geometry.index=null,Nh.geometry.attributes={},Nh.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map((e=>({...e}))),this._reservedRanges=e._reservedRanges.map((e=>({...e}))),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map((e=>({boxInitialized:e.boxInitialized,box:e.box.clone(),sphereInitialized:e.sphereInitialized,sphere:e.sphere.clone()}))),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),s=null===o?1:o.array.BYTES_PER_ELEMENT,a=this._visibility,l=this._multiDrawStarts,u=this._multiDrawCounts,c=this._drawRanges,h=this.perObjectFrustumCulled;h&&(kh.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Ih.setFromProjectionMatrix(kh,e.isWebGPURenderer?yr:vr));let p=0;if(this.sortObjects){Th.copy(this.matrixWorld).invert(),Bh.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Th);for(let n=0,i=a.length;n<i;n++)if(a[n]){this.getMatrixAt(n,Ph),this.getBoundingSphereAt(n,Oh).applyMatrix4(Ph);let e=!1;if(h&&(e=!Ih.intersectsSphere(Oh)),!e){const e=Bh.distanceTo(Oh.center);Uh.push(c[n],e)}}const e=Uh.list,t=this.customSort;null===t?e.sort(r.transparent?Ah:_h):t.call(this,e,n);for(let n=0,i=e.length;n<i;n++){const t=e[n];l[p]=t.start*s,u[p]=t.count,p++}Uh.reset()}else for(let d=0,f=a.length;d<f;d++)if(a[d]){let e=!1;if(h&&(this.getMatrixAt(d,Ph),this.getBoundingSphereAt(d,Oh).applyMatrix4(Ph),e=!Ih.intersectsSphere(Oh)),!e){const e=c[d];l[p]=e.start*s,u[p]=e.count,p++}}this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,r,o){this.onBeforeRender(e,null,i,r,o)}}class Hh extends Ds{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ms(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Gh=new po,Wh=new po,qh=new Go,Vh=new Ho,Jh=new Do;class Kh extends fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new aa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hh;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)Gh.fromBufferAttribute(t,e-1),Wh.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Gh.distanceTo(Wh);e.setAttribute("lineDistance",new Zs(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Jh.copy(n.boundingSphere),Jh.applyMatrix4(i),Jh.radius+=r,!1===e.ray.intersectsSphere(Jh))return;qh.copy(i).invert(),Vh.copy(e.ray).applyMatrix4(qh);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new po,u=new po,c=new po,h=new po,p=this.isLineSegments?2:1,d=n.index,f=n.attributes.position;if(null!==d){for(let n=Math.max(0,o.start),i=Math.min(d.count,o.start+o.count)-1;n<i;n+=p){const i=d.getX(n),r=d.getX(n+1);l.fromBufferAttribute(f,i),u.fromBufferAttribute(f,r);if(Vh.distanceSqToSegment(l,u,h,c)>a)continue;h.applyMatrix4(this.matrixWorld);const o=e.ray.origin.distanceTo(h);o<e.near||o>e.far||t.push({distance:o,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),i=Math.min(f.count,o.start+o.count)-1;n<i;n+=p){l.fromBufferAttribute(f,n),u.fromBufferAttribute(f,n+1);if(Vh.distanceSqToSegment(l,u,h,c)>a)continue;h.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(h);i<e.near||i>e.far||t.push({distance:i,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const Xh=new po,Yh=new po;class Qh extends Kh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)Xh.fromBufferAttribute(t,e),Yh.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Xh.distanceTo(Yh);e.setAttribute("lineDistance",new Zs(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Zh extends Kh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class $h extends Ds{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ms(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ep=new Go,tp=new Ho,np=new Do,ip=new po;class rp extends fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new aa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $h;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),np.copy(n.boundingSphere),np.applyMatrix4(i),np.radius+=r,!1===e.ray.intersectsSphere(np))return;ep.copy(i).invert(),tp.copy(e.ray).applyMatrix4(ep);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=n.index,u=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),r=Math.min(l.count,o.start+o.count);n<r;n++){const r=l.getX(n);ip.fromBufferAttribute(u,r),op(ip,r,a,i,e,t,this)}}else{for(let n=Math.max(0,o.start),r=Math.min(u.count,o.start+o.count);n<r;n++)ip.fromBufferAttribute(u,n),op(ip,n,a,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function op(e,t,n,i,r,o,s){const a=tp.distanceSqToPoint(e);if(a<n){const n=new po;tp.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:s})}}class sp extends no{constructor(e,t,n,i,r,o,s,a,l){super(e,t,n,i,r,o,s,a,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:en,this.magFilter=void 0!==r?r:en,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ap extends no{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Xt,this.minFilter=Xt,this.generateMipmaps=!1,this.needsUpdate=!0}}class lp extends no{constructor(e,t,n,i,r,o,s,a,l,u,c,h){super(null,o,s,a,l,u,i,r,c,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class up extends lp{constructor(e,t,n,i,r,o){super(e,t,n,r,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Jt}}class cp extends lp{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,jt),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class hp extends no{constructor(e,t,n,i,r,o,s,a,l){super(e,t,n,i,r,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class pp{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let o;o=t||e*n[r-1];let s,a=0,l=r-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),s=n[i]-o,s<0)a=i+1;else{if(!(s>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(r-1);const u=n[i];return(i+(o-u)/(n[i+1]-u))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),s=this.getPoint(r),a=t||(o.isVector2?new Ir:new po);return a.copy(s).sub(o).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new po,i=[],r=[],o=[],s=new po,a=new Go;for(let p=0;p<=e;p++){const t=p/e;i[p]=this.getTangentAt(t,new po)}r[0]=new po,o[0]=new po;let l=Number.MAX_VALUE;const u=Math.abs(i[0].x),c=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),h<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),o[0].crossVectors(i[0],r[0]);for(let p=1;p<=e;p++){if(r[p]=r[p-1].clone(),o[p]=o[p-1].clone(),s.crossVectors(i[p-1],i[p]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(_r(i[p-1].dot(i[p]),-1,1));r[p].applyMatrix4(a.makeRotationAxis(s,e))}o[p].crossVectors(i[p],r[p])}if(!0===t){let t=Math.acos(_r(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(a.makeRotationAxis(i[n],t*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class dp extends pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(e,t){const n=t||new Ir,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const s=this.aStartAngle+e*r;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,i=l-this.aY;a=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class fp extends dp{constructor(e,t,n,i,r,o){super(e,t,n,n,i,r,o),this.isArcCurve=!0,this.type="ArcCurve"}}function mp(){let e=0,t=0,n=0,i=0;function r(r,o,s,a){e=r,t=s,n=-3*r+3*o-2*s-a,i=2*r-2*o+s+a}return{initCatmullRom:function(e,t,n,i,o){r(t,n,o*(n-e),o*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,o,s,a){let l=(t-e)/o-(n-e)/(o+s)+(n-t)/s,u=(n-t)/s-(i-t)/(s+a)+(i-n)/a;l*=s,u*=s,r(t,n,l,u)},calc:function(r){const o=r*r;return e+t*r+n*o+i*(o*r)}}}const gp=new po,vp=new mp,yp=new mp,Sp=new mp;class Rp extends pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po,n=this.points,i=n.length,r=(i-(this.closed?0:1))*e;let o,s,a=Math.floor(r),l=r-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:0===l&&a===i-1&&(a=i-2,l=1),this.closed||a>0?o=n[(a-1)%i]:(gp.subVectors(n[0],n[1]).add(n[0]),o=gp);const u=n[a%i],c=n[(a+1)%i];if(this.closed||a+2<i?s=n[(a+2)%i]:(gp.subVectors(n[i-1],n[i-2]).add(n[i-1]),s=gp),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(c),e),i=Math.pow(c.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),vp.initNonuniformCatmullRom(o.x,u.x,c.x,s.x,t,n,i),yp.initNonuniformCatmullRom(o.y,u.y,c.y,s.y,t,n,i),Sp.initNonuniformCatmullRom(o.z,u.z,c.z,s.z,t,n,i)}else"catmullrom"===this.curveType&&(vp.initCatmullRom(o.x,u.x,c.x,s.x,this.tension),yp.initCatmullRom(o.y,u.y,c.y,s.y,this.tension),Sp.initCatmullRom(o.z,u.z,c.z,s.z,this.tension));return t.set(vp.calc(l),yp.calc(l),Sp.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new po).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function wp(e,t,n,i,r){const o=.5*(i-t),s=.5*(r-n),a=e*e;return(2*n-2*i+o+s)*(e*a)+(-3*n+3*i-2*o-s)*a+o*e+n}function Lp(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function bp(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class Cp extends pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ir,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ir,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ir,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ir;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ir,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return t.set(bp(e,n.x,i.x,r.x,o.x),bp(e,n.y,i.y,r.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class _p extends pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new po,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new po;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po,n=this.v0,i=this.v1,r=this.v2,o=this.v3;return t.set(bp(e,n.x,i.x,r.x,o.x),bp(e,n.y,i.y,r.y,o.y),bp(e,n.z,i.z,r.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ap extends pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ir,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ir;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ir;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ir).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ep extends pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xp extends pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ir,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ir,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ir;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ir,n=this.v0,i=this.v1,r=this.v2;return t.set(Lp(e,n.x,i.x,r.x),Lp(e,n.y,i.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Pp extends pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new po;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po,n=this.v0,i=this.v1,r=this.v2;return t.set(Lp(e,n.x,i.x,r.x),Lp(e,n.y,i.y,r.y),Lp(e,n.z,i.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Tp extends pp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ir,n=this.points,i=(n.length-1)*e,r=Math.floor(i),o=i-r,s=n[0===r?r:r-1],a=n[r],l=n[r>n.length-2?n.length-1:r+1],u=n[r>n.length-3?n.length-1:r+2];return t.set(wp(o,s.x,a.x,l.x,u.x),wp(o,s.y,a.y,l.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Ir).fromArray(n))}return this}}var Mp=Object.freeze({__proto__:null,ArcCurve:fp,CatmullRomCurve3:Rp,CubicBezierCurve:Cp,CubicBezierCurve3:_p,EllipseCurve:dp,LineCurve:Ap,LineCurve3:Ep,QuadraticBezierCurve:xp,QuadraticBezierCurve3:Pp,SplineCurve:Tp});class kp extends pp{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Mp[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,o=this.curves[r],s=o.getLength(),a=0===s?0:1-e/s;return o.getPointAt(a,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],s=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s);for(let e=0;e<a.length;e++){const i=a[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Mp[n.type]).fromJSON(n))}return this}}class Ip extends kp{constructor(e){super(),this.type="Path",this.currentPoint=new Ir,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Ap(this.currentPoint.clone(),new Ir(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new xp(this.currentPoint.clone(),new Ir(e,t),new Ir(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,o){const s=new Cp(this.currentPoint.clone(),new Ir(e,t),new Ir(n,i),new Ir(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Tp(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+s,t+a,n,i,r,o),this}absarc(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this}ellipse(e,t,n,i,r,o,s,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,i,r,o,s,a),this}absellipse(e,t,n,i,r,o,s,a){const l=new dp(e,t,n,i,r,o,s,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Dp extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Ir(0,-.5),new Ir(.5,0),new Ir(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=_r(i,0,2*Math.PI);const r=[],o=[],s=[],a=[],l=[],u=1/t,c=new po,h=new Ir,p=new po,d=new po,f=new po;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,p.x=1*g,p.y=-m,p.z=0*g,f.copy(p),p.normalize(),a.push(p.x,p.y,p.z);break;case e.length-1:a.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,p.x=1*g,p.y=-m,p.z=0*g,d.copy(p),p.x+=f.x,p.y+=f.y,p.z+=f.z,p.normalize(),a.push(p.x,p.y,p.z),f.copy(d)}for(let v=0;v<=t;v++){const r=n+v*u*i,p=Math.sin(r),d=Math.cos(r);for(let n=0;n<=e.length-1;n++){c.x=e[n].x*p,c.y=e[n].y,c.z=e[n].x*d,o.push(c.x,c.y,c.z),h.x=v/t,h.y=n/(e.length-1),s.push(h.x,h.y);const i=a[3*n+0]*p,r=a[3*n+1],u=a[3*n+0]*d;l.push(i,r,u)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,i=n,o=n+e.length,s=n+e.length+1,a=n+1;r.push(i,o,a),r.push(s,a,o)}this.setIndex(r),this.setAttribute("position",new Zs(o,3)),this.setAttribute("uv",new Zs(s,2)),this.setAttribute("normal",new Zs(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dp(e.points,e.segments,e.phiStart,e.phiLength)}}class Op extends Dp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const r=new Ip;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Op(e.radius,e.length,e.capSegments,e.radialSegments)}}class Bp extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],o=[],s=[],a=[],l=new po,u=new Ir;o.push(0,0,0),s.push(0,0,1),a.push(.5,.5);for(let c=0,h=3;c<=t;c++,h+=3){const r=n+c/t*i;l.x=e*Math.cos(r),l.y=e*Math.sin(r),o.push(l.x,l.y,l.z),s.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,a.push(u.x,u.y)}for(let c=1;c<=t;c++)r.push(c,c+1,0);this.setIndex(r),this.setAttribute("position",new Zs(o,3)),this.setAttribute("normal",new Zs(s,3)),this.setAttribute("uv",new Zs(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Up extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a};const l=this;i=Math.floor(i),r=Math.floor(r);const u=[],c=[],h=[],p=[];let d=0;const f=[],m=n/2;let g=0;function v(n){const r=d,o=new Ir,f=new po;let v=0;const y=!0===n?e:t,S=!0===n?1:-1;for(let e=1;e<=i;e++)c.push(0,m*S,0),h.push(0,S,0),p.push(.5,.5),d++;const R=d;for(let e=0;e<=i;e++){const t=e/i*a+s,n=Math.cos(t),r=Math.sin(t);f.x=y*r,f.y=m*S,f.z=y*n,c.push(f.x,f.y,f.z),h.push(0,S,0),o.x=.5*n+.5,o.y=.5*r*S+.5,p.push(o.x,o.y),d++}for(let e=0;e<i;e++){const t=r+e,i=R+e;!0===n?u.push(i,i+1,t):u.push(i+1,i,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new po,v=new po;let y=0;const S=(t-e)/n;for(let l=0;l<=r;l++){const u=[],g=l/r,y=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*a+s,l=Math.sin(r),f=Math.cos(r);v.x=y*l,v.y=-g*n+m,v.z=y*f,c.push(v.x,v.y,v.z),o.set(l,S,f).normalize(),h.push(o.x,o.y,o.z),p.push(t,1-g),u.push(d++)}f.push(u)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=f[t][e],i=f[t+1][e],r=f[t+1][e+1],o=f[t][e+1];u.push(n,i,o),u.push(i,r,o),y+=6}l.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new Zs(c,3)),this.setAttribute("normal",new Zs(h,3)),this.setAttribute("uv",new Zs(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Up(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Np extends Up{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,i,r,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:s}}static fromJSON(e){return new Np(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Fp extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],o=[];function s(e,t,n,i){const r=i+1,o=[];for(let s=0;s<=r;s++){o[s]=[];const i=e.clone().lerp(n,s/r),a=t.clone().lerp(n,s/r),l=r-s;for(let e=0;e<=l;e++)o[s][e]=0===e&&s===r?i:i.clone().lerp(a,e/l)}for(let s=0;s<r;s++)for(let e=0;e<2*(r-s)-1;e++){const t=Math.floor(e/2);e%2===0?(a(o[s][t+1]),a(o[s+1][t]),a(o[s][t])):(a(o[s][t+1]),a(o[s+1][t+1]),a(o[s+1][t]))}}function a(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function u(e,t,n,i){i<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=i/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new po,i=new po,r=new po;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],i),l(t[o+2],r),s(n,i,r,e)}(i),function(e){const t=new po;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new po;for(let n=0;n<r.length;n+=3){e.x=r[n+0],e.y=r[n+1],e.z=r[n+2];const i=c(e)/2/Math.PI+.5,s=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(i,1-s)}var t;(function(){const e=new po,t=new po,n=new po,i=new po,s=new Ir,a=new Ir,l=new Ir;for(let h=0,p=0;h<r.length;h+=9,p+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),s.set(o[p+0],o[p+1]),a.set(o[p+2],o[p+3]),l.set(o[p+4],o[p+5]),i.copy(e).add(t).add(n).divideScalar(3);const d=c(i);u(s,p+0,e,d),u(a,p+2,t,d),u(l,p+4,n,d)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],i=o[e+4],r=Math.max(t,n,i),s=Math.min(t,n,i);r>.9&&s<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),i<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new Zs(r,3)),this.setAttribute("normal",new Zs(r.slice(),3)),this.setAttribute("uv",new Zs(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fp(e.vertices,e.indices,e.radius,e.details)}}class zp extends Fp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zp(e.radius,e.detail)}}const jp=new po,Hp=new po,Gp=new po,Wp=new As;class qp extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(Lr*t),o=e.getIndex(),s=e.getAttribute("position"),a=o?o.count:s.count,l=[0,0,0],u=["a","b","c"],c=new Array(3),h={},p=[];for(let e=0;e<a;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:a}=Wp;if(t.fromBufferAttribute(s,l[0]),n.fromBufferAttribute(s,l[1]),a.fromBufferAttribute(s,l[2]),Wp.getNormal(Gp),c[0]="".concat(Math.round(t.x*i),",").concat(Math.round(t.y*i),",").concat(Math.round(t.z*i)),c[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),c[2]="".concat(Math.round(a.x*i),",").concat(Math.round(a.y*i),",").concat(Math.round(a.z*i)),c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=c[e],i=c[t],o=Wp[u[e]],s=Wp[u[t]],a="".concat(n,"_").concat(i),d="".concat(i,"_").concat(n);d in h&&h[d]?(Gp.dot(h[d].normal)<=r&&(p.push(o.x,o.y,o.z),p.push(s.x,s.y,s.z)),h[d]=null):a in h||(h[a]={index0:l[e],index1:l[t],normal:Gp.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];jp.fromBufferAttribute(s,t),Hp.fromBufferAttribute(s,n),p.push(jp.x,jp.y,jp.z),p.push(Hp.x,Hp.y,Hp.z)}this.setAttribute("position",new Zs(p,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Vp extends Ip{constructor(e){super(e),this.uuid=Cr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Ip).fromJSON(n))}return this}}const Jp=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=Kp(e,0,r,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,u,c,h,p,d;if(i&&(o=function(e,t,n,i){const r=[];let o,s,a,l,u;for(o=0,s=t.length;o<s;o++)a=t[o]*i,l=o<s-1?t[o+1]*i:e.length,u=Kp(e,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(od(u));for(r.sort(td),o=0;o<r.length;o++)n=nd(r[o],n);return n}(e,t,o,n)),e.length>80*n){a=u=e[0],l=c=e[1];for(let t=n;t<r;t+=n)h=e[t],p=e[t+1],h<a&&(a=h),p<l&&(l=p),h>u&&(u=h),p>c&&(c=p);d=Math.max(u-a,c-l),d=0!==d?32767/d:0}return Yp(o,s,n,a,l,d,0),s};function Kp(e,t,n,i,r){let o,s;if(r===function(e,t,n,i){let r=0;for(let o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}(e,t,n,i)>0)for(o=t;o<n;o+=i)s=md(o,e[o],e[o+1],s);else for(o=n-i;o>=t;o-=i)s=md(o,e[o],e[o+1],s);return s&&ud(s,s.next)&&(gd(s),s=s.next),s}function Xp(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!ud(i,i.next)&&0!==ld(i.prev,i,i.next))i=i.next;else{if(gd(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function Yp(e,t,n,i,r,o,s){if(!e)return;!s&&o&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=rd(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,o,s,a,l,u=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,i=n,a=0,t=0;t<u&&(a++,i=i.nextZ,i);t++);for(l=u;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(s>1)}(r)}(e,i,r,o);let a,l,u=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,o?Zp(e,i,r,o):Qp(e))t.push(a.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),gd(e),e=l.next,u=l.next;else if((e=l)===u){s?1===s?Yp(e=$p(Xp(e),t,n),t,n,i,r,o,2):2===s&&ed(e,t,n,i,r,o):Yp(Xp(e),t,n,i,r,o,1);break}}function Qp(e){const t=e.prev,n=e,i=e.next;if(ld(t,n,i)>=0)return!1;const r=t.x,o=n.x,s=i.x,a=t.y,l=n.y,u=i.y,c=r<o?r<s?r:s:o<s?o:s,h=a<l?a<u?a:u:l<u?l:u,p=r>o?r>s?r:s:o>s?o:s,d=a>l?a>u?a:u:l>u?l:u;let f=i.next;for(;f!==t;){if(f.x>=c&&f.x<=p&&f.y>=h&&f.y<=d&&sd(r,a,o,l,s,u,f.x,f.y)&&ld(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Zp(e,t,n,i){const r=e.prev,o=e,s=e.next;if(ld(r,o,s)>=0)return!1;const a=r.x,l=o.x,u=s.x,c=r.y,h=o.y,p=s.y,d=a<l?a<u?a:u:l<u?l:u,f=c<h?c<p?c:p:h<p?h:p,m=a>l?a>u?a:u:l>u?l:u,g=c>h?c>p?c:p:h>p?h:p,v=rd(d,f,t,n,i),y=rd(m,g,t,n,i);let S=e.prevZ,R=e.nextZ;for(;S&&S.z>=v&&R&&R.z<=y;){if(S.x>=d&&S.x<=m&&S.y>=f&&S.y<=g&&S!==r&&S!==s&&sd(a,c,l,h,u,p,S.x,S.y)&&ld(S.prev,S,S.next)>=0)return!1;if(S=S.prevZ,R.x>=d&&R.x<=m&&R.y>=f&&R.y<=g&&R!==r&&R!==s&&sd(a,c,l,h,u,p,R.x,R.y)&&ld(R.prev,R,R.next)>=0)return!1;R=R.nextZ}for(;S&&S.z>=v;){if(S.x>=d&&S.x<=m&&S.y>=f&&S.y<=g&&S!==r&&S!==s&&sd(a,c,l,h,u,p,S.x,S.y)&&ld(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;R&&R.z<=y;){if(R.x>=d&&R.x<=m&&R.y>=f&&R.y<=g&&R!==r&&R!==s&&sd(a,c,l,h,u,p,R.x,R.y)&&ld(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function $p(e,t,n){let i=e;do{const r=i.prev,o=i.next.next;!ud(r,o)&&cd(r,i,i.next,o)&&dd(r,o)&&dd(o,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(o.i/n|0),gd(i),gd(i.next),i=e=o),i=i.next}while(i!==e);return Xp(i)}function ed(e,t,n,i,r,o){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&ad(s,e)){let a=fd(s,e);return s=Xp(s,s.next),a=Xp(a,a.next),Yp(s,t,n,i,r,o,0),void Yp(a,t,n,i,r,o,0)}e=e.next}s=s.next}while(s!==e)}function td(e,t){return e.x-t.x}function nd(e,t){const n=function(e,t){let n,i=t,r=-1/0;const o=e.x,s=e.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){const e=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=o&&e>r&&(r=e,n=i.x<i.next.x?i:i.next,e===o))return n}i=i.next}while(i!==t);if(!n)return null;const a=n,l=n.x,u=n.y;let c,h=1/0;i=n;do{o>=i.x&&i.x>=l&&o!==i.x&&sd(s<u?o:r,s,l,u,s<u?r:o,s,i.x,i.y)&&(c=Math.abs(s-i.y)/(o-i.x),dd(i,e)&&(c<h||c===h&&(i.x>n.x||i.x===n.x&&id(n,i)))&&(n=i,h=c)),i=i.next}while(i!==a);return n}(e,t);if(!n)return t;const i=fd(n,e);return Xp(i,i.next),Xp(n,n.next)}function id(e,t){return ld(e.prev,e,t.prev)<0&&ld(t.next,e,e.next)<0}function rd(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function od(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function sd(e,t,n,i,r,o,s,a){return(r-s)*(t-a)>=(e-s)*(o-a)&&(e-s)*(i-a)>=(n-s)*(t-a)&&(n-s)*(o-a)>=(r-s)*(i-a)}function ad(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&cd(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(dd(e,t)&&dd(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(ld(e.prev,e,t.prev)||ld(e,t.prev,t))||ud(e,t)&&ld(e.prev,e,e.next)>0&&ld(t.prev,t,t.next)>0)}function ld(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ud(e,t){return e.x===t.x&&e.y===t.y}function cd(e,t,n,i){const r=pd(ld(e,t,n)),o=pd(ld(e,t,i)),s=pd(ld(n,i,e)),a=pd(ld(n,i,t));return r!==o&&s!==a||(!(0!==r||!hd(e,n,t))||(!(0!==o||!hd(e,i,t))||(!(0!==s||!hd(n,e,i))||!(0!==a||!hd(n,t,i)))))}function hd(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function pd(e){return e>0?1:e<0?-1:0}function dd(e,t){return ld(e.prev,e,e.next)<0?ld(e,t,e.next)>=0&&ld(e,e.prev,t)>=0:ld(e,t,e.prev)<0||ld(e,e.next,t)<0}function fd(e,t){const n=new vd(e.i,e.x,e.y),i=new vd(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function md(e,t,n,i){const r=new vd(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function gd(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function vd(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class yd{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return yd.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];Sd(e),Rd(n,e);let o=e.length;t.forEach(Sd);for(let a=0;a<t.length;a++)i.push(o),o+=t[a].length,Rd(n,t[a]);const s=Jp(n,i);for(let a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}}function Sd(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Rd(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class wd extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vp([new Ir(.5,.5),new Ir(-.5,.5),new Ir(-.5,-.5),new Ir(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let s=0,a=e.length;s<a;s++){o(e[s])}function o(e){const o=[],s=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:c-.1,p=void 0!==t.bevelOffset?t.bevelOffset:0,d=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Ld;let g,v,y,S,R,w=!1;f&&(g=f.getSpacedPoints(a),w=!0,u=!1,v=f.computeFrenetFrames(a,!1),y=new po,S=new po,R=new po),u||(d=0,c=0,h=0,p=0);const L=e.extractPoints(s);let b=L.shape;const C=L.holes;if(!yd.isClockWise(b)){b=b.reverse();for(let e=0,t=C.length;e<t;e++){const t=C[e];yd.isClockWise(t)&&(C[e]=t.reverse())}}const _=yd.triangulateShape(b,C),A=b;for(let t=0,n=C.length;t<n;t++){const e=C[t];b=b.concat(e)}function E(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const x=b.length,P=_.length;function T(e,t,n){let i,r,o;const s=e.x-t.x,a=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=s*s+a*a,h=s*u-a*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(c),p=Math.sqrt(l*l+u*u),d=t.x-a/h,f=t.y+s/h,m=((n.x-u/p-d)*u-(n.y+l/p-f)*l)/(s*u-a*l);i=d+s*m-e.x,r=f+a*m-e.y;const g=i*i+r*r;if(g<=2)return new Ir(i,r);o=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(u)&&(e=!0),e?(i=-a,r=s,o=Math.sqrt(c)):(i=s,r=a,o=Math.sqrt(c/2))}return new Ir(i/o,r/o)}const M=[];for(let t=0,n=A.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),M[t]=T(A[t],A[i],A[r]);const k=[];let I,D=M.concat();for(let t=0,n=C.length;t<n;t++){const e=C[t];I=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=T(e[t],e[i],e[r]);k.push(I),D=D.concat(I)}for(let t=0;t<d;t++){const e=t/d,n=c*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+p;for(let t=0,r=A.length;t<r;t++){const e=E(A[t],M[t],i);U(e.x,e.y,-n)}for(let t=0,r=C.length;t<r;t++){const e=C[t];I=k[t];for(let t=0,r=e.length;t<r;t++){const r=E(e[t],I[t],i);U(r.x,r.y,-n)}}}const O=h+p;for(let t=0;t<x;t++){const e=u?E(b[t],D[t],O):b[t];w?(S.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),R.copy(g[0]).add(S).add(y),U(R.x,R.y,R.z)):U(e.x,e.y,0)}for(let t=1;t<=a;t++)for(let e=0;e<x;e++){const n=u?E(b[e],D[e],O):b[e];w?(S.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),R.copy(g[t]).add(S).add(y),U(R.x,R.y,R.z)):U(n.x,n.y,l/a*t)}for(let t=d-1;t>=0;t--){const e=t/d,n=c*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+p;for(let t=0,r=A.length;t<r;t++){const e=E(A[t],M[t],i);U(e.x,e.y,l+n)}for(let t=0,r=C.length;t<r;t++){const e=C[t];I=k[t];for(let t=0,r=e.length;t<r;t++){const r=E(e[t],I[t],i);w?U(r.x,r.y+g[a-1].y,g[a-1].x+n):U(r.x,r.y,l+n)}}}function B(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=a+2*d;e<n;e++){const n=x*e,o=x*(e+1);F(t+i+n,t+r+n,t+r+o,t+i+o)}}}function U(e,t,n){o.push(e),o.push(t),o.push(n)}function N(e,t,r){z(e),z(t),z(r);const o=i.length/3,s=m.generateTopUV(n,i,o-3,o-2,o-1);j(s[0]),j(s[1]),j(s[2])}function F(e,t,r,o){z(e),z(t),z(o),z(t),z(r),z(o);const s=i.length/3,a=m.generateSideWallUV(n,i,s-6,s-3,s-2,s-1);j(a[0]),j(a[1]),j(a[3]),j(a[1]),j(a[2]),j(a[3])}function z(e){i.push(o[3*e+0]),i.push(o[3*e+1]),i.push(o[3*e+2])}function j(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(u){let e=0,t=x*e;for(let n=0;n<P;n++){const e=_[n];N(e[2]+t,e[1]+t,e[0]+t)}e=a+2*d,t=x*e;for(let n=0;n<P;n++){const e=_[n];N(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<P;e++){const t=_[e];N(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=_[e];N(t[0]+x*a,t[1]+x*a,t[2]+x*a)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;B(A,t),t+=A.length;for(let n=0,i=C.length;n<i;n++){const e=C[n];B(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new Zs(i,3)),this.setAttribute("uv",new Zs(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,o=e.shapes.length;r<o;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new Mp[i.type]).fromJSON(i)),new wd(n,e.options)}}const Ld={generateTopUV:function(e,t,n,i,r){const o=t[3*n],s=t[3*n+1],a=t[3*i],l=t[3*i+1],u=t[3*r],c=t[3*r+1];return[new Ir(o,s),new Ir(a,l),new Ir(u,c)]},generateSideWallUV:function(e,t,n,i,r,o){const s=t[3*n],a=t[3*n+1],l=t[3*n+2],u=t[3*i],c=t[3*i+1],h=t[3*i+2],p=t[3*r],d=t[3*r+1],f=t[3*r+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(a-c)<Math.abs(s-u)?[new Ir(s,1-l),new Ir(u,1-h),new Ir(p,1-f),new Ir(m,1-v)]:[new Ir(a,1-l),new Ir(c,1-h),new Ir(d,1-f),new Ir(g,1-v)]}};class bd extends Fp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bd(e.radius,e.detail)}}class Cd extends Fp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cd(e.radius,e.detail)}}class _d extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const s=[],a=[],l=[],u=[];let c=e;const h=(t-e)/i,p=new po,d=new Ir;for(let f=0;f<=i;f++){for(let e=0;e<=n;e++){const i=r+e/n*o;p.x=c*Math.cos(i),p.y=c*Math.sin(i),a.push(p.x,p.y,p.z),l.push(0,0,1),d.x=(p.x/t+1)/2,d.y=(p.y/t+1)/2,u.push(d.x,d.y)}c+=h}for(let f=0;f<i;f++){const e=f*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,o=i+n+1,a=i+n+2,l=i+1;s.push(r,o,l),s.push(o,a,l)}}this.setIndex(s),this.setAttribute("position",new Zs(a,3)),this.setAttribute("normal",new Zs(l,3)),this.setAttribute("uv",new Zs(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _d(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ad extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Vp([new Ir(0,.5),new Ir(-.5,-.5),new Ir(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],o=[];let s=0,a=0;if(!1===Array.isArray(e))l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(s,a,u),s+=a,a=0;function l(e){const s=i.length/3,l=e.extractPoints(t);let u=l.shape;const c=l.holes;!1===yd.isClockWise(u)&&(u=u.reverse());for(let t=0,n=c.length;t<n;t++){const e=c[t];!0===yd.isClockWise(e)&&(c[t]=e.reverse())}const h=yd.triangulateShape(u,c);for(let t=0,n=c.length;t<n;t++){const e=c[t];u=u.concat(e)}for(let t=0,n=u.length;t<n;t++){const e=u[t];i.push(e.x,e.y,0),r.push(0,0,1),o.push(e.x,e.y)}for(let t=0,i=h.length;t<i;t++){const e=h[t],i=e[0]+s,r=e[1]+s,o=e[2]+s;n.push(i,r,o),a+=3}}this.setIndex(n),this.setAttribute("position",new Zs(i,3)),this.setAttribute("normal",new Zs(r,3)),this.setAttribute("uv",new Zs(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new Ad(n,e.curveSegments)}}class Ed extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(o+s,Math.PI);let l=0;const u=[],c=new po,h=new po,p=[],d=[],f=[],m=[];for(let g=0;g<=n;g++){const p=[],v=g/n;let y=0;0===g&&0===o?y=.5/t:g===n&&a===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const a=n/t;c.x=-e*Math.cos(i+a*r)*Math.sin(o+v*s),c.y=e*Math.cos(o+v*s),c.z=e*Math.sin(i+a*r)*Math.sin(o+v*s),d.push(c.x,c.y,c.z),h.copy(c).normalize(),f.push(h.x,h.y,h.z),m.push(a+y,1-v),p.push(l++)}u.push(p)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=u[g][e+1],i=u[g][e],r=u[g+1][e],s=u[g+1][e+1];(0!==g||o>0)&&p.push(t,i,s),(g!==n-1||a<Math.PI)&&p.push(i,r,s)}this.setIndex(p),this.setAttribute("position",new Zs(d,3)),this.setAttribute("normal",new Zs(f,3)),this.setAttribute("uv",new Zs(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ed(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class xd extends Fp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xd(e.radius,e.detail)}}class Pd extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const o=[],s=[],a=[],l=[],u=new po,c=new po,h=new po;for(let p=0;p<=n;p++)for(let o=0;o<=i;o++){const d=o/i*r,f=p/n*Math.PI*2;c.x=(e+t*Math.cos(f))*Math.cos(d),c.y=(e+t*Math.cos(f))*Math.sin(d),c.z=t*Math.sin(f),s.push(c.x,c.y,c.z),u.x=e*Math.cos(d),u.y=e*Math.sin(d),h.subVectors(c,u).normalize(),a.push(h.x,h.y,h.z),l.push(o/i),l.push(p/n)}for(let p=1;p<=n;p++)for(let e=1;e<=i;e++){const t=(i+1)*p+e-1,n=(i+1)*(p-1)+e-1,r=(i+1)*(p-1)+e,s=(i+1)*p+e;o.push(t,n,s),o.push(n,r,s)}this.setIndex(o),this.setAttribute("position",new Zs(s,3)),this.setAttribute("normal",new Zs(a,3)),this.setAttribute("uv",new Zs(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pd(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Td extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:o},n=Math.floor(n),i=Math.floor(i);const s=[],a=[],l=[],u=[],c=new po,h=new po,p=new po,d=new po,f=new po,m=new po,g=new po;for(let y=0;y<=n;++y){const s=y/n*r*Math.PI*2;v(s,r,o,e,p),v(s+.01,r,o,e,d),m.subVectors(d,p),g.addVectors(d,p),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,o=-t*Math.cos(r),s=t*Math.sin(r);c.x=p.x+(o*g.x+s*f.x),c.y=p.y+(o*g.y+s*f.y),c.z=p.z+(o*g.z+s*f.z),a.push(c.x,c.y,c.z),h.subVectors(c,p).normalize(),l.push(h.x,h.y,h.z),u.push(y/n),u.push(e/i)}}for(let y=1;y<=n;y++)for(let e=1;e<=i;e++){const t=(i+1)*(y-1)+(e-1),n=(i+1)*y+(e-1),r=(i+1)*y+e,o=(i+1)*(y-1)+e;s.push(t,n,o),s.push(n,r,o)}function v(e,t,n,i,r){const o=Math.cos(e),s=Math.sin(e),a=n/t*e,l=Math.cos(a);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*s*.5,r.z=i*Math.sin(a)*.5}this.setIndex(s),this.setAttribute("position",new Zs(a,3)),this.setAttribute("normal",new Zs(l,3)),this.setAttribute("uv",new Zs(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Td(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Md extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pp(new po(-1,-1,0),new po(-1,1,0),new po(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const o=e.computeFrenetFrames(t,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new po,a=new po,l=new Ir;let u=new po;const c=[],h=[],p=[],d=[];function f(r){u=e.getPointAt(r/t,u);const l=o.normals[r],p=o.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),o=-Math.cos(t);a.x=o*l.x+r*p.x,a.y=o*l.y+r*p.y,a.z=o*l.z+r*p.z,a.normalize(),h.push(a.x,a.y,a.z),s.x=u.x+n*a.x,s.y=u.y+n*a.y,s.z=u.z+n*a.z,c.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,p.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),o=(i+1)*e+t,s=(i+1)*(e-1)+t;d.push(n,r,s),d.push(r,o,s)}}()}(),this.setIndex(d),this.setAttribute("position",new Zs(c,3)),this.setAttribute("normal",new Zs(h,3)),this.setAttribute("uv",new Zs(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Md((new Mp[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class kd extends aa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new po,r=new po;if(null!==e.index){const o=e.attributes.position,s=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=a.length;e<l;++e){const l=a[e],u=l.start;for(let e=u,a=u+l.count;e<a;e+=3)for(let l=0;l<3;l++){const a=s.getX(e+l),u=s.getX(e+(l+1)%3);i.fromBufferAttribute(o,a),r.fromBufferAttribute(o,u),!0===Id(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const o=e.attributes.position;for(let e=0,s=o.count/3;e<s;e++)for(let a=0;a<3;a++){const s=3*e+a,l=3*e+(a+1)%3;i.fromBufferAttribute(o,s),r.fromBufferAttribute(o,l),!0===Id(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Zs(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Id(e,t,n){const i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var Dd=Object.freeze({__proto__:null,BoxGeometry:Ea,CapsuleGeometry:Op,CircleGeometry:Bp,ConeGeometry:Np,CylinderGeometry:Up,DodecahedronGeometry:zp,EdgesGeometry:qp,ExtrudeGeometry:wd,IcosahedronGeometry:bd,LatheGeometry:Dp,OctahedronGeometry:Cd,PlaneGeometry:Ka,PolyhedronGeometry:Fp,RingGeometry:_d,ShapeGeometry:Ad,SphereGeometry:Ed,TetrahedronGeometry:xd,TorusGeometry:Pd,TorusKnotGeometry:Td,TubeGeometry:Md,WireframeGeometry:kd});class Od extends Ds{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ms(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Bd extends ka{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ud extends Ds{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ms(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ms(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ci,this.normalScale=new Ir(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Nd extends Ud{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ir(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _r(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ms(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ms(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ms(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Fd extends Ds{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ms(16777215),this.specular=new Ms(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ms(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ci,this.normalScale=new Ir(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=xt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zd extends Ds{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ms(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ms(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ci,this.normalScale=new Ir(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class jd extends Ds{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ci,this.normalScale=new Ir(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Hd extends Ds{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ms(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ms(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ci,this.normalScale=new Ir(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=xt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Gd extends Ds{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ms(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ci,this.normalScale=new Ir(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wd extends Hh{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qd(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Vd(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Jd(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n}function Kd(e,t,n){const i=e.length,r=new e.constructor(i);for(let o=0,s=0;s!==i;++o){const i=n[o]*t;for(let n=0;n!==t;++n)r[s++]=e[i+n]}return r}function Xd(e,t,n,i){let r=1,o=e[0];for(;void 0!==o&&void 0===o[i];)o=e[r++];if(void 0===o)return;let s=o[i];if(void 0!==s)if(Array.isArray(s))do{s=o[i],void 0!==s&&(t.push(o.time),n.push.apply(n,s)),o=e[r++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[i],void 0!==s&&(t.push(o.time),s.toArray(n,n.length)),o=e[r++]}while(void 0!==o);else do{s=o[i],void 0!==s&&(t.push(o.time),n.push(s)),o=e[r++]}while(void 0!==o)}const Yd={convertArray:qd,isTypedArray:Vd,getKeyframeOrder:Jd,sortedArray:Kd,flattenJSON:Xd,subclip:function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=e.clone();o.name=t;const s=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),a=[],u=[];for(let o=0;o<e.times.length;++o){const s=e.times[o]*r;if(!(s<n||s>=i)){a.push(e.times[o]);for(let n=0;n<t;++n)u.push(e.values[o*t+n])}}0!==a.length&&(e.times=qd(a,e.times.constructor),e.values=qd(u,e.values.constructor),s.push(e))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,o=t/i;for(let s=0;s<r;++s){const t=n.tracks[s],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===i}));if(void 0===r)continue;let a=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let u=0;const c=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);const h=t.times.length-1;let p;if(o<=t.times[0]){const e=a,n=l-a;p=t.values.slice(e,n)}else if(o>=t.times[h]){const e=h*l+a,n=e+l-a;p=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=a,i=l-a;e.evaluate(o),p=e.resultBuffer.slice(n,i)}if("quaternion"===i){(new ho).fromArray(p).normalize().conjugate().toArray(p)}const d=r.times.length;for(let e=0;e<d;++e){const t=e*c+u;if("quaternion"===i)ho.multiplyQuaternionsFlat(r.values,t,p,0,r.values,t);else{const e=c-2*u;for(let n=0;n<e;++n)r.values[t+n]-=p[n]}}}return e.blendMode=gi,e}};class Qd{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(e>=r)break e;{const s=t[1];e<s&&(n=2,r=s);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0}}for(;n<o;){const i=n+o>>>1;e<t[i]?o=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let o=0;o!==i;++o)t[o]=n[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Zd extends Qd{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pi,endingEnd:pi}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,o=e+1,s=i[r],a=i[o];if(void 0===s)switch(this.getSettings_().endingStart){case di:r=e,s=2*t-n;break;case fi:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case di:o=e,a=2*n-t;break;case fi:o=1,a=n+i[1]-i[0];break;default:o=e-1,a=t}const l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=r*u,this._offsetNext=o*u}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(n-t)/(i-t),f=d*d,m=f*d,g=-h*m+2*h*f-h*d,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,S=p*m-p*f;for(let R=0;R!==s;++R)r[R]=g*o[u+R]+v*o[l+R]+y*o[a+R]+S*o[c+R];return r}}class $d extends Qd{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,u=(n-t)/(i-t),c=1-u;for(let h=0;h!==s;++h)r[h]=o[l+h]*c+o[a+h]*u;return r}}class ef extends Qd{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class tf{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qd(t,this.TimeBufferType),this.values=qd(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:qd(e.times,Array),values:qd(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ef(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new $d(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Zd(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ui:t=this.InterpolantFactoryMethodDiscrete;break;case ci:t=this.InterpolantFactoryMethodLinear;break;case hi:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ui;case this.InterpolantFactoryMethodLinear:return ci;case this.InterpolantFactoryMethodSmooth:return hi}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=n.slice(r,o),this.values=this.values.slice(r*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==r;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,o),e=!1;break}o=t}if(void 0!==i&&Vd(i))for(let s=0,a=i.length;s!==a;++s){const t=i[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===hi,r=e.length-1;let o=1;for(let s=1;s<r;++s){let r=!1;const a=e[s];if(a!==e[s+1]&&(1!==s||a!==e[0]))if(i)r=!0;else{const e=s*n,i=e-n,o=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[i+s]||n!==t[o+s]){r=!0;break}}}if(r){if(s!==o){e[o]=e[s];const i=s*n,r=o*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*n,i=o*n,s=0;s!==n;++s)t[i+s]=t[e+s];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}tf.prototype.TimeBufferType=Float32Array,tf.prototype.ValueBufferType=Float32Array,tf.prototype.DefaultInterpolation=ci;class nf extends tf{}nf.prototype.ValueTypeName="bool",nf.prototype.ValueBufferType=Array,nf.prototype.DefaultInterpolation=ui,nf.prototype.InterpolantFactoryMethodLinear=void 0,nf.prototype.InterpolantFactoryMethodSmooth=void 0;class rf extends tf{}rf.prototype.ValueTypeName="color";class of extends tf{}of.prototype.ValueTypeName="number";class sf extends Qd{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(i-t);let l=e*s;for(let u=l+s;l!==u;l+=4)ho.slerpFlat(r,0,o,l-s,o,l,a);return r}}class af extends tf{InterpolantFactoryMethodLinear(e){return new sf(this.times,this.values,this.getValueSize(),e)}}af.prototype.ValueTypeName="quaternion",af.prototype.DefaultInterpolation=ci,af.prototype.InterpolantFactoryMethodSmooth=void 0;class lf extends tf{}lf.prototype.ValueTypeName="string",lf.prototype.ValueBufferType=Array,lf.prototype.DefaultInterpolation=ui,lf.prototype.InterpolantFactoryMethodLinear=void 0,lf.prototype.InterpolantFactoryMethodSmooth=void 0;class uf extends tf{}uf.prototype.ValueTypeName="vector";class cf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mi;this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Cr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,s=n.length;o!==s;++o)t.push(hf(n[o]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=n.length;r!==o;++r)t.push(tf.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,o=[];for(let s=0;s<r;s++){let e=[],a=[];e.push((s+r-1)%r,s,(s+1)%r),a.push(0,1,0);const l=Jd(e);e=Kd(e,1,l),a=Kd(a,1,l),i||0!==e[0]||(e.push(r),a.push(a[0])),o.push(new of(".morphTargetInfluences["+t[s].name+"]",e,a).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,a=e.length;s<a;s++){const t=e[s],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const o=[];for(const s in i)o.push(this.CreateFromMorphTargetSequence(s,i[s],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const o=[],s=[];Xd(n,o,s,i),0!==o.length&&r.push(new e(t,o,s))}},i=[],r=e.name||"default",o=e.fps||30,s=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let u=0;u<l.length;u++){const e=l[u].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],o=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),o.push(i.morphTarget===r?1:0)}i.push(new of(".morphTargetInfluence["+r+"]",t,o))}a=t.length*o}else{const r=".bones["+t[u].name+"]";n(uf,r+".position",e,"pos",i),n(af,r+".quaternion",e,"rot",i),n(uf,r+".scale",e,"scl",i)}}if(0===i.length)return null;return new this(r,a,i,s)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function hf(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return of;case"vector":case"vector2":case"vector3":case"vector4":return uf;case"color":return rf;case"quaternion":return af;case"bool":case"boolean":return nf;case"string":return lf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Xd(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const pf={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class df{constructor(e,t,n){const i=this;let r,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===o&&void 0!==i.onStart&&i.onStart(e,s,a),o=!0},this.itemEnd=function(e){s++,void 0!==i.onProgress&&i.onProgress(e,s,a),s===a&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const ff=new df;class mf{constructor(e){this.manager=void 0!==e?e:ff,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}mf.DEFAULT_MATERIAL_NAME="__DEFAULT";const gf={};class vf extends Error{constructor(e,t){super(e),this.response=t}}class yf extends mf{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=pf.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==gf[e])return void gf[e].push({onLoad:t,onProgress:n,onError:i});gf[e]=[],gf[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,a=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=gf[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),o=r?parseInt(r):0,s=0!==o;let a=0;const l=new ReadableStream({start(e){!function t(){i.read().then((i=>{let{done:r,value:l}=i;if(r)e.close();else{a+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:s,loaded:a,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new vf('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,s)));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((e=>i.decode(e)))}}})).then((t=>{pf.add(e,t);const n=gf[e];delete gf[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}})).catch((t=>{const n=gf[e];if(void 0===n)throw this.manager.itemError(e),t;delete gf[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Sf extends mf{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new yf(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=cf.parse(e[n]);t.push(i)}return t}}class Rf extends mf{constructor(e){super(e)}load(e,t,n,i){const r=this,o=[],s=new lp,a=new yf(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let l=0;function u(u){a.load(e[u],(function(e){const n=r.parse(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=en),s.image=o,s.format=n.format,s.needsUpdate=!0,t&&t(s))}),n,i)}if(Array.isArray(e))for(let c=0,h=e.length;c<h;++c)u(c);else a.load(e,(function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}s.image=o}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=en),s.format=n.format,s.needsUpdate=!0,t&&t(s)}),n,i);return s}}class wf extends mf{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=pf.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o;const s=Fr("img");function a(){u(),pf.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){u(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function u(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}class Lf extends mf{constructor(e){super(e)}load(e,t,n,i){const r=new Ua;r.colorSpace=Ei;const o=new wf(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(n){o.load(e[n],(function(e){r.images[n]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(let l=0;l<e.length;++l)a(l);return r}}class bf extends mf{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new ph,s=new yf(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,(function(e){let n;try{n=r.parse(e)}catch(s){if(void 0===i)return void console.error(s);i(s)}void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Jt,o.wrapT=void 0!==n.wrapT?n.wrapT:Jt,o.magFilter=void 0!==n.magFilter?n.magFilter:en,o.minFilter=void 0!==n.minFilter?n.minFilter:en,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?o.colorSpace=n.colorSpace:void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=rn),1===n.mipmapCount&&(o.minFilter=en),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n)}),n,i),o}}class Cf extends mf{constructor(e){super(e)}load(e,t,n,i){const r=new no,o=new wf(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}class _f extends fs{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new Ms(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Af extends _f{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(fs.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ms(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Ef=new Go,xf=new po,Pf=new po;class Tf{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ir(512,512),this.map=null,this.mapPass=null,this.matrix=new Go,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new qa,this._frameExtents=new Ir(1,1),this._viewportCount=1,this._viewports=[new io(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;xf.setFromMatrixPosition(e.matrixWorld),t.position.copy(xf),Pf.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Pf),t.updateMatrixWorld(),Ef.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ef),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Ef)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Mf extends Tf{constructor(){super(new Da(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*br*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class kf extends _f{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(fs.DEFAULT_UP),this.updateMatrix(),this.target=new fs,this.distance=n,this.angle=i,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new Mf}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const If=new Go,Df=new po,Of=new po;class Bf extends Tf{constructor(){super(new Da(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ir(4,2),this._viewportCount=6,this._viewports=[new io(2,1,1,1),new io(0,1,1,1),new io(3,1,1,1),new io(1,1,1,1),new io(3,0,1,1),new io(1,0,1,1)],this._cubeDirections=[new po(1,0,0),new po(-1,0,0),new po(0,0,1),new po(0,0,-1),new po(0,1,0),new po(0,-1,0)],this._cubeUps=[new po(0,1,0),new po(0,1,0),new po(0,1,0),new po(0,1,0),new po(0,0,1),new po(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Df.setFromMatrixPosition(e.matrixWorld),n.position.copy(Df),Of.copy(n.position),Of.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Of),n.updateMatrixWorld(),i.makeTranslation(-Df.x,-Df.y,-Df.z),If.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(If)}}class Uf extends _f{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Bf}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Nf extends Tf{constructor(){super(new ol(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ff extends _f{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fs.DEFAULT_UP),this.updateMatrix(),this.target=new fs,this.shadow=new Nf}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class zf extends _f{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class jf extends _f{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Hf{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new po)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*r),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*i*1.092548),t.addScaledVector(o[5],i*r*1.092548),t.addScaledVector(o[6],.315392*(3*r*r-1)),t.addScaledVector(o[7],n*r*1.092548),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*r),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*i),t.addScaledVector(o[5],.858086*i*r),t.addScaledVector(o[6],.743125*r*r-.247708),t.addScaledVector(o[7],.858086*n*r),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class Gf extends _f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hf;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Wf extends mf{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,o=new yf(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=Wf.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new Ms).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(i.depthFunc=e.depthFunc),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(i.blendSrc=e.blendSrc),void 0!==e.blendDst&&(i.blendDst=e.blendDst),void 0!==e.blendEquation&&(i.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(i.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(i.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(i.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(i.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),void 0!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new Ms).setHex(t.value);break;case"v2":i.uniforms[r].value=(new Ir).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new po).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new io).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new Dr).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new Go).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new Ir).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Ir).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:Od,SpriteMaterial:Bc,RawShaderMaterial:Bd,ShaderMaterial:ka,PointsMaterial:$h,MeshPhysicalMaterial:Nd,MeshStandardMaterial:Ud,MeshPhongMaterial:Fd,MeshToonMaterial:zd,MeshNormalMaterial:jd,MeshLambertMaterial:Hd,MeshDepthMaterial:mc,MeshDistanceMaterial:gc,MeshBasicMaterial:Os,MeshMatcapMaterial:Gd,LineDashedMaterial:Wd,LineBasicMaterial:Hh,Material:Ds}[e]}}class qf{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(n){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Vf extends aa{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Jf extends mf{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new yf(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)}parse(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],o=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers,r=i[t],o=new Uint32Array(r).buffer;return n[t]=o,o}(e,r.buffer),s=Nr(r.type,o),a=new Ic(s,r.stride);return a.uuid=r.uuid,t[i]=a,a}const r=e.isInstancedBufferGeometry?new Vf:new aa,o=e.data.index;if(void 0!==o){const e=Nr(o.type,o.array);r.setIndex(new Gs(e,1))}const s=e.data.attributes;for(const c in s){const t=s[c];let n;if(t.isInterleavedBufferAttribute){const r=i(e.data,t.data);n=new Oc(r,t.itemSize,t.offset,t.normalized)}else{const e=Nr(t.type,t.array);n=new(t.isInstancedBufferAttribute?gh:Gs)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),r.setAttribute(c,n)}const a=e.data.morphAttributes;if(a)for(const c in a){const t=a[c],n=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];let s;if(o.isInterleavedBufferAttribute){const t=i(e.data,o.data);s=new Oc(t,o.itemSize,o.offset,o.normalized)}else{const e=Nr(o.type,o.array);s=new Gs(e,o.itemSize,o.normalized)}void 0!==o.name&&(s.name=o.name),n.push(s)}r.morphAttributes[c]=n}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let c=0,h=l.length;c!==h;++c){const e=l[c];r.addGroup(e.start,e.count,e.materialIndex)}const u=e.data.boundingSphere;if(void 0!==u){const e=new po;void 0!==u.center&&e.fromArray(u.center),r.boundingSphere=new Do(e,u.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class Kf extends mf{constructor(e){super(e)}load(e,t,n,i){const r=this,o=""===this.path?qf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const s=new yf(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(a){return void 0!==i&&i(a),void console.error("THREE:ObjectLoader: Can't parse "+e+".",a.message)}const s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(o,t)}),n,i)}async loadAsync(e,t){const n=""===this.path?qf.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const i=new yf(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(e,t),o=JSON.parse(r),s=o.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,a,s,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),void 0!==t){let e=!1;for(const t in o)if(o[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,i,s,o,t),l=this.parseSkeletons(e.skeletons,a);return this.bindSkeletons(a,l),a}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new Vp).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse((function(e){e.isBone&&(i[e.uuid]=e)})),void 0!==e)for(let r=0,o=e.length;r<o;r++){const t=(new mh).fromJSON(e[r],i);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new Jf;for(let r=0,o=e.length;r<o;r++){let o;const s=e[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(s);break;default:s.type in Dd?o=Dd[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new Wf;r.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=cf.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function o(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),r.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Nr(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new df(t);r=new wf(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=o(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new ph(n.data,n.width,n.height)))}i[n.uuid]=new $r(e)}else{const e=o(n.url);i[n.uuid]=new $r(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"===typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:Nr(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new wf(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],o=i.url;if(Array.isArray(o)){const e=[];for(let t=0,n=o.length;t<n;t++){const n=o[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new ph(i.data,i.width,i.height)))}n[i.uuid]=new $r(e)}else{const e=await r(i.url);n[i.uuid]=new $r(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,o=e.length;r<o;r++){const o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=t[o.image],a=s.data;let l;Array.isArray(a)?(l=new Ua,6===a.length&&(l.needsUpdate=!0)):(l=a&&a.data?new ph:new no,a&&(l.needsUpdate=!0)),l.source=s,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,Xf)),void 0!==o.channel&&(l.channel=o.channel),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],Yf),l.wrapT=n(o.wrap[1],Yf)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.colorSpace&&(l.colorSpace=o.colorSpace),void 0!==o.encoding&&(l.encoding=o.encoding),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,Qf)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,Qf)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(l.compareFunction=o.compareFunction),void 0!==o.userData&&(l.userData=o.userData),i[o.uuid]=l}return i}parseObject(e,t,n,i,r){let o,s,a;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":o=new kc,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new Ms(e.background):o.background=c(e.background)),void 0!==e.environment&&(o.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Mc(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Tc(e.fog.color,e.fog.density)),""!==e.fog.name&&(o.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(o.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Da(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ol(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new zf(e.color,e.intensity);break;case"DirectionalLight":o=new Ff(e.color,e.intensity);break;case"PointLight":o=new Uf(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new jf(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new kf(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Af(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new Gf).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),a=u(e.material),o=new ch(s,a),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),a=u(e.material),o=new _a(s,a);break;case"InstancedMesh":s=l(e.geometry),a=u(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;o=new Ch(s,a,t),o.instanceMatrix=new gh(new Float32Array(n.array),16),void 0!==i&&(o.instanceColor=new gh(new Float32Array(i.array),i.itemSize));break;case"BatchedMesh":s=l(e.geometry),a=u(e.material),o=new jh(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,a),o.geometry=s,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map((e=>{const t=new go;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const n=new Do;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}})),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new eh;break;case"Line":o=new Kh(l(e.geometry),u(e.material));break;case"LineLoop":o=new Zh(l(e.geometry),u(e.material));break;case"LineSegments":o=new Qh(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new rp(l(e.geometry),u(e.material));break;case"Sprite":o=new Yc(u(e.material));break;case"Group":o=new Lc;break;case"Bone":o=new hh;break;default:o=new fs}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.up&&o.up.fromArray(e.up),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)o.add(this.parseObject(s[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=o.getObjectByProperty("uuid",n.object);void 0!==i&&o.addLevel(i,n.distance,n.hysteresis)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const Xf={UVMapping:zt,CubeReflectionMapping:jt,CubeRefractionMapping:Ht,EquirectangularReflectionMapping:Gt,EquirectangularRefractionMapping:Wt,CubeUVReflectionMapping:qt},Yf={RepeatWrapping:Vt,ClampToEdgeWrapping:Jt,MirroredRepeatWrapping:Kt},Qf={NearestFilter:Xt,NearestMipmapNearestFilter:Yt,NearestMipmapLinearFilter:Zt,LinearFilter:en,LinearMipmapNearestFilter:tn,LinearMipmapLinearFilter:rn};class Zf extends mf{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=pf.get(e);if(void 0!==o)return r.manager.itemStart(e),o.then?void o.then((n=>{t&&t(n),r.manager.itemEnd(e)})).catch((e=>{i&&i(e)})):(setTimeout((function(){t&&t(o),r.manager.itemEnd(e)}),0),o);const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader;const a=fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){return pf.add(e,n),t&&t(n),r.manager.itemEnd(e),n})).catch((function(t){i&&i(t),pf.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)}));pf.add(e,a),r.manager.itemStart(e)}}let $f;class em{static getContext(){return void 0===$f&&($f=new(window.AudioContext||window.webkitAudioContext)),$f}static setContext(e){$f=e}}class tm extends mf{constructor(e){super(e)}load(e,t,n,i){const r=this,o=new yf(this.manager);function s(t){i?i(t):console.error(t),r.manager.itemError(e)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(e){try{const n=e.slice(0);em.getContext().decodeAudioData(n,(function(e){t(e)})).catch(s)}catch(n){s(n)}}),n,i)}}const nm=new Go,im=new Go,rm=new Go;class om{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Da,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Da,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,rm.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(Lr*t.fov*.5)/t.zoom;let o,s;im.elements[12]=-n,nm.elements[12]=n,o=-r*t.aspect+i,s=r*t.aspect+i,rm.elements[0]=2*t.near/(s-o),rm.elements[8]=(s+o)/(s-o),this.cameraL.projectionMatrix.copy(rm),o=-r*t.aspect-i,s=r*t.aspect-i,rm.elements[0]=2*t.near/(s-o),rm.elements[8]=(s+o)/(s-o),this.cameraR.projectionMatrix.copy(rm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(im),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(nm)}}class sm{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=am(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=am();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function am(){return("undefined"===typeof performance?Date:performance).now()}const lm=new po,um=new ho,cm=new po,hm=new po;class pm extends fs{constructor(){super(),this.type="AudioListener",this.context=em.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new sm}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(lm,um,cm),hm.set(0,0,-1).applyQuaternion(um),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(lm.x,e),t.positionY.linearRampToValueAtTime(lm.y,e),t.positionZ.linearRampToValueAtTime(lm.z,e),t.forwardX.linearRampToValueAtTime(hm.x,e),t.forwardY.linearRampToValueAtTime(hm.y,e),t.forwardZ.linearRampToValueAtTime(hm.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(lm.x,lm.y,lm.z),t.setOrientation(hm.x,hm.y,hm.z,n.x,n.y,n.z)}}class dm extends fs{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const fm=new po,mm=new ho,gm=new po,vm=new po;class ym extends dm{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(fm,mm,gm),vm.set(0,0,1).applyQuaternion(mm);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(fm.x,e),t.positionY.linearRampToValueAtTime(fm.y,e),t.positionZ.linearRampToValueAtTime(fm.z,e),t.orientationX.linearRampToValueAtTime(vm.x,e),t.orientationY.linearRampToValueAtTime(vm.y,e),t.orientationZ.linearRampToValueAtTime(vm.z,e)}else t.setPosition(fm.x,fm.y,fm.z),t.setOrientation(vm.x,vm.y,vm.z)}}class Sm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Rm{constructor(e,t,n){let i,r,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==i;++e)n[r+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){s.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){ho.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const o=this._workIndex*r;ho.multiplyQuaternionsFlat(e,o,e,t,e,n),ho.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,r){const o=1-i;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*o+e[n+s]*i}}_lerpAdditive(e,t,n,i,r){for(let o=0;o!==r;++o){const r=t+o;e[r]=e[r]+e[n+o]*i}}}const wm="\\[\\]\\.:\\/",Lm=new RegExp("["+wm+"]","g"),bm="[^"+wm+"]",Cm="[^"+wm.replace("\\.","")+"]",_m=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",bm)+/(WCOD+)?/.source.replace("WCOD",Cm)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bm)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bm)+"$"),Am=["material","materials","bones","map"];class Em{constructor(e,t,n){this.path=t,this.parsedPath=n||Em.parseTrackName(t),this.node=Em.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Em.Composite(e,t,n):new Em(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Lm,"")}static parseTrackName(e){const t=_m.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==Am.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const o=n(r.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=Em.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const o=e[i];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Em.Composite=class{constructor(e,t,n){const i=n||Em.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Em.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Em.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Em.prototype.GetterByBindingType=[Em.prototype._getValue_direct,Em.prototype._getValue_array,Em.prototype._getValue_arrayElement,Em.prototype._getValue_toArray],Em.prototype.SetterByBindingTypeAndVersioning=[[Em.prototype._setValue_direct,Em.prototype._setValue_direct_setNeedsUpdate,Em.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Em.prototype._setValue_array,Em.prototype._setValue_array_setNeedsUpdate,Em.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Em.prototype._setValue_arrayElement,Em.prototype._setValue_arrayElement_setNeedsUpdate,Em.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Em.prototype._setValue_fromArray,Em.prototype._setValue_fromArray_setNeedsUpdate,Em.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class xm{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Cr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let s,a=e.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const c=arguments[u],h=c.uuid;let p=t[h];if(void 0===p){p=a++,t[h]=p,e.push(c);for(let e=0,t=o;e!==t;++e)r[e].push(new Em(c,n[e],i[e]))}else if(p<l){s=e[p];const a=--l,u=e[a];t[u.uuid]=p,e[p]=u,t[h]=a,e[a]=c;for(let e=0,t=o;e!==t;++e){const t=r[e],o=t[a];let s=t[p];t[p]=o,void 0===s&&(s=new Em(c,n[e],i[e])),t[a]=s}}else e[p]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o],a=s.uuid,l=t[a];if(void 0!==l&&l>=r){const o=r++,u=e[o];t[u.uuid]=l,e[l]=u,t[a]=o,e[o]=s;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[o],r=t[l];t[l]=i,t[o]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=e.length;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<r){const s=--r,a=e[s],u=--o,c=e[u];t[a.uuid]=l,e[l]=a,t[c.uuid]=s,e[s]=c,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[u];t[l]=i,t[s]=r,t.pop()}}else{const r=--o,s=e[r];r>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,o.push(e),s.push(t),r.push(c);for(let h=u,p=a.length;h!==p;++h){const n=a[h];c[h]=new Em(n,e,t)}return c}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s];t[e[s]]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}}class Pm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,o=r.length,s=new Array(o),a={endingStart:pi,endingEnd:pi};for(let l=0;l!==o;++l){const e=r[l].createInterpolant(null);s[l]=e,e.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ai,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,o=n/i;e.warp(1,r,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=r,a[1]=r+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===gi)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulateAdditive(s);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulate(i,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const o=n===li;if(0===e)return-1===r?i:o&&1===(1&r)?t-i:i;if(n===si){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1===(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=di,i.endingEnd=di):(i.endingStart=e?this.zeroSlopeAtStart?di:pi:fi,i.endingEnd=t?this.zeroSlopeAtEnd?di:pi:fi)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=r,a[0]=t,s[1]=r+e,a[1]=n,this}}const Tm=new Float32Array(1);class Mm extends Sr{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let u=l[a];void 0===u&&(u={},l[a]=u);for(let c=0;c!==r;++c){const e=i[c],r=e.name;let l=u[r];if(void 0!==l)++l.referenceCount,o[c]=l;else{if(l=o[c],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,a,r));continue}const i=t&&t._propertyBindings[c].binding.parsedPath;l=new Rm(Em.create(n,r,i),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,a,r),o[c]=l}s[c].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let o=r[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,a[u]=l,a.pop(),e._byClipCacheIndex=null;delete s.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete o[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[r],0===Object.keys(s).length&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new $d(new Float32Array(2),new Float32Array(2),1,Tm),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let o="string"===typeof e?cf.findByName(i,e):e;const s=null!==o?o.uuid:e,a=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:mi),void 0!==a){const e=a.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=a.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new Pm(this,o,t,n);return this._bindAction(u,l),this._addInactiveAction(u,s,r),u}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"===typeof e?cf.findByName(n,e):e,o=r?r.uuid:e,s=this._actionsByClip[o];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(i,e,r,o)}const s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,o=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,t[r]=o,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const e=n[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const r in i){const e=i[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class km{constructor(e){this.value=e}clone(){return new km(void 0===this.value.clone?this.value:this.value.clone())}}let Im=0;class Dm extends Sr{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Im++}),this.name="",this.usage=or,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class Om extends Ic{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Bm{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Um{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Ho(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new es,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Fm(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(Nm),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=e.length;i<r;i++)Fm(e[i],this,n,t);return n.sort(Nm),n}}function Nm(e,t){return e.distance-t.distance}function Fm(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)Fm(i[e],t,n,!0)}}class zm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(_r(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class jm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const Hm=new Ir;class Gm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ir(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ir(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Hm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hm).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Wm=new po,qm=new po;class Vm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Wm.subVectors(e,this.start),qm.subVectors(this.end,this.start);const n=qm.dot(qm);let i=qm.dot(Wm)/n;return t&&(i=_r(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Jm=new po;class Km extends fs{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new aa,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,a=32;o<a;o++,s++){const e=o/a*Math.PI*2,t=s/a*Math.PI*2;i.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new Zs(i,3));const r=new Hh({fog:!1,toneMapped:!1});this.cone=new Qh(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Jm.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Jm),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Xm=new po,Ym=new Go,Qm=new Go;class Zm extends Qh{constructor(e){const t=$m(e),n=new aa,i=[],r=[],o=new Ms(0,0,1),s=new Ms(0,1,0);for(let a=0;a<t.length;a++){const e=t[a];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(s.r,s.g,s.b))}n.setAttribute("position",new Zs(i,3)),n.setAttribute("color",new Zs(r,3));super(n,new Hh({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Qm.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(Ym.multiplyMatrices(Qm,e.matrixWorld),Xm.setFromMatrixPosition(Ym),i.setXYZ(o,Xm.x,Xm.y,Xm.z),Ym.multiplyMatrices(Qm,e.parent.matrixWorld),Xm.setFromMatrixPosition(Ym),i.setXYZ(o+1,Xm.x,Xm.y,Xm.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function $m(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,$m(e.children[n]));return t}class eg extends _a{constructor(e,t,n){super(new Ed(t,4,2),new Os({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tg=new po,ng=new Ms,ig=new Ms;class rg extends fs{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Cd(t);i.rotateY(.5*Math.PI),this.material=new Os({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.setAttribute("color",new Gs(o,3)),this.add(new _a(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");ng.copy(this.light.color),ig.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?ng:ig;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(tg.setFromMatrixPosition(this.light.matrixWorld).negate())}}class og extends Qh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new Ms(n),i=new Ms(i);const r=t/2,o=e/t,s=e/2,a=[],l=[];for(let c=0,h=0,p=-s;c<=t;c++,p+=o){a.push(-s,0,p,s,0,p),a.push(p,0,-s,p,0,s);const e=c===r?n:i;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const u=new aa;u.setAttribute("position",new Zs(a,3)),u.setAttribute("color",new Zs(l,3));super(u,new Hh({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class sg extends Qh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new Ms(r),o=new Ms(o);const s=[],a=[];if(t>1)for(let u=0;u<t;u++){const n=u/t*(2*Math.PI),i=Math.sin(n)*e,l=Math.cos(n)*e;s.push(0,0,0),s.push(i,0,l);const c=1&u?r:o;a.push(c.r,c.g,c.b),a.push(c.r,c.g,c.b)}for(let u=0;u<n;u++){const t=1&u?r:o,l=e-e/n*u;for(let e=0;e<i;e++){let n=e/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l;s.push(r,0,o),a.push(t.r,t.g,t.b),n=(e+1)/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l,s.push(r,0,o),a.push(t.r,t.g,t.b)}}const l=new aa;l.setAttribute("position",new Zs(s,3)),l.setAttribute("color",new Zs(a,3));super(l,new Hh({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const ag=new po,lg=new po,ug=new po;class cg extends fs{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new aa;i.setAttribute("position",new Zs([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new Hh({fog:!1,toneMapped:!1});this.lightPlane=new Kh(i,r),this.add(this.lightPlane),i=new aa,i.setAttribute("position",new Zs([0,0,0,0,0,1],3)),this.targetLine=new Kh(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ag.setFromMatrixPosition(this.light.matrixWorld),lg.setFromMatrixPosition(this.light.target.matrixWorld),ug.subVectors(lg,ag),this.lightPlane.lookAt(lg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lg),this.targetLine.scale.z=ug.length()}}const hg=new po,pg=new Ia;class dg extends Qh{constructor(e){const t=new aa,n=new Hh({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={};function s(e,t){a(e),a(t)}function a(e){i.push(0,0,0),r.push(0,0,0),void 0===o[e]&&(o[e]=[]),o[e].push(i.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new Zs(i,3)),t.setAttribute("color",new Zs(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new Ms(16755200),u=new Ms(16711680),c=new Ms(43775),h=new Ms(16777215),p=new Ms(3355443);this.setColors(l,u,c,h,p)}setColors(e,t,n,i,r){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,i.r,i.g,i.b),o.setXYZ(39,i.r,i.g,i.b),o.setXYZ(40,r.r,r.g,r.b),o.setXYZ(41,r.r,r.g,r.b),o.setXYZ(42,r.r,r.g,r.b),o.setXYZ(43,r.r,r.g,r.b),o.setXYZ(44,r.r,r.g,r.b),o.setXYZ(45,r.r,r.g,r.b),o.setXYZ(46,r.r,r.g,r.b),o.setXYZ(47,r.r,r.g,r.b),o.setXYZ(48,r.r,r.g,r.b),o.setXYZ(49,r.r,r.g,r.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;pg.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),fg("c",t,e,pg,0,0,-1),fg("t",t,e,pg,0,0,1),fg("n1",t,e,pg,-1,-1,-1),fg("n2",t,e,pg,1,-1,-1),fg("n3",t,e,pg,-1,1,-1),fg("n4",t,e,pg,1,1,-1),fg("f1",t,e,pg,-1,-1,1),fg("f2",t,e,pg,1,-1,1),fg("f3",t,e,pg,-1,1,1),fg("f4",t,e,pg,1,1,1),fg("u1",t,e,pg,.7,1.1,-1),fg("u2",t,e,pg,-.7,1.1,-1),fg("u3",t,e,pg,0,2,-1),fg("cf1",t,e,pg,-1,0,1),fg("cf2",t,e,pg,1,0,1),fg("cf3",t,e,pg,0,-1,1),fg("cf4",t,e,pg,0,1,1),fg("cn1",t,e,pg,-1,0,-1),fg("cn2",t,e,pg,1,0,-1),fg("cn3",t,e,pg,0,-1,-1),fg("cn4",t,e,pg,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function fg(e,t,n,i,r,o,s){hg.set(r,o,s).unproject(i);const a=t[e];if(void 0!==a){const e=n.getAttribute("position");for(let t=0,n=a.length;t<n;t++)e.setXYZ(a[t],hg.x,hg.y,hg.z)}}const mg=new go;class gg extends Qh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new aa;r.setIndex(new Gs(n,1)),r.setAttribute("position",new Gs(i,3)),super(r,new Hh({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&mg.setFromObject(this.object),mg.isEmpty())return;const t=mg.min,n=mg.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class vg extends Qh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new aa;i.setIndex(new Gs(n,1)),i.setAttribute("position",new Zs([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new Hh({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class yg extends Kh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new aa;i.setAttribute("position",new Zs([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new Hh({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const r=new aa;r.setAttribute("position",new Zs([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new _a(r,new Os({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Sg=new po;let Rg,wg;class Lg extends fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new po(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new po(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===Rg&&(Rg=new aa,Rg.setAttribute("position",new Zs([0,0,0,0,1,0],3)),wg=new Up(0,.5,1,5,1),wg.translate(0,-.5,0)),this.position.copy(t),this.line=new Kh(Rg,new Hh({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _a(wg,new Os({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Sg.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Sg,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class bg extends Qh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new aa;n.setAttribute("position",new Zs(t,3)),n.setAttribute("color",new Zs([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Hh({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new Ms,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Cg{constructor(){this.type="ShapePath",this.color=new Ms,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ip,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,o){return this.currentPath.bezierCurveTo(e,t,n,i,r,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=t[r],s=t[o],a=s.x-n.x,l=s.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],a=-a,s=t[r],l=-l),e.y<n.y||e.y>s.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(s.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=s.x)return!0}}return i}const n=yd.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,o,s;const a=[];if(1===i.length)return o=i[0],s=new Vp,s.curves=o.curves,a.push(s),a;let l=!n(i[0].getPoints());l=e?!l:l;const u=[],c=[];let h,p,d=[],f=0;c[f]=void 0,d[f]=[];for(let m=0,g=i.length;m<g;m++)o=i[m],h=o.getPoints(),r=n(h),r=e?!r:r,r?(!l&&c[f]&&f++,c[f]={s:new Vp,p:h},c[f].s.curves=o.curves,l&&f++,d[f]=[]):d[f].push({h:o,p:h[0]});if(!c[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new Vp;r.curves=i.curves,t.push(r)}return t}(i);if(c.length>1){let e=!1,n=0;for(let t=0,i=c.length;t<i;t++)u[t]=[];for(let i=0,r=c.length;i<r;i++){const r=d[i];for(let o=0;o<r.length;o++){const s=r[o];let a=!0;for(let r=0;r<c.length;r++)t(s.p,c[r].p)&&(i!==r&&n++,a?(a=!1,u[r].push(s)):e=!0);a&&u[i].push(s)}}n>0&&!1===e&&(d=u)}for(let m=0,g=c.length;m<g;m++){s=c[m].s,a.push(s),p=d[m];for(let e=0,t=p.length;e<t;e++)s.holes.push(p[e].h)}return a}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ie}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ie);var _g=__webpack_require__(223);function Ag(e){let t;const n=new Set,i=(e,i)=>{const r="function"===typeof e?e(t):e;if(r!==t){const e=t;t=i?r:Object.assign({},t,r),n.forEach((n=>n(t,e)))}},r=()=>t,o={setState:i,getState:r,subscribe:(e,i,o)=>i||o?function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let s=i(t);function a(){const n=i(t);if(!o(s,n)){const t=s;e(s=n,t)}}return n.add(a),()=>n.delete(a)}(e,i,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,o),o}const Eg="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?i.useEffect:i.useLayoutEffect;function xg(e){const t="function"===typeof e?Ag(e):e,n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,r]=(0,i.useReducer)((e=>e+1),0),o=t.getState(),s=(0,i.useRef)(o),a=(0,i.useRef)(e),l=(0,i.useRef)(n),u=(0,i.useRef)(!1),c=(0,i.useRef)();let h;void 0===c.current&&(c.current=e(o));let p=!1;(s.current!==o||a.current!==e||l.current!==n||u.current)&&(h=e(o),p=!n(c.current,h)),Eg((()=>{p&&(c.current=h),s.current=o,a.current=e,l.current=n,u.current=!1}));const d=(0,i.useRef)(o);Eg((()=>{const e=()=>{try{const e=t.getState(),n=a.current(e);l.current(c.current,n)||(s.current=e,c.current=n,r())}catch(e){u.current=!0,r()}},n=t.subscribe(e);return t.getState()!==d.current&&e(),n}),[]);const f=p?h:c.current;return(0,i.useDebugValue)(f),f};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}var Pg=__webpack_require__(5914),Tg=__webpack_require__.n(Pg),Mg=__webpack_require__(2224);const kg=[];function Ig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function Dg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const s of kg)if(Ig(t,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!n)throw s.promise}const r={keys:t,equal:i.equal,remove:()=>{const e=kg.indexOf(r);-1!==e&&kg.splice(e,1)},promise:(o=e,"object"===typeof o&&"function"===typeof o.then?e:e(...t)).then((e=>{r.response=e,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))})).catch((e=>r.error=e))};var o;if(kg.push(r),!n)throw r.promise}const Og=(e,t,n)=>Dg(e,t,!1,n);const Bg={},Ug=e=>{Object.assign(Bg,e)};var Ng,Fg;const zg=e=>"colorSpace"in e||"outputColorSpace"in e,jg=()=>{var e;return null!=(e=Bg.ColorManagement)?e:null},Hg=e=>e&&e.isOrthographicCamera,Gg="undefined"!==typeof window&&(null!=(Ng=window.document)&&Ng.createElement||"ReactNative"===(null==(Fg=window.navigator)?void 0:Fg.product))?i.useLayoutEffect:i.useEffect;function Wg(e){const t=i.useRef(e);return Gg((()=>{t.current=e}),[e]),t}function qg(e){let{set:t}=e;return Gg((()=>(t(new Promise((()=>null))),()=>t(!1))),[t]),null}class Vg extends i.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Vg.getDerivedStateFromError=()=>({error:!0});const Jg="__default",Kg=new Map,Xg=e=>e&&!!e.memoized&&!!e.changes;function Yg(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const Qg=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function Zg(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const $g={obj:e=>e===Object(e)&&!$g.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:i="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if($g.str(e)||$g.num(e))return e===t;const o=$g.obj(e);if(o&&"reference"===i)return e===t;const s=$g.arr(e);if(s&&"reference"===n)return e===t;if((s||o)&&e===t)return!0;let a;for(a in e)if(!(a in t))return!1;if(o&&"shallow"===n&&"shallow"===i){for(a in r?t:e)if(!$g.equ(e[a],t[a],{strict:r,objects:"reference"}))return!1}else for(a in r?t:e)if(e[a]!==t[a])return!1;if($g.und(a)){if(s&&0===e.length&&0===t.length)return!0;if(o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function ev(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function tv(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function nv(e,t){let n=e;if(t.includes("-")){const i=t.split("-"),r=i.pop();return n=i.reduce(((e,t)=>e[t]),e),{target:n,key:r}}return{target:n,key:t}}const iv=/-\d+$/;function rv(e,t,n){if($g.str(n)){if(iv.test(n)){const t=n.replace(iv,""),{target:i,key:r}=nv(e,t);Array.isArray(i[r])||(i[r]=[])}const{target:i,key:r}=nv(e,n);t.__r3f.previousAttach=i[r],i[r]=t}else t.__r3f.previousAttach=n(e,t)}function ov(e,t,n){var i,r;if($g.str(n)){const{target:i,key:r}=nv(e,n),o=t.__r3f.previousAttach;void 0===o?delete i[r]:i[r]=o}else null==(i=t.__r3f)||null==i.previousAttach||i.previousAttach(e,t);null==(r=t.__r3f)||delete r.previousAttach}function sv(e,t){let{children:n,key:i,ref:r,...o}=t,{children:s,key:a,ref:l,...u}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var h;const p=null!=(h=null==e?void 0:e.__r3f)?h:{},d=Object.entries(o),f=[];if(c){const e=Object.keys(u);for(let t=0;t<e.length;t++)o.hasOwnProperty(e[t])||d.unshift([e[t],Jg+"remove"])}d.forEach((t=>{let[n,i]=t;var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===n)return;if($g.equ(i,u[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return f.push([n,i,!0,[]]);let s=[];n.includes("-")&&(s=n.split("-")),f.push([n,i,!1,s]);for(const e in o){const t=o[e];e.startsWith("".concat(n,"-"))&&f.push([e,t,!1,e.split("-")])}}));const m={...o};return p.memoizedProps&&p.memoizedProps.args&&(m.args=p.memoizedProps.args),p.memoizedProps&&p.memoizedProps.attach&&(m.attach=p.memoizedProps.attach),{memoized:m,changes:f}}const av="undefined"!==typeof process&&!1;function lv(e,t){var n,i,r;const o=null!=(n=e.__r3f)?n:{},s=o.root,a=null!=(i=null==s||null==s.getState?void 0:s.getState())?i:{},{memoized:l,changes:u}=Xg(t)?t:sv(e,t),c=o.eventCount;e.__r3f&&(e.__r3f.memoizedProps=l);for(let h=0;h<u.length;h++){let[t,n,i,r]=u[h];if(zg(e)){const e=3001,i="srgb",r="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?i:r):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?i:r)}let s=e,l=s[t];if(r.length&&(l=r.reduce(((e,t)=>e[t]),e),!l||!l.set)){const[n,...i]=r.reverse();s=i.reverse().reduce(((e,t)=>e[t]),e),t=n}if(n===Jg+"remove")if(s.constructor){let e=Kg.get(s.constructor);e||(e=new s.constructor,Kg.set(s.constructor,e)),n=e[t]}else n=0;if(i)n?o.handlers[t]=n:delete o.handlers[t],o.eventCount=Object.keys(o.handlers).length;else if(l&&l.set&&(l.copy||l instanceof es)){if(Array.isArray(n))l.fromArray?l.fromArray(n):l.set(...n);else if(l.copy&&n&&n.constructor&&(av?l.constructor.name===n.constructor.name:l.constructor===n.constructor))l.copy(n);else if(void 0!==n){const e=l instanceof Ms;!e&&l.setScalar?l.setScalar(n):l instanceof es&&n instanceof es?l.mask=n.mask:l.set(n),jg()||a.linear||!e||l.convertSRGBToLinear()}}else if(s[t]=n,s[t]instanceof no&&s[t].format===yn&&s[t].type===sn){const e=s[t];zg(e)&&zg(a.gl)?e.colorSpace=a.gl.outputColorSpace:e.encoding=a.gl.outputEncoding}uv(e)}if(o.parent&&e.raycast&&c!==o.eventCount){const t=Zg(e).getState().internal,n=t.interaction.indexOf(e);n>-1&&t.interaction.splice(n,1),o.eventCount&&t.interaction.push(e)}return!(1===u.length&&"onUpdate"===u[0][0])&&u.length&&null!=(r=e.__r3f)&&r.parent&&cv(e),e}function uv(e){var t,n;const i=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function cv(e){null==e.onUpdate||e.onUpdate(e)}function hv(e,t){e.manual||(Hg(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function pv(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function dv(e,t,n,i){const r=n.get(t);r&&(n.delete(t),0===n.size&&(e.delete(i),r.target.releasePointerCapture(i)))}function fv(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const i=e.eventObject.__r3f,r=null==i?void 0:i.handlers;if(n.hovered.delete(pv(e)),null!=i&&i.eventCount){const n={...e,intersections:t};null==r.onPointerOut||r.onPointerOut(n),null==r.onPointerLeave||r.onPointerLeave(n)}}}function i(e,t){for(let n=0;n<t.length;n++){const i=t[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(e)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:i}=e.getState();"pointerId"in t&&i.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))}))}}return function(o){const{onPointerMissed:s,internal:a}=e.getState();a.lastEvent.current=o;const l="onPointerMove"===r,u="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,c=function(t,n){const i=e.getState(),r=new Set,o=[],s=n?n(i.internal.interaction):i.internal.interaction;for(let e=0;e<s.length;e++){const t=Qg(s[e]);t&&(t.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(t,i);let a=s.flatMap((function(e){const n=Qg(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(i=n.previousRoot)?void 0:i.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var i})).sort(((e,t)=>{const n=Qg(e.object),i=Qg(t.object);return n&&i&&i.events.priority-n.events.priority||e.distance-t.distance})).filter((e=>{const t=pv(e);return!r.has(t)&&(r.add(t),!0)}));i.events.filter&&(a=i.events.filter(a,i));for(const e of a){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&o.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId))for(let e of i.internal.capturedMap.get(t.pointerId).values())r.has(pv(e.intersection))||o.push(e.intersection);return o}(o,l?t:void 0),h=u?function(t){const{internal:n}=e.getState(),i=t.offsetX-n.initialClick[0],r=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(o):0;"onPointerDown"===r&&(a.initialClick=[o.offsetX,o.offsetY],a.initialHits=c.map((e=>e.eventObject))),u&&!c.length&&h<=2&&(i(o,a.interaction),s&&s(o)),l&&n(c),function(t,i,r,o){const s=e.getState();if(t.length){const e={stopped:!1};for(const a of t){const l=Qg(a.object)||s,{raycaster:u,pointer:c,camera:h,internal:p}=l,d=new po(c.x,c.y,0).unproject(h),f=e=>{var t,n;return null!=(t=null==(n=p.capturedMap.get(e))?void 0:n.has(a.eventObject))&&t},m=e=>{const t={intersection:a,target:i.target};p.capturedMap.has(e)?p.capturedMap.get(e).set(a.eventObject,t):p.capturedMap.set(e,new Map([[a.eventObject,t]])),i.target.setPointerCapture(e)},g=e=>{const t=p.capturedMap.get(e);t&&dv(p.capturedMap,a.eventObject,t,e)};let v={};for(let e in i){let t=i[e];"function"!==typeof t&&(v[e]=t)}let y={...a,...v,pointer:c,intersections:t,stopped:e.stopped,delta:r,unprojectedPoint:d,ray:u.ray,camera:h,stopPropagation(){const r="pointerId"in i&&p.capturedMap.get(i.pointerId);(!r||r.has(a.eventObject))&&(y.stopped=e.stopped=!0,p.hovered.size&&Array.from(p.hovered.values()).find((e=>e.eventObject===a.eventObject)))&&n([...t.slice(0,t.indexOf(a)),a])},target:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},nativeEvent:i};if(o(y),!0===e.stopped)break}}}(c,o,h,(function(e){const t=e.eventObject,n=t.__r3f,s=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){const t=pv(e),n=a.hovered.get(t);n?n.stopped&&e.stopPropagation():(a.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{const n=s[r];n?u&&!a.initialHits.includes(t)||(i(o,a.interaction.filter((e=>!a.initialHits.includes(e)))),n(e)):u&&a.initialHits.includes(t)&&i(o,a.interaction.filter((e=>!a.initialHits.includes(e))))}}))}}}}const mv=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],gv=e=>!(null==e||!e.render),vv=i.createContext(null),yv=(e,t)=>{const n=xg(((n,r)=>{const o=new po,s=new po,a=new po;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:i,height:l,top:u,left:c}=n,h=i/l;t instanceof po?a.copy(t):a.set(...t);const p=e.getWorldPosition(o).distanceTo(a);if(Hg(e))return{width:i/e.zoom,height:l/e.zoom,top:u,left:c,factor:1,distance:p,aspect:h};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*p,r=n*(i/l);return{width:r,height:n,top:u,left:c,factor:i/r,distance:p,aspect:h}}}let u;const c=e=>n((t=>({performance:{...t.performance,current:e}}))),h=new Ir,p={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(r(),t)},advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new sm,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();u&&clearTimeout(u),e.performance.current!==e.performance.min&&c(e.performance.min),u=setTimeout((()=>c(r().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>n((t=>({...t,events:{...t.events,...e}}))),setSize:(e,t,i,o,a)=>{const u=r().camera,c={width:e,height:t,top:o||0,left:a||0,updateStyle:i};n((e=>({size:c,viewport:{...e.viewport,...l(u,s,c)}})))},setDpr:e=>n((t=>{const n=Yg(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}})),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:i.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}};return p})),r=n.getState();let o=r.size,s=r.viewport.dpr,a=r.camera;return n.subscribe((()=>{const{camera:e,size:t,viewport:i,gl:r,set:l}=n.getState();if(t.width!==o.width||t.height!==o.height||i.dpr!==s){var u;o=t,s=i.dpr,hv(e,t),r.setPixelRatio(i.dpr);const n=null!=(u=t.updateStyle)?u:"undefined"!==typeof HTMLCanvasElement&&r.domElement instanceof HTMLCanvasElement;r.setSize(t.width,t.height,n)}e!==a&&(a=e,l((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),n.subscribe((t=>e(t))),n};let Sv,Rv=new Set,wv=new Set,Lv=new Set;function bv(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function Cv(e,t){switch(e){case"before":return bv(Rv,t);case"after":return bv(wv,t);case"tail":return bv(Lv,t)}}let _v,Av;function Ev(e,t,n){let i=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),_v=t.internal.subscribers,Sv=0;Sv<_v.length;Sv++)Av=_v[Sv],Av.ref.current(Av.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function xv(){const e=i.useContext(vv);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function Pv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return xv()(e,t)}function Tv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=xv(),i=n.getState().internal.subscribe,r=Wg(e);return Gg((()=>i(r,t,n)),[t,i,n]),null}const Mv=new WeakMap;function kv(e,t){return function(n){let i=Mv.get(n);i||(i=new n,Mv.set(n,i)),e&&e(i);for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return Promise.all(o.map((e=>new Promise(((n,r)=>i.load(e,(e=>{e.scene&&Object.assign(e,ev(e.scene)),n(e)}),t,(t=>r(new Error("Could not load ".concat(e,": ").concat(null==t?void 0:t.message)))))))))).finally((()=>null==i.dispose?void 0:i.dispose()))}}function Iv(e,t,n,i){const r=Array.isArray(t)?t:[t],o=Og(kv(n,i),[e,...r],{equal:$g.equ});return Array.isArray(t)?o:o[0]}Iv.preload=function(e,t,n){const i=Array.isArray(t)?t:[t];return((e,t,n)=>{Dg(e,t,!0,n)})(kv(n),[e,...i])},Iv.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)kg.splice(0,kg.length);else{const t=kg.find((t=>Ig(e,t.keys,t.equal)));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const Dv=new Map,{invalidate:Ov,advance:Bv}=function(e){let t,n,i,r=!1;function o(s){n=requestAnimationFrame(o),r=!0,t=0,Cv("before",s);for(const n of e.values()){var a;i=n.store.getState(),!i.internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(a=i.gl.xr)&&a.isPresenting||(t+=Ev(s,i))}if(Cv("after",s),0===t)return Cv("tail",s),r=!1,cancelAnimationFrame(n)}return{loop:o,invalidate:function t(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var s;if(!n)return e.forEach((e=>t(e.store.getState())),i);null!=(s=n.gl.xr)&&s.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+i),r||(r=!0,requestAnimationFrame(o)))},advance:function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(n&&Cv("before",t),i)Ev(t,i,r);else for(const o of e.values())Ev(t,o.store.getState());n&&Cv("after",t)}}}(Dv),{reconciler:Uv,applyProps:Nv}=function(e,t){function n(e,t,n){let i,{args:r=[],attach:o,...s}=t,a="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===s.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=tv(s.object,{type:e,root:n,attach:o,primitive:!0})}else{const t=Bg[a];if(!t)throw new Error("R3F: ".concat(a," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(r))throw new Error("R3F: The args prop must be an array!");i=tv(new t(...r),{type:e,root:n,attach:o,memoizedProps:{args:r}})}return void 0===i.__r3f.attach&&(i instanceof aa?i.__r3f.attach="geometry":i instanceof Ds&&(i.__r3f.attach="material")),"inject"!==a&&lv(i,s),i}function i(e,t){let n=!1;var i,r;t&&(null!=(i=t.__r3f)&&i.attach?rv(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||tv(t,{}),t.__r3f.parent=e,cv(t),uv(t))}function r(e,t,n){let i=!1;if(t){var r,o;if(null!=(r=t.__r3f)&&r.attach)rv(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const r=e.children.filter((e=>e!==t)),o=r.indexOf(n);e.children=[...r.slice(0,o),t,...r.slice(o)],i=!0}i||null==(o=e.__r3f)||o.objects.push(t),t.__r3f||tv(t,{}),t.__r3f.parent=e,cv(t),uv(t)}}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&[...e].forEach((e=>s(t,e,n)))}function s(e,t,n){if(t){var i,r,s;if(t.__r3f&&(t.__r3f.parent=null),null!=(i=e.__r3f)&&i.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(r=t.__r3f)&&r.attach)ov(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var a;e.remove(t),null!=(a=t.__r3f)&&a.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,i)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(i)})),n.capturedMap.forEach(((e,i)=>{dv(n.capturedMap,t,e,i)}))}(Zg(t),t)}const u=null==(s=t.__r3f)?void 0:s.primitive,c=!u&&(void 0===n?null!==t.dispose:n);var l;if(!u)o(null==(l=t.__r3f)?void 0:l.objects,t,c),o(t.children,t,c);if(delete t.__r3f,c&&t.dispose&&"Scene"!==t.type){const e=()=>{try{t.dispose()}catch(e){}};"undefined"===typeof IS_REACT_ACT_ENVIRONMENT?(0,Mg.unstable_scheduleCallback)(Mg.unstable_IdlePriority,e):e()}uv(e)}}const a=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Tg()({createInstance:n,removeChild:s,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,i(n,t))},removeChildFromContainer:(e,t)=>{t&&s(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const i=e.getState().scene;i.__r3f&&r(i,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,i){var r;if((null!=(r=null==e?void 0:e.__r3f)?r:{}).primitive&&i.object&&i.object!==e)return[!0];{const{args:t=[],children:r,...o}=i,{args:s=[],children:a,...l}=n;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==s[t])))return[!0];const u=sv(e,o,l,!0);return u.changes.length?[!1,u]:null}},commitUpdate(e,t,r,o,a,l){let[u,c]=t;u?function(e,t,r,o){var a;const l=null==(a=e.__r3f)?void 0:a.parent;if(!l)return;const u=n(t,r,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&i(u,t);e.children=e.children.filter((e=>!e.__r3f))}e.__r3f.objects.forEach((e=>i(u,e))),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||s(l,e),u.parent&&(u.__r3f.autoRemovedBeforeAppend=!0),i(l,u),u.raycast&&u.__r3f.eventCount&&Zg(u).getState().internal.interaction.push(u);[o,o.alternate].forEach((e=>{null!==e&&(e.stateNode=u,e.ref&&("function"===typeof e.ref?e.ref(u):e.ref.current=u))}))}(e,r,a,l):lv(e,c)},commitMount(e,t,n,i){var r;const o=null!=(r=e.__r3f)?r:{};e.raycast&&o.handlers&&o.eventCount&&Zg(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>tv(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:i}=null!=(t=e.__r3f)?t:{};n&&i&&ov(i,e,n),e.isObject3D&&(e.visible=!1),uv(e)},unhideInstance(e,t){var n;const{attach:i,parent:r}=null!=(n=e.__r3f)?n:{};i&&r&&rv(r,e,i),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),uv(e)},createTextInstance:a,hideTextInstance:a,unhideTextInstance:a,getCurrentEventPriority:()=>t?t():_g.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&$g.fun(performance.now)?performance.now:$g.fun(Date.now)?Date.now:()=>0,scheduleTimeout:$g.fun(setTimeout)?setTimeout:void 0,cancelTimeout:$g.fun(clearTimeout)?clearTimeout:void 0}),applyProps:lv}}(0,(function(){var e;const t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return _g.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return _g.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return _g.ContinuousEventPriority;default:return _g.DefaultEventPriority}})),Fv={objects:"shallow",strict:!1},zv=(e,t)=>{const n="function"===typeof e?e(t):e;return gv(n)?n:new xc({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function jv(e){const t=Dv.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const o="function"===typeof reportError?reportError:console.error,s=r||yv(Ov,Bv),a=n||Uv.createContainer(s,_g.ConcurrentRoot,null,!1,null,"",o,null);let l;t||Dv.set(e,{fiber:a,store:s});let u,c=!1;return{configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:i,scene:r,events:o,onCreated:a,shadows:h=!1,linear:p=!1,flat:d=!1,legacy:f=!1,orthographic:m=!1,frameloop:g="always",dpr:v=[1,2],performance:y,raycaster:S,camera:R,onPointerMissed:w}=t,L=s.getState(),b=L.gl;L.gl||L.set({gl:b=zv(n,e)});let C=L.raycaster;C||L.set({raycaster:C=new Um});const{params:_,...A}=S||{};if($g.equ(A,C,Fv)||Nv(C,{...A}),$g.equ(_,C.params,Fv)||Nv(C,{params:{...C.params,..._}}),!L.camera||L.camera===u&&!$g.equ(u,R,Fv)){u=R;const e=R instanceof Ia,t=e?R:m?new ol(0,0,0,0,.1,1e3):new Da(75,0,.1,1e3);e||(t.position.z=5,R&&Nv(t,R),L.camera||null!=R&&R.rotation||t.lookAt(0,0,0)),L.set({camera:t}),C.camera=t}if(!L.scene){let e;r instanceof kc?e=r:(e=new kc,r&&Nv(e,r)),L.set({scene:tv(e)})}if(!L.xr){var E;const e=(e,t)=>{const n=s.getState();"never"!==n.frameloop&&Bv(e,!0,n,t)},t=()=>{const t=s.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||Ov(t)},n={connect(){const e=s.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=s.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(E=b.xr)?void 0:E.addEventListener)&&n.connect(),L.set({xr:n})}if(b.shadowMap){const e=b.shadowMap.enabled,t=b.shadowMap.type;if(b.shadowMap.enabled=!!h,$g.boo(h))b.shadowMap.type=He;else if($g.str(h)){var x;const e={basic:ze,percentage:je,soft:He,variance:Ge};b.shadowMap.type=null!=(x=e[h])?x:He}else $g.obj(h)&&Object.assign(b.shadowMap,h);e===b.shadowMap.enabled&&t===b.shadowMap.type||(b.shadowMap.needsUpdate=!0)}const P=jg();P&&("enabled"in P?P.enabled=!f:"legacyMode"in P&&(P.legacyMode=f));Nv(b,{outputEncoding:p?3e3:3001,toneMapping:d?Mt:Ot}),L.legacy!==f&&L.set((()=>({legacy:f}))),L.linear!==p&&L.set((()=>({linear:p}))),L.flat!==d&&L.set((()=>({flat:d}))),!n||$g.fun(n)||gv(n)||$g.equ(n,b,Fv)||Nv(b,n),o&&!L.events.handlers&&L.set({events:o(s)});const T=function(e,t){const n="undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){const{width:e,height:i,top:r,left:o,updateStyle:s=n}=t;return{width:e,height:i,top:r,left:o,updateStyle:s}}if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:i,top:r,left:o}=e.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:o,updateStyle:n}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(e,i);return $g.equ(T,L.size,Fv)||L.setSize(T.width,T.height,T.updateStyle,T.top,T.left),v&&L.viewport.dpr!==Yg(v)&&L.setDpr(v),L.frameloop!==g&&L.setFrameloop(g),L.onPointerMissed||L.set({onPointerMissed:w}),y&&!$g.equ(y,L.performance,Fv)&&L.set((e=>({performance:{...e.performance,...y}}))),l=a,c=!0,this},render(t){return c||this.configure(),Uv.updateContainer(i.createElement(Hv,{store:s,children:t,onCreated:l,rootElement:e}),a,null,(()=>{})),s},unmount(){Gv(e)}}}function Hv(e){let{store:t,children:n,onCreated:r,rootElement:o}=e;return Gg((()=>{const e=t.getState();e.set((e=>({internal:{...e.internal,active:!0}}))),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(o)}),[]),i.createElement(vv.Provider,{value:t},n)}function Gv(e,t){const n=Dv.get(e),i=null==n?void 0:n.fiber;if(i){const r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),Uv.updateContainer(null,i,null,(()=>{r&&setTimeout((()=>{try{var n,i,o,s;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(o=r.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(s=r.gl)&&s.xr&&r.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(r),Dv.delete(e),t&&t(e)}catch(a){}}),500)}))}}function Wv(e){let{state:t={},children:n,container:r}=e;const{events:o,size:s,...a}=t,l=xv(),[u]=i.useState((()=>new Um)),[c]=i.useState((()=>new Ir)),h=i.useCallback(((e,t)=>{const n={...e};let i;if(Object.keys(e).forEach((i=>{(mv.includes(i)||e[i]!==t[i]&&t[i])&&delete n[i]})),t&&s){const n=t.camera;i=e.viewport.getCurrentViewport(n,new po,s),n!==e.camera&&hv(n,s)}return{...n,scene:r,raycaster:u,pointer:c,mouse:c,previousRoot:l,events:{...e.events,...null==t?void 0:t.events,...o},size:{...e.size,...s},viewport:{...e.viewport,...i},...a}}),[t]),[p]=i.useState((()=>{const e=l.getState(),t=xg(((t,n)=>({...e,scene:r,raycaster:u,pointer:c,mouse:c,previousRoot:l,events:{...e.events,...o},size:{...e.size,...s},...a,set:t,get:n,setEvents:e=>t((t=>({...t,events:{...t.events,...e}})))})));return t}));return i.useEffect((()=>{const e=l.subscribe((e=>p.setState((t=>h(e,t)))));return()=>{e(),p.destroy()}}),[]),i.useEffect((()=>{p.setState((e=>h(l.getState(),e)))}),[h]),i.createElement(i.Fragment,null,Uv.createPortal(i.createElement(vv.Provider,{value:p},n),p,null))}Uv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:i.version});i.unstable_act;var qv=Object.defineProperty,Vv=(e,t,n)=>(((e,t,n)=>{t in e?qv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const Jv=new Ho,Kv=new Ha,Xv=Math.cos(Math.PI/180*70),Yv=(e,t)=>(e%t+t)%t;class Qv extends Sr{constructor(e,t){super(),Vv(this,"object"),Vv(this,"domElement"),Vv(this,"enabled",!0),Vv(this,"target",new po),Vv(this,"minDistance",0),Vv(this,"maxDistance",1/0),Vv(this,"minZoom",0),Vv(this,"maxZoom",1/0),Vv(this,"minPolarAngle",0),Vv(this,"maxPolarAngle",Math.PI),Vv(this,"minAzimuthAngle",-1/0),Vv(this,"maxAzimuthAngle",1/0),Vv(this,"enableDamping",!1),Vv(this,"dampingFactor",.05),Vv(this,"enableZoom",!0),Vv(this,"zoomSpeed",1),Vv(this,"enableRotate",!0),Vv(this,"rotateSpeed",1),Vv(this,"enablePan",!0),Vv(this,"panSpeed",1),Vv(this,"screenSpacePanning",!0),Vv(this,"keyPanSpeed",7),Vv(this,"zoomToCursor",!1),Vv(this,"autoRotate",!1),Vv(this,"autoRotateSpeed",2),Vv(this,"reverseOrbit",!1),Vv(this,"reverseHorizontalOrbit",!1),Vv(this,"reverseVerticalOrbit",!1),Vv(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Vv(this,"mouseButtons",{LEFT:De.ROTATE,MIDDLE:De.DOLLY,RIGHT:De.PAN}),Vv(this,"touches",{ONE:Oe.ROTATE,TWO:Oe.DOLLY_PAN}),Vv(this,"target0"),Vv(this,"position0"),Vv(this,"zoom0"),Vv(this,"_domElementKeyEvents",null),Vv(this,"getPolarAngle"),Vv(this,"getAzimuthalAngle"),Vv(this,"setPolarAngle"),Vv(this,"setAzimuthalAngle"),Vv(this,"getDistance"),Vv(this,"listenToKeyEvents"),Vv(this,"stopListenToKeyEvents"),Vv(this,"saveState"),Vv(this,"reset"),Vv(this,"update"),Vv(this,"connect"),Vv(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=e=>{let t=Yv(e,2*Math.PI),i=u.phi;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),c.phi=t-i,n.update()},this.setAzimuthalAngle=e=>{let t=Yv(e,2*Math.PI),i=u.theta;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let r=Math.abs(t-i);2*Math.PI-r<r&&(t<i?t+=2*Math.PI:i+=2*Math.PI),c.theta=t-i,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",Y),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Y),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),a=s.NONE},this.update=(()=>{const t=new po,r=new po(0,1,0),o=(new ho).setFromUnitVectors(e.up,r),d=o.clone().invert(),f=new po,m=new ho,g=2*Math.PI;return function(){const v=n.object.position;o.setFromUnitVectors(e.up,r),d.copy(o).invert(),t.copy(v).sub(n.target),t.applyQuaternion(o),u.setFromVector3(t),n.autoRotate&&a===s.NONE&&x(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=c.theta*n.dampingFactor,u.phi+=c.phi*n.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);let y=n.minAzimuthAngle,S=n.maxAzimuthAngle;isFinite(y)&&isFinite(S)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),S<-Math.PI?S+=g:S>Math.PI&&(S-=g),u.theta=y<=S?Math.max(y,Math.min(S,u.theta)):u.theta>(y+S)/2?Math.max(y,u.theta):Math.min(S,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),n.zoomToCursor&&C||n.object.isOrthographicCamera?u.radius=B(u.radius):u.radius=B(u.radius*h),t.setFromSpherical(u),t.applyQuaternion(d),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),p.set(0,0,0));let R=!1;if(n.zoomToCursor&&C){let i=null;if(n.object instanceof Da&&n.object.isPerspectiveCamera){const e=t.length();i=B(e*h);const r=e-i;n.object.position.addScaledVector(L,r),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new po(b.x,b.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),R=!0;const r=new po(b.x,b.y,0);r.unproject(n.object),n.object.position.sub(r).add(e),n.object.updateMatrixWorld(),i=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==i&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(Jv.origin.copy(n.object.position),Jv.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Jv.direction))<Xv?e.lookAt(n.target):(Kv.setFromNormalAndCoplanarPoint(n.object.up,n.target),Jv.intersectPlane(Kv,n.target))))}else n.object instanceof ol&&n.object.isOrthographicCamera&&(R=1!==h,R&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix()));return h=1,C=!1,!!(R||f.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(i),f.copy(n.object.position),m.copy(n.object.quaternion),R=!1,!0)}})(),this.connect=e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Q),n.domElement.addEventListener("pointerdown",q),n.domElement.addEventListener("pointercancel",K),n.domElement.addEventListener("wheel",X)},this.dispose=()=>{var e,t,i,r,o,s;null==(e=n.domElement)||e.removeEventListener("contextmenu",Q),null==(t=n.domElement)||t.removeEventListener("pointerdown",q),null==(i=n.domElement)||i.removeEventListener("pointercancel",K),null==(r=n.domElement)||r.removeEventListener("wheel",X),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointermove",V),null==(s=n.domElement)||s.ownerDocument.removeEventListener("pointerup",J),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",Y)};const n=this,i={type:"change"},r={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=s.NONE;const l=1e-6,u=new zm,c=new zm;let h=1;const p=new po,d=new Ir,f=new Ir,m=new Ir,g=new Ir,v=new Ir,y=new Ir,S=new Ir,R=new Ir,w=new Ir,L=new po,b=new Ir;let C=!1;const _=[],A={};function E(){return Math.pow(.95,n.zoomSpeed)}function x(e){n.reverseOrbit||n.reverseHorizontalOrbit?c.theta+=e:c.theta-=e}function P(e){n.reverseOrbit||n.reverseVerticalOrbit?c.phi+=e:c.phi-=e}const T=(()=>{const e=new po;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}})(),M=(()=>{const e=new po;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}})(),k=(()=>{const e=new po;return function(t,i){const r=n.domElement;if(r&&n.object instanceof Da&&n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),T(2*t*s/r.clientHeight,n.object.matrix),M(2*i*s/r.clientHeight,n.object.matrix)}else r&&n.object instanceof ol&&n.object.isOrthographicCamera?(T(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),M(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function I(e){n.object instanceof Da&&n.object.isPerspectiveCamera||n.object instanceof ol&&n.object.isOrthographicCamera?h/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){n.object instanceof Da&&n.object.isPerspectiveCamera||n.object instanceof ol&&n.object.isOrthographicCamera?h*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){if(!n.zoomToCursor||!n.domElement)return;C=!0;const t=n.domElement.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,o=t.width,s=t.height;b.x=i/o*2-1,b.y=-r/s*2+1,L.set(b.x,b.y,1).unproject(n.object).sub(n.object.position).normalize()}function B(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function U(e){d.set(e.clientX,e.clientY)}function N(e){g.set(e.clientX,e.clientY)}function F(){if(1==_.length)d.set(_[0].pageX,_[0].pageY);else{const e=.5*(_[0].pageX+_[1].pageX),t=.5*(_[0].pageY+_[1].pageY);d.set(e,t)}}function z(){if(1==_.length)g.set(_[0].pageX,_[0].pageY);else{const e=.5*(_[0].pageX+_[1].pageX),t=.5*(_[0].pageY+_[1].pageY);g.set(e,t)}}function j(){const e=_[0].pageX-_[1].pageX,t=_[0].pageY-_[1].pageY,n=Math.sqrt(e*e+t*t);S.set(0,n)}function H(e){if(1==_.length)f.set(e.pageX,e.pageY);else{const t=ee(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);f.set(n,i)}m.subVectors(f,d).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(x(2*Math.PI*m.x/t.clientHeight),P(2*Math.PI*m.y/t.clientHeight)),d.copy(f)}function G(e){if(1==_.length)v.set(e.pageX,e.pageY);else{const t=ee(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(n,i)}y.subVectors(v,g).multiplyScalar(n.panSpeed),k(y.x,y.y),g.copy(v)}function W(e){const t=ee(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);R.set(0,o),w.set(0,Math.pow(R.y/S.y,n.zoomSpeed)),I(w.y),S.copy(R)}function q(e){var t,i;!1!==n.enabled&&(0===_.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",V),null==(i=n.domElement)||i.ownerDocument.addEventListener("pointerup",J)),function(e){_.push(e)}(e),"touch"===e.pointerType?function(e){switch($(e),_.length){case 1:switch(n.touches.ONE){case Oe.ROTATE:if(!1===n.enableRotate)return;F(),a=s.TOUCH_ROTATE;break;case Oe.PAN:if(!1===n.enablePan)return;z(),a=s.TOUCH_PAN;break;default:a=s.NONE}break;case 2:switch(n.touches.TWO){case Oe.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&j(),n.enablePan&&z(),a=s.TOUCH_DOLLY_PAN;break;case Oe.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&j(),n.enableRotate&&F(),a=s.TOUCH_DOLLY_ROTATE;break;default:a=s.NONE}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(r)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case De.DOLLY:if(!1===n.enableZoom)return;!function(e){O(e),S.set(e.clientX,e.clientY)}(e),a=s.DOLLY;break;case De.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;N(e),a=s.PAN}else{if(!1===n.enableRotate)return;U(e),a=s.ROTATE}break;case De.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;U(e),a=s.ROTATE}else{if(!1===n.enablePan)return;N(e),a=s.PAN}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(r)}(e))}function V(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch($(e),a){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;H(e),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;G(e),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&W(e),n.enablePan&&G(e)}(e),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&W(e),n.enableRotate&&H(e)}(e),n.update();break;default:a=s.NONE}}(e):function(e){if(!1===n.enabled)return;switch(a){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),m.subVectors(f,d).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(x(2*Math.PI*m.x/t.clientHeight),P(2*Math.PI*m.y/t.clientHeight)),d.copy(f),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){R.set(e.clientX,e.clientY),w.subVectors(R,S),w.y>0?I(E()):w.y<0&&D(E()),S.copy(R),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),k(y.x,y.y),g.copy(v),n.update()}(e)}}(e))}function J(e){var t,i,r;Z(e),0===_.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointermove",V),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointerup",J)),n.dispatchEvent(o),a=s.NONE}function K(e){Z(e)}function X(e){!1===n.enabled||!1===n.enableZoom||a!==s.NONE&&a!==s.ROTATE||(e.preventDefault(),n.dispatchEvent(r),function(e){O(e),e.deltaY<0?D(E()):e.deltaY>0&&I(E()),n.update()}(e),n.dispatchEvent(o))}function Y(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:k(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:k(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:k(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:k(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Q(e){!1!==n.enabled&&e.preventDefault()}function Z(e){delete A[e.pointerId];for(let t=0;t<_.length;t++)if(_[t].pointerId==e.pointerId)return void _.splice(t,1)}function $(e){let t=A[e.pointerId];void 0===t&&(t=new Ir,A[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ee(e){const t=e.pointerId===_[0].pointerId?_[1]:_[0];return A[t.pointerId]}void 0!==t&&this.connect(t),this.update()}}const Zv=i.forwardRef(((e,t)=>{let{makeDefault:n,camera:r,regress:o,domElement:s,enableDamping:a=!0,keyEvents:l=!1,onChange:u,onStart:c,onEnd:h,...p}=e;const d=Pv((e=>e.invalidate)),f=Pv((e=>e.camera)),m=Pv((e=>e.gl)),g=Pv((e=>e.events)),v=Pv((e=>e.setEvents)),y=Pv((e=>e.set)),S=Pv((e=>e.get)),R=Pv((e=>e.performance)),w=r||f,L=s||g.connected||m.domElement,b=i.useMemo((()=>new Qv(w)),[w]);return Tv((()=>{b.enabled&&b.update()}),-1),i.useEffect((()=>(l&&b.connect(!0===l?L:l),b.connect(L),()=>{b.dispose()})),[l,L,o,b,d]),i.useEffect((()=>{const e=e=>{d(),o&&R.regress(),u&&u(e)},t=e=>{c&&c(e)},n=e=>{h&&h(e)};return b.addEventListener("change",e),b.addEventListener("start",t),b.addEventListener("end",n),()=>{b.removeEventListener("start",t),b.removeEventListener("end",n),b.removeEventListener("change",e)}}),[u,c,h,b,d,v]),i.useEffect((()=>{if(n){const e=S().controls;return y({controls:b}),()=>y({controls:e})}}),[n,b]),i.createElement("primitive",ke({ref:t,object:b,enableDamping:a},p))})),$v=(()=>parseInt(Ie.replace(/\D+/g,"")))();class ey extends ka{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n\n        #include <tonemapping_fragment>\n\t      #include <".concat($v>=154?"colorspace_fragment":"encodings_fragment",">\n      }")})}}const ty=e=>(new po).setFromSpherical(new zm(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI)),ny=i.forwardRef(((e,t)=>{let{radius:n=100,depth:r=50,count:o=5e3,saturation:s=0,factor:a=4,fade:l=!1,speed:u=1}=e;const c=i.useRef(),[h,p,d]=i.useMemo((()=>{const e=[],t=[],i=Array.from({length:o},(()=>(.5+.5*Math.random())*a)),l=new Ms;let u=n+r;const c=r/o;for(let n=0;n<o;n++)u-=c*Math.random(),e.push(...ty(u).toArray()),l.setHSL(n/o,s,.9),t.push(l.r,l.g,l.b);return[new Float32Array(e),new Float32Array(t),new Float32Array(i)]}),[o,r,a,n,s]);Tv((e=>c.current&&(c.current.uniforms.time.value=e.clock.getElapsedTime()*u)));const[f]=i.useState((()=>new ey));return i.createElement("points",{ref:t},i.createElement("bufferGeometry",null,i.createElement("bufferAttribute",{attach:"attributes-position",args:[h,3]}),i.createElement("bufferAttribute",{attach:"attributes-color",args:[p,3]}),i.createElement("bufferAttribute",{attach:"attributes-size",args:[d,1]})),i.createElement("primitive",{ref:c,object:f,attach:"material",blending:Ye,"uniforms-fade-value":l,depthWrite:!1,transparent:!0,vertexColors:!0}))}));const iy=function(e){return function(t){e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}};const ry=i.forwardRef(((e,t)=>{let{envMap:n,resolution:r=256,frames:o=1/0,children:s,makeDefault:a,...l}=e;const u=Pv((e=>{let{set:t}=e;return t})),c=Pv((e=>{let{camera:t}=e;return t})),h=Pv((e=>{let{size:t}=e;return t})),p=i.useRef(null),d=i.useRef(null),f=function(e,t,n){const r=Pv((e=>e.size)),o=Pv((e=>e.viewport)),s="number"===typeof e?e:r.width*o.dpr,a="number"===typeof t?t:r.height*o.dpr,l=("number"===typeof e?n:e)||{},{samples:u=0,depth:c,...h}=l,p=i.useMemo((()=>{const e=new oo(s,a,{minFilter:en,magFilter:en,type:dn,...h});return c&&(e.depthTexture=new Tl(s,a,pn)),e.samples=u,e}),[]);return i.useLayoutEffect((()=>{p.setSize(s,a),u&&(p.samples=u)}),[u,p,s,a]),i.useEffect((()=>()=>p.dispose()),[]),p}(r);i.useLayoutEffect((()=>{l.manual||p.current.updateProjectionMatrix()}),[h,l]),i.useLayoutEffect((()=>{p.current.updateProjectionMatrix()})),i.useLayoutEffect((()=>{if(a){const e=c;return u((()=>({camera:p.current}))),()=>u((()=>({camera:e})))}}),[p,a,u]);let m=0,g=null;const v="function"===typeof s;return Tv((e=>{v&&(o===1/0||m<o)&&(d.current.visible=!1,e.gl.setRenderTarget(f),g=e.scene.background,n&&(e.scene.background=n),e.gl.render(e.scene,p.current),e.scene.background=g,e.gl.setRenderTarget(null),d.current.visible=!0,m++)})),i.createElement(i.Fragment,null,i.createElement("orthographicCamera",ke({left:h.width/-2,right:h.width/2,top:h.height/2,bottom:h.height/-2,ref:iy([p,t])},l),!v&&s),i.createElement("group",{ref:d},v&&s(f.texture)))}));class oy extends _a{constructor(e,t){var n,i;const r=(o=e)&&o.isCubeTexture;var o;const s=(null!=(i=r?null==(n=e.image[0])?void 0:n.width:e.image.width)?i:1024)/4,a=Math.floor(Math.log2(s)),l=Math.pow(2,a),u=3*Math.max(l,112),c=4*l,h=[r?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH ".concat(1/u),"#define CUBEUV_TEXEL_HEIGHT ".concat(1/c),"#define CUBEUV_MAX_MIP ".concat(a,".0")].join("\n")+"\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <".concat(parseInt(Ie.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n        "),p={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}};super(new bd(1,16),new ka({uniforms:p,fragmentShader:h,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:Ve}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class sy extends bf{constructor(e){super(e),this.type=dn}parse(e){const t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;let i=e.pos,r=-1,o=0,s="",a=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));for(;0>(r=a.indexOf("\n"))&&o<t&&i<e.byteLength;)s+=a,o+=a.length,i+=128,a+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));return-1<r&&(!1!==n&&(e.pos+=o+r+1),s+a.slice(0,r))},i=function(e,t,n,i){const r=e[t+3],o=Math.pow(2,r-128)/255;n[i+0]=e[t+0]*o,n[i+1]=e[t+1]*o,n[i+2]=e[t+2]*o,n[i+3]=1},r=function(e,t,n,i){const r=e[t+3],o=Math.pow(2,r-128)/255;n[i+0]=zs.toHalfFloat(Math.min(e[t+0]*o,65504)),n[i+1]=zs.toHalfFloat(Math.min(e[t+1]*o,65504)),n[i+2]=zs.toHalfFloat(Math.min(e[t+2]*o,65504)),n[i+3]=zs.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const s=function(e){const i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,u;if(e.pos>=e.byteLength||!(l=n(e)))return t(1,"no header found");if(!(u=l.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(a.valid|=1,a.programtype=u[1],a.string+=l+"\n";l=n(e),!1!==l;)if(a.string+=l+"\n","#"!==l.charAt(0)){if((u=l.match(i))&&(a.gamma=parseFloat(u[1])),(u=l.match(r))&&(a.exposure=parseFloat(u[1])),(u=l.match(o))&&(a.valid|=2,a.format=u[1]),(u=l.match(s))&&(a.valid|=4,a.height=parseInt(u[1],10),a.width=parseInt(u[2],10)),2&a.valid&&4&a.valid)break}else a.comments+=l+"\n";return 2&a.valid?4&a.valid?a:t(3,"missing image size specifier"):t(3,"missing format specifier")}(o);if(-1!==s){const e=s.width,n=s.height,a=function(e,n,i){const r=n;if(r<8||r>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(r!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");const o=new Uint8Array(4*n*i);if(!o.length)return t(4,"unable to allocate buffer space");let s=0,a=0;const l=4*r,u=new Uint8Array(4),c=new Uint8Array(l);let h=i;for(;h>0&&a<e.byteLength;){if(a+4>e.byteLength)return t(1);if(u[0]=e[a++],u[1]=e[a++],u[2]=e[a++],u[3]=e[a++],2!=u[0]||2!=u[1]||(u[2]<<8|u[3])!=r)return t(3,"bad rgbe scanline format");let n,i=0;for(;i<l&&a<e.byteLength;){n=e[a++];const r=n>128;if(r&&(n-=128),0===n||i+n>l)return t(3,"bad scanline data");if(r){const t=e[a++];for(let e=0;e<n;e++)c[i++]=t}else c.set(e.subarray(a,a+n),i),i+=n,a+=n}const p=r;for(let e=0;e<p;e++){let t=0;o[s]=c[e+t],t+=r,o[s+1]=c[e+t],t+=r,o[s+2]=c[e+t],t+=r,o[s+3]=c[e+t],s+=4}h--}return o}(o.subarray(o.pos),e,n);if(-1!==a){let t,o,l;switch(this.type){case pn:l=a.length/4;const e=new Float32Array(4*l);for(let t=0;t<l;t++)i(a,4*t,e,4*t);t=e,o=pn;break;case dn:l=a.length/4;const n=new Uint16Array(4*l);for(let t=0;t<l;t++)r(a,4*t,n,4*t);t=n,o=dn;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:n,data:t,header:s.string,gamma:s.gamma,exposure:s.exposure,type:o}}}return null}setDataType(e){return this.type=e,this}load(e,t,n,i){return super.load(e,(function(e,n){switch(e.type){case pn:case dn:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=en,e.magFilter=en,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,i)}}var ay=Uint8Array,ly=Uint16Array,uy=Uint32Array,cy=new ay([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hy=new ay([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),py=new ay([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dy=function(e,t){for(var n=new ly(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new uy(n[30]);for(i=1;i<30;++i)for(var o=n[i];o<n[i+1];++o)r[o]=o-n[i]<<5|i;return[n,r]},fy=dy(cy,2),my=fy[0],gy=fy[1];my[28]=258,gy[258]=28;for(var vy=dy(hy,0),yy=vy[0],Sy=(vy[1],new ly(32768)),Ry=0;Ry<32768;++Ry){var wy=(43690&Ry)>>>1|(21845&Ry)<<1;wy=(61680&(wy=(52428&wy)>>>2|(13107&wy)<<2))>>>4|(3855&wy)<<4,Sy[Ry]=((65280&wy)>>>8|(255&wy)<<8)>>>1}var Ly=function(e,t,n){for(var i=e.length,r=0,o=new ly(t);r<i;++r)++o[e[r]-1];var s,a=new ly(t);for(r=0;r<t;++r)a[r]=a[r-1]+o[r-1]<<1;if(n){s=new ly(1<<t);var l=15-t;for(r=0;r<i;++r)if(e[r])for(var u=r<<4|e[r],c=t-e[r],h=a[e[r]-1]++<<c,p=h|(1<<c)-1;h<=p;++h)s[Sy[h]>>>l]=u}else for(s=new ly(i),r=0;r<i;++r)e[r]&&(s[r]=Sy[a[e[r]-1]++]>>>15-e[r]);return s},by=new ay(288);for(Ry=0;Ry<144;++Ry)by[Ry]=8;for(Ry=144;Ry<256;++Ry)by[Ry]=9;for(Ry=256;Ry<280;++Ry)by[Ry]=7;for(Ry=280;Ry<288;++Ry)by[Ry]=8;var Cy=new ay(32);for(Ry=0;Ry<32;++Ry)Cy[Ry]=5;var _y=Ly(by,9,1),Ay=Ly(Cy,5,1),Ey=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},xy=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},Py=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Ty=function(e){return(e/8|0)+(7&e&&1)},My=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var i=new(e instanceof ly?ly:e instanceof uy?uy:ay)(n-t);return i.set(e.subarray(t,n)),i},ky=function(e,t,n){var i=e.length;if(!i||n&&!n.l&&i<5)return t||new ay(0);var r=!t||n,o=!n||n.i;n||(n={}),t||(t=new ay(3*i));var s=function(e){var n=t.length;if(e>n){var i=new ay(Math.max(2*n,e));i.set(t),t=i}},a=n.f||0,l=n.p||0,u=n.b||0,c=n.l,h=n.d,p=n.m,d=n.n,f=8*i;do{if(!c){n.f=a=xy(e,l,1);var m=xy(e,l+1,3);if(l+=3,!m){var g=e[(E=Ty(l)+4)-4]|e[E-3]<<8,v=E+g;if(v>i){if(o)throw"unexpected EOF";break}r&&s(u+g),t.set(e.subarray(E,v),u),n.b=u+=g,n.p=l=8*v;continue}if(1==m)c=_y,h=Ay,p=9,d=5;else{if(2!=m)throw"invalid block type";var y=xy(e,l,31)+257,S=xy(e,l+10,15)+4,R=y+xy(e,l+5,31)+1;l+=14;for(var w=new ay(R),L=new ay(19),b=0;b<S;++b)L[py[b]]=xy(e,l+3*b,7);l+=3*S;var C=Ey(L),_=(1<<C)-1,A=Ly(L,C,1);for(b=0;b<R;){var E,x=A[xy(e,l,_)];if(l+=15&x,(E=x>>>4)<16)w[b++]=E;else{var P=0,T=0;for(16==E?(T=3+xy(e,l,3),l+=2,P=w[b-1]):17==E?(T=3+xy(e,l,7),l+=3):18==E&&(T=11+xy(e,l,127),l+=7);T--;)w[b++]=P}}var M=w.subarray(0,y),k=w.subarray(y);p=Ey(M),d=Ey(k),c=Ly(M,p,1),h=Ly(k,d,1)}if(l>f){if(o)throw"unexpected EOF";break}}r&&s(u+131072);for(var I=(1<<p)-1,D=(1<<d)-1,O=l;;O=l){var B=(P=c[Py(e,l)&I])>>>4;if((l+=15&P)>f){if(o)throw"unexpected EOF";break}if(!P)throw"invalid length/literal";if(B<256)t[u++]=B;else{if(256==B){O=l,c=null;break}var U=B-254;if(B>264){var N=cy[b=B-257];U=xy(e,l,(1<<N)-1)+my[b],l+=N}var F=h[Py(e,l)&D],z=F>>>4;if(!F)throw"invalid distance";l+=15&F;k=yy[z];if(z>3){N=hy[z];k+=Py(e,l)&(1<<N)-1,l+=N}if(l>f){if(o)throw"unexpected EOF";break}r&&s(u+131072);for(var j=u+U;u<j;u+=4)t[u]=t[u-k],t[u+1]=t[u+1-k],t[u+2]=t[u+2-k],t[u+3]=t[u+3-k];u=j}}n.l=c,n.p=O,n.b=u,c&&(a=1,n.m=p,n.d=h,n.n=d)}while(!a);return u==t.length?t:My(t,0,u)},Iy=new ay(0),Dy=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function Oy(e,t){return ky((Dy(e),e.subarray(2,-4)),t)}var By="undefined"!=typeof TextDecoder&&new TextDecoder;try{By.decode(Iy,{stream:!0}),1}catch(kC){}const Uy="colorSpace"in new no;class Ny extends bf{constructor(e){super(e),this.type=dn}parse(e){const t=65536,n=14,i=65537,r=16384,o=Math.pow(2.7182818,2.2);const s={l:0,c:0,lc:0};function a(e,t,n,i,r){for(;n<e;)t=t<<8|j(i,r),n+=8;n-=e,s.l=t>>n&(1<<e)-1,s.c=t,s.lc=n}const l=new Array(59);function u(e,t,n,r,o,u,c){for(var h=n,p=0,d=0;o<=u;o++){if(h.value-n.value>r)return!1;a(6,p,d,e,h);var f=s.l;if(p=s.c,d=s.lc,c[o]=f,63==f){if(h.value-n.value>r)throw"Something wrong with hufUnpackEncTable";a(8,p,d,e,h);var m=s.l+6;if(p=s.c,d=s.lc,o+m>u+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)c[o++]=0;o--}else if(f>=59){if(o+(m=f-59+2)>u+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)c[o++]=0;o--}}!function(e){for(var t=0;t<=58;++t)l[t]=0;for(t=0;t<i;++t)l[e[t]]+=1;var n=0;for(t=58;t>0;--t){var r=n+l[t]>>1;l[t]=n,n=r}for(t=0;t<i;++t){var o=e[t];o>0&&(e[t]=o|l[o]++<<6)}}(c)}function c(e){return 63&e}function h(e){return e>>6}const p={c:0,lc:0};function d(e,t,n,i){e=e<<8|j(n,i),t+=8,p.c=e,p.lc=t}const f={c:0,lc:0};function m(e,t,n,i,r,o,s,a,l,u){if(e==t){i<8&&(d(n,i,r,s),n=p.c,i=p.lc);var c=n>>(i-=8);c=new Uint8Array([c])[0];if(l.value+c>u)return!1;for(var h=a[l.value-1];c-- >0;)a[l.value++]=h}else{if(!(l.value<u))return!1;a[l.value++]=e}f.c=n,f.lc=i}function g(e){return 65535&e}function v(e){var t=g(e);return t>32767?t-65536:t}const y={a:0,b:0};function S(e,t){var n=v(e),i=v(t),r=n+(1&i)+(i>>1),o=r,s=r-i;y.a=o,y.b=s}function R(e,t){var n=g(e),i=g(t),r=n-(i>>1)&65535,o=i+r-32768&65535;y.a=o,y.b=r}function w(e,t,n,i,r,o,s){for(var a,l=s<16384,u=n>r?r:n,c=1;c<=u;)c<<=1;for(a=c>>=1,c>>=1;c>=1;){for(var h,p,d,f,m=0,g=m+o*(r-a),v=o*c,w=o*a,L=i*c,b=i*a;m<=g;m+=w){for(var C=m,_=m+i*(n-a);C<=_;C+=b){var A=C+L,E=(x=C+v)+L;l?(S(e[C+t],e[x+t]),h=y.a,d=y.b,S(e[A+t],e[E+t]),p=y.a,f=y.b,S(h,p),e[C+t]=y.a,e[A+t]=y.b,S(d,f),e[x+t]=y.a,e[E+t]=y.b):(R(e[C+t],e[x+t]),h=y.a,d=y.b,R(e[A+t],e[E+t]),p=y.a,f=y.b,R(h,p),e[C+t]=y.a,e[A+t]=y.b,R(d,f),e[x+t]=y.a,e[E+t]=y.b)}if(n&c){var x=C+v;l?S(e[C+t],e[x+t]):R(e[C+t],e[x+t]),h=y.a,e[x+t]=y.b,e[C+t]=h}}if(r&c)for(C=m,_=m+i*(n-a);C<=_;C+=b){A=C+L;l?S(e[C+t],e[A+t]):R(e[C+t],e[A+t]),h=y.a,e[A+t]=y.b,e[C+t]=h}a=c,c>>=1}return m}function L(e,t,o,s,a,l){var g=o.value,v=z(t,o),y=z(t,o);o.value+=4;var S=z(t,o);if(o.value+=4,v<0||v>=i||y<0||y>=i)throw"Something wrong with HUF_ENCSIZE";var R=new Array(i),w=new Array(r);if(function(e){for(var t=0;t<r;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(w),u(e,0,o,s-(o.value-g),v,y,R),S>8*(s-(o.value-g)))throw"Something wrong with hufUncompress";!function(e,t,i,r){for(;t<=i;t++){var o=h(e[t]),s=c(e[t]);if(o>>s)throw"Invalid table entry";if(s>n){if((p=r[o>>s-n]).len)throw"Invalid table entry";if(p.lit++,p.p){var a=p.p;p.p=new Array(p.lit);for(var l=0;l<p.lit-1;++l)p.p[l]=a[l]}else p.p=new Array(1);p.p[p.lit-1]=t}else if(s){var u=0;for(l=1<<n-s;l>0;l--){var p;if((p=r[(o<<n-s)+u]).len||p.p)throw"Invalid table entry";p.len=s,p.lit=t,u++}}}}(R,v,y,w),function(e,t,i,r,o,s,a,l,u,g){for(var v=0,y=0,S=l,R=Math.trunc(o.value+(s+7)/8);o.value<R;)for(d(v,y,i,o),v=p.c,y=p.lc;y>=n;)if((C=t[v>>y-n&16383]).len)y-=C.len,m(C.lit,a,v,y,i,0,o,u,g,S),v=f.c,y=f.lc;else{if(!C.p)throw"hufDecode issues";var w;for(w=0;w<C.lit;w++){for(var L=c(e[C.p[w]]);y<L&&o.value<R;)d(v,y,i,o),v=p.c,y=p.lc;if(y>=L&&h(e[C.p[w]])==(v>>y-L&(1<<L)-1)){y-=L,m(C.p[w],a,v,y,i,0,o,u,g,S),v=f.c,y=f.lc;break}}if(w==C.lit)throw"hufDecode issues"}var b=8-s&7;for(v>>=b,y-=b;y>0;){var C;if(!(C=t[v<<n-y&16383]).len)throw"hufDecode issues";y-=C.len,m(C.lit,a,v,y,i,0,o,u,g,S),v=f.c,y=f.lc}}(R,w,e,0,o,S,y,l,a,{value:0})}function b(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function C(e,t){for(var n=0,i=Math.floor((e.length+1)/2),r=0,o=e.length-1;!(r>o)&&(t[r++]=e[n++],!(r>o));)t[r++]=e[i++]}function _(e){for(var t=e.byteLength,n=new Array,i=0,r=new DataView(e);t>0;){var o=r.getInt8(i++);if(o<0){t-=(a=-o)+1;for(var s=0;s<a;s++)n.push(r.getUint8(i++))}else{var a=o;t-=2;var l=r.getUint8(i++);for(s=0;s<a+1;s++)n.push(l)}}return n}function A(e,t,n){for(var i,r=1;r<64;)65280==(i=t[e.value])?r=64:i>>8==255?r+=255&i:(n[r]=i,r++),e.value++}function E(e,t){t[0]=V(e[0]),t[1]=V(e[1]),t[2]=V(e[5]),t[3]=V(e[6]),t[4]=V(e[14]),t[5]=V(e[15]),t[6]=V(e[27]),t[7]=V(e[28]),t[8]=V(e[2]),t[9]=V(e[4]),t[10]=V(e[7]),t[11]=V(e[13]),t[12]=V(e[16]),t[13]=V(e[26]),t[14]=V(e[29]),t[15]=V(e[42]),t[16]=V(e[3]),t[17]=V(e[8]),t[18]=V(e[12]),t[19]=V(e[17]),t[20]=V(e[25]),t[21]=V(e[30]),t[22]=V(e[41]),t[23]=V(e[43]),t[24]=V(e[9]),t[25]=V(e[11]),t[26]=V(e[18]),t[27]=V(e[24]),t[28]=V(e[31]),t[29]=V(e[40]),t[30]=V(e[44]),t[31]=V(e[53]),t[32]=V(e[10]),t[33]=V(e[19]),t[34]=V(e[23]),t[35]=V(e[32]),t[36]=V(e[39]),t[37]=V(e[45]),t[38]=V(e[52]),t[39]=V(e[54]),t[40]=V(e[20]),t[41]=V(e[22]),t[42]=V(e[33]),t[43]=V(e[38]),t[44]=V(e[46]),t[45]=V(e[51]),t[46]=V(e[55]),t[47]=V(e[60]),t[48]=V(e[21]),t[49]=V(e[34]),t[50]=V(e[37]),t[51]=V(e[47]),t[52]=V(e[50]),t[53]=V(e[56]),t[54]=V(e[59]),t[55]=V(e[61]),t[56]=V(e[35]),t[57]=V(e[36]),t[58]=V(e[48]),t[59]=V(e[49]),t[60]=V(e[57]),t[61]=V(e[58]),t[62]=V(e[62]),t[63]=V(e[63])}function x(e){const t=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),i=.5*Math.cos(3.14159/8),r=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),s=.5*Math.cos(3*3.14159/8),a=.5*Math.cos(1.374445625);for(var l=new Array(4),u=new Array(4),c=new Array(4),h=new Array(4),p=0;p<8;++p){var d=8*p;l[0]=i*e[d+2],l[1]=s*e[d+2],l[2]=i*e[d+6],l[3]=s*e[d+6],u[0]=n*e[d+1]+r*e[d+3]+o*e[d+5]+a*e[d+7],u[1]=r*e[d+1]-a*e[d+3]-n*e[d+5]-o*e[d+7],u[2]=o*e[d+1]-n*e[d+3]+a*e[d+5]+r*e[d+7],u[3]=a*e[d+1]-o*e[d+3]+r*e[d+5]-n*e[d+7],c[0]=t*(e[d+0]+e[d+4]),c[3]=t*(e[d+0]-e[d+4]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],h[0]=c[0]+c[1],h[1]=c[3]+c[2],h[2]=c[3]-c[2],h[3]=c[0]-c[1],e[d+0]=h[0]+u[0],e[d+1]=h[1]+u[1],e[d+2]=h[2]+u[2],e[d+3]=h[3]+u[3],e[d+4]=h[3]-u[3],e[d+5]=h[2]-u[2],e[d+6]=h[1]-u[1],e[d+7]=h[0]-u[0]}for(var f=0;f<8;++f)l[0]=i*e[16+f],l[1]=s*e[16+f],l[2]=i*e[48+f],l[3]=s*e[48+f],u[0]=n*e[8+f]+r*e[24+f]+o*e[40+f]+a*e[56+f],u[1]=r*e[8+f]-a*e[24+f]-n*e[40+f]-o*e[56+f],u[2]=o*e[8+f]-n*e[24+f]+a*e[40+f]+r*e[56+f],u[3]=a*e[8+f]-o*e[24+f]+r*e[40+f]-n*e[56+f],c[0]=t*(e[f]+e[32+f]),c[3]=t*(e[f]-e[32+f]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],h[0]=c[0]+c[1],h[1]=c[3]+c[2],h[2]=c[3]-c[2],h[3]=c[0]-c[1],e[0+f]=h[0]+u[0],e[8+f]=h[1]+u[1],e[16+f]=h[2]+u[2],e[24+f]=h[3]+u[3],e[32+f]=h[3]-u[3],e[40+f]=h[2]-u[2],e[48+f]=h[1]-u[1],e[56+f]=h[0]-u[0]}function P(e){for(var t=0;t<64;++t){var n=e[0][t],i=e[1][t],r=e[2][t];e[0][t]=n+1.5747*r,e[1][t]=n-.1873*i-.4682*r,e[2][t]=n+1.8556*i}}function T(e,t,n){for(var i=0;i<64;++i)t[n+i]=zs.toHalfFloat(M(e[i]))}function M(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(o,Math.abs(e)-1)}function k(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function I(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(_(t)),i=new Uint8Array(n.length);return b(n),C(n,i),new DataView(i.buffer)}function D(e){var t=Oy(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return b(t),C(t,n),new DataView(n.buffer)}function O(e){for(var n=e.viewer,i={value:e.offset.value},r=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),o=new Uint8Array(8192),s=0,a=new Array(e.channels),l=0;l<e.channels;l++)a[l]={},a[l].start=s,a[l].end=a[l].start,a[l].nx=e.width,a[l].ny=e.lines,a[l].size=e.type,s+=a[l].nx*a[l].ny*a[l].size;var u=J(n,i),c=J(n,i);if(c>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(u<=c)for(l=0;l<c-u+1;l++)o[l+u]=H(n,i);var h=new Uint16Array(t),p=function(e,n){for(var i=0,r=0;r<t;++r)(0==r||e[r>>3]&1<<(7&r))&&(n[i++]=r);for(var o=i-1;i<t;)n[i++]=0;return o}(o,h),d=z(n,i);L(e.array,n,i,d,r,s);for(l=0;l<e.channels;++l)for(var f=a[l],m=0;m<a[l].size;++m)w(r,f.start+m,f.nx,f.size,f.ny,f.nx*f.size,p);!function(e,t,n){for(var i=0;i<n;++i)t[i]=e[t[i]]}(h,r,s);for(var g=0,v=new Uint8Array(r.buffer.byteLength),y=0;y<e.lines;y++)for(var S=0;S<e.channels;S++){var R=(f=a[S]).nx*f.size,b=new Uint8Array(r.buffer,2*f.end,2*R);v.set(b,g),g+=2*R,f.end+=R}return new DataView(v.buffer)}function B(e){var t=Oy(e.array.slice(e.offset.value,e.offset.value+e.size));const n=e.lines*e.channels*e.width,i=1==e.type?new Uint16Array(n):new Uint32Array(n);let r=0,o=0;const s=new Array(4);for(let a=0;a<e.lines;a++)for(let n=0;n<e.channels;n++){let n=0;switch(e.type){case 1:s[0]=r,s[1]=s[0]+e.width,r=s[1]+e.width;for(let r=0;r<e.width;++r){n+=t[s[0]++]<<8|t[s[1]++],i[o]=n,o++}break;case 2:s[0]=r,s[1]=s[0]+e.width,s[2]=s[1]+e.width,r=s[2]+e.width;for(let r=0;r<e.width;++r){n+=t[s[0]++]<<24|t[s[1]++]<<16|t[s[2]++]<<8,i[o]=n,o++}}}return new DataView(i.buffer)}function U(e){var t=e.viewer,n={value:e.offset.value},i=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),r={version:G(t,n),unknownUncompressedSize:G(t,n),unknownCompressedSize:G(t,n),acCompressedSize:G(t,n),dcCompressedSize:G(t,n),rleCompressedSize:G(t,n),rleUncompressedSize:G(t,n),rleRawSize:G(t,n),totalAcUncompressedCount:G(t,n),totalDcUncompressedCount:G(t,n),acCompression:G(t,n)};if(r.version<2)throw"EXRLoader.parse: "+$.compression+" version "+r.version+" is unsupported";for(var o=new Array,s=J(t,n)-2;s>0;){var a=N(t.buffer,n),l=H(t,n),u=l>>2&3,c=new Int8Array([(l>>4)-1])[0],h=H(t,n);o.push({name:a,index:c,type:h,compression:u}),s-=a.length+3}for(var p=$.channels,d=new Array(e.channels),f=0;f<e.channels;++f){var m=d[f]={},g=p[f];m.name=g.name,m.compression=0,m.decoded=!1,m.type=g.pixelType,m.pLinear=g.pLinear,m.width=e.width,m.height=e.lines}for(var v={idx:new Array(3)},y=0;y<e.channels;++y)for(m=d[y],f=0;f<o.length;++f){var S=o[f];m.name==S.name&&(m.compression=S.compression,S.index>=0&&(v.idx[S.index]=y),m.offset=y)}if(r.acCompressedSize>0)switch(r.acCompression){case 0:var R=new Uint16Array(r.totalAcUncompressedCount);L(e.array,t,n,r.acCompressedSize,R,r.totalAcUncompressedCount);break;case 1:var w=Oy(e.array.slice(n.value,n.value+r.totalAcUncompressedCount));R=new Uint16Array(w.buffer);n.value+=r.totalAcUncompressedCount}if(r.dcCompressedSize>0){var b={array:e.array,offset:n,size:r.dcCompressedSize},C=new Uint16Array(D(b).buffer);n.value+=r.dcCompressedSize}if(r.rleRawSize>0){var M=_((w=Oy(e.array.slice(n.value,n.value+r.rleCompressedSize))).buffer);n.value+=r.rleCompressedSize}var k=0,I=new Array(d.length);for(f=0;f<I.length;++f)I[f]=new Array;for(var O=0;O<e.lines;++O)for(var B=0;B<d.length;++B)I[B].push(k),k+=d[B].width*e.type*2;!function(e,t,n,i,r,o){var s=new DataView(o.buffer),a=n[e.idx[0]].width,l=n[e.idx[0]].height,u=Math.floor(a/8),c=Math.ceil(a/8),h=Math.ceil(l/8),p=a-8*(c-1),d=l-8*(h-1),f={value:0},m=new Array(3),g=new Array(3),v=new Array(3),y=new Array(3),S=new Array(3);for(let A=0;A<3;++A)S[A]=t[e.idx[A]],m[A]=A<1?0:m[A-1]+c*h,g[A]=new Float32Array(64),v[A]=new Uint16Array(64),y[A]=new Uint16Array(64*c);for(let k=0;k<h;++k){var R=8;k==h-1&&(R=d);var w=8;for(let e=0;e<c;++e){e==c-1&&(w=p);for(let e=0;e<3;++e)v[e].fill(0),v[e][0]=r[m[e]++],A(f,i,v[e]),E(v[e],g[e]),x(g[e]);P(g);for(let t=0;t<3;++t)T(g[t],y[t],64*e)}let t=0;for(let i=0;i<3;++i){const r=n[e.idx[i]].type;for(let e=8*k;e<8*k+R;++e){t=S[i][e];for(let n=0;n<u;++n){const o=64*n+8*(7&e);s.setUint16(t+0*r,y[i][o+0],!0),s.setUint16(t+2*r,y[i][o+1],!0),s.setUint16(t+4*r,y[i][o+2],!0),s.setUint16(t+6*r,y[i][o+3],!0),s.setUint16(t+8*r,y[i][o+4],!0),s.setUint16(t+10*r,y[i][o+5],!0),s.setUint16(t+12*r,y[i][o+6],!0),s.setUint16(t+14*r,y[i][o+7],!0),t+=16*r}}if(u!=c)for(let e=8*k;e<8*k+R;++e){const t=S[i][e]+8*u*2*r,n=64*u+8*(7&e);for(let e=0;e<w;++e)s.setUint16(t+2*e*r,y[i][n+e],!0)}}}for(var L=new Uint16Array(a),b=(s=new DataView(o.buffer),0);b<3;++b){n[e.idx[b]].decoded=!0;var C=n[e.idx[b]].type;if(2==n[b].type)for(var _=0;_<l;++_){const e=S[b][_];for(var M=0;M<a;++M)L[M]=s.getUint16(e+2*M*C,!0);for(M=0;M<a;++M)s.setFloat32(e+2*M*C,V(L[M]),!0)}}}(v,I,d,R,C,i);for(f=0;f<d.length;++f){if(!(m=d[f]).decoded){if(2!==m.compression)throw"EXRLoader.parse: unsupported channel compression";var U=0,F=0;for(O=0;O<e.lines;++O){for(var z=I[f][U],j=0;j<m.width;++j){for(var W=0;W<2*m.type;++W)i[z++]=M[F+W*m.width*m.height];F++}U++}}}return new DataView(i.buffer)}function N(e,t){for(var n=new Uint8Array(e),i=0;0!=n[t.value+i];)i+=1;var r=(new TextDecoder).decode(n.slice(t.value,t.value+i));return t.value=t.value+i+1,r}function F(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function z(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function j(e,t){var n=e[t.value];return t.value=t.value+1,n}function H(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}const G=function(e,t){let n;return n="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function W(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function q(e,t){return zs.toHalfFloat(W(e,t))}function V(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function J(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function K(e,t){return V(J(e,t))}function X(e,t,n,i,r){return"string"===i||"stringvector"===i||"iccProfile"===i?function(e,t,n){var i=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,i}(t,n,r):"chlist"===i?function(e,t,n,i){for(var r=n.value,o=[];n.value<r+i-1;){var s=N(t,n),a=F(e,n),l=H(e,n);n.value+=3;var u=F(e,n),c=F(e,n);o.push({name:s,pixelType:a,pLinear:l,xSampling:u,ySampling:c})}return n.value+=1,o}(e,t,n,r):"chromaticities"===i?function(e,t){return{redX:W(e,t),redY:W(e,t),greenX:W(e,t),greenY:W(e,t),blueX:W(e,t),blueY:W(e,t),whiteX:W(e,t),whiteY:W(e,t)}}(e,n):"compression"===i?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][H(e,t)]}(e,n):"box2i"===i?function(e,t){return{xMin:z(e,t),yMin:z(e,t),xMax:z(e,t),yMax:z(e,t)}}(e,n):"lineOrder"===i?function(e,t){return["INCREASING_Y"][H(e,t)]}(e,n):"float"===i?W(e,n):"v2f"===i?function(e,t){return[W(e,t),W(e,t)]}(e,n):"v3f"===i?function(e,t){return[W(e,t),W(e,t),W(e,t)]}(e,n):"int"===i?F(e,n):"rational"===i?function(e,t){return[F(e,t),z(e,t)]}(e,n):"timecode"===i?function(e,t){return[z(e,t),z(e,t)]}(e,n):"preview"===i?(n.value+=r,"skipped"):void(n.value+=r)}const Y=new DataView(e),Q=new Uint8Array(e),Z={value:0},$=function(e,t,n){const i={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";i.version=e.getUint8(4);const r=e.getUint8(5);i.spec={singleTile:!!(2&r),longName:!!(4&r),deepFormat:!!(8&r),multiPart:!!(16&r)},n.value=8;for(var o=!0;o;){var s=N(t,n);if(0==s)o=!1;else{var a=N(t,n),l=X(e,t,n,a,z(e,n));void 0===l?console.warn("EXRLoader.parse: skipped unknown header attribute type '".concat(a,"'.")):i[s]=l}}if(0!=(-5&r))throw console.error("EXRHeader:",i),"THREE.EXRLoader: provided file is currently unsupported.";return i}(Y,e,Z),ee=function(e,t,n,i,r){const o={size:0,viewer:t,array:n,offset:i,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[Uy?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":o.lines=1,o.uncompress=k;break;case"RLE_COMPRESSION":o.lines=1,o.uncompress=I;break;case"ZIPS_COMPRESSION":o.lines=1,o.uncompress=D;break;case"ZIP_COMPRESSION":o.lines=16,o.uncompress=D;break;case"PIZ_COMPRESSION":o.lines=32,o.uncompress=O;break;case"PXR24_COMPRESSION":o.lines=16,o.uncompress=B;break;case"DWAA_COMPRESSION":o.lines=32,o.uncompress=U;break;case"DWAB_COMPRESSION":o.lines=256,o.uncompress=U;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(o.scanlineBlockSize=o.lines,1==o.type)switch(r){case pn:o.getter=K,o.inputSize=2;break;case dn:o.getter=J,o.inputSize=2}else{if(2!=o.type)throw"EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".";switch(r){case pn:o.getter=W,o.inputSize=4;break;case dn:o.getter=q,o.inputSize=4}}o.blockCount=(e.dataWindow.yMax+1)/o.scanlineBlockSize;for(var s=0;s<o.blockCount;s++)G(t,i);o.outputChannels=3==o.channels?4:o.channels;const a=o.width*o.height*o.outputChannels;switch(r){case pn:o.byteArray=new Float32Array(a),o.channels<o.outputChannels&&o.byteArray.fill(1,0,a);break;case dn:o.byteArray=new Uint16Array(a),o.channels<o.outputChannels&&o.byteArray.fill(15360,0,a);break;default:console.error("THREE.EXRLoader: unsupported type: ",r)}return o.bytesPerLine=o.width*o.inputSize*o.channels,4==o.outputChannels?o.format=yn:o.format=bn,Uy?o.colorSpace="srgb-linear":o.encoding=3e3,o}($,Y,Q,Z,this.type),te={value:0},ne={R:0,G:1,B:2,A:3,Y:0};for(let ie=0;ie<ee.height/ee.scanlineBlockSize;ie++){const e=z(Y,Z);ee.size=z(Y,Z),ee.lines=e+ee.scanlineBlockSize>ee.height?ee.height-e:ee.scanlineBlockSize;const t=ee.size<ee.lines*ee.bytesPerLine?ee.uncompress(ee):k(ee);Z.value+=ee.size;for(let n=0;n<ee.scanlineBlockSize;n++){const e=n+ie*ee.scanlineBlockSize;if(e>=ee.height)break;for(let i=0;i<ee.channels;i++){const r=ne[$.channels[i].name];for(let o=0;o<ee.width;o++){te.value=(n*(ee.channels*ee.width)+i*ee.width+o)*ee.inputSize;const s=(ee.height-1-e)*(ee.width*ee.outputChannels)+o*ee.outputChannels+r;ee.byteArray[s]=ee.getter(t,te)}}}}return{header:$,width:ee.width,height:ee.height,data:ee.byteArray,format:ee.format,[Uy?"colorSpace":"encoding"]:ee[Uy?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){return super.load(e,(function(e,n){Uy?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=en,e.magFilter=en,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)}),n,i)}}const Fy={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},zy="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",jy=e=>Array.isArray(e);function Hy(){let{files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:n,encoding:i,extensions:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o;let s,a=null,l=!1;if(n){if(!(n in Fy))throw new Error("Preset must be one of: "+Object.keys(Fy).join(", "));e=Fy[n],t=zy}if(l=jy(e),s=jy(e)?"cube":e.startsWith("data:application/exr")?"exr":e.startsWith("data:application/hdr")?"hdr":null==(o=e.split(".").pop())||null==(o=o.split("?"))||null==(o=o.shift())?void 0:o.toLowerCase(),a=l?Lf:"hdr"===s?sy:"exr"===s?Ny:null,!a)throw new Error("useEnvironment: Unrecognized file extension: "+e);const u=Iv(a,l?[e]:e,(e=>{null==e.setPath||e.setPath(t),r&&r(e)})),c=l?u[0]:u;c.mapping=l?jt:Gt;return"colorSpace"in c?c.colorSpace=(null!==i&&void 0!==i?i:l)?"srgb":"srgb-linear":c.encoding=(null!==i&&void 0!==i?i:l)?3001:3e3,c}const Gy=e=>{return(t=e).current&&t.current.isScene?e.current:e;var t};function Wy(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const o=Gy(t||n),s=o.background,a=o.environment,l=o.backgroundBlurriness||0;return"only"!==e&&(o.environment=i),e&&(o.background=i),e&&void 0!==o.backgroundBlurriness&&(o.backgroundBlurriness=r),()=>{"only"!==e&&(o.environment=a),e&&(o.background=s),e&&void 0!==o.backgroundBlurriness&&(o.backgroundBlurriness=l)}}function qy(e){let{scene:t,background:n=!1,blur:r,map:o}=e;const s=Pv((e=>e.scene));return i.useLayoutEffect((()=>{if(o)return Wy(n,t,s,o,r)}),[s,t,o,n,r]),null}function Vy(e){let{background:t=!1,scene:n,blur:r,...o}=e;const s=Hy(o),a=Pv((e=>e.scene));return i.useLayoutEffect((()=>Wy(t,n,a,s,r)),[s,t,n,a,r]),null}function Jy(e){let{children:t,near:n=1,far:r=1e3,resolution:o=256,frames:s=1,map:a,background:l=!1,blur:u,scene:c,files:h,path:p,preset:d,extensions:f}=e;const m=Pv((e=>e.gl)),g=Pv((e=>e.scene)),v=i.useRef(null),[y]=i.useState((()=>new kc)),S=i.useMemo((()=>{const e=new Na(o);return e.texture.type=dn,e}),[o]);i.useLayoutEffect((()=>(1===s&&v.current.update(m,y),Wy(l,c,g,S.texture,u))),[t,y,S.texture,c,g,l,s,m]);let R=1;return Tv((()=>{(s===1/0||R<s)&&(v.current.update(m,y),R++)})),i.createElement(i.Fragment,null,function(e,t,n){return i.createElement(Wv,{key:t.uuid,children:e,container:t,state:n})}(i.createElement(i.Fragment,null,t,i.createElement("cubeCamera",{ref:v,args:[n,r,S]}),h||d?i.createElement(Vy,{background:!0,files:h,preset:d,path:p,extensions:f}):a?i.createElement(qy,{background:!0,map:a,extensions:f}):null),y))}function Ky(e){var t,n,r,o;const s=Hy(e),a=e.map||s;i.useMemo((()=>Ug({GroundProjectedEnvImpl:oy})),[]);const l=i.useMemo((()=>[a]),[a]),u=null==(t=e.ground)?void 0:t.height,c=null==(n=e.ground)?void 0:n.radius,h=null!==(r=null==(o=e.ground)?void 0:o.scale)&&void 0!==r?r:1e3;return i.createElement(i.Fragment,null,i.createElement(qy,ke({},e,{map:a})),i.createElement("groundProjectedEnvImpl",{args:l,scale:h,height:u,radius:c}))}function Xy(e){return e.ground?i.createElement(Ky,e):e.map?i.createElement(qy,e):e.children?i.createElement(Jy,e):i.createElement(Vy,e)}let Yy=0;const Qy=xg((e=>(ff.onStart=(t,n,i)=>{e({active:!0,item:t,loaded:n,total:i,progress:(n-Yy)/(i-Yy)*100})},ff.onLoad=()=>{e({active:!1})},ff.onError=t=>e((e=>({errors:[...e.errors,t]}))),ff.onProgress=(t,n,i)=>{n===i&&(Yy=i),e({active:!0,item:t,loaded:n,total:i,progress:(n-Yy)/(i-Yy)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}))),Zy=e=>"Loading ".concat(e.toFixed(2),"%");function $y(e){let{containerStyles:t,innerStyles:n,barStyles:r,dataStyles:o,dataInterpolation:s=Zy,initialState:a=(e=>e)}=e;const{active:l,progress:u}=Qy(),c=i.useRef(0),h=i.useRef(0),p=i.useRef(null),[d,f]=i.useState(a(l));i.useEffect((()=>{let e;return l!==d&&(e=setTimeout((()=>f(l)),300)),()=>clearTimeout(e)}),[d,l]);const m=i.useCallback((()=>{p.current&&(c.current+=(u-c.current)/2,(c.current>.95*u||100===u)&&(c.current=u),p.current.innerText=s(c.current),c.current<u&&(h.current=requestAnimationFrame(m)))}),[s,u]);return i.useEffect((()=>(m(),()=>cancelAnimationFrame(h.current))),[m]),d?i.createElement("div",{style:{...eS.container,opacity:l?1:0,...t}},i.createElement("div",null,i.createElement("div",{style:{...eS.inner,...n}},i.createElement("div",{style:{...eS.bar,transform:"scaleX(".concat(u/100,")"),...r}}),i.createElement("span",{ref:p,style:{...eS.data,...o}})))):null}const eS={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};var tS=__webpack_require__(8961),nS=__webpack_require__.n(tS);function iS(e){let{debounce:t,scroll:n,polyfill:r,offsetSize:o}=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e;const s=r||("undefined"===typeof window?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,l]=(0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),c=t?"number"===typeof t?t:t.scroll:null,h=t?"number"===typeof t?t:t.resize:null,p=(0,i.useRef)(!1);(0,i.useEffect)((()=>(p.current=!0,()=>{p.current=!1})));const[d,f,m]=(0,i.useMemo)((()=>{const e=()=>{if(!u.current.element)return;const{left:e,top:t,width:n,height:i,bottom:r,right:s,x:a,y:c}=u.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:i,bottom:r,right:s,x:a,y:c};u.current.element instanceof HTMLElement&&o&&(h.height=u.current.element.offsetHeight,h.width=u.current.element.offsetWidth),Object.freeze(h),p.current&&!sS(u.current.lastBounds,h)&&l(u.current.lastBounds=h)};return[e,h?nS()(e,h):e,c?nS()(e,c):e]}),[l,o,c,h]);function g(){u.current.scrollContainers&&(u.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",m,!0))),u.current.scrollContainers=null),u.current.resizeObserver&&(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null)}function v(){u.current.element&&(u.current.resizeObserver=new s(m),u.current.resizeObserver.observe(u.current.element),n&&u.current.scrollContainers&&u.current.scrollContainers.forEach((e=>e.addEventListener("scroll",m,{capture:!0,passive:!0}))))}var y,S,R;return y=m,S=Boolean(n),(0,i.useEffect)((()=>{if(S){const e=y;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[y,S]),R=f,(0,i.useEffect)((()=>{const e=R;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[R]),(0,i.useEffect)((()=>{g(),v()}),[n,m,f]),(0,i.useEffect)((()=>g),[]),[e=>{e&&e!==u.current.element&&(g(),u.current.element=e,u.current.scrollContainers=rS(e),v())},a,d]}function rS(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(e);return[n,i,r].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...rS(e.parentElement)]}const oS=["x","y","top","bottom","left","right","width","height"],sS=(e,t)=>oS.every((n=>e[n]===t[n]));var aS=Object.defineProperty,lS=Object.defineProperties,uS=Object.getOwnPropertyDescriptors,cS=Object.getOwnPropertySymbols,hS=Object.prototype.hasOwnProperty,pS=Object.prototype.propertyIsEnumerable,dS=(e,t,n)=>t in e?aS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fS=(e,t)=>{for(var n in t||(t={}))hS.call(t,n)&&dS(e,n,t[n]);if(cS)for(var n of cS(t))pS.call(t,n)&&dS(e,n,t[n]);return e};function mS(e,t,n){if(!e)return;if(!0===n(e))return e;let i=t?e.return:e.child;for(;i;){const e=mS(i,t,n);if(e)return e;i=t?null:i.sibling}}function gS(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const vS=gS(i.createContext(null));class yS extends i.Component{render(){return i.createElement(vS.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:SS,ReactCurrentDispatcher:RS}=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function wS(){const e=i.useContext(vS);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=i.useId();return i.useMemo((()=>{for(const n of[null==SS?void 0:SS.current,e,null==e?void 0:e.alternate]){if(!n)continue;const e=mS(n,!1,(e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}}));if(e)return e}}),[e,t])}function LS(){const e=function(){var e,t;const n=wS(),[r]=i.useState((()=>new Map));r.clear();let o=n;for(;o;){const n=null==(e=o.type)?void 0:e._context;n&&n!==vS&&!r.has(n)&&r.set(n,null==(t=null==RS?void 0:RS.current)?void 0:t.readContext(gS(n))),o=o.return}return r}();return i.useMemo((()=>Array.from(e.keys()).reduce(((t,n)=>r=>{return i.createElement(t,null,i.createElement(n.Provider,(o=fS({},r),s={value:e.get(n)},lS(o,uS(s)))));var o,s}),(e=>i.createElement(yS,fS({},e))))),[e])}const bS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function CS(e){const{handlePointer:t}=fv(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(bS).reduce(((e,n)=>({...e,[n]:t(n)})),{}),update:()=>{var t;const{events:n,internal:i}=e.getState();null!=(t=i.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:r}=e.getState();null==r.disconnect||r.disconnect(),i((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(n=r.handlers)?n:[]).forEach((e=>{let[n,i]=e;const[r,o]=bS[n];t.addEventListener(r,i,{passive:o})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var i;n.connected&&(Object.entries(null!=(i=n.handlers)?i:[]).forEach((e=>{let[t,i]=e;if(n&&n.connected instanceof HTMLElement){const[e]=bS[t];n.connected.removeEventListener(e,i)}})),t((e=>({events:{...e.events,connected:void 0}}))))}}}const _S=i.forwardRef((function(t,n){let{children:r,fallback:o,resize:s,style:a,gl:l,events:u=CS,eventSource:c,eventPrefix:h,shadows:p,linear:d,flat:f,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:S,raycaster:R,camera:w,scene:L,onPointerMissed:b,onCreated:C,..._}=t;i.useMemo((()=>Ug(e)),[]);const A=LS(),[E,x]=iS({scroll:!0,debounce:{scroll:50,resize:0},...s}),P=i.useRef(null),T=i.useRef(null);i.useImperativeHandle(n,(()=>P.current));const M=Wg(b),[k,I]=i.useState(!1),[D,O]=i.useState(!1);if(k)throw k;if(D)throw D;const B=i.useRef(null);Gg((()=>{const e=P.current;x.width>0&&x.height>0&&e&&(B.current||(B.current=jv(e)),B.current.configure({gl:l,events:u,shadows:p,linear:d,flat:f,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:S,raycaster:R,camera:w,scene:L,size:x,onPointerMissed:function(){return null==M.current?void 0:M.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(c?(t=c)&&t.hasOwnProperty("current")?c.current:c:T.current),h&&e.setEvents({compute:(e,t)=>{const n=e[h+"X"],i=e[h+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==C||C(e)}}),B.current.render(i.createElement(A,null,i.createElement(Vg,{set:O},i.createElement(i.Suspense,{fallback:i.createElement(qg,{set:I})},r)))))})),i.useEffect((()=>{const e=P.current;if(e)return()=>Gv(e)}),[]);const U=c?"none":"auto";return i.createElement("div",ke({ref:T,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:U,...a}},_),i.createElement("div",{ref:E,style:{width:"100%",height:"100%"}},i.createElement("canvas",{ref:P,style:{display:"block"}},o)))})),AS=i.forwardRef((function(e,t){return i.createElement(yS,null,i.createElement(_S,ke({},e,{ref:t})))})),ES="AvatarAva_speakText__2YD6j",xS="AvatarAva_text__-sSgL",PS="AvatarAva_speakButton__UKHFu",TS=new WeakMap;class MS extends mf{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const r=new yf(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,(e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(i)}),n,i)}decodeDracoFile(e,t,n,i){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const a in t.attributeTypes){const e=t.attributeTypes[a];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[a]=e.name)}const n=JSON.stringify(t);if(TS.has(e)){const t=TS.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,o=e.byteLength,s=this._getWorker(r,o).then((n=>(i=n,new Promise(((n,o)=>{i._callbacks[r]={resolve:n,reject:o},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return s.catch((()=>!0)).then((()=>{i&&r&&this._releaseTask(i,r)})),TS.set(e,{key:n,promise:s}),s}_createGeometry(e){const t=new aa;e.index&&t.setIndex(new Gs(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],r=i.name,o=i.array,s=i.itemSize;t.setAttribute(r,new Gs(o,s))}return t}_loadLibrary(e,t){const n=new yf(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,i)=>{n.load(e,t,void 0,i)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const i=kS.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function kS(){let e,t;function n(e,t,n,i,r,o){const s=o.num_components(),a=n.num_points()*s,l=a*r.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,r),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,u,l,c);const h=new r(e.HEAPF32.buffer,c,a).slice();return e._free(c),{name:i,array:h,itemSize:s}}onmessage=function(i){const r=i.data;switch(r.type){case"init":e=r.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const i=r.buffer,o=r.taskConfig;t.then((e=>{const t=e.draco,s=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(i),i.byteLength);try{const e=function(e,t,i,r){const o=r.attributeIDs,s=r.attributeTypes;let a,l;const u=t.GetEncodedGeometryType(i);if(u===e.TRIANGULAR_MESH)a=new e.Mesh,l=t.DecodeBufferToMesh(i,a);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,l=t.DecodeBufferToPointCloud(i,a)}if(!l.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const c={index:null,attributes:[]};for(const h in o){const i=self[s[h]];let l,u;if(r.useUniqueIDs)u=o[h],l=t.GetAttributeByUniqueId(a,u);else{if(u=t.GetAttributeId(a,e[o[h]]),-1===u)continue;l=t.GetAttribute(a,u)}c.attributes.push(n(e,t,a,h,i,l))}u===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){const i=n.num_faces(),r=3*i,o=4*r,s=e._malloc(o);t.GetTrianglesUInt32Array(n,o,s);const a=new Uint32Array(e.HEAPF32.buffer,s,r).slice();return e._free(s),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),c}(t,s,a,o),i=e.attributes.map((e=>e.array.buffer));e.index&&i.push(e.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:e},i)}catch(l){console.error(l),self.postMessage({type:"error",id:r.id,error:l.message})}finally{t.destroy(a),t.destroy(s)}}))}}}let IS;const DS=()=>{if(IS)return IS;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let n,i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(i="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const r=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const i=e.charCodeAt(t);n[t]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let i=0;for(let r=0;r<e.length;++r)n[i++]=n[r]<60?t[n[r]]:64*(n[r]-60)+n[++r];return n.buffer.slice(0,i)}(i),{}).then((e=>{n=e.instance,n.exports.__wasm_call_ctors()}));function o(e,t,i,r,o,s){const a=n.exports.sbrk,l=i+3&-4,u=a(l*r),c=a(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,c);const p=e(u,i,r,c,o.length);if(0===p&&s&&s(u,l,r),t.set(h.subarray(u,u+i*r)),a(u-a(0)),0!==p)throw new Error("Malformed buffer data: ".concat(p))}const s={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},a={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return IS={ready:r,supported:!0,decodeVertexBuffer(e,t,i,r,a){o(n.exports.meshopt_decodeVertexBuffer,e,t,i,r,n.exports[s[a]])},decodeIndexBuffer(e,t,i,r){o(n.exports.meshopt_decodeIndexBuffer,e,t,i,r)},decodeIndexSequence(e,t,i,r){o(n.exports.meshopt_decodeIndexSequence,e,t,i,r)},decodeGltfBuffer(e,t,i,r,l,u){o(n.exports[a[l]],e,t,i,r,n.exports[s[u]])}},IS};function OS(e,t){if(t===vi)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===Si||t===yi){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,r=[];if(n)if(t===Si)for(let e=1;e<=i;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2===0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}const BS=parseInt(Ie.replace(/\D+/g,""));class US extends mf{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new GS(e)})),this.register((function(e){return new QS(e)})),this.register((function(e){return new ZS(e)})),this.register((function(e){return new $S(e)})),this.register((function(e){return new qS(e)})),this.register((function(e){return new VS(e)})),this.register((function(e){return new JS(e)})),this.register((function(e){return new KS(e)})),this.register((function(e){return new HS(e)})),this.register((function(e){return new XS(e)})),this.register((function(e){return new WS(e)})),this.register((function(e){return new YS(e)})),this.register((function(e){return new zS(e)})),this.register((function(e){return new eR(e)})),this.register((function(e){return new tR(e)}))}load(e,t,n,i){const r=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:qf.extractUrlBase(e),this.manager.itemStart(e);const s=function(t){i?i(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},a=new yf(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{r.parse(n,o,(function(n){t(n),r.manager.itemEnd(e)}),s)}catch(kC){s(kC)}}),n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const o={},s={};if("string"===typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(qf.decodeText(new Uint8Array(e.slice(0,4)))===nR){try{o[FS.KHR_BINARY_GLTF]=new oR(e)}catch(l){return void(i&&i(l))}r=JSON.parse(o[FS.KHR_BINARY_GLTF].content)}else r=JSON.parse(qf.decodeText(new Uint8Array(e)))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const a=new TR(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const e=this.pluginCallbacks[u](a);s[e.name]=e,o[e.name]=!0}if(r.extensionsUsed)for(let u=0;u<r.extensionsUsed.length;++u){const e=r.extensionsUsed[u],t=r.extensionsRequired||[];switch(e){case FS.KHR_MATERIALS_UNLIT:o[e]=new jS;break;case FS.KHR_DRACO_MESH_COMPRESSION:o[e]=new sR(r,this.dracoLoader);break;case FS.KHR_TEXTURE_TRANSFORM:o[e]=new aR;break;case FS.KHR_MESH_QUANTIZATION:o[e]=new lR;break;default:t.indexOf(e)>=0&&void 0===s[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}a.setExtensions(o),a.setPlugins(s),a.parse(n,i)}parseAsync(e,t){const n=this;return new Promise((function(i,r){n.parse(e,t,i,r)}))}}function NS(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const FS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class zS{constructor(e){this.parser=e,this.name=FS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let s;const a=new Ms(16777215);void 0!==o.color&&a.fromArray(o.color);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":s=new Ff(a),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new Uf(a),s.distance=l;break;case"spot":s=new kf(a),s.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,s.angle=o.spot.outerConeAngle,s.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return s.position.set(0,0,0),s.decay=2,CR(s,o),void 0!==o.intensity&&(s.intensity=o.intensity),s.name=t.createUniqueName(o.name||"light_"+e),i=Promise.resolve(s),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return n._getNodeRef(t.cache,r,e)}))}}class jS{constructor(){this.name=FS.KHR_MATERIALS_UNLIT}getMaterialType(){return Os}extendParams(e,t,n){const i=[];e.color=new Ms(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,3001))}return Promise.all(i)}}class HS{constructor(e){this.parser=e,this.name=FS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class GS{constructor(e){this.parser=e,this.name=FS.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ir(e,e)}return Promise.all(r)}}class WS{constructor(e){this.parser=e,this.name=FS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class qS{constructor(e){this.parser=e,this.name=FS.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Ms(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,3001)),void 0!==o.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class VS{constructor(e){this.parser=e,this.name=FS.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class JS{constructor(e){this.parser=e,this.name=FS.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const s=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ms(s[0],s[1],s[2]),Promise.all(r)}}class KS{constructor(e){this.parser=e,this.name=FS.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class XS{constructor(e){this.parser=e,this.name=FS.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const s=o.specularColorFactor||[1,1,1];return t.specularColor=new Ms(s[0],s[1],s[2]),void 0!==o.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,3001)),Promise.all(r)}}class YS{constructor(e){this.parser=e,this.name=FS.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class QS{constructor(e){this.parser=e,this.name=FS.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class ZS{constructor(e){this.parser=e,this.name=FS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=i.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,o.source,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class $S{constructor(e){this.parser=e,this.name=FS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=i.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,o.source,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class eR{constructor(e){this.name=FS.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(t){const n=e.byteOffset||0,i=e.byteLength||0,o=e.count,s=e.byteStride,a=new Uint8Array(t,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(o,s,a,e.mode,e.filter).then((function(e){return e.buffer})):r.ready.then((function(){const t=new ArrayBuffer(o*s);return r.decodeGltfBuffer(new Uint8Array(t),o,s,a,e.mode,e.filter),t}))}))}return null}}class tR{constructor(e){this.name=FS.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const a of i.primitives)if(a.mode!==pR.TRIANGLES&&a.mode!==pR.TRIANGLE_STRIP&&a.mode!==pR.TRIANGLE_FAN&&void 0!==a.mode)return null;const r=n.extensions[this.name].attributes,o=[],s={};for(const a in r)o.push(this.parser.getDependency("accessor",r[a]).then((e=>(s[a]=e,s[a]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,r=[];for(const o of n){const e=new Go,t=new po,n=new ho,a=new po(1,1,1),l=new Ch(o.geometry,o.material,i);for(let r=0;r<i;r++)s.TRANSLATION&&t.fromBufferAttribute(s.TRANSLATION,r),s.ROTATION&&n.fromBufferAttribute(s.ROTATION,r),s.SCALE&&a.fromBufferAttribute(s.SCALE,r),l.setMatrixAt(r,e.compose(t,n,a));for(const i in s)"TRANSLATION"!==i&&"ROTATION"!==i&&"SCALE"!==i&&o.geometry.setAttribute(i,s[i]);fs.prototype.copy.call(l,o),this.parser.assignFinalMaterial(l),r.push(l)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]})))}}const nR="glTF",iR=1313821514,rR=5130562;class oR{constructor(e){this.name=FS.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:qf.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==nR)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(e,12);let r=0;for(;r<n;){const t=i.getUint32(r,!0);r+=4;const n=i.getUint32(r,!0);if(r+=4,n===iR){const n=new Uint8Array(e,12+r,t);this.content=qf.decodeText(n)}else if(n===rR){const n=12+r;this.body=e.slice(n,n+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class sR{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=FS.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},a={},l={};for(const u in o){const e=vR[u]||u.toLowerCase();s[e]=o[u]}for(const u in e.attributes){const t=vR[u]||u.toLowerCase();if(void 0!==o[u]){const i=n.accessors[e.attributes[u]],r=dR[i.componentType];l[t]=r.name,a[t]=!0===i.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){i.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],i=a[t];void 0!==i&&(n.normalized=i)}t(e)}),s,l)}))}))}}class aR{constructor(){this.name=FS.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class lR{constructor(){this.name=FS.KHR_MESH_QUANTIZATION}}class uR extends Qd{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let o=0;o!==i;o++)t[o]=n[r+o];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,u=i-t,c=(n-t)/u,h=c*c,p=h*c,d=e*l,f=d-l,m=-2*p+3*h,g=p-h,v=1-m,y=g-h+c;for(let S=0;S!==s;S++){const e=o[f+S+s],t=o[f+S+a]*u,n=o[d+S+s],i=o[d+S]*u;r[S]=v*e+y*t+m*n+g*i}return r}}const cR=new ho;class hR extends uR{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return cR.fromArray(r).normalize().toArray(r),r}}const pR={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},dR={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fR={9728:Xt,9729:en,9984:Yt,9985:tn,9986:Zt,9987:rn},mR={33071:Jt,33648:Kt,10497:Vt},gR={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vR={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...BS>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},yR={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},SR={CUBICSPLINE:void 0,LINEAR:ci,STEP:ui},RR="OPAQUE",wR="MASK",LR="BLEND";function bR(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function CR(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function _R(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function AR(e){let t;const n=e.extensions&&e.extensions[FS.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+ER(n.attributes):e.indices+":"+ER(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,r=e.targets.length;i<r;i++)t+=":"+ER(e.targets[i]);return t}function ER(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function xR(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const PR=new Go;class TR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new NS,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,r=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,r=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||n||i&&r<98?this.textureLoader=new Cf(this.options.manager):this.textureLoader=new Zf(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new yf(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};bR(r,o,i),CR(o,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const t=e[i];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[i,o]of e.children.entries())r(o,t.children[i])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[FS.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(e,r){n.load(qf.resolveURL(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=gR[i.type],t=dR[i.componentType],n=!0===i.normalized,r=new t(i.count*e);return Promise.resolve(new Gs(r,e,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(e){const r=e[0],o=gR[i.type],s=dR[i.componentType],a=s.BYTES_PER_ELEMENT,l=a*o,u=i.byteOffset||0,c=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;let p,d;if(c&&c!==l){const e=Math.floor(u/c),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(p=new s(r,e*c,i.count*c/a),l=new Ic(p,c/a),t.cache.add(n,l)),d=new Oc(l,o,u%c/a,h)}else p=null===r?new s(i.count*o):new s(r,u,i.count*o),d=new Gs(p,o,h);if(void 0!==i.sparse){const t=gR.SCALAR,n=dR[i.sparse.indices.componentType],a=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,u=new n(e[1],a,i.sparse.count*t),c=new s(e[2],l,i.sparse.count*o);null!==r&&(d=new Gs(d.array.slice(),d.itemSize,d.normalized));for(let e=0,i=u.length;e<i;e++){const t=u[e];if(d.setX(t,c[e*o]),o>=2&&d.setY(t,c[e*o+1]),o>=3&&d.setZ(t,c[e*o+2]),o>=4&&d.setW(t,c[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d}))}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let o=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const i=this,r=this.json,o=r.textures[e],s=r.images[t],a=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=o.name||s.name||"",""===t.name&&"string"===typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);const n=(r.samplers||{})[o.sampler]||{};return t.magFilter=fR[n.magFilter]||en,t.minFilter=fR[n.minFilter]||rn,t.wrapS=mR[n.wrapS]||Vt,t.wrapT=mR[n.wrapT]||Vt,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[a]=l,l}loadImageSource(e,t){const n=this,i=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=i.images[e],s=self.URL||self.webkitURL;let a=o.uri||"",l=!1;if(void 0!==o.bufferView)a=n.getDependency("bufferView",o.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:o.mimeType});return a=s.createObjectURL(t),a}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(a).then((function(e){return new Promise((function(n,i){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new no(e);t.needsUpdate=!0,n(t)}),t.load(qf.resolveURL(e,r.path),o,void 0,i)}))})).then((function(e){var t;return!0===l&&s.revokeObjectURL(a),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=u,u}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then((function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),r.extensions[FS.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[FS.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(o);o=r.extensions[FS.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),r.associations.set(o,t)}}return void 0!==i&&("colorSpace"in o?o.colorSpace=3001===i?"srgb":"srgb-linear":o.encoding=i),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new $h,Ds.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new Hh,Ds.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||r||o){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return Ud}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let o;const s={},a=[];if((r.extensions||{})[FS.KHR_MATERIALS_UNLIT]){const e=i[FS.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),a.push(e.extendParams(s,r,t))}else{const n=r.pbrMetallicRoughness||{};if(s.color=new Ms(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;s.color.fromArray(e),s.opacity=e[3]}void 0!==n.baseColorTexture&&a.push(t.assignTexture(s,"map",n.baseColorTexture,3001)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(a.push(t.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),a.push(t.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),a.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===r.doubleSided&&(s.side=Ve);const l=r.alphaMode||RR;if(l===LR?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,l===wR&&(s.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==Os&&(a.push(t.assignTexture(s,"normalMap",r.normalTexture)),s.normalScale=new Ir(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;s.normalScale.set(e,e)}return void 0!==r.occlusionTexture&&o!==Os&&(a.push(t.assignTexture(s,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(s.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==Os&&(s.emissive=(new Ms).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&o!==Os&&a.push(t.assignTexture(s,"emissiveMap",r.emissiveTexture,3001)),Promise.all(a).then((function(){const n=new o(s);return r.name&&(n.name=r.name),CR(n,r),t.associations.set(n,{materials:e}),r.extensions&&bR(i,n,r),n}))}createUniqueName(e){const t=Em.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[FS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return MR(n,e,t)}))}const o=[];for(let s=0,a=e.length;s<a;s++){const n=e[s],a=AR(n),l=i[a];if(l)o.push(l.promise);else{let e;e=n.extensions&&n.extensions[FS.KHR_DRACO_MESH_COMPRESSION]?r(n):MR(new aa,n,t),i[a]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],o=r.primitives,s=[];for(let l=0,u=o.length;l<u;l++){const e=void 0===o[l].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new Ud({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:We})),a.DefaultMaterial):this.getDependency("material",o[l].material);s.push(e)}var a;return s.push(t.loadGeometries(o)),Promise.all(s).then((function(n){const s=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let c=0,h=a.length;c<h;c++){const n=a[c],u=o[c];let h;const p=s[c];if(u.mode===pR.TRIANGLES||u.mode===pR.TRIANGLE_STRIP||u.mode===pR.TRIANGLE_FAN||void 0===u.mode)h=!0===r.isSkinnedMesh?new ch(n,p):new _a(n,p),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),u.mode===pR.TRIANGLE_STRIP?h.geometry=OS(h.geometry,yi):u.mode===pR.TRIANGLE_FAN&&(h.geometry=OS(h.geometry,Si));else if(u.mode===pR.LINES)h=new Qh(n,p);else if(u.mode===pR.LINE_STRIP)h=new Kh(n,p);else if(u.mode===pR.LINE_LOOP)h=new Zh(n,p);else{if(u.mode!==pR.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);h=new rp(n,p)}Object.keys(h.geometry.morphAttributes).length>0&&_R(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),CR(h,r),u.extensions&&bR(i,h,u),t.assignFinalMaterial(h),l.push(h)}for(let i=0,r=l.length;i<r;i++)t.associations.set(l[i],{meshes:e,primitives:i});if(1===l.length)return r.extensions&&bR(i,l[0],r),l[0];const u=new Lc;r.extensions&&bR(i,u,r),t.associations.set(u,{meshes:e});for(let e=0,t=l.length;e<t;e++)u.add(l[e]);return u}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new Da(kr.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new ol(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),CR(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),i=e,r=[],o=[];for(let s=0,a=i.length;s<a;s++){const e=i[s];if(e){r.push(e);const t=new Go;null!==n&&t.fromArray(n.array,16*s),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}return new mh(r,o)}))}loadAnimation(e){const t=this.json.animations[e],n=t.name?t.name:"animation_"+e,i=[],r=[],o=[],s=[],a=[];for(let l=0,u=t.channels.length;l<u;l++){const e=t.channels[l],n=t.samplers[e.sampler],u=e.target,c=u.node,h=void 0!==t.parameters?t.parameters[n.input]:n.input,p=void 0!==t.parameters?t.parameters[n.output]:n.output;void 0!==u.node&&(i.push(this.getDependency("node",c)),r.push(this.getDependency("accessor",h)),o.push(this.getDependency("accessor",p)),s.push(n),a.push(u))}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(o),Promise.all(s),Promise.all(a)]).then((function(e){const t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=[];for(let n=0,l=t.length;n<l;n++){const e=t[n],l=i[n],u=r[n],c=o[n],h=s[n];if(void 0===e)continue;let p;switch(e.updateMatrix(),yR[h.path]){case yR.weights:p=of;break;case yR.rotation:p=af;break;default:p=uf}const d=e.name?e.name:e.uuid,f=void 0!==c.interpolation?SR[c.interpolation]:ci,m=[];yR[h.path]===yR.weights?e.traverse((function(e){e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(d);let g=u.array;if(u.normalized){const e=xR(g.constructor),t=new Float32Array(g.length);for(let n=0,i=g.length;n<i;n++)t[n]=g[n]*e;g=t}for(let t=0,n=m.length;t<n;t++){const e=new p(m[t]+"."+yR[h.path],l.array,g,f);"CUBICSPLINE"===c.interpolation&&(e.createInterpolant=function(e){return new(this instanceof af?hR:uR)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),a.push(e)}}return new cf(n,void 0,a)}))}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],o=n.children||[];for(let a=0,l=o.length;a<l;a++)r.push(t.getDependency("node",o[a]));const s=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),s]).then((function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(i,PR)}));for(let r=0,o=n.length;r<o;r++)t.add(n[r]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],o=r.name?i.createUniqueName(r.name):"",s=[],a=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return a&&s.push(a),void 0!==r.camera&&s.push(i.getDependency("camera",r.camera).then((function(e){return i._getNodeRef(i.cameraCache,r.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){s.push(e)})),this.nodeCache[e]=Promise.all(s).then((function(t){let s;if(s=!0===r.isBone?new hh:t.length>1?new Lc:1===t.length?t[0]:new fs,s!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(r.name&&(s.userData.name=r.name,s.name=o),CR(s,r),r.extensions&&bR(n,s,r),void 0!==r.matrix){const e=new Go;e.fromArray(r.matrix),s.applyMatrix4(e)}else void 0!==r.translation&&s.position.fromArray(r.translation),void 0!==r.rotation&&s.quaternion.fromArray(r.rotation),void 0!==r.scale&&s.scale.fromArray(r.scale);return i.associations.has(s)||i.associations.set(s,{}),i.associations.get(s).nodes=e,s})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new Lc;n.name&&(r.name=i.createUniqueName(n.name)),CR(r,n),n.extensions&&bR(t,r,n);const o=n.nodes||[],s=[];for(let a=0,l=o.length;a<l;a++)s.push(i.getDependency("node",o[a]));return Promise.all(s).then((function(e){for(let t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof Ds||n instanceof no)&&t.set(n,r);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(r),r}))}}function MR(e,t,n){const i=t.attributes,r=[];function o(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(const s in i){const t=vR[s]||s.toLowerCase();t in e.attributes||r.push(o(i[s],t))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(i)}return CR(e,t),function(e,t,n){const i=t.attributes,r=new go;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new po(t[0],t[1],t[2]),new po(o[0],o[1],o[2])),e.normalized){const t=xR(dR[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new po,t=new po;for(let i=0,r=o.length;i<r;i++){const r=o[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],o=i.min,s=i.max;if(void 0!==o&&void 0!==s){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(s[2]))),i.normalized){const e=xR(dR[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const s=new Do;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,n){let i=!1,r=!1,o=!1;for(let u=0,c=t.length;u<c;u++){const e=t[u];if(void 0!==e.POSITION&&(i=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(e);const s=[],a=[],l=[];for(let u=0,c=t.length;u<c;u++){const c=t[u];if(i){const t=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;s.push(t)}if(r){const t=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;a.push(t)}if(o){const t=void 0!==c.COLOR_0?n.getDependency("accessor",c.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then((function(t){const n=t[0],s=t[1],a=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=s),o&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}let kR=null,IR="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function DR(e,t,n){return i=>{n&&n(i),e&&(kR||(kR=new MS),kR.setDecoderPath("string"===typeof e?e:IR),i.setDRACOLoader(kR)),t&&i.setMeshoptDecoder("function"===typeof DS?DS():DS)}}function OR(e){return Iv(US,e,DR(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0))}OR.preload=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;return Iv.preload(US,e,DR(t,n,i))},OR.clear=e=>Iv.clear(US,e),OR.setDecoderPath=e=>{IR=e};const BR=e=>e===Object(e)&&!Array.isArray(e)&&"function"!==typeof e;function UR(e,t){const n=Pv((e=>e.gl)),r=Iv(Cf,BR(e)?Object.values(e):e);if((0,i.useLayoutEffect)((()=>{null==t||t(r)}),[t]),(0,i.useEffect)((()=>{if("initTexture"in n){(Array.isArray(r)?r:[r]).forEach(n.initTexture)}}),[n,r]),BR(e)){const t={};let n=0;for(const i in e)t[i]=r[n++];return t}return r}function NR(e,t,n){const i=n.length-e-1;if(t>=n[i])return i-1;if(t<=n[e])return e;let r=e,o=i,s=Math.floor((r+o)/2);for(;t<n[s]||t>=n[s+1];)t<n[s]?o=s:r=s,s=Math.floor((r+o)/2);return s}function FR(e,t,n,i){const r=[],o=[],s=[];r[0]=1;for(let a=1;a<=n;++a){o[a]=t-i[e+1-a],s[a]=i[e+a]-t;let n=0;for(let e=0;e<a;++e){const t=s[e+1],i=o[a-e],l=r[e]/(t+i);r[e]=n+t*l,n=i*l}r[a]=n}return r}function zR(e,t){let n=1;for(let r=2;r<=e;++r)n*=r;let i=1;for(let r=2;r<=t;++r)i*=r;for(let r=2;r<=e-t;++r)i*=r;return n/i}function jR(e,t,n,i,r){const o=function(e,t,n,i,r){const o=r<e?r:e,s=[],a=NR(e,i,t),l=function(e,t,n,i,r){const o=[];for(let h=0;h<=n;++h)o[h]=0;const s=[];for(let h=0;h<=i;++h)s[h]=o.slice(0);const a=[];for(let h=0;h<=n;++h)a[h]=o.slice(0);a[0][0]=1;const l=o.slice(0),u=o.slice(0);for(let h=1;h<=n;++h){l[h]=t-r[e+1-h],u[h]=r[e+h]-t;let n=0;for(let e=0;e<h;++e){const t=u[e+1],i=l[h-e];a[h][e]=t+i;const r=a[e][h-1]/a[h][e];a[e][h]=n+t*r,n=i*r}a[h][h]=n}for(let h=0;h<=n;++h)s[0][h]=a[h][n];for(let h=0;h<=n;++h){let e=0,t=1;const r=[];for(let i=0;i<=n;++i)r[i]=o.slice(0);r[0][0]=1;for(let o=1;o<=i;++o){let i=0;const l=h-o,u=n-o;h>=o&&(r[t][0]=r[e][0]/a[u+1][l],i=r[t][0]*a[l][u]);const c=h-1<=u?o-1:n-h;for(let n=l>=-1?1:-l;n<=c;++n)r[t][n]=(r[e][n]-r[e][n-1])/a[u+1][l+n],i+=r[t][n]*a[l+n][u];h<=u&&(r[t][o]=-r[e][o-1]/a[u+1][h],i+=r[t][o]*a[h][u]),s[o][h]=i;const p=e;e=t,t=p}}let c=n;for(let h=1;h<=i;++h){for(let e=0;e<=n;++e)s[h][e]*=c;c*=n-h}return s}(a,i,e,o,t),u=[];for(let c=0;c<n.length;++c){const e=n[c].clone(),t=e.w;e.x*=t,e.y*=t,e.z*=t,u[c]=e}for(let c=0;c<=o;++c){const t=u[a-e].clone().multiplyScalar(l[c][0]);for(let n=1;n<=e;++n)t.add(u[a-e+n].clone().multiplyScalar(l[c][n]));s[c]=t}for(let c=o+1;c<=r+1;++c)s[c]=new io(0,0,0);return s}(e,t,n,i,r);return function(e){const t=e.length,n=[],i=[];for(let o=0;o<t;++o){const t=e[o];n[o]=new po(t.x,t.y,t.z),i[o]=t.w}const r=[];for(let o=0;o<t;++o){const e=n[o].clone();for(let t=1;t<=o;++t)e.sub(r[o-t].clone().multiplyScalar(zR(o,t)*i[t]));r[o]=e.divideScalar(i[0])}return r}(o)}UR.preload=e=>Iv.preload(Cf,e),UR.clear=e=>Iv.clear(Cf,e);class HR extends pp{constructor(e,t,n,i,r){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=r||this.knots.length-1;for(let o=0;o<n.length;++o){const e=n[o];this.controlPoints[o]=new io(e.x,e.y,e.z,e.w)}}getPoint(e,t){const n=t||new po,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),r=function(e,t,n,i){const r=NR(e,i,t),o=FR(r,i,e,t),s=new io(0,0,0,0);for(let a=0;a<=e;++a){const t=n[r-e+a],i=o[a],l=t.w*i;s.x+=t.x*l,s.y+=t.y*l,s.z+=t.z*l,s.w+=t.w*i}return s}(this.degree,this.knots,this.controlPoints,i);return 1!=r.w&&r.divideScalar(r.w),n.set(r.x,r.y,r.z)}getTangent(e,t){const n=t||new po,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),r=jR(this.degree,this.knots,this.controlPoints,i,1);return n.copy(r[1]).normalize(),n}}let GR,WR,qR;class VR extends mf{constructor(e){super(e)}load(e,t,n,i){const r=this,o=""===r.path?qf.extractUrlBase(e):r.path,s=new yf(this.manager);s.setPath(r.path),s.setResponseType("arraybuffer"),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,(function(n){try{t(r.parse(n,o))}catch(kC){i?i(kC):console.error(kC),r.manager.itemError(e)}}),n,i)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===uw(e,0,t.length)}(e))GR=(new QR).parse(e);else{const t=uw(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function i(t){const i=e[t-1];return e=e.slice(n+t),n++,i}for(let r=0;r<t.length;++r){if(i(1)===t[r])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(ew(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ew(t));GR=(new YR).parse(t)}const n=new Cf(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new JR(n,this.manager).parse(GR)}}class JR{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){WR=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),i=this.parseDeformers(),r=(new KR).parse(i);return this.parseScene(i,r,n),qR}parseConnections(){const e=new Map;if("Connections"in GR){GR.Connections.connections.forEach((function(t){const n=t[0],i=t[1],r=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const o={ID:i,relationship:r};e.get(n).parents.push(o),e.has(i)||e.set(i,{parents:[],children:[]});const s={ID:n,relationship:r};e.get(i).children.push(s)}))}return e}parseImages(){const e={},t={};if("Video"in GR.Objects){const n=GR.Objects.Video;for(const i in n){const r=n[i];if(e[parseInt(i)]=r.RelativeFilename||r.Filename,"Content"in r){const e=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,o="string"===typeof r.Content&&""!==r.Content;if(e||o){const e=this.parseImage(n[i]);t[r.RelativeFilename||r.Filename]=e}}}}for(const n in e){const i=e[n];void 0!==t[i]?e[n]=t[i]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase();let r;switch(i){case"bmp":r="image/bmp";break;case"jpg":case"jpeg":r="image/jpeg";break;case"png":r="image/png";break;case"tif":r="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),r="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"===typeof t)return"data:"+r+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:r}))}}parseTextures(e){const t=new Map;if("Texture"in GR.Objects){const n=GR.Objects.Texture;for(const i in n){const r=this.parseTexture(n[i],e);t.set(parseInt(i),r)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const i=e.WrapModeU,r=e.WrapModeV,o=void 0!==i?i.value:0,s=void 0!==r?r.value:0;if(n.wrapS=0===o?Vt:Jt,n.wrapT=0===s?Vt:Jt,"Scaling"in e){const t=e.Scaling.value;n.repeat.x=t[0],n.repeat.y=t[1]}return n}loadTexture(e,t){let n;const i=this.textureLoader.path,r=WR.get(e.id).children;let o;void 0!==r&&r.length>0&&void 0!==t[r[0].ID]&&(n=t[r[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const s=e.FileName.slice(-3).toLowerCase();if("tga"===s){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new no):(t.setPath(this.textureLoader.path),o=t.load(n))}else"psd"===s?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new no):o=this.textureLoader.load(n);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in GR.Objects){const n=GR.Objects.Material;for(const i in n){const r=this.parseMaterial(n[i],e);null!==r&&t.set(parseInt(i),r)}}return t}parseMaterial(e,t){const n=e.id,i=e.attrName;let r=e.ShadingModel;if("object"===typeof r&&(r=r.value),!WR.has(n))return null;const o=this.parseParameters(e,t,n);let s;switch(r.toLowerCase()){case"phong":s=new Fd;break;case"lambert":s=new Hd;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),s=new Fd}return s.setValues(o),s.name=i,s}parseParameters(e,t,n){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new Ms).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(i.color=(new Ms).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new Ms).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(i.emissive=(new Ms).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new Ms).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new Ms).fromArray(e.SpecularColor.value));const r=this;return WR.get(n).children.forEach((function(e){const n=e.relationship;switch(n){case"Bump":i.bumpMap=r.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":i.aoMap=r.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=r.getTexture(t,e.ID),void 0!==i.map&&("colorSpace"in i.map?i.map.colorSpace="srgb":i.map.encoding=3001);break;case"DisplacementColor":i.displacementMap=r.getTexture(t,e.ID);break;case"EmissiveColor":i.emissiveMap=r.getTexture(t,e.ID),void 0!==i.emissiveMap&&("colorSpace"in i.emissiveMap?i.emissiveMap.colorSpace="srgb":i.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=r.getTexture(t,e.ID);break;case"ReflectionColor":i.envMap=r.getTexture(t,e.ID),void 0!==i.envMap&&(i.envMap.mapping=Gt,"colorSpace"in i.envMap?i.envMap.colorSpace="srgb":i.envMap.encoding=3001);break;case"SpecularColor":i.specularMap=r.getTexture(t,e.ID),void 0!==i.specularMap&&("colorSpace"in i.specularMap?i.specularMap.colorSpace="srgb":i.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=r.getTexture(t,e.ID),i.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),i}getTexture(e,t){return"LayeredTexture"in GR.Objects&&t in GR.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=WR.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in GR.Objects){const n=GR.Objects.Deformer;for(const i in n){const r=n[i],o=WR.get(parseInt(i));if("Skin"===r.attrType){const t=this.parseSkeleton(o,n);t.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=o.parents[0].ID,e[i]=t}else if("BlendShape"===r.attrType){const e={id:i};e.rawTargets=this.parseMorphTargets(o,n),e.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach((function(e){const i=t[e.ID];if("Cluster"!==i.attrType)return;const r={ID:e.ID,indices:[],weights:[],transformLink:(new Go).fromArray(i.TransformLink.a)};"Indexes"in i&&(r.indices=i.Indexes.a,r.weights=i.Weights.a),n.push(r)})),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let i=0;i<e.children.length;i++){const r=e.children[i],o=t[r.ID],s={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;s.geoID=WR.get(parseInt(r.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(s)}return n}parseScene(e,t,n){qR=new Lc;const i=this.parseModels(e.skeletons,t,n),r=GR.Objects.Model,o=this;i.forEach((function(e){const t=r[e.ID];o.setLookAtProperties(e,t);WR.get(e.ID).parents.forEach((function(t){const n=i.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&qR.add(e)})),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),qR.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=sw(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const s=(new XR).parse();1===qR.children.length&&qR.children[0].isGroup&&(qR.children[0].animations=s,qR=qR.children[0]),qR.animations=s}parseModels(e,t,n){const i=new Map,r=GR.Objects.Model;for(const o in r){const s=parseInt(o),a=r[o],l=WR.get(s);let u=this.buildSkeleton(l,e,s,a.attrName);if(!u){switch(a.attrType){case"Camera":u=this.createCamera(l);break;case"Light":u=this.createLight(l);break;case"Mesh":u=this.createMesh(l,t,n);break;case"NurbsCurve":u=this.createCurve(l,t);break;case"LimbNode":case"Root":u=new hh;break;default:u=new Lc}u.name=a.attrName?Em.sanitizeNodeName(a.attrName):"",u.ID=s}this.getTransformData(u,a),i.set(s,u)}return i}buildSkeleton(e,t,n,i){let r=null;return e.parents.forEach((function(e){for(const o in t){const s=t[o];s.rawBones.forEach((function(t,o){if(t.ID===e.ID){const e=r;r=new hh,r.matrixWorld.copy(t.transformLink),r.name=i?Em.sanitizeNodeName(i):"",r.ID=n,s.bones[o]=r,null!==e&&r.add(e)}}))}})),r}createCamera(e){let t,n;if(e.children.forEach((function(e){const t=GR.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new fs;else{let e=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(e=1);let i=1;void 0!==n.NearPlane&&(i=n.NearPlane.value/1e3);let r=1e3;void 0!==n.FarPlane&&(r=n.FarPlane.value/1e3);let o=window.innerWidth,s=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(o=n.AspectWidth.value,s=n.AspectHeight.value);const a=o/s;let l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(e){case 0:t=new Da(l,a,i,r),null!==u&&t.setFocalLength(u);break;case 1:t=new ol(-o/2,o/2,s/2,-s/2,i,r);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new fs}}return t}createLight(e){let t,n;if(e.children.forEach((function(e){const t=GR.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new fs;else{let e;e=void 0===n.LightType?0:n.LightType.value;let i=16777215;void 0!==n.Color&&(i=(new Ms).fromArray(n.Color.value));let r=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(r=0);let o=0;void 0!==n.FarAttenuationEnd&&(o=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const s=1;switch(e){case 0:t=new Uf(i,r,o,s);break;case 1:t=new Ff(i,r);break;case 2:let e=Math.PI/3;void 0!==n.InnerAngle&&(e=kr.degToRad(n.InnerAngle.value));let a=0;void 0!==n.OuterAngle&&(a=kr.degToRad(n.OuterAngle.value),a=Math.max(a,1)),t=new kf(i,r,o,e,a,s);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new Uf(i,r)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let i,r=null,o=null;const s=[];return e.children.forEach((function(e){t.has(e.ID)&&(r=t.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))})),s.length>1?o=s:s.length>0?o=s[0]:(o=new Fd({color:13421772}),s.push(o)),"color"in r.attributes&&s.forEach((function(e){e.vertexColors=!0})),r.FBX_Deformer?(i=new ch(r,o),i.normalizeSkinWeights()):i=new _a(r,o),i}createCurve(e,t){const n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),i=new Hh({color:3342591,linewidth:1});return new Kh(n,i)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?aw(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){if("LookAtProperty"in t){WR.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const n=GR.Objects.Model[t.ID];if("Lcl_Translation"in n){const t=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),qR.add(e.target)):e.lookAt((new po).fromArray(t))}}}))}}bindSkeleton(e,t,n){const i=this.parsePoseNodes();for(const r in e){const o=e[r];WR.get(parseInt(o.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;WR.get(t).parents.forEach((function(e){if(n.has(e.ID)){n.get(e.ID).bind(new mh(o.bones),i[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in GR.Objects){const t=GR.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){const i=t[n].PoseNode;Array.isArray(i)?i.forEach((function(t){e[t.Node]=(new Go).fromArray(t.Matrix.a)})):e[i.Node]=(new Go).fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in GR&&"AmbientColor"in GR.GlobalSettings){const e=GR.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],i=e[2];if(0!==t||0!==n||0!==i){const e=new Ms(t,n,i);qR.add(new zf(e,1))}}}}class KR{parse(e){const t=new Map;if("Geometry"in GR.Objects){const n=GR.Objects.Geometry;for(const i in n){const r=WR.get(parseInt(i)),o=this.parseGeometry(r,n[i],e);t.set(parseInt(i),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const i=n.skeletons,r=[],o=e.parents.map((function(e){return GR.Objects.Model[e.ID]}));if(0===o.length)return;const s=e.children.reduce((function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&r.push(n.morphTargets[e.ID])}));const a=o[0],l={};"RotationOrder"in a&&(l.eulerOrder=aw(a.RotationOrder.value)),"InheritType"in a&&(l.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(l.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(l.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(l.scale=a.GeometricScaling.value);const u=sw(l);return this.genGeometry(t,s,r,u)}genGeometry(e,t,n,i){const r=new aa;e.attrName&&(r.name=e.attrName);const o=this.parseGeoNode(e,t),s=this.genBuffers(o),a=new Zs(s.vertex,3);if(a.applyMatrix4(i),r.setAttribute("position",a),s.colors.length>0&&r.setAttribute("color",new Zs(s.colors,3)),t&&(r.setAttribute("skinIndex",new Ks(s.weightsIndices,4)),r.setAttribute("skinWeight",new Zs(s.vertexWeights,4)),r.FBX_Deformer=t),s.normal.length>0){const e=(new Dr).getNormalMatrix(i),t=new Zs(s.normal,3);t.applyNormalMatrix(e),r.setAttribute("normal",t)}if(s.uvs.forEach((function(e,t){let n="uv"+(t+1).toString();0===t&&(n="uv"),r.setAttribute(n,new Zs(s.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){let e=s.materialIndex[0],t=0;if(s.materialIndex.forEach((function(n,i){n!==e&&(r.addGroup(t,i-t,e),e=n,t=i)})),r.groups.length>0){const t=r.groups[r.groups.length-1],n=t.start+t.count;n!==s.materialIndex.length&&r.addGroup(n,s.materialIndex.length-n,e)}0===r.groups.length&&r.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(r,e,n,i),r}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(i,r){void 0===n.weightTable[i]&&(n.weightTable[i]=[]),n.weightTable[i].push({id:t,weight:e.weights[r]})}))}))),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,i=0,r=!1,o=[],s=[],a=[],l=[],u=[],c=[];const h=this;return e.vertexIndices.forEach((function(p,d){let f,m=!1;p<0&&(p^=-1,m=!0);let g=[],v=[];if(o.push(3*p,3*p+1,3*p+2),e.color){const t=iw(d,n,p,e.color);a.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[p]&&e.weightTable[p].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);const e=[0,0,0,0],t=[0,0,0,0];v.forEach((function(n,i){let r=n,o=g[i];t.forEach((function(t,n,i){if(r>t){i[n]=r,r=t;const s=e[n];e[n]=o,o=s}}))})),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)u.push(v[e]),c.push(g[e])}if(e.normal){const t=iw(d,n,p,e.normal);s.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(f=iw(d,n,p,e.material)[0]),e.uv&&e.uv.forEach((function(e,t){const i=iw(d,n,p,e);void 0===l[t]&&(l[t]=[]),l[t].push(i[0]),l[t].push(i[1])})),i++,m&&(h.genFace(t,e,o,f,s,a,l,u,c,i),n++,i=0,o=[],s=[],a=[],l=[],u=[],c=[])})),t}genFace(e,t,n,i,r,o,s,a,l,u){for(let c=2;c<u;c++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(c-1)]]),e.vertex.push(t.vertexPositions[n[3*(c-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(c-1)+2]]),e.vertex.push(t.vertexPositions[n[3*c]]),e.vertex.push(t.vertexPositions[n[3*c+1]]),e.vertex.push(t.vertexPositions[n[3*c+2]]),t.skeleton&&(e.vertexWeights.push(a[0]),e.vertexWeights.push(a[1]),e.vertexWeights.push(a[2]),e.vertexWeights.push(a[3]),e.vertexWeights.push(a[4*(c-1)]),e.vertexWeights.push(a[4*(c-1)+1]),e.vertexWeights.push(a[4*(c-1)+2]),e.vertexWeights.push(a[4*(c-1)+3]),e.vertexWeights.push(a[4*c]),e.vertexWeights.push(a[4*c+1]),e.vertexWeights.push(a[4*c+2]),e.vertexWeights.push(a[4*c+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(c-1)]),e.weightsIndices.push(l[4*(c-1)+1]),e.weightsIndices.push(l[4*(c-1)+2]),e.weightsIndices.push(l[4*(c-1)+3]),e.weightsIndices.push(l[4*c]),e.weightsIndices.push(l[4*c+1]),e.weightsIndices.push(l[4*c+2]),e.weightsIndices.push(l[4*c+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(c-1)]),e.colors.push(o[3*(c-1)+1]),e.colors.push(o[3*(c-1)+2]),e.colors.push(o[3*c]),e.colors.push(o[3*c+1]),e.colors.push(o[3*c+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[3*(c-1)]),e.normal.push(r[3*(c-1)+1]),e.normal.push(r[3*(c-1)+2]),e.normal.push(r[3*c]),e.normal.push(r[3*c+1]),e.normal.push(r[3*c+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(s[n][0]),e.uvs[n].push(s[n][1]),e.uvs[n].push(s[n][2*(c-1)]),e.uvs[n].push(s[n][2*(c-1)+1]),e.uvs[n].push(s[n][2*c]),e.uvs[n].push(s[n][2*c+1])}))}addMorphTargets(e,t,n,i){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const r=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const o=GR.Objects.Geometry[n.geoID];void 0!==o&&r.genMorphGeometry(e,t,o,i,n.name)}))}))}genMorphGeometry(e,t,n,i,r){const o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==n.Vertices?n.Vertices.a:[],a=void 0!==n.Indexes?n.Indexes.a:[],l=3*e.attributes.position.count,u=new Float32Array(l);for(let d=0;d<a.length;d++){const e=3*a[d];u[e]=s[3*d],u[e+1]=s[3*d+1],u[e+2]=s[3*d+2]}const c={vertexIndices:o,vertexPositions:u},h=this.genBuffers(c),p=new Zs(h.vertex,3);p.name=r||n.attrName,p.applyMatrix4(i),e.morphAttributes.position.push(p)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a;let r=[];return"IndexToDirect"===n&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:r,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a;let r=[];return"IndexToDirect"===n&&(r=e.UVIndex.a),{dataSize:2,buffer:i,indices:r,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a;let r=[];return"IndexToDirect"===n&&(r=e.ColorIndex.a),{dataSize:4,buffer:i,indices:r,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const i=e.Materials.a,r=[];for(let o=0;o<i.length;++o)r.push(o);return{dataSize:1,buffer:i,indices:r,mappingType:t,referenceType:n}}parseNurbsGeometry(e){if(void 0===HR)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new aa;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new aa;const n=t-1,i=e.KnotVector.a,r=[],o=e.Points.a;for(let u=0,c=o.length;u<c;u+=4)r.push((new io).fromArray(o,u));let s,a;if("Closed"===e.Form)r.push(r[0]);else if("Periodic"===e.Form){s=n,a=i.length-1-s;for(let e=0;e<n;++e)r.push(r[e])}const l=new HR(n,i,r,s,a).getPoints(12*r.length);return(new aa).setFromPoints(l)}}class XR{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const i=t[n],r=this.addClip(i);e.push(r)}return e}parseClips(){if(void 0===GR.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=GR.Objects.AnimationCurveNode,t=new Map;for(const n in e){const i=e[n];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){const e={id:i.id,attr:i.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=GR.Objects.AnimationCurve;for(const n in t){const i={id:t[n].id,times:t[n].KeyTime.a.map(tw),values:t[n].KeyValueFloat.a},r=WR.get(i.id);if(void 0!==r){const t=r.parents[0].ID,n=r.parents[0].relationship;n.match(/X/)?e.get(t).curves.x=i:n.match(/Y/)?e.get(t).curves.y=i:n.match(/Z/)?e.get(t).curves.z=i:n.match(/d|DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=i)}}}parseAnimationLayers(e){const t=GR.Objects.AnimationLayer,n=new Map;for(const i in t){const t=[],r=WR.get(parseInt(i));if(void 0!==r){r.children.forEach((function(n,i){if(e.has(n.ID)){const r=e.get(n.ID);if(void 0!==r.curves.x||void 0!==r.curves.y||void 0!==r.curves.z){if(void 0===t[i]){const e=WR.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const r=GR.Objects.Model[e.toString()];if(void 0===r)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",n);const o={modelName:r.attrName?Em.sanitizeNodeName(r.attrName):"",ID:r.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};qR.traverse((function(e){e.ID===r.id&&(o.transform=e.matrix,e.userData.transformData&&(o.eulerOrder=e.userData.transformData.eulerOrder))})),o.transform||(o.transform=new Go),"PreRotation"in r&&(o.preRotation=r.PreRotation.value),"PostRotation"in r&&(o.postRotation=r.PostRotation.value),t[i]=o}}t[i]&&(t[i][r.attr]=r)}else if(void 0!==r.curves.morph){if(void 0===t[i]){const e=WR.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,r=WR.get(e).parents[0].ID,o=WR.get(r).parents[0].ID,s=WR.get(o).parents[0].ID,a=GR.Objects.Model[s],l={modelName:a.attrName?Em.sanitizeNodeName(a.attrName):"",morphName:GR.Objects.Deformer[e].attrName};t[i]=l}t[i][r.attr]=r}}})),n.set(parseInt(i),t)}}return n}parseAnimStacks(e){const t=GR.Objects.AnimationStack,n={};for(const i in t){const r=WR.get(parseInt(i)).children;r.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(r[0].ID);n[i]={name:t[i].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new cf(e.name,-1,t)}generateTracks(e){const t=[];let n=new po,i=new ho,r=new po;if(e.transform&&e.transform.decompose(n,i,r),n=n.toArray(),i=(new $o).setFromQuaternion(i,e.eulerOrder).toArray(),r=r.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const i=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==i&&t.push(i)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const n=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");void 0!==n&&t.push(n)}if(void 0!==e.DeformPercent){const n=this.generateMorphTrack(e);void 0!==n&&t.push(n)}return t}generateVectorTrack(e,t,n,i){const r=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(r,t,n);return new uf(e+"."+i,r,o)}generateRotationTrack(e,t,n,i,r,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(kr.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(kr.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(kr.degToRad));const s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,n);void 0!==i&&((i=i.map(kr.degToRad)).push(o),i=(new $o).fromArray(i),i=(new ho).setFromEuler(i)),void 0!==r&&((r=r.map(kr.degToRad)).push(o),r=(new $o).fromArray(r),r=(new ho).setFromEuler(r).invert());const l=new ho,u=new $o,c=[];for(let h=0;h<a.length;h+=3)u.set(a[h],a[h+1],a[h+2],o),l.setFromEuler(u),void 0!==i&&l.premultiply(i),void 0!==r&&l.multiply(r),l.toArray(c,h/3*4);return new af(e+".quaternion",s,c)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),i=qR.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new of(e.modelName+".morphTargetInfluences["+i+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,n=t[0];for(let i=1;i<t.length;i++){const r=t[i];r!==n&&(t[e]=r,n=r,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,n){const i=n,r=[];let o=-1,s=-1,a=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(s=t.y.times.indexOf(e)),t.z&&(a=t.z.times.indexOf(e)),-1!==o){const e=t.x.values[o];r.push(e),i[0]=e}else r.push(i[0]);if(-1!==s){const e=t.y.values[s];r.push(e),i[1]=e}else r.push(i[1]);if(-1!==a){const e=t.z.values[a];r.push(e),i[2]=e}else r.push(i[2])})),r}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],i=e.values[t]-n,r=Math.abs(i);if(r>=180){const o=r/180,s=i/o;let a=n+s;const l=e.times[t-1],u=(e.times[t]-l)/o;let c=l+u;const h=[],p=[];for(;c<e.times[t];)h.push(c),c+=u,p.push(a),a+=s;e.times=cw(e.times,t,h),e.values=cw(e.values,t,p)}}}}class YR{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new $R,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,i){const r=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(r||o)return;const s=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),a=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");s?t.parseNodeBegin(e,s):a?t.parseNodeProperty(e,a,n[++i]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),r={name:n},o=this.parseNodeAttr(i),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,r):n in s?("PoseNode"===n?s.PoseNode.push(r):void 0!==s[n].id&&(s[n]={},s[n][s[n].id]=s[n]),""!==o.id&&(s[n][o.id]=r)):"number"===typeof o.id?(s[n]={},s[n][o.id]=r):"Properties70"!==n&&(s[n]="PoseNode"===n?[r]:r),"number"===typeof o.id&&(r.id=o.id),""!==o.name&&(r.attrName=o.name),""!==o.type&&(r.attrType=o.type),this.pushStack(r)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:n,type:i}}parseNodeProperty(e,t,n){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===i&&","===r&&(r=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===i){const e=r.split(",").slice(1),t=parseInt(e[0]),n=parseInt(e[1]);let s=r.split(",").slice(3);s=s.map((function(e){return e.trim().replace(/^"/,"")})),i="connections",r=[t,n],function(e,t){for(let n=0,i=e.length,r=t.length;n<r;n++,i++)e[i]=t[n]}(r,s),void 0===o[i]&&(o[i]=[])}"Node"===i&&(o.id=r),i in o&&Array.isArray(o[i])?o[i].push(r):"a"!==i?o[i]=r:o.a=r,this.setCurrentProp(o,i),"a"===i&&","!==r.slice(-1)&&(o.a=lw(r))}else this.parseNodeSpecialProperty(e,i,r)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=lw(t.a))}parseNodeSpecialProperty(e,t,n){const i=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),r=i[0],o=i[1],s=i[2],a=i[3];let l=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=lw(l)}this.getPrevNode()[r]={type:o,type2:s,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),r)}}class QR{parse(e){const t=new ZR(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const i=new $R;for(;!this.endOfContent(t);){const e=this.parseNode(t,n);null!==e&&i.add(e.name,e)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},i=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),s=e.getString(o);if(0===i)return null;const a=[];for(let h=0;h<r;h++)a.push(this.parseProperty(e));const l=a.length>0?a[0]:"",u=a.length>1?a[1]:"",c=a.length>2?a[2]:"";for(n.singleProperty=1===r&&e.getOffset()===i;i>e.getOffset();){const i=this.parseNode(e,t);null!==i&&this.parseSubNode(s,n,i)}return n.propertyList=a,"number"===typeof l&&(n.id=l),""!==u&&(n.attrName=u),""!==c&&(n.attrType=c),""!==s&&(n.name=s),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const e=n.propertyList[0];Array.isArray(e)?(t[n.name]=n,n.a=e):t[n.name]=e}else if("Connections"===e&&"C"===n.name){const e=[];n.propertyList.forEach((function(t,n){0!==n&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){let e=n.propertyList[0],i=n.propertyList[1];const r=n.propertyList[2],o=n.propertyList[3];let s;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===i.indexOf("Lcl ")&&(i=i.replace("Lcl ","Lcl_")),s="Color"===i||"ColorRGB"===i||"Vector"===i||"Vector3D"===i||0===i.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[e]={type:i,type2:r,flag:o,value:s}}else void 0===t[n.name]?"number"===typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),r=e.getUint32(),o=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const s=Oy(new Uint8Array(e.getArrayBuffer(o))),a=new ZR(s.buffer);switch(t){case"b":case"c":return a.getBooleanArray(i);case"d":return a.getFloat64Array(i);case"f":return a.getFloat32Array(i);case"i":return a.getInt32Array(i);case"l":return a.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class ZR{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1===(1&this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),qf.decodeText(new Uint8Array(t))}}class $R{add(e,t){this[e]=t}}function ew(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function tw(e){return e/46186158e3}const nw=[];function iw(e,t,n,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=e;break;case"ByPolygon":r=t;break;case"ByVertice":r=n;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}"IndexToDirect"===i.referenceType&&(r=i.indices[r]);const o=r*i.dataSize,s=o+i.dataSize;return function(e,t,n,i){for(let r=n,o=0;r<i;r++,o++)e[o]=t[r];return e}(nw,i.buffer,o,s)}const rw=new $o,ow=new po;function sw(e){const t=new Go,n=new Go,i=new Go,r=new Go,o=new Go,s=new Go,a=new Go,l=new Go,u=new Go,c=new Go,h=new Go,p=new Go,d=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(ow.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(kr.degToRad);t.push(e.eulerOrder),n.makeRotationFromEuler(rw.fromArray(t))}if(e.rotation){const t=e.rotation.map(kr.degToRad);t.push(e.eulerOrder),i.makeRotationFromEuler(rw.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(kr.degToRad);t.push(e.eulerOrder),r.makeRotationFromEuler(rw.fromArray(t)),r.invert()}e.scale&&o.scale(ow.fromArray(e.scale)),e.scalingOffset&&a.setPosition(ow.fromArray(e.scalingOffset)),e.scalingPivot&&s.setPosition(ow.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(ow.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(ow.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(h.copy(e.parentMatrix),c.copy(e.parentMatrixWorld));const f=n.clone().multiply(i).multiply(r),m=new Go;m.extractRotation(c);const g=new Go;g.copyPosition(c);const v=g.clone().invert().multiply(c),y=m.clone().invert().multiply(v),S=o,R=new Go;if(0===d)R.copy(m).multiply(f).multiply(y).multiply(S);else if(1===d)R.copy(m).multiply(y).multiply(f).multiply(S);else{const e=(new Go).scale((new po).setFromMatrixScale(h)).clone().invert(),t=y.clone().multiply(e);R.copy(m).multiply(f).multiply(t).multiply(S)}const w=u.clone().invert(),L=s.clone().invert();let b=t.clone().multiply(l).multiply(u).multiply(n).multiply(i).multiply(r).multiply(w).multiply(a).multiply(s).multiply(o).multiply(L);const C=(new Go).copyPosition(b),_=c.clone().multiply(C);return p.copyPosition(_),b=p.clone().multiply(R),b.premultiply(c.invert()),b}function aw(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function lw(e){return e.split(",").map((function(e){return parseFloat(e)}))}function uw(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),qf.decodeText(new Uint8Array(e,t,n))}function cw(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}function hw(e){return Iv(VR,e)}function pw(e,t){const n=i.useRef(),[r]=i.useState((()=>t?t instanceof fs?{current:t}:t:n)),[o]=i.useState((()=>new Mm(void 0)));i.useLayoutEffect((()=>{t&&(r.current=t instanceof fs?t:t.current),o._root=r.current}));const s=i.useRef({}),a=i.useMemo((()=>{const t={};return e.forEach((e=>Object.defineProperty(t,e.name,{enumerable:!0,get(){if(r.current)return s.current[e.name]||(s.current[e.name]=o.clipAction(e,r.current))},configurable:!0}))),{ref:r,clips:e,actions:t,names:e.map((e=>e.name)),mixer:o}}),[e]);return Tv(((e,t)=>o.update(t))),i.useEffect((()=>{const e=r.current;return()=>{s.current={},o.stopAllAction(),Object.values(a.actions).forEach((t=>{e&&o.uncacheAction(t,e)}))}}),[e]),a}hw.preload=e=>Iv.preload(VR,e),hw.clear=e=>Iv.clear(VR,e);const dw=JSON.parse('[{"time":0.7666666666666674,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.7833333333333341,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.8000000000000008,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.8166666666666675,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.8333333333333343,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.850000000000001,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.8666666666666677,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.8833333333333344,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.9000000000000011,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.9166666666666679,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.9333333333333346,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.9500000000000013,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.966666666666668,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":0.9833333333333347,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.0000000000000013,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.016666666666668,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.0333333333333345,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.0500000000000012,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.0666666666666678,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.0833333333333344,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.100000000000001,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.1166666666666676,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.1333333333333342,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.1500000000000008,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.1666666666666674,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.183333333333334,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.2000000000000006,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.2166666666666672,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.2333333333333338,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.2500000000000004,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.266666666666667,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.2833333333333337,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.3000000000000003,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.3166666666666669,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.3333333333333335,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.35,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.3666666666666667,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.3833333333333333,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.4,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.4166666666666665,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.4333333333333331,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.4499999999999997,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.4666666666666663,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.483333333333333,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.4999999999999996,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.5166666666666662,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.5333333333333328,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.5499999999999994,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.566666666666666,"blendshapes":{"eyeBlinkLeft":0.004,"eyeBlinkRight":0.004,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.5833333333333326,"blendshapes":{"eyeBlinkLeft":0.174,"eyeBlinkRight":0.174,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.5999999999999992,"blendshapes":{"eyeBlinkLeft":0.391,"eyeBlinkRight":0.391,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.6166666666666658,"blendshapes":{"eyeBlinkLeft":0.581,"eyeBlinkRight":0.58,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.6333333333333324,"blendshapes":{"eyeBlinkLeft":0.848,"eyeBlinkRight":0.848,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.649999999999999,"blendshapes":{"eyeBlinkLeft":0.87,"eyeBlinkRight":0.869,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.6666666666666656,"blendshapes":{"eyeBlinkLeft":0.628,"eyeBlinkRight":0.628,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.6833333333333322,"blendshapes":{"eyeBlinkLeft":0.454,"eyeBlinkRight":0.454,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.6999999999999988,"blendshapes":{"eyeBlinkLeft":0.339,"eyeBlinkRight":0.339,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.7166666666666655,"blendshapes":{"eyeBlinkLeft":0.227,"eyeBlinkRight":0.227,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.733333333333332,"blendshapes":{"eyeBlinkLeft":0.154,"eyeBlinkRight":0.154,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.7499999999999987,"blendshapes":{"eyeBlinkLeft":0.104,"eyeBlinkRight":0.104,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.7666666666666653,"blendshapes":{"eyeBlinkLeft":0.076,"eyeBlinkRight":0.076,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.7833333333333319,"blendshapes":{"eyeBlinkLeft":0.039,"eyeBlinkRight":0.039,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.7999999999999985,"blendshapes":{"eyeBlinkLeft":0.019,"eyeBlinkRight":0.019,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.816666666666665,"blendshapes":{"eyeBlinkLeft":0.01,"eyeBlinkRight":0.01,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.8333333333333317,"blendshapes":{"eyeBlinkLeft":0.005,"eyeBlinkRight":0.005,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.8499999999999983,"blendshapes":{"eyeBlinkLeft":0.002,"eyeBlinkRight":0.002,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.866666666666665,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.8833333333333315,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.8999999999999981,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.9166666666666647,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.9333333333333313,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.949999999999998,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.9666666666666646,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.9833333333333312,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":1.9999999999999978,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.0166666666666644,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.033333333333331,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.0499999999999976,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.066666666666664,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.083333333333331,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.0999999999999974,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.116666666666664,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.1333333333333306,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.1499999999999972,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.166666666666664,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.1833333333333305,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.199999999999997,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.2166666666666637,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.2333333333333303,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.249999999999997,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.2666666666666635,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.28333333333333,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.2999999999999967,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.3166666666666633,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.33333333333333,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.3499999999999965,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.366666666666663,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.3833333333333298,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.3999999999999964,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.416666666666663,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.4333333333333296,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.449999999999996,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.466666666666663,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.4833333333333294,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.499999999999996,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.5166666666666626,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.533333333333329,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.549999999999996,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.5666666666666624,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.583333333333329,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.5999999999999956,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.6166666666666623,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.633333333333329,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.6499999999999955,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.666666666666662,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.6833333333333287,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.6999999999999953,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.716666666666662,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.7333333333333285,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.749999999999995,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.7666666666666617,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.7833333333333283,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.799999999999995,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.8166666666666615,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.833333333333328,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.8499999999999948,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.8666666666666614,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.883333333333328,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.8999999999999946,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.916666666666661,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.933333333333328,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.9499999999999944,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.966666666666661,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.9833333333333276,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":2.9999999999999942,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.016666666666661,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.0333333333333274,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.049999999999994,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.0666666666666607,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.0833333333333273,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.099999999999994,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.1166666666666605,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.133333333333327,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.1499999999999937,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.1666666666666603,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.183333333333327,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.1999999999999935,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.21666666666666,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.2333333333333267,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.2499999999999933,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.26666666666666,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.2833333333333266,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.299999999999993,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.3166666666666598,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.3333333333333264,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.349999999999993,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.3666666666666596,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.383333333333326,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.399999999999993,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.4166666666666594,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.433333333333326,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.4499999999999926,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.4666666666666592,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.483333333333326,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.4999999999999925,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.516666666666659,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.5333333333333257,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.5499999999999923,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.566666666666659,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.5833333333333255,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.599999999999992,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.6166666666666587,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.6333333333333253,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.649999999999992,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.6666666666666585,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.683333333333325,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.6999999999999917,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.7166666666666583,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.733333333333325,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.7499999999999916,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.766666666666658,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.7833333333333248,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.7999999999999914,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.816666666666658,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.8333333333333246,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.849999999999991,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.866666666666658,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.8833333333333244,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.899999999999991,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.9166666666666576,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.9333333333333242,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.949999999999991,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.9666666666666575,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.983333333333324,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":3.9999999999999907,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.016666666666658,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.033333333333324,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.049999999999991,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.0666666666666575,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.083333333333324,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.099999999999991,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.116666666666657,"blendshapes":{"eyeBlinkLeft":0.119,"eyeBlinkRight":0.119,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.133333333333324,"blendshapes":{"eyeBlinkLeft":0.283,"eyeBlinkRight":0.283,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.149999999999991,"blendshapes":{"eyeBlinkLeft":0.423,"eyeBlinkRight":0.423,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.166666666666657,"blendshapes":{"eyeBlinkLeft":0.502,"eyeBlinkRight":0.502,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.183333333333324,"blendshapes":{"eyeBlinkLeft":0.464,"eyeBlinkRight":0.464,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.19999999999999,"blendshapes":{"eyeBlinkLeft":0.35,"eyeBlinkRight":0.35,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.216666666666657,"blendshapes":{"eyeBlinkLeft":0.229,"eyeBlinkRight":0.229,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.233333333333324,"blendshapes":{"eyeBlinkLeft":0.142,"eyeBlinkRight":0.143,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.24999999999999,"blendshapes":{"eyeBlinkLeft":0.103,"eyeBlinkRight":0.103,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.266666666666657,"blendshapes":{"eyeBlinkLeft":0.072,"eyeBlinkRight":0.072,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.2833333333333234,"blendshapes":{"eyeBlinkLeft":0.04,"eyeBlinkRight":0.04,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.29999999999999,"blendshapes":{"eyeBlinkLeft":0.022,"eyeBlinkRight":0.022,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.316666666666657,"blendshapes":{"eyeBlinkLeft":0.012,"eyeBlinkRight":0.012,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.333333333333323,"blendshapes":{"eyeBlinkLeft":0.007,"eyeBlinkRight":0.007,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.34999999999999,"blendshapes":{"eyeBlinkLeft":0.005,"eyeBlinkRight":0.005,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.3666666666666565,"blendshapes":{"eyeBlinkLeft":0.003,"eyeBlinkRight":0.003,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.383333333333323,"blendshapes":{"eyeBlinkLeft":0.002,"eyeBlinkRight":0.002,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.39999999999999,"blendshapes":{"eyeBlinkLeft":0.002,"eyeBlinkRight":0.002,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.416666666666656,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.433333333333323,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.4499999999999895,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.466666666666656,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.483333333333323,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.499999999999989,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.516666666666656,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.533333333333323,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.549999999999989,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.566666666666656,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.583333333333322,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.599999999999989,"blendshapes":{"eyeBlinkLeft":0.001,"eyeBlinkRight":0.001,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.616666666666656,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.633333333333322,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.649999999999989,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.666666666666655,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.683333333333322,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.699999999999989,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.716666666666655,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.733333333333322,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.7499999999999885,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.766666666666655,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.783333333333322,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.799999999999988,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.816666666666655,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.8333333333333215,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.849999999999988,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.866666666666655,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.883333333333321,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.899999999999988,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.9166666666666545,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.933333333333321,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.949999999999988,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.966666666666654,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.983333333333321,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":4.999999999999988,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.016666666666654,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.033333333333321,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.049999999999987,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.066666666666654,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.083333333333321,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.099999999999987,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.116666666666654,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.13333333333332,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.149999999999987,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.166666666666654,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.18333333333332,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.199999999999987,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.2166666666666535,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.23333333333332,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.249999999999987,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.266666666666653,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.28333333333332,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.2999999999999865,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.316666666666653,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.33333333333332,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.349999999999986,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.366666666666653,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.3833333333333195,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.399999999999986,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.416666666666653,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.433333333333319,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.449999999999986,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.466666666666653,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.483333333333319,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.499999999999986,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.516666666666652,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.533333333333319,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.549999999999986,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.566666666666652,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.583333333333319,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.599999999999985,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.616666666666652,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.633333333333319,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.649999999999985,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.666666666666652,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.6833333333333185,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.699999999999985,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.716666666666652,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.733333333333318,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.749999999999985,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.7666666666666515,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.783333333333318,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.799999999999985,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.816666666666651,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.833333333333318,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.8499999999999845,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.866666666666651,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.883333333333318,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.899999999999984,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.916666666666651,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.933333333333318,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.949999999999984,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.966666666666651,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.983333333333317,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":5.999999999999984,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.016666666666651,"blendshapes":{"eyeBlinkLeft":0.002,"eyeBlinkRight":0.002,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.033333333333317,"blendshapes":{"eyeBlinkLeft":0.158,"eyeBlinkRight":0.158,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.049999999999984,"blendshapes":{"eyeBlinkLeft":0.313,"eyeBlinkRight":0.313,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.06666666666665,"blendshapes":{"eyeBlinkLeft":0.461,"eyeBlinkRight":0.461,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.083333333333317,"blendshapes":{"eyeBlinkLeft":0.517,"eyeBlinkRight":0.516,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.099999999999984,"blendshapes":{"eyeBlinkLeft":0.441,"eyeBlinkRight":0.441,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.11666666666665,"blendshapes":{"eyeBlinkLeft":0.343,"eyeBlinkRight":0.343,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.133333333333317,"blendshapes":{"eyeBlinkLeft":0.246,"eyeBlinkRight":0.246,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.1499999999999835,"blendshapes":{"eyeBlinkLeft":0.161,"eyeBlinkRight":0.161,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.16666666666665,"blendshapes":{"eyeBlinkLeft":0.111,"eyeBlinkRight":0.11,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.183333333333317,"blendshapes":{"eyeBlinkLeft":0.067,"eyeBlinkRight":0.066,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.199999999999983,"blendshapes":{"eyeBlinkLeft":0.008,"eyeBlinkRight":0.009,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.21666666666665,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.2333333333333165,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.249999999999983,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.26666666666665,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.283333333333316,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.299999999999983,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.3166666666666496,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.333333333333316,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.349999999999983,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.366666666666649,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.383333333333316,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.399999999999983,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.416666666666649,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.433333333333316,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.449999999999982,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.466666666666649,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.483333333333316,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.499999999999982,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.516666666666649,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.5333333333333155,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.549999999999982,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.566666666666649,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.583333333333315,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.599999999999982,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.6166666666666485,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.633333333333315,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.649999999999982,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.666666666666648,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.683333333333315,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.6999999999999815,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.716666666666648,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.733333333333315,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.749999999999981,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.766666666666648,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.783333333333315,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.799999999999981,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.816666666666648,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.833333333333314,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.849999999999981,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.866666666666648,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.883333333333314,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}},{"time":6.899999999999981,"blendshapes":{"eyeBlinkLeft":0,"eyeBlinkRight":0,"mouthSmileLeft":0.3,"mouthSmileRight":0.3}}]');var fw=60;function mw(e){return["eyeLookDownLeft","eyeLookDownRight","eyeLookInLeft","eyeLookInRight","eyeLookOutLeft","eyeLookOutRight","eyeLookUpLeft","eyeLookUpRight"].includes(e)?e:e.endsWith("Right")?e.replace("Right","_R"):e.endsWith("Left")?e.replace("Left","_L"):e}function gw(e,t,n){if(0!==e.length&&t){let i=[];for(let e=0;e<Object.keys(t).length;e++)i.push([]);let r=[],o=0;e.forEach(((e,n)=>{Object.entries(e.blendshapes).forEach((e=>{let[n,r]=e;mw(n)in t&&("mouthShrugUpper"===n&&(r+=.4),i[t[mw(n)]].push(r))})),r.push(o/fw),o++}));let s=[];Object.entries(e[0].blendshapes).forEach((e=>{let[o,a]=e;if(!(mw(o)in t))return;let l=t[mw(o)],u=new of("".concat(n,".morphTargetInfluences[").concat(l,"]"),r,i[l]);s.push(u)}));return new cf("animation",-1,s)}return null}const vw=__webpack_require__.p+"static/media/idle.d42e61b7fbc8844d6f02.fbx";var yw=__webpack_require__(2418);const Sw=window.env,Rw=JSON.parse('["eyeBlinkLeft","eyeLookDownLeft","eyeLookInLeft","eyeLookOutLeft","eyeLookUpLeft","eyeSquintLeft","eyeWideLeft","eyeBlinkRight","eyeLookDownRight","eyeLookInRight","eyeLookOutRight","eyeLookUpRight","eyeSquintRight","eyeWideRight","jawForward","jawLeft","jawRight","jawOpen","mouthClose","mouthFunnel","mouthPucker","mouthLeft","mouthRight","mouthSmileLeft","mouthSmileRight","mouthFrownLeft","mouthFrownRight","mouthDimpleLeft","mouthDimpleRight","mouthStretchLeft","mouthStretchRight","mouthRollLower","mouthRollUpper","mouthShrugLower","mouthShrugUpper","mouthPressLeft","mouthPressRight","mouthLowerDownLeft","mouthLowerDownRight","mouthUpperUpLeft","mouthUpperUpRight","browDownLeft","browDownRight","browInnerUp","browOuterUpLeft","browOuterUpRight","cheekPuff","cheekSquintLeft","cheekSquintRight","noseSneerLeft","noseSneerRight","tongueOut","headRoll","leftEyeRoll","rightEyeRoll"]'),ww=Sw.AZURE_REGION||"AZURE_REGION_____",Lw=Sw.AZURE_KEY||"AZURE_KEY___";var bw=__webpack_require__(6417);function Cw(e){let{avatar_url:t,hitAzure:n,setHitAzure:r,refTextArea:o,text:s}=e;document.title="Eva | 3d Avatar";let a=OR(t),l=null,u=null;const[c,h,p,d,f,m,g,v,y,S,R,w,L,b]=UR(["./images/body.webp","./images/eyes.webp","./images/teeth_diffuse.webp","./images/body_specular.webp","./images/body_roughness.webp","./images/body_normal.webp","./images/teeth_normal.webp","./images/h_color.webp","./images/tshirt_diffuse.webp","./images/tshirt_normal.webp","./images/tshirt_roughness.webp","./images/h_alpha.webp","./images/h_normal.webp","./images/h_roughness.webp"]);[c,h,p,g,d,f,m,y,S,R,w,L,b].forEach((e=>{e.colorSpace=Ei,e.flipY=!1})),m.colorSpace=xi,S.colorSpace=xi,g.colorSpace=xi,L.colorSpace=xi,a.scene.traverse((e=>{"Mesh"!==e.type&&"LineSegments"!==e.type&&"SkinnedMesh"!==e.type||(e.castShadow=!0,e.receiveShadow=!0,e.frustumCulled=!1,e.name.includes("Body")&&(e.castShadow=!0,e.receiveShadow=!0,e.material=new Nd,e.material.map=c,e.material.roughness=1.7,e.material.roughnessMap=f,e.material.normalMap=m,e.material.normalScale=new Ir(.6,.6),l=e.morphTargetDictionary,e.material.envMapIntensity=.8),e.name.includes("Eyes")&&(e.material=new Ud,e.material.map=h,e.material.roughness=.1,e.material.envMapIntensity=.5),e.name.includes("Brows")&&(e.material=new Hh({color:0}),e.material.linewidth=1,e.material.opacity=.5,e.material.transparent=!0,e.visible=!1),e.name.includes("Teeth")&&(e.receiveShadow=!0,e.castShadow=!0,e.material=new Ud,e.material.roughness=.1,e.material.map=p,e.material.normalMap=g,e.material.envMapIntensity=.7),e.name.includes("Hair")&&(e.material=new Ud,e.material.map=v,e.material.alphaMap=w,e.material.normalMap=L,e.material.roughnessMap=b,e.material.transparent=!0,e.material.depthWrite=!1,e.material.side=2,e.material.color.setHex(0),e.material.envMapIntensity=.3),e.name.includes("TSHIRT")&&(e.material=new Ud,e.material.map=y,e.material.roughnessMap=R,e.material.normalMap=S,e.material.color.setHex(16777215),e.material.envMapIntensity=.5),e.name.includes("TeethLower")&&(u=e.morphTargetDictionary))}));const[C,_]=(0,i.useState)([]),A=(0,i.useMemo)((()=>new Mm(a.scene)),[a.scene]);let E=hw(vw),{clips:x}=pw(E.animations);x[0].tracks=x[0].tracks.filter((e=>e.name.includes("Head")||e.name.includes("Neck")||e.name.includes("Spine2"))),x[0].tracks=x[0].tracks.map((e=>(e.name.includes("Head")&&(e.name="head.quaternion"),e.name.includes("Neck")&&(e.name="neck.quaternion"),e.name.includes("Spine")&&(e.name="spine2.quaternion"),e))),(0,i.useEffect)((()=>{A.clipAction(x[0]).play();let e=gw(dw,l,"HG_Body");A.clipAction(e).play()}),[]);const[P,T]=(0,i.useState)(null),{blendDataState:M}=function(e){let{text:t,hitAzure:n,setHitAzure:r}=e;const[o,s]=(0,i.useState)([]),[a,l]=(0,i.useState)();var u;return!0===n&&t?(r(!1),(u=t,new Promise(((e,t)=>{let n='<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xmlns:mstts="http://www.w3.org/2001/mstts" xml:lang="en-US">\n\t\t\t<voice name="en-US-JennyNeural">\n\t\t\t  <mstts:viseme type="FacialExpression"/>\n\t\t\t  '.concat(u,"\n\t\t\t</voice>\n\t\t\t</speak>");const i=yw.SpeechConfig.fromSubscription(Lw,ww);i.speechSynthesisOutputFormat=5;let r=[],o=1/60,s=0;const a=new yw.SpeechSynthesizer(i);a.visemeReceived=(e,t)=>{var n;let i=JSON.parse(t.animation);null===i||void 0===i||null===(n=i.BlendShapes)||void 0===n||n.forEach((e=>{let t={};Rw.forEach(((n,i)=>{t[n]=e[i]})),r.push({time:s,blendshapes:t}),s+=o}))},a.speakSsmlAsync(n,(t=>{a.close(),e({blendData:r,message:"success"})}),(e=>{a.close(),t(e.message)}))}))).then((e=>{s(e.blendData),l(e.message)}))):console.log({text:t,hitAzure:n,setHitAzure:r}),{blendDataState:o,message:a}}({text:s,hitAzure:n,setHitAzure:r,times:1});(0,i.useEffect)((()=>{if((null===M||void 0===M?void 0:M.length)>0){let e=[gw(M,l,"HG_Body"),gw(M,u,"HG_TeethLower")],t=Math.round(1e3*e[0].duration*1);_(e),T(!0),setTimeout((()=>{T(!1)}),t)}}),[M]);const[k,I]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{!0===P?I(!0):(I(!1),r(!1))}),[P]),(0,i.useEffect)((()=>{!0===k&&C.forEach((e=>{let t=A.clipAction(e);t.setLoop(si),t.play()}))}),[k]),Tv(((e,t)=>{A.update(t)})),(0,bw.jsx)("primitive",{object:a.scene,dispose:null})}function _w(){const e=UR("./images/bg.webp");return(0,bw.jsxs)("mesh",{position:[0,1.6,-1],scale:[.215,.215,.6],children:[(0,bw.jsx)("planeGeometry",{attach:"geometry",args:[10,10,2]}),(0,bw.jsx)("meshStandardMaterial",{attach:"material",map:e,side:Ve}),(0,bw.jsx)("mesh",{position:[0,0,-5]})]})}const Aw=__webpack_require__.p+"static/media/model.86dfd0f2513c39581b67.glb";function Ew(){const e=(0,i.useRef)(),[t,n]=(0,i.useState)(!1),[r,o]=(0,i.useState)("How are you sir?");return(0,bw.jsxs)("div",{className:"full",children:[(0,bw.jsxs)(AS,{dpr:2,onCreated:e=>{e.gl.physicallyCorrectLights=!0},children:[(0,bw.jsx)(Zv,{enableZoom:!0,minZoom:1e3,maxZoom:2200,minAzimuthAngle:-Math.PI/9,maxAzimuthAngle:Math.PI/9,maxPolarAngle:Math.PI/1.55,minPolarAngle:Math.PI/3,target:[0,1.65,0]}),(0,bw.jsx)(ny,{}),(0,bw.jsx)(ry,{makeDefault:!0,zoom:2e3,position:[0,1.65,1]}),(0,bw.jsx)(i.Suspense,{fallback:null,children:(0,bw.jsx)(Xy,{background:!1,files:"./images/photo_studio_loft_hall_1k.hdr"})}),(0,bw.jsx)(i.Suspense,{fallback:null,children:(0,bw.jsx)(_w,{})}),(0,bw.jsx)(i.Suspense,{fallback:null,children:(0,bw.jsx)(Cw,{avatar_url:Aw,hitAzure:t,setHitAzure:n,refTextArea:e,text:r})})]}),(0,bw.jsx)($y,{dataInterpolation:e=>"Loading... please wait"}),(0,bw.jsxs)("div",{className:ES,children:[(0,bw.jsx)("textarea",{rows:4,type:"text",ref:e,className:xS,value:r,onChange:e=>o(e.target.value.substring(0,200))}),(0,bw.jsxs)("div",{children:[(0,bw.jsxs)("button",{onClick:()=>n(!0),className:PS,children:[" ",t?"Running...":"Speak"]}),t?(0,bw.jsx)("button",{onClick:()=>n(!1),className:PS,children:" Stop "}):null]})]})]})}function xw(e,t){if(t===vi)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===Si||t===yi){let n=e.getIndex();if(null===n){const t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,r=[];if(t===Si)for(let e=1;e<=i;e++)r.push(n.getX(0)),r.push(n.getX(e)),r.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2===0?(r.push(n.getX(e)),r.push(n.getX(e+1)),r.push(n.getX(e+2))):(r.push(n.getX(e+2)),r.push(n.getX(e+1)),r.push(n.getX(e)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class Pw extends mf{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Ow(e)})),this.register((function(e){return new Ww(e)})),this.register((function(e){return new qw(e)})),this.register((function(e){return new Vw(e)})),this.register((function(e){return new Uw(e)})),this.register((function(e){return new Nw(e)})),this.register((function(e){return new Fw(e)})),this.register((function(e){return new zw(e)})),this.register((function(e){return new Dw(e)})),this.register((function(e){return new jw(e)})),this.register((function(e){return new Bw(e)})),this.register((function(e){return new Gw(e)})),this.register((function(e){return new Hw(e)})),this.register((function(e){return new kw(e)})),this.register((function(e){return new Jw(e)})),this.register((function(e){return new Kw(e)}))}load(e,t,n,i){const r=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=qf.extractUrlBase(e);o=qf.resolveURL(t,this.path)}else o=qf.extractUrlBase(e);this.manager.itemStart(e);const s=function(t){i?i(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},a=new yf(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{r.parse(n,o,(function(n){t(n),r.manager.itemEnd(e)}),s)}catch(kC){s(kC)}}),n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const o={},s={},a=new TextDecoder;if("string"===typeof e)r=JSON.parse(e);else if(e instanceof ArrayBuffer){if(a.decode(new Uint8Array(e,0,4))===Xw){try{o[Mw.KHR_BINARY_GLTF]=new Zw(e)}catch(u){return void(i&&i(u))}r=JSON.parse(o[Mw.KHR_BINARY_GLTF].content)}else r=JSON.parse(a.decode(e))}else r=e;if(void 0===r.asset||r.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new bL(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const e=this.pluginCallbacks[c](l);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),s[e.name]=e,o[e.name]=!0}if(r.extensionsUsed)for(let c=0;c<r.extensionsUsed.length;++c){const e=r.extensionsUsed[c],t=r.extensionsRequired||[];switch(e){case Mw.KHR_MATERIALS_UNLIT:o[e]=new Iw;break;case Mw.KHR_DRACO_MESH_COMPRESSION:o[e]=new $w(r,this.dracoLoader);break;case Mw.KHR_TEXTURE_TRANSFORM:o[e]=new eL;break;case Mw.KHR_MESH_QUANTIZATION:o[e]=new tL;break;default:t.indexOf(e)>=0&&void 0===s[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(o),l.setPlugins(s),l.parse(n,i)}parseAsync(e,t){const n=this;return new Promise((function(i,r){n.parse(e,t,i,r)}))}}function Tw(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const Mw={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class kw{constructor(e){this.parser=e,this.name=Mw.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let s;const a=new Ms(16777215);void 0!==o.color&&a.setRGB(o.color[0],o.color[1],o.color[2],xi);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":s=new Ff(a),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new Uf(a),s.distance=l;break;case"spot":s=new kf(a),s.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,s.angle=o.spot.outerConeAngle,s.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return s.position.set(0,0,0),s.decay=2,vL(s,o),void 0!==o.intensity&&(s.intensity=o.intensity),s.name=t.createUniqueName(o.name||"light_"+e),i=Promise.resolve(s),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,i=n.json.nodes[e],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return n._getNodeRef(t.cache,r,e)}))}}class Iw{constructor(){this.name=Mw.KHR_MATERIALS_UNLIT}getMaterialType(){return Os}extendParams(e,t,n){const i=[];e.color=new Ms(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],xi),e.opacity=t[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(e,"map",r.baseColorTexture,Ei))}return Promise.all(i)}}class Dw{constructor(e){this.parser=e,this.name=Mw.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name].emissiveStrength;return void 0!==i&&(t.emissiveIntensity=i),Promise.resolve()}}class Ow{constructor(e){this.parser=e,this.name=Mw.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ir(e,e)}return Promise.all(r)}}class Bw{constructor(e){this.parser=e,this.name=Mw.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&r.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&r.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class Uw{constructor(e){this.parser=e,this.name=Mw.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Ms(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],xi)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ei)),void 0!==o.sheenRoughnessTexture&&r.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Nw{constructor(e){this.parser=e,this.name=Mw.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class Fw{constructor(e){this.parser=e,this.name=Mw.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const s=o.attenuationColor||[1,1,1];return t.attenuationColor=(new Ms).setRGB(s[0],s[1],s[2],xi),Promise.all(r)}}class zw{constructor(e){this.parser=e,this.name=Mw.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return t.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class jw{constructor(e){this.parser=e,this.name=Mw.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const s=o.specularColorFactor||[1,1,1];return t.specularColor=(new Ms).setRGB(s[0],s[1],s[2],xi),void 0!==o.specularColorTexture&&r.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,Ei)),Promise.all(r)}}class Hw{constructor(e){this.parser=e,this.name=Mw.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&r.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class Gw{constructor(e){this.parser=e,this.name=Mw.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?Nd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&r.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class Ww{constructor(e){this.parser=e,this.name=Mw.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class qw{constructor(e){this.parser=e,this.name=Mw.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=i.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,o.source,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Vw{constructor(e){this.parser=e,this.name=Mw.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],s=i.images[o.source];let a=n.textureLoader;if(s.uri){const e=n.options.manager.getHandler(s.uri);null!==e&&(a=e)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(e,o.source,a);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Jw{constructor(e){this.name=Mw.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],i=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(t){const n=e.byteOffset||0,i=e.byteLength||0,o=e.count,s=e.byteStride,a=new Uint8Array(t,n,i);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(o,s,a,e.mode,e.filter).then((function(e){return e.buffer})):r.ready.then((function(){const t=new ArrayBuffer(o*s);return r.decodeGltfBuffer(new Uint8Array(t),o,s,a,e.mode,e.filter),t}))}))}return null}}class Kw{constructor(e){this.name=Mw.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const a of i.primitives)if(a.mode!==oL.TRIANGLES&&a.mode!==oL.TRIANGLE_STRIP&&a.mode!==oL.TRIANGLE_FAN&&void 0!==a.mode)return null;const r=n.extensions[this.name].attributes,o=[],s={};for(const a in r)o.push(this.parser.getDependency("accessor",r[a]).then((e=>(s[a]=e,s[a]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,r=[];for(const o of n){const e=new Go,t=new po,n=new ho,a=new po(1,1,1),l=new Ch(o.geometry,o.material,i);for(let r=0;r<i;r++)s.TRANSLATION&&t.fromBufferAttribute(s.TRANSLATION,r),s.ROTATION&&n.fromBufferAttribute(s.ROTATION,r),s.SCALE&&a.fromBufferAttribute(s.SCALE,r),l.setMatrixAt(r,e.compose(t,n,a));for(const i in s)if("_COLOR_0"===i){const e=s[i];l.instanceColor=new gh(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==i&&"ROTATION"!==i&&"SCALE"!==i&&o.geometry.setAttribute(i,s[i]);fs.prototype.copy.call(l,o),this.parser.assignFinalMaterial(l),r.push(l)}return t.isGroup?(t.clear(),t.add(...r),t):r[0]})))}}const Xw="glTF",Yw=1313821514,Qw=5130562;class Zw{constructor(e){this.name=Mw.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Xw)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-12,r=new DataView(e,12);let o=0;for(;o<i;){const t=r.getUint32(o,!0);o+=4;const i=r.getUint32(o,!0);if(o+=4,i===Yw){const i=new Uint8Array(e,12+o,t);this.content=n.decode(i)}else if(i===Qw){const n=12+o;this.body=e.slice(n,n+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class $w{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Mw.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,s={},a={},l={};for(const u in o){const e=cL[u]||u.toLowerCase();s[e]=o[u]}for(const u in e.attributes){const t=cL[u]||u.toLowerCase();if(void 0!==o[u]){const i=n.accessors[e.attributes[u]],r=sL[i.componentType];l[t]=r.name,a[t]=!0===i.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t,n){i.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],i=a[t];void 0!==i&&(n.normalized=i)}t(e)}),s,l,xi,n)}))}))}}class eL{constructor(){this.name=Mw.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class tL{constructor(){this.name=Mw.KHR_MESH_QUANTIZATION}}class nL extends Qd{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let o=0;o!==i;o++)t[o]=n[r+o];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=2*s,l=3*s,u=i-t,c=(n-t)/u,h=c*c,p=h*c,d=e*l,f=d-l,m=-2*p+3*h,g=p-h,v=1-m,y=g-h+c;for(let S=0;S!==s;S++){const e=o[f+S+s],t=o[f+S+a]*u,n=o[d+S+s],i=o[d+S]*u;r[S]=v*e+y*t+m*n+g*i}return r}}const iL=new ho;class rL extends nL{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return iL.fromArray(r).normalize().toArray(r),r}}const oL={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},sL={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},aL={9728:Xt,9729:en,9984:Yt,9985:tn,9986:Zt,9987:rn},lL={33071:Jt,33648:Kt,10497:Vt},uL={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},cL={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},hL={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},pL={CUBICSPLINE:void 0,LINEAR:ci,STEP:ui},dL="OPAQUE",fL="MASK",mL="BLEND";function gL(e,t,n){for(const i in n.extensions)void 0===e[i]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[i]=n.extensions[i])}function vL(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function yL(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,i=t.weights.length;n<i;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,i=n.length;t<i;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function SL(e){let t;const n=e.extensions&&e.extensions[Mw.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+RL(n.attributes):e.indices+":"+RL(e.attributes)+":"+e.mode,void 0!==e.targets)for(let i=0,r=e.targets.length;i<r;i++)t+=":"+RL(e.targets[i]);return t}function RL(e){let t="";const n=Object.keys(e).sort();for(let i=0,r=n.length;i<r;i++)t+=n[i]+":"+e[n[i]]+";";return t}function wL(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const LL=new Go;class bL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Tw,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,r=-1;"undefined"!==typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,r=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||n||i&&r<98?this.textureLoader=new Cf(this.options.manager):this.textureLoader=new Zf(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new yf(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][i.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:i.asset,parser:n,userData:{}};return gL(r,o,i),vL(o,i),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const n=t[i].joints;for(let t=0,i=n.length;t<i;t++)e[n[t]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const t=e[i];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[i,o]of e.children.entries())r(o,t.children[i])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":i=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":i=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!i)throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(i.map((function(t,i){return n.getDependency(e,i)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Mw.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(e,r){n.load(qf.resolveURL(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,i=t.byteOffset||0;return e.slice(i,i+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=uL[i.type],t=sL[i.componentType],n=!0===i.normalized,r=new t(i.count*e);return Promise.resolve(new Gs(r,e,n))}const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(e){const r=e[0],o=uL[i.type],s=sL[i.componentType],a=s.BYTES_PER_ELEMENT,l=a*o,u=i.byteOffset||0,c=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,h=!0===i.normalized;let p,d;if(c&&c!==l){const e=Math.floor(u/c),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(p=new s(r,e*c,i.count*c/a),l=new Ic(p,c/a),t.cache.add(n,l)),d=new Oc(l,o,u%c/a,h)}else p=null===r?new s(i.count*o):new s(r,u,i.count*o),d=new Gs(p,o,h);if(void 0!==i.sparse){const t=uL.SCALAR,n=sL[i.sparse.indices.componentType],a=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,u=new n(e[1],a,i.sparse.count*t),c=new s(e[2],l,i.sparse.count*o);null!==r&&(d=new Gs(d.array.slice(),d.itemSize,d.normalized));for(let e=0,i=u.length;e<i;e++){const t=u[e];if(d.setX(t,c[e*o]),o>=2&&d.setY(t,c[e*o+1]),o>=3&&d.setZ(t,c[e*o+2]),o>=4&&d.setW(t,c[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d}))}loadTexture(e){const t=this.json,n=this.options,i=t.textures[e].source,r=t.images[i];let o=this.textureLoader;if(r.uri){const e=n.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const i=this,r=this.json,o=r.textures[e],s=r.images[t],a=(s.uri||s.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=o.name||s.name||"",""===t.name&&"string"===typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);const n=(r.samplers||{})[o.sampler]||{};return t.magFilter=aL[n.magFilter]||en,t.minFilter=aL[n.minFilter]||rn,t.wrapS=lL[n.wrapS]||Vt,t.wrapT=lL[n.wrapT]||Vt,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[a]=l,l}loadImageSource(e,t){const n=this,i=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=i.images[e],s=self.URL||self.webkitURL;let a=o.uri||"",l=!1;if(void 0!==o.bufferView)a=n.getDependency("bufferView",o.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:o.mimeType});return a=s.createObjectURL(t),a}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(a).then((function(e){return new Promise((function(n,i){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new no(e);t.needsUpdate=!0,n(t)}),t.load(qf.resolveURL(e,r.path),o,void 0,i)}))})).then((function(e){var t;return!0===l&&s.revokeObjectURL(a),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),e}));return this.sourceCache[e]=u,u}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then((function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),r.extensions[Mw.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[Mw.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(o);o=r.extensions[Mw.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),r.associations.set(o,t)}}return void 0!==i&&(o.colorSpace=i),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new $h,Ds.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new Hh,Ds.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||r||o){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return Ud}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let o;const s={},a=[];if((r.extensions||{})[Mw.KHR_MATERIALS_UNLIT]){const e=i[Mw.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),a.push(e.extendParams(s,r,t))}else{const n=r.pbrMetallicRoughness||{};if(s.color=new Ms(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;s.color.setRGB(e[0],e[1],e[2],xi),s.opacity=e[3]}void 0!==n.baseColorTexture&&a.push(t.assignTexture(s,"map",n.baseColorTexture,Ei)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(a.push(t.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),a.push(t.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),a.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===r.doubleSided&&(s.side=Ve);const l=r.alphaMode||dL;if(l===mL?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,l===fL&&(s.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==Os&&(a.push(t.assignTexture(s,"normalMap",r.normalTexture)),s.normalScale=new Ir(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;s.normalScale.set(e,e)}if(void 0!==r.occlusionTexture&&o!==Os&&(a.push(t.assignTexture(s,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(s.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==Os){const e=r.emissiveFactor;s.emissive=(new Ms).setRGB(e[0],e[1],e[2],xi)}return void 0!==r.emissiveTexture&&o!==Os&&a.push(t.assignTexture(s,"emissiveMap",r.emissiveTexture,Ei)),Promise.all(a).then((function(){const n=new o(s);return r.name&&(n.name=r.name),vL(n,r),t.associations.set(n,{materials:e}),r.extensions&&gL(i,n,r),n}))}createUniqueName(e){const t=Em.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(e){return n[Mw.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return CL(n,e,t)}))}const o=[];for(let s=0,a=e.length;s<a;s++){const n=e[s],a=SL(n),l=i[a];if(l)o.push(l.promise);else{let e;e=n.extensions&&n.extensions[Mw.KHR_DRACO_MESH_COMPRESSION]?r(n):CL(new aa,n,t),i[a]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],o=r.primitives,s=[];for(let l=0,u=o.length;l<u;l++){const e=void 0===o[l].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new Ud({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:We})),a.DefaultMaterial):this.getDependency("material",o[l].material);s.push(e)}var a;return s.push(t.loadGeometries(o)),Promise.all(s).then((function(n){const s=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let c=0,h=a.length;c<h;c++){const n=a[c],u=o[c];let h;const p=s[c];if(u.mode===oL.TRIANGLES||u.mode===oL.TRIANGLE_STRIP||u.mode===oL.TRIANGLE_FAN||void 0===u.mode)h=!0===r.isSkinnedMesh?new ch(n,p):new _a(n,p),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),u.mode===oL.TRIANGLE_STRIP?h.geometry=xw(h.geometry,yi):u.mode===oL.TRIANGLE_FAN&&(h.geometry=xw(h.geometry,Si));else if(u.mode===oL.LINES)h=new Qh(n,p);else if(u.mode===oL.LINE_STRIP)h=new Kh(n,p);else if(u.mode===oL.LINE_LOOP)h=new Zh(n,p);else{if(u.mode!==oL.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);h=new rp(n,p)}Object.keys(h.geometry.morphAttributes).length>0&&yL(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),vL(h,r),u.extensions&&gL(i,h,u),t.assignFinalMaterial(h),l.push(h)}for(let i=0,r=l.length;i<r;i++)t.associations.set(l[i],{meshes:e,primitives:i});if(1===l.length)return r.extensions&&gL(i,l[0],r),l[0];const u=new Lc;r.extensions&&gL(i,u,r),t.associations.set(u,{meshes:e});for(let e=0,t=l.length;e<t;e++)u.add(l[e]);return u}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new Da(kr.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new ol(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),vL(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),i=e,r=[],o=[];for(let s=0,a=i.length;s<a;s++){const e=i[s];if(e){r.push(e);const t=new Go;null!==n&&t.fromArray(n.array,16*s),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[s])}return new mh(r,o)}))}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],r=i.name?i.name:"animation_"+e,o=[],s=[],a=[],l=[],u=[];for(let c=0,h=i.channels.length;c<h;c++){const e=i.channels[c],t=i.samplers[e.sampler],n=e.target,r=n.node,h=void 0!==i.parameters?i.parameters[t.input]:t.input,p=void 0!==i.parameters?i.parameters[t.output]:t.output;void 0!==n.node&&(o.push(this.getDependency("node",r)),s.push(this.getDependency("accessor",h)),a.push(this.getDependency("accessor",p)),l.push(t),u.push(n))}return Promise.all([Promise.all(o),Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u)]).then((function(e){const t=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=[];for(let r=0,u=t.length;r<u;r++){const e=t[r],u=i[r],c=o[r],h=s[r],p=a[r];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const d=n._createAnimationTracks(e,u,c,h,p);if(d)for(let t=0;t<d.length;t++)l.push(d[t])}return new cf(r,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,i.mesh,e);return void 0!==i.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=i.weights.length;t<n;t++)e.morphTargetInfluences[t]=i.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],i=t._loadNodeShallow(e),r=[],o=n.children||[];for(let a=0,l=o.length;a<l;a++)r.push(t.getDependency("node",o[a]));const s=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([i,Promise.all(r),s]).then((function(e){const t=e[0],n=e[1],i=e[2];null!==i&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(i,LL)}));for(let r=0,o=n.length;r<o;r++)t.add(n[r]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const r=t.nodes[e],o=r.name?i.createUniqueName(r.name):"",s=[],a=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return a&&s.push(a),void 0!==r.camera&&s.push(i.getDependency("camera",r.camera).then((function(e){return i._getNodeRef(i.cameraCache,r.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){s.push(e)})),this.nodeCache[e]=Promise.all(s).then((function(t){let s;if(s=!0===r.isBone?new hh:t.length>1?new Lc:1===t.length?t[0]:new fs,s!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(r.name&&(s.userData.name=r.name,s.name=o),vL(s,r),r.extensions&&gL(n,s,r),void 0!==r.matrix){const e=new Go;e.fromArray(r.matrix),s.applyMatrix4(e)}else void 0!==r.translation&&s.position.fromArray(r.translation),void 0!==r.rotation&&s.quaternion.fromArray(r.rotation),void 0!==r.scale&&s.scale.fromArray(r.scale);return i.associations.has(s)||i.associations.set(s,{}),i.associations.get(s).nodes=e,s})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new Lc;n.name&&(r.name=i.createUniqueName(n.name)),vL(r,n),n.extensions&&gL(t,r,n);const o=n.nodes||[],s=[];for(let a=0,l=o.length;a<l;a++)s.push(i.getDependency("node",o[a]));return Promise.all(s).then((function(e){for(let t=0,n=e.length;t<n;t++)r.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[n,r]of i.associations)(n instanceof Ds||n instanceof no)&&t.set(n,r);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(r),r}))}_createAnimationTracks(e,t,n,i,r){const o=[],s=e.name?e.name:e.uuid,a=[];let l;switch(hL[r.path]===hL.weights?e.traverse((function(e){e.morphTargetInfluences&&a.push(e.name?e.name:e.uuid)})):a.push(s),hL[r.path]){case hL.weights:l=of;break;case hL.rotation:l=af;break;case hL.position:case hL.scale:l=uf;break;default:if(1===n.itemSize)l=of;else l=uf}const u=void 0!==i.interpolation?pL[i.interpolation]:ci,c=this._getArrayFromAccessor(n);for(let h=0,p=a.length;h<p;h++){const e=new l(a[h]+"."+hL[r.path],t.array,c,u);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(e),o.push(e)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=wL(t.constructor),n=new Float32Array(t.length);for(let i=0,r=t.length;i<r;i++)n[i]=t[i]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof af?rL:nL)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function CL(e,t,n){const i=t.attributes,r=[];function o(t,i){return n.getDependency("accessor",t).then((function(t){e.setAttribute(i,t)}))}for(const s in i){const t=cL[s]||s.toLowerCase();t in e.attributes||r.push(o(i[s],t))}if(void 0!==t.indices&&!e.index){const i=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(i)}return Jr.workingColorSpace!==xi&&"COLOR_0"in i&&console.warn('THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "'.concat(Jr.workingColorSpace,'" not supported.')),vL(e,t),function(e,t,n){const i=t.attributes,r=new go;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new po(t[0],t[1],t[2]),new po(o[0],o[1],o[2])),e.normalized){const t=wL(sL[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new po,t=new po;for(let i=0,r=o.length;i<r;i++){const r=o[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],o=i.min,s=i.max;if(void 0!==o&&void 0!==s){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(s[2]))),i.normalized){const e=wL(sL[i.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const s=new Do;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,n){let i=!1,r=!1,o=!1;for(let u=0,c=t.length;u<c;u++){const e=t[u];if(void 0!==e.POSITION&&(i=!0),void 0!==e.NORMAL&&(r=!0),void 0!==e.COLOR_0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(e);const s=[],a=[],l=[];for(let u=0,c=t.length;u<c;u++){const c=t[u];if(i){const t=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;s.push(t)}if(r){const t=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;a.push(t)}if(o){const t=void 0!==c.COLOR_0?n.getDependency("accessor",c.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l)]).then((function(t){const n=t[0],s=t[1],a=t[2];return i&&(e.morphAttributes.position=n),r&&(e.morphAttributes.normal=s),o&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}const _L=__webpack_require__.p+"static/media/speed_sculpt_face_4_cartoon_girl.e553b50112c13db49d8e.glb";function AL(){const e=Iv(Pw,_L);return(0,bw.jsx)(i.Suspense,{children:(0,bw.jsx)("primitive",{object:e.scene})})}function EL(){return(0,bw.jsx)("mesh",{position:[0,-1,0],rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:(0,bw.jsx)("meshLambertMaterial",{attach:"material",color:"lightblue",side:2})})}function xL(){return(0,bw.jsxs)(bw.Fragment,{children:[(0,bw.jsx)("h2",{className:"modelLoading",children:"Model Loading"}),(0,bw.jsxs)("div",{className:"box2",children:[(0,bw.jsxs)(AS,{style:{margin:"auto"},children:[(0,bw.jsx)("directionalLight",{castShadow:!0,shadowBias:.05,shadowMapWidth:10,shadowMapHeight:100}),(0,bw.jsx)(ny,{}),(0,bw.jsx)("ambientLight",{intensity:.8}),(0,bw.jsx)(EL,{}),(0,bw.jsx)(AL,{}),(0,bw.jsx)(Zv,{target:[0,1,0]})]}),(0,bw.jsx)(i.Suspense,{children:(0,bw.jsx)($y,{dataInterpolation:()=>"Loading... please wait"})})]})]})}function PL(e,t){return function(){return e.apply(t,arguments)}}const{toString:TL}=Object.prototype,{getPrototypeOf:ML}=Object,kL=(IL=Object.create(null),e=>{const t=TL.call(e);return IL[t]||(IL[t]=t.slice(8,-1).toLowerCase())});var IL;const DL=e=>(e=e.toLowerCase(),t=>kL(t)===e),OL=e=>t=>typeof t===e,{isArray:BL}=Array,UL=OL("undefined");const NL=DL("ArrayBuffer");const FL=OL("string"),zL=OL("function"),jL=OL("number"),HL=e=>null!==e&&"object"===typeof e,GL=e=>{if("object"!==kL(e))return!1;const t=ML(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},WL=DL("Date"),qL=DL("File"),VL=DL("Blob"),JL=DL("FileList"),KL=DL("URLSearchParams");function XL(e,t){let n,i,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),BL(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let s;for(n=0;n<o;n++)s=i[n],t.call(null,e[s],s,e)}}function YL(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,r=n.length;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const QL="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ZL=e=>!UL(e)&&e!==QL;const $L=(eb="undefined"!==typeof Uint8Array&&ML(Uint8Array),e=>eb&&e instanceof eb);var eb;const tb=DL("HTMLFormElement"),nb=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),ib=DL("RegExp"),rb=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};XL(n,((n,r)=>{let o;!1!==(o=t(n,r,e))&&(i[r]=o||n)})),Object.defineProperties(e,i)},ob="abcdefghijklmnopqrstuvwxyz",sb="0123456789",ab={DIGIT:sb,ALPHA:ob,ALPHA_DIGIT:ob+ob.toUpperCase()+sb};const lb=DL("AsyncFunction"),ub={isArray:BL,isArrayBuffer:NL,isBuffer:function(e){return null!==e&&!UL(e)&&null!==e.constructor&&!UL(e.constructor)&&zL(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||zL(e.append)&&("formdata"===(t=kL(e))||"object"===t&&zL(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&NL(e.buffer),t},isString:FL,isNumber:jL,isBoolean:e=>!0===e||!1===e,isObject:HL,isPlainObject:GL,isUndefined:UL,isDate:WL,isFile:qL,isBlob:VL,isRegExp:ib,isFunction:zL,isStream:e=>HL(e)&&zL(e.pipe),isURLSearchParams:KL,isTypedArray:$L,isFileList:JL,forEach:XL,merge:function e(){const{caseless:t}=ZL(this)&&this||{},n={},i=(i,r)=>{const o=t&&YL(n,r)||r;GL(n[o])&&GL(i)?n[o]=e(n[o],i):GL(i)?n[o]=e({},i):BL(i)?n[o]=i.slice():n[o]=i};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&XL(arguments[r],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return XL(t,((t,i)=>{n&&zL(t)?e[i]=PL(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let r,o,s;const a={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)s=r[o],i&&!i(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&ML(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:kL,kindOfTest:DL,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(BL(e))return e;let t=e.length;if(!jL(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:tb,hasOwnProperty:nb,hasOwnProp:nb,reduceDescriptors:rb,freezeMethods:e=>{rb(e,((t,n)=>{if(zL(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];zL(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return BL(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:YL,global:QL,isContextDefined:ZL,ALPHABET:ab,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ab.ALPHA_DIGIT,n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n},isSpecCompliantForm:function(e){return!!(e&&zL(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(HL(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const r=BL(e)?[]:{};return XL(e,((e,t)=>{const o=n(e,i+1);!UL(o)&&(r[t]=o)})),t[i]=void 0,r}}return e};return n(e,0)},isAsyncFn:lb,isThenable:e=>e&&(HL(e)||zL(e))&&zL(e.then)&&zL(e.catch)};function cb(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}ub.inherits(cb,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ub.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const hb=cb.prototype,pb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{pb[e]={value:e}})),Object.defineProperties(cb,pb),Object.defineProperty(hb,"isAxiosError",{value:!0}),cb.from=(e,t,n,i,r,o)=>{const s=Object.create(hb);return ub.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),cb.call(s,e.message,t,n,i,r),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const db=cb;function fb(e){return ub.isPlainObject(e)||ub.isArray(e)}function mb(e){return ub.endsWith(e,"[]")?e.slice(0,-2):e}function gb(e,t,n){return e?e.concat(t).map((function(e,t){return e=mb(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const vb=ub.toFlatObject(ub,{},null,(function(e){return/^is[A-Z]/.test(e)}));const yb=function(e,t,n){if(!ub.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=ub.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ub.isUndefined(t[e])}))).metaTokens,r=n.visitor||u,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&ub.isSpecCompliantForm(t);if(!ub.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ub.isDate(e))return e.toISOString();if(!a&&ub.isBlob(e))throw new db("Blob is not supported. Use a Buffer instead.");return ub.isArrayBuffer(e)||ub.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,r){let a=e;if(e&&!r&&"object"===typeof e)if(ub.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(ub.isArray(e)&&function(e){return ub.isArray(e)&&!e.some(fb)}(e)||(ub.isFileList(e)||ub.endsWith(n,"[]"))&&(a=ub.toArray(e)))return n=mb(n),a.forEach((function(e,i){!ub.isUndefined(e)&&null!==e&&t.append(!0===s?gb([n],i,o):null===s?n:n+"[]",l(e))})),!1;return!!fb(e)||(t.append(gb(r,n,o),l(e)),!1)}const c=[],h=Object.assign(vb,{defaultVisitor:u,convertValue:l,isVisitable:fb});if(!ub.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!ub.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+i.join("."));c.push(n),ub.forEach(n,(function(n,o){!0===(!(ub.isUndefined(n)||null===n)&&r.call(t,n,ub.isString(o)?o.trim():o,i,h))&&e(n,i?i.concat(o):[o])})),c.pop()}}(e),t};function Sb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Rb(e,t){this._pairs=[],e&&yb(e,this,t)}const wb=Rb.prototype;wb.append=function(e,t){this._pairs.push([e,t])},wb.toString=function(e){const t=e?function(t){return e.call(this,t,Sb)}:Sb;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Lb=Rb;function bb(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Cb(e,t,n){if(!t)return e;const i=n&&n.encode||bb,r=n&&n.serialize;let o;if(o=r?r(t,n):ub.isURLSearchParams(t)?t.toString():new Lb(t,n).toString(i),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const _b=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ub.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Ab={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Eb={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Lb,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},xb="undefined"!==typeof window&&"undefined"!==typeof document,Pb=(Tb="undefined"!==typeof navigator&&navigator.product,xb&&["ReactNative","NativeScript","NS"].indexOf(Tb)<0);var Tb;const Mb="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,kb={...t,...Eb};const Ib=function(e){function t(e,n,i,r){let o=e[r++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=r>=e.length;if(o=!o&&ub.isArray(i)?i.length:o,a)return ub.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!s;i[o]&&ub.isObject(i[o])||(i[o]=[]);return t(e,n,i[o],r)&&ub.isArray(i[o])&&(i[o]=function(e){const t={},n=Object.keys(e);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],t[o]=e[o];return t}(i[o])),!s}if(ub.isFormData(e)&&ub.isFunction(e.entries)){const n={};return ub.forEachEntry(e,((e,i)=>{t(function(e){return ub.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const Db={transitional:Ab,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=ub.isObject(e);r&&ub.isHTMLForm(e)&&(e=new FormData(e));if(ub.isFormData(e))return i&&i?JSON.stringify(Ib(e)):e;if(ub.isArrayBuffer(e)||ub.isBuffer(e)||ub.isStream(e)||ub.isFile(e)||ub.isBlob(e))return e;if(ub.isArrayBufferView(e))return e.buffer;if(ub.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return yb(e,new kb.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return kb.isNode&&ub.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=ub.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return yb(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(ub.isString(e))try{return(t||JSON.parse)(e),ub.trim(e)}catch(kC){if("SyntaxError"!==kC.name)throw kC}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Db.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(e&&ub.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(kC){if(n){if("SyntaxError"===kC.name)throw db.from(kC,db.ERR_BAD_RESPONSE,this,null,this.response);throw kC}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kb.classes.FormData,Blob:kb.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ub.forEach(["delete","get","head","post","put","patch"],(e=>{Db.headers[e]={}}));const Ob=Db,Bb=ub.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ub=Symbol("internals");function Nb(e){return e&&String(e).trim().toLowerCase()}function Fb(e){return!1===e||null==e?e:ub.isArray(e)?e.map(Fb):String(e)}function zb(e,t,n,i,r){return ub.isFunction(i)?i.call(this,t,n):(r&&(t=n),ub.isString(t)?ub.isString(i)?-1!==t.indexOf(i):ub.isRegExp(i)?i.test(t):void 0:void 0)}class jb{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=Nb(t);if(!r)throw new Error("header name must be a non-empty string");const o=ub.findKey(i,r);(!o||void 0===i[o]||!0===n||void 0===n&&!1!==i[o])&&(i[o||t]=Fb(e))}const o=(e,t)=>ub.forEach(e,((e,n)=>r(e,n,t)));return ub.isPlainObject(e)||e instanceof this.constructor?o(e,t):ub.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?o((e=>{const t={};let n,i,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),i=e.substring(r+1).trim(),!n||t[n]&&Bb[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t):null!=e&&r(t,e,n),this}get(e,t){if(e=Nb(e)){const n=ub.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(ub.isFunction(t))return t.call(this,e,n);if(ub.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Nb(e)){const n=ub.findKey(this,e);return!(!n||void 0===this[n]||t&&!zb(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=Nb(e)){const r=ub.findKey(n,e);!r||t&&!zb(0,n[r],r,t)||(delete n[r],i=!0)}}return ub.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];e&&!zb(0,this[r],r,e,!0)||(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return ub.forEach(this,((i,r)=>{const o=ub.findKey(n,r);if(o)return t[o]=Fb(i),void delete t[r];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();s!==r&&delete t[r],t[s]=Fb(i),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return ub.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&ub.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Ub]=this[Ub]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=Nb(e);t[i]||(!function(e,t){const n=ub.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,r){return this[i].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[i]=!0)}return ub.isArray(e)?e.forEach(i):i(e),this}}jb.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ub.reduceDescriptors(jb.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),ub.freezeMethods(jb);const Hb=jb;function Gb(e,t){const n=this||Ob,i=t||n,r=Hb.from(i.headers);let o=i.data;return ub.forEach(e,(function(e){o=e.call(n,o,r.normalize(),t?t.status:void 0)})),r.normalize(),o}function Wb(e){return!(!e||!e.__CANCEL__)}function qb(e,t,n){db.call(this,null==e?"canceled":e,db.ERR_CANCELED,t,n),this.name="CanceledError"}ub.inherits(qb,db,{__CANCEL__:!0});const Vb=qb;const Jb=kb.hasStandardBrowserEnv?{write(e,t,n,i,r,o){const s=[e+"="+encodeURIComponent(t)];ub.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),ub.isString(i)&&s.push("path="+i),ub.isString(r)&&s.push("domain="+r),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Kb(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Xb=kb.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(n){let i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=ub.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const Yb=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),u=i[s];r||(r=l),n[o]=a,i[o]=l;let c=s,h=0;for(;c!==o;)h+=n[c++],c%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),l-r<t)return;const p=u&&l-u;return p?Math.round(1e3*h/p):void 0}};function Qb(e,t){let n=0;const i=Yb(50,250);return r=>{const o=r.loaded,s=r.lengthComputable?r.total:void 0,a=o-n,l=i(a);n=o;const u={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:r};u[t?"download":"upload"]=!0,e(u)}}const Zb="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let i=e.data;const r=Hb.from(e.headers).normalize();let o,s,{responseType:a,withXSRFToken:l}=e;function u(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}if(ub.isFormData(i))if(kb.hasStandardBrowserEnv||kb.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if(!1!==(s=r.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];r.setContentType([e||"multipart/form-data",...t].join("; "))}let c=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+n))}const h=Kb(e.baseURL,e.url);function p(){if(!c)return;const i=Hb.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new db("Request failed with status code "+n.status,[db.ERR_BAD_REQUEST,db.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:a&&"text"!==a&&"json"!==a?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:i,config:e,request:c}),c=null}if(c.open(e.method.toUpperCase(),Cb(h,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=p:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(p)},c.onabort=function(){c&&(n(new db("Request aborted",db.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new db("Network Error",db.ERR_NETWORK,e,c)),c=null},c.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const i=e.transitional||Ab;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new db(t,i.clarifyTimeoutError?db.ETIMEDOUT:db.ECONNABORTED,e,c)),c=null},kb.hasStandardBrowserEnv&&(l&&ub.isFunction(l)&&(l=l(e)),l||!1!==l&&Xb(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&Jb.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===i&&r.setContentType(null),"setRequestHeader"in c&&ub.forEach(r.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),ub.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),a&&"json"!==a&&(c.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&c.addEventListener("progress",Qb(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Qb(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=t=>{c&&(n(!t||t.type?new Vb(null,e,c):t),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const d=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);d&&-1===kb.protocols.indexOf(d)?n(new db("Unsupported protocol "+d+":",db.ERR_BAD_REQUEST,e)):c.send(i||null)}))},$b={http:null,xhr:Zb};ub.forEach($b,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(kC){}Object.defineProperty(e,"adapterName",{value:t})}}));const eC=e=>"- ".concat(e),tC=e=>ub.isFunction(e)||null===e||!1===e,nC=e=>{e=ub.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let o=0;o<t;o++){let t;if(n=e[o],i=n,!tC(n)&&(i=$b[(t=String(n)).toLowerCase()],void 0===i))throw new db("Unknown adapter '".concat(t,"'"));if(i)break;r[t||"#"+o]=i}if(!i){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(eC).join("\n"):" "+eC(e[0]):"as no adapter specified";throw new db("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function iC(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vb(null,e)}function rC(e){iC(e),e.headers=Hb.from(e.headers),e.data=Gb.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return nC(e.adapter||Ob.adapter)(e).then((function(t){return iC(e),t.data=Gb.call(e,e.transformResponse,t),t.headers=Hb.from(t.headers),t}),(function(t){return Wb(t)||(iC(e),t&&t.response&&(t.response.data=Gb.call(e,e.transformResponse,t.response),t.response.headers=Hb.from(t.response.headers))),Promise.reject(t)}))}const oC=e=>e instanceof Hb?e.toJSON():e;function sC(e,t){t=t||{};const n={};function i(e,t,n){return ub.isPlainObject(e)&&ub.isPlainObject(t)?ub.merge.call({caseless:n},e,t):ub.isPlainObject(t)?ub.merge({},t):ub.isArray(t)?t.slice():t}function r(e,t,n){return ub.isUndefined(t)?ub.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function o(e,t){if(!ub.isUndefined(t))return i(void 0,t)}function s(e,t){return ub.isUndefined(t)?ub.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,r,o){return o in t?i(n,r):o in e?i(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>r(oC(e),oC(t),!0)};return ub.forEach(Object.keys(Object.assign({},e,t)),(function(i){const o=l[i]||r,s=o(e[i],t[i],i);ub.isUndefined(s)&&o!==a||(n[i]=s)})),n}const aC="1.6.5",lC={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{lC[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const uC={};lC.transitional=function(e,t,n){function i(e,t){return"[Axios v1.6.5] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,o)=>{if(!1===e)throw new db(i(r," has been removed"+(t?" in "+t:"")),db.ERR_DEPRECATED);return t&&!uC[r]&&(uC[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}};const cC={assertOptions:function(e,t,n){if("object"!==typeof e)throw new db("options must be an object",db.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const o=i[r],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new db("option "+o+" must be "+n,db.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new db("Unknown option "+o,db.ERR_BAD_OPTION)}},validators:lC},hC=cC.validators;class pC{constructor(e){this.defaults=e,this.interceptors={request:new _b,response:new _b}}request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=sC(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&cC.assertOptions(n,{silentJSONParsing:hC.transitional(hC.boolean),forcedJSONParsing:hC.transitional(hC.boolean),clarifyTimeoutError:hC.transitional(hC.boolean)},!1),null!=i&&(ub.isFunction(i)?t.paramsSerializer={serialize:i}:cC.assertOptions(i,{encode:hC.function,serialize:hC.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&ub.merge(r.common,r[t.method]);r&&ub.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=Hb.concat(o,r);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,h=0;if(!a){const e=[rC.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),c=e.length,u=Promise.resolve(t);h<c;)u=u.then(e[h++],e[h++]);return u}c=s.length;let p=t;for(h=0;h<c;){const e=s[h++],t=s[h++];try{p=e(p)}catch(d){t.call(this,d);break}}try{u=rC.call(this,p)}catch(d){return Promise.reject(d)}for(h=0,c=l.length;h<c;)u=u.then(l[h++],l[h++]);return u}getUri(e){return Cb(Kb((e=sC(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}ub.forEach(["delete","get","head","options"],(function(e){pC.prototype[e]=function(t,n){return this.request(sC(n||{},{method:e,url:t,data:(n||{}).data}))}})),ub.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,r){return this.request(sC(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}pC.prototype[e]=t(),pC.prototype[e+"Form"]=t(!0)}));const dC=pC;class fC{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,r){n.reason||(n.reason=new Vb(e,i,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new fC((function(t){e=t})),cancel:e}}}const mC=fC;const gC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gC).forEach((e=>{let[t,n]=e;gC[n]=t}));const vC=gC;const yC=function e(t){const n=new dC(t),i=PL(dC.prototype.request,n);return ub.extend(i,dC.prototype,n,{allOwnKeys:!0}),ub.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(sC(t,n))},i}(Ob);yC.Axios=dC,yC.CanceledError=Vb,yC.CancelToken=mC,yC.isCancel=Wb,yC.VERSION=aC,yC.toFormData=yb,yC.AxiosError=db,yC.Cancel=yC.CanceledError,yC.all=function(e){return Promise.all(e)},yC.spread=function(e){return function(t){return e.apply(null,t)}},yC.isAxiosError=function(e){return ub.isObject(e)&&!0===e.isAxiosError},yC.mergeConfig=sC,yC.AxiosHeaders=Hb,yC.formToJSON=e=>Ib(ub.isHTMLForm(e)?new FormData(e):e),yC.getAdapter=nC,yC.HttpStatusCode=vC,yC.default=yC;const SC=yC;var RC=__webpack_require__(7618),wC=__webpack_require__.n(RC);const LC=__webpack_require__.p+"static/media/model.1a4c7671d890c28c097a.glb",bC=JSON.parse('{"blendData":[{"time":0,"blendshapes":{"eyeBlinkLeft":0.171,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.038,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.171,"eyeLookDownRight":0.164,"eyeLookInRight":0.074,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.079,"jawLeft":0.028,"jawRight":0,"jawOpen":0.256,"mouthClose":0.164,"mouthFunnel":0.186,"mouthPucker":0.108,"mouthLeft":0.011,"mouthRight":0.004,"mouthSmileLeft":0.013,"mouthSmileRight":0.023,"mouthFrownLeft":0.033,"mouthFrownRight":0.017,"mouthDimpleLeft":0.056,"mouthDimpleRight":0.051,"mouthStretchLeft":0.123,"mouthStretchRight":0.099,"mouthRollLower":0.064,"mouthRollUpper":0.056,"mouthShrugLower":0.018,"mouthShrugUpper":0.1,"mouthPressLeft":0.023,"mouthPressRight":0.024,"mouthLowerDownLeft":0.286,"mouthLowerDownRight":0.283,"mouthUpperUpLeft":0.02,"mouthUpperUpRight":0.02,"browDownLeft":0.014,"browDownRight":0.014,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.021,"cheekSquintLeft":0.054,"cheekSquintRight":0.058,"noseSneerLeft":0.038,"noseSneerRight":0.039,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.016666666666666666,"blendshapes":{"eyeBlinkLeft":0.171,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.039,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.171,"eyeLookDownRight":0.164,"eyeLookInRight":0.074,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.076,"jawLeft":0.026,"jawRight":0,"jawOpen":0.224,"mouthClose":0.13,"mouthFunnel":0.161,"mouthPucker":0.08,"mouthLeft":0.01,"mouthRight":0.004,"mouthSmileLeft":0.022,"mouthSmileRight":0.032,"mouthFrownLeft":0.024,"mouthFrownRight":0.015,"mouthDimpleLeft":0.052,"mouthDimpleRight":0.047,"mouthStretchLeft":0.113,"mouthStretchRight":0.091,"mouthRollLower":0.056,"mouthRollUpper":0.051,"mouthShrugLower":0.017,"mouthShrugUpper":0.092,"mouthPressLeft":0.021,"mouthPressRight":0.022,"mouthLowerDownLeft":0.274,"mouthLowerDownRight":0.272,"mouthUpperUpLeft":0.018,"mouthUpperUpRight":0.019,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.019,"cheekSquintLeft":0.05,"cheekSquintRight":0.054,"noseSneerLeft":0.035,"noseSneerRight":0.036,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.03333333333333333,"blendshapes":{"eyeBlinkLeft":0.171,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.039,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.171,"eyeLookDownRight":0.164,"eyeLookInRight":0.073,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.08,"jawLeft":0.024,"jawRight":0,"jawOpen":0.198,"mouthClose":0.097,"mouthFunnel":0.122,"mouthPucker":0.059,"mouthLeft":0.009,"mouthRight":0.003,"mouthSmileLeft":0.049,"mouthSmileRight":0.06,"mouthFrownLeft":0.008,"mouthFrownRight":0.014,"mouthDimpleLeft":0.048,"mouthDimpleRight":0.044,"mouthStretchLeft":0.104,"mouthStretchRight":0.084,"mouthRollLower":0.053,"mouthRollUpper":0.055,"mouthShrugLower":0.016,"mouthShrugUpper":0.085,"mouthPressLeft":0.019,"mouthPressRight":0.02,"mouthLowerDownLeft":0.278,"mouthLowerDownRight":0.276,"mouthUpperUpLeft":0.017,"mouthUpperUpRight":0.017,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.018,"cheekSquintLeft":0.046,"cheekSquintRight":0.05,"noseSneerLeft":0.032,"noseSneerRight":0.033,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.05,"blendshapes":{"eyeBlinkLeft":0.171,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.04,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.171,"eyeLookDownRight":0.164,"eyeLookInRight":0.072,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.084,"jawLeft":0.022,"jawRight":0,"jawOpen":0.183,"mouthClose":0.075,"mouthFunnel":0.095,"mouthPucker":0.048,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.066,"mouthSmileRight":0.077,"mouthFrownLeft":-0.001,"mouthFrownRight":0.013,"mouthDimpleLeft":0.045,"mouthDimpleRight":0.04,"mouthStretchLeft":0.097,"mouthStretchRight":0.078,"mouthRollLower":0.05,"mouthRollUpper":0.058,"mouthShrugLower":0.014,"mouthShrugUpper":0.078,"mouthPressLeft":0.018,"mouthPressRight":0.019,"mouthLowerDownLeft":0.28,"mouthLowerDownRight":0.278,"mouthUpperUpLeft":0.016,"mouthUpperUpRight":0.016,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.017,"cheekSquintLeft":0.042,"cheekSquintRight":0.046,"noseSneerLeft":0.03,"noseSneerRight":0.031,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.06666666666666667,"blendshapes":{"eyeBlinkLeft":0.171,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.04,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.171,"eyeLookDownRight":0.164,"eyeLookInRight":0.072,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.092,"jawLeft":0.022,"jawRight":0,"jawOpen":0.196,"mouthClose":0.072,"mouthFunnel":0.096,"mouthPucker":0.045,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.069,"mouthSmileRight":0.081,"mouthFrownLeft":0.002,"mouthFrownRight":0.013,"mouthDimpleLeft":0.044,"mouthDimpleRight":0.04,"mouthStretchLeft":0.095,"mouthStretchRight":0.077,"mouthRollLower":0.048,"mouthRollUpper":0.062,"mouthShrugLower":0.014,"mouthShrugUpper":0.077,"mouthPressLeft":0.018,"mouthPressRight":0.019,"mouthLowerDownLeft":0.295,"mouthLowerDownRight":0.293,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.016,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.042,"cheekSquintRight":0.045,"noseSneerLeft":0.03,"noseSneerRight":0.03,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.08333333333333333,"blendshapes":{"eyeBlinkLeft":0.171,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.041,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.171,"eyeLookDownRight":0.164,"eyeLookInRight":0.072,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.108,"jawLeft":0.023,"jawRight":0,"jawOpen":0.236,"mouthClose":0.085,"mouthFunnel":0.12,"mouthPucker":0.047,"mouthLeft":0.009,"mouthRight":0.003,"mouthSmileLeft":0.068,"mouthSmileRight":0.081,"mouthFrownLeft":0.013,"mouthFrownRight":0.014,"mouthDimpleLeft":0.047,"mouthDimpleRight":0.043,"mouthStretchLeft":0.103,"mouthStretchRight":0.083,"mouthRollLower":0.05,"mouthRollUpper":0.071,"mouthShrugLower":0.015,"mouthShrugUpper":0.083,"mouthPressLeft":0.019,"mouthPressRight":0.02,"mouthLowerDownLeft":0.335,"mouthLowerDownRight":0.332,"mouthUpperUpLeft":0.016,"mouthUpperUpRight":0.017,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.018,"cheekSquintLeft":0.045,"cheekSquintRight":0.049,"noseSneerLeft":0.032,"noseSneerRight":0.033,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.09999999999999999,"blendshapes":{"eyeBlinkLeft":0.171,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.04,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.171,"eyeLookDownRight":0.164,"eyeLookInRight":0.072,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.124,"jawLeft":0.025,"jawRight":0,"jawOpen":0.275,"mouthClose":0.096,"mouthFunnel":0.139,"mouthPucker":0.05,"mouthLeft":0.01,"mouthRight":0.004,"mouthSmileLeft":0.072,"mouthSmileRight":0.086,"mouthFrownLeft":0.02,"mouthFrownRight":0.015,"mouthDimpleLeft":0.051,"mouthDimpleRight":0.046,"mouthStretchLeft":0.111,"mouthStretchRight":0.09,"mouthRollLower":0.052,"mouthRollUpper":0.08,"mouthShrugLower":0.017,"mouthShrugUpper":0.09,"mouthPressLeft":0.021,"mouthPressRight":0.022,"mouthLowerDownLeft":0.38,"mouthLowerDownRight":0.376,"mouthUpperUpLeft":0.018,"mouthUpperUpRight":0.018,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.019,"cheekSquintLeft":0.049,"cheekSquintRight":0.053,"noseSneerLeft":0.035,"noseSneerRight":0.035,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.11666666666666665,"blendshapes":{"eyeBlinkLeft":0.171,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.04,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.171,"eyeLookDownRight":0.164,"eyeLookInRight":0.072,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.137,"jawLeft":0.028,"jawRight":0,"jawOpen":0.302,"mouthClose":0.101,"mouthFunnel":0.15,"mouthPucker":0.051,"mouthLeft":0.011,"mouthRight":0.004,"mouthSmileLeft":0.082,"mouthSmileRight":0.099,"mouthFrownLeft":0.021,"mouthFrownRight":0.016,"mouthDimpleLeft":0.056,"mouthDimpleRight":0.05,"mouthStretchLeft":0.121,"mouthStretchRight":0.097,"mouthRollLower":0.055,"mouthRollUpper":0.088,"mouthShrugLower":0.018,"mouthShrugUpper":0.098,"mouthPressLeft":0.022,"mouthPressRight":0.024,"mouthLowerDownLeft":0.422,"mouthLowerDownRight":0.416,"mouthUpperUpLeft":0.019,"mouthUpperUpRight":0.02,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.021,"cheekSquintLeft":0.053,"cheekSquintRight":0.058,"noseSneerLeft":0.038,"noseSneerRight":0.038,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.13333333333333333,"blendshapes":{"eyeBlinkLeft":0.17,"eyeLookDownLeft":0.163,"eyeLookInLeft":0.039,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.17,"eyeLookDownRight":0.163,"eyeLookInRight":0.073,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.146,"jawLeft":0.03,"jawRight":0,"jawOpen":0.346,"mouthClose":0.142,"mouthFunnel":0.17,"mouthPucker":0.067,"mouthLeft":0.012,"mouthRight":0.004,"mouthSmileLeft":0.073,"mouthSmileRight":0.092,"mouthFrownLeft":0.029,"mouthFrownRight":0.018,"mouthDimpleLeft":0.061,"mouthDimpleRight":0.055,"mouthStretchLeft":0.133,"mouthStretchRight":0.107,"mouthRollLower":0.068,"mouthRollUpper":0.101,"mouthShrugLower":0.02,"mouthShrugUpper":0.107,"mouthPressLeft":0.025,"mouthPressRight":0.026,"mouthLowerDownLeft":0.441,"mouthLowerDownRight":0.429,"mouthUpperUpLeft":0.021,"mouthUpperUpRight":0.022,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.023,"cheekSquintLeft":0.058,"cheekSquintRight":0.063,"noseSneerLeft":0.041,"noseSneerRight":0.042,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.15,"blendshapes":{"eyeBlinkLeft":0.17,"eyeLookDownLeft":0.163,"eyeLookInLeft":0.039,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.095,"eyeWideLeft":0,"eyeBlinkRight":0.17,"eyeLookDownRight":0.163,"eyeLookInRight":0.073,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.095,"eyeWideRight":0,"jawForward":0.161,"jawLeft":0.033,"jawRight":0,"jawOpen":0.384,"mouthClose":0.169,"mouthFunnel":0.178,"mouthPucker":0.078,"mouthLeft":0.013,"mouthRight":0.005,"mouthSmileLeft":0.082,"mouthSmileRight":0.104,"mouthFrownLeft":0.03,"mouthFrownRight":0.019,"mouthDimpleLeft":0.067,"mouthDimpleRight":0.06,"mouthStretchLeft":0.145,"mouthStretchRight":0.116,"mouthRollLower":0.079,"mouthRollUpper":0.115,"mouthShrugLower":0.022,"mouthShrugUpper":0.117,"mouthPressLeft":0.027,"mouthPressRight":0.028,"mouthLowerDownLeft":0.478,"mouthLowerDownRight":0.462,"mouthUpperUpLeft":0.023,"mouthUpperUpRight":0.024,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.025,"cheekSquintLeft":0.063,"cheekSquintRight":0.069,"noseSneerLeft":0.045,"noseSneerRight":0.046,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.16666666666666666,"blendshapes":{"eyeBlinkLeft":0.17,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.038,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.094,"eyeWideLeft":0,"eyeBlinkRight":0.17,"eyeLookDownRight":0.163,"eyeLookInRight":0.074,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.094,"eyeWideRight":0,"jawForward":0.17,"jawLeft":0.036,"jawRight":0,"jawOpen":0.415,"mouthClose":0.198,"mouthFunnel":0.18,"mouthPucker":0.09,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.091,"mouthSmileRight":0.116,"mouthFrownLeft":0.028,"mouthFrownRight":0.021,"mouthDimpleLeft":0.072,"mouthDimpleRight":0.065,"mouthStretchLeft":0.156,"mouthStretchRight":0.125,"mouthRollLower":0.09,"mouthRollUpper":0.127,"mouthShrugLower":0.023,"mouthShrugUpper":0.126,"mouthPressLeft":0.029,"mouthPressRight":0.03,"mouthLowerDownLeft":0.503,"mouthLowerDownRight":0.484,"mouthUpperUpLeft":0.025,"mouthUpperUpRight":0.026,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.027,"cheekSquintLeft":0.068,"cheekSquintRight":0.074,"noseSneerLeft":0.048,"noseSneerRight":0.049,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.18333333333333332,"blendshapes":{"eyeBlinkLeft":0.17,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.038,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.094,"eyeWideLeft":0,"eyeBlinkRight":0.17,"eyeLookDownRight":0.164,"eyeLookInRight":0.074,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.094,"eyeWideRight":0,"jawForward":0.164,"jawLeft":0.037,"jawRight":0,"jawOpen":0.43,"mouthClose":0.238,"mouthFunnel":0.187,"mouthPucker":0.108,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.083,"mouthSmileRight":0.109,"mouthFrownLeft":0.028,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.102,"mouthRollUpper":0.132,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.489,"mouthLowerDownRight":0.467,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.19999999999999998,"blendshapes":{"eyeBlinkLeft":0.17,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.038,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.094,"eyeWideLeft":0,"eyeBlinkRight":0.17,"eyeLookDownRight":0.164,"eyeLookInRight":0.074,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.094,"eyeWideRight":0,"jawForward":0.152,"jawLeft":0.037,"jawRight":0,"jawOpen":0.396,"mouthClose":0.213,"mouthFunnel":0.181,"mouthPucker":0.1,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.088,"mouthSmileRight":0.114,"mouthFrownLeft":0.018,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.095,"mouthRollUpper":0.119,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.48,"mouthLowerDownRight":0.462,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.21666666666666665,"blendshapes":{"eyeBlinkLeft":0.17,"eyeLookDownLeft":0.165,"eyeLookInLeft":0.039,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.094,"eyeWideLeft":0,"eyeBlinkRight":0.17,"eyeLookDownRight":0.165,"eyeLookInRight":0.074,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.094,"eyeWideRight":0,"jawForward":0.144,"jawLeft":0.037,"jawRight":0,"jawOpen":0.393,"mouthClose":0.221,"mouthFunnel":0.198,"mouthPucker":0.108,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.064,"mouthSmileRight":0.086,"mouthFrownLeft":0.027,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.096,"mouthRollUpper":0.112,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.457,"mouthLowerDownRight":0.44,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.2333333333333333,"blendshapes":{"eyeBlinkLeft":0.17,"eyeLookDownLeft":0.165,"eyeLookInLeft":0.039,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.094,"eyeWideLeft":0,"eyeBlinkRight":0.17,"eyeLookDownRight":0.165,"eyeLookInRight":0.073,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.094,"eyeWideRight":0,"jawForward":0.143,"jawLeft":0.037,"jawRight":0,"jawOpen":0.398,"mouthClose":0.218,"mouthFunnel":0.219,"mouthPucker":0.104,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.053,"mouthSmileRight":0.073,"mouthFrownLeft":0.034,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.092,"mouthRollUpper":0.109,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.459,"mouthLowerDownRight":0.441,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.24999999999999997,"blendshapes":{"eyeBlinkLeft":0.169,"eyeLookDownLeft":0.165,"eyeLookInLeft":0.04,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.093,"eyeWideLeft":0,"eyeBlinkRight":0.169,"eyeLookDownRight":0.165,"eyeLookInRight":0.073,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.093,"eyeWideRight":0,"jawForward":0.141,"jawLeft":0.037,"jawRight":0,"jawOpen":0.411,"mouthClose":0.227,"mouthFunnel":0.243,"mouthPucker":0.104,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.039,"mouthSmileRight":0.059,"mouthFrownLeft":0.042,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.091,"mouthRollUpper":0.109,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.457,"mouthLowerDownRight":0.437,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.26666666666666666,"blendshapes":{"eyeBlinkLeft":0.169,"eyeLookDownLeft":0.165,"eyeLookInLeft":0.04,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.093,"eyeWideLeft":0,"eyeBlinkRight":0.169,"eyeLookDownRight":0.164,"eyeLookInRight":0.072,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.093,"eyeWideRight":0,"jawForward":0.139,"jawLeft":0.037,"jawRight":0,"jawOpen":0.43,"mouthClose":0.254,"mouthFunnel":0.259,"mouthPucker":0.109,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.023,"mouthSmileRight":0.044,"mouthFrownLeft":0.05,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.096,"mouthRollUpper":0.115,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.445,"mouthLowerDownRight":0.423,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.2833333333333333,"blendshapes":{"eyeBlinkLeft":0.169,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.041,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.093,"eyeWideLeft":0,"eyeBlinkRight":0.169,"eyeLookDownRight":0.164,"eyeLookInRight":0.071,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.093,"eyeWideRight":0,"jawForward":0.142,"jawLeft":0.037,"jawRight":0,"jawOpen":0.455,"mouthClose":0.299,"mouthFunnel":0.26,"mouthPucker":0.126,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.01,"mouthSmileRight":0.033,"mouthFrownLeft":0.056,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.11,"mouthRollUpper":0.13,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.426,"mouthLowerDownRight":0.402,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.3,"blendshapes":{"eyeBlinkLeft":0.167,"eyeLookDownLeft":0.163,"eyeLookInLeft":0.042,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.093,"eyeWideLeft":0,"eyeBlinkRight":0.167,"eyeLookDownRight":0.163,"eyeLookInRight":0.071,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.093,"eyeWideRight":0,"jawForward":0.146,"jawLeft":0.037,"jawRight":0,"jawOpen":0.495,"mouthClose":0.377,"mouthFunnel":0.254,"mouthPucker":0.181,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":-0.007,"mouthSmileRight":0.017,"mouthFrownLeft":0.064,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.132,"mouthRollUpper":0.151,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.393,"mouthLowerDownRight":0.373,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.31666666666666665,"blendshapes":{"eyeBlinkLeft":0.162,"eyeLookDownLeft":0.162,"eyeLookInLeft":0.042,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.092,"eyeWideLeft":0,"eyeBlinkRight":0.162,"eyeLookDownRight":0.162,"eyeLookInRight":0.071,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.092,"eyeWideRight":0,"jawForward":0.157,"jawLeft":0.037,"jawRight":0,"jawOpen":0.541,"mouthClose":0.465,"mouthFunnel":0.227,"mouthPucker":0.252,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.011,"mouthSmileRight":0.014,"mouthFrownLeft":0.063,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.16,"mouthRollUpper":0.181,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.372,"mouthLowerDownRight":0.355,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.015,"browDownRight":0.015,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.3333333333333333,"blendshapes":{"eyeBlinkLeft":0.156,"eyeLookDownLeft":0.16,"eyeLookInLeft":0.041,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.092,"eyeWideLeft":0,"eyeBlinkRight":0.156,"eyeLookDownRight":0.16,"eyeLookInRight":0.071,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.092,"eyeWideRight":0,"jawForward":0.16,"jawLeft":0.037,"jawRight":0,"jawOpen":0.576,"mouthClose":0.541,"mouthFunnel":0.206,"mouthPucker":0.328,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.015,"mouthSmileRight":0.01,"mouthFrownLeft":0.063,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.182,"mouthRollUpper":0.2,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.344,"mouthLowerDownRight":0.33,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.014,"browDownRight":0.014,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.35,"blendshapes":{"eyeBlinkLeft":0.153,"eyeLookDownLeft":0.16,"eyeLookInLeft":0.041,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.091,"eyeWideLeft":0,"eyeBlinkRight":0.153,"eyeLookDownRight":0.159,"eyeLookInRight":0.071,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.091,"eyeWideRight":0,"jawForward":0.167,"jawLeft":0.037,"jawRight":0,"jawOpen":0.585,"mouthClose":0.578,"mouthFunnel":0.163,"mouthPucker":0.368,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.002,"mouthSmileRight":0.024,"mouthFrownLeft":0.046,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.203,"mouthRollUpper":0.222,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.332,"mouthLowerDownRight":0.319,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.013,"browDownRight":0.013,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.36666666666666664,"blendshapes":{"eyeBlinkLeft":0.151,"eyeLookDownLeft":0.159,"eyeLookInLeft":0.041,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.091,"eyeWideLeft":0,"eyeBlinkRight":0.151,"eyeLookDownRight":0.159,"eyeLookInRight":0.071,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.091,"eyeWideRight":0,"jawForward":0.167,"jawLeft":0.036,"jawRight":0,"jawOpen":0.544,"mouthClose":0.548,"mouthFunnel":0.122,"mouthPucker":0.355,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.023,"mouthSmileRight":0.049,"mouthFrownLeft":0.021,"mouthFrownRight":0.021,"mouthDimpleLeft":0.074,"mouthDimpleRight":0.067,"mouthStretchLeft":0.159,"mouthStretchRight":0.128,"mouthRollLower":0.204,"mouthRollUpper":0.226,"mouthShrugLower":0.024,"mouthShrugUpper":0.128,"mouthPressLeft":0.03,"mouthPressRight":0.031,"mouthLowerDownLeft":0.328,"mouthLowerDownRight":0.316,"mouthUpperUpLeft":0.025,"mouthUpperUpRight":0.026,"browDownLeft":0.013,"browDownRight":0.013,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.07,"cheekSquintRight":0.076,"noseSneerLeft":0.049,"noseSneerRight":0.05,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.3833333333333333,"blendshapes":{"eyeBlinkLeft":0.151,"eyeLookDownLeft":0.159,"eyeLookInLeft":0.041,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.09,"eyeWideLeft":0,"eyeBlinkRight":0.151,"eyeLookDownRight":0.159,"eyeLookInRight":0.071,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.09,"eyeWideRight":0,"jawForward":0.151,"jawLeft":0.035,"jawRight":0,"jawOpen":0.473,"mouthClose":0.471,"mouthFunnel":0.118,"mouthPucker":0.308,"mouthLeft":0.013,"mouthRight":0.005,"mouthSmileLeft":0.046,"mouthSmileRight":0.069,"mouthFrownLeft":0.006,"mouthFrownRight":0.02,"mouthDimpleLeft":0.071,"mouthDimpleRight":0.064,"mouthStretchLeft":0.153,"mouthStretchRight":0.123,"mouthRollLower":0.182,"mouthRollUpper":0.203,"mouthShrugLower":0.023,"mouthShrugUpper":0.123,"mouthPressLeft":0.029,"mouthPressRight":0.03,"mouthLowerDownLeft":0.327,"mouthLowerDownRight":0.315,"mouthUpperUpLeft":0.025,"mouthUpperUpRight":0.025,"browDownLeft":0.012,"browDownRight":0.012,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.027,"cheekSquintLeft":0.067,"cheekSquintRight":0.073,"noseSneerLeft":0.048,"noseSneerRight":0.049,"tongueOut":0,"headRoll":0.016,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.39999999999999997,"blendshapes":{"eyeBlinkLeft":0.154,"eyeLookDownLeft":0.16,"eyeLookInLeft":0.042,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.09,"eyeWideLeft":0,"eyeBlinkRight":0.154,"eyeLookDownRight":0.16,"eyeLookInRight":0.07,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.09,"eyeWideRight":0,"jawForward":0.143,"jawLeft":0.037,"jawRight":0,"jawOpen":0.474,"mouthClose":0.462,"mouthFunnel":0.15,"mouthPucker":0.307,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":0.058,"mouthSmileRight":0.08,"mouthFrownLeft":0.005,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.174,"mouthRollUpper":0.191,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.356,"mouthLowerDownRight":0.344,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.011,"browDownRight":0.011,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.017,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.41666666666666663,"blendshapes":{"eyeBlinkLeft":0.156,"eyeLookDownLeft":0.162,"eyeLookInLeft":0.043,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.09,"eyeWideLeft":0,"eyeBlinkRight":0.156,"eyeLookDownRight":0.162,"eyeLookInRight":0.069,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.09,"eyeWideRight":0,"jawForward":0.132,"jawLeft":0.037,"jawRight":0,"jawOpen":0.449,"mouthClose":0.405,"mouthFunnel":0.187,"mouthPucker":0.253,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":0.062,"mouthSmileRight":0.086,"mouthFrownLeft":0.006,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.151,"mouthRollUpper":0.172,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.378,"mouthLowerDownRight":0.365,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.011,"browDownRight":0.011,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.018,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.4333333333333333,"blendshapes":{"eyeBlinkLeft":0.157,"eyeLookDownLeft":0.163,"eyeLookInLeft":0.045,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.09,"eyeWideLeft":0,"eyeBlinkRight":0.157,"eyeLookDownRight":0.163,"eyeLookInRight":0.067,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.09,"eyeWideRight":0,"jawForward":0.128,"jawLeft":0.037,"jawRight":0,"jawOpen":0.424,"mouthClose":0.342,"mouthFunnel":0.209,"mouthPucker":0.202,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":0.071,"mouthSmileRight":0.098,"mouthFrownLeft":0.006,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.132,"mouthRollUpper":0.157,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.408,"mouthLowerDownRight":0.394,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.011,"browDownRight":0.011,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.019,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.44999999999999996,"blendshapes":{"eyeBlinkLeft":0.158,"eyeLookDownLeft":0.164,"eyeLookInLeft":0.047,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.089,"eyeWideLeft":0,"eyeBlinkRight":0.158,"eyeLookDownRight":0.164,"eyeLookInRight":0.065,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.089,"eyeWideRight":0,"jawForward":0.128,"jawLeft":0.037,"jawRight":0,"jawOpen":0.404,"mouthClose":0.288,"mouthFunnel":0.218,"mouthPucker":0.163,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.082,"mouthSmileRight":0.111,"mouthFrownLeft":0.003,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.115,"mouthRollUpper":0.145,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.438,"mouthLowerDownRight":0.424,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.011,"browDownRight":0.011,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":-0.001,"rightEyeRoll":0.002}},{"time":0.4666666666666666,"blendshapes":{"eyeBlinkLeft":0.159,"eyeLookDownLeft":0.165,"eyeLookInLeft":0.049,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.089,"eyeWideLeft":0,"eyeBlinkRight":0.159,"eyeLookDownRight":0.165,"eyeLookInRight":0.064,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.089,"eyeWideRight":0,"jawForward":0.129,"jawLeft":0.037,"jawRight":0,"jawOpen":0.392,"mouthClose":0.249,"mouthFunnel":0.225,"mouthPucker":0.138,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.09,"mouthSmileRight":0.119,"mouthFrownLeft":0.002,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.103,"mouthRollUpper":0.135,"mouthShrugLower":0.025,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.463,"mouthLowerDownRight":0.45,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.011,"browDownRight":0.011,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":-0.002,"rightEyeRoll":0.002}},{"time":0.4833333333333333,"blendshapes":{"eyeBlinkLeft":0.159,"eyeLookDownLeft":0.166,"eyeLookInLeft":0.05,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.089,"eyeWideLeft":0,"eyeBlinkRight":0.159,"eyeLookDownRight":0.166,"eyeLookInRight":0.062,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.089,"eyeWideRight":0,"jawForward":0.13,"jawLeft":0.037,"jawRight":0,"jawOpen":0.39,"mouthClose":0.227,"mouthFunnel":0.234,"mouthPucker":0.121,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.091,"mouthSmileRight":0.121,"mouthFrownLeft":0.003,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.094,"mouthRollUpper":0.129,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.481,"mouthLowerDownRight":0.47,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.011,"browDownRight":0.011,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.021,"leftEyeRoll":-0.002,"rightEyeRoll":0.002}},{"time":0.49999999999999994,"blendshapes":{"eyeBlinkLeft":0.16,"eyeLookDownLeft":0.168,"eyeLookInLeft":0.05,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.089,"eyeWideLeft":0,"eyeBlinkRight":0.16,"eyeLookDownRight":0.168,"eyeLookInRight":0.062,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.089,"eyeWideRight":0,"jawForward":0.139,"jawLeft":0.037,"jawRight":0,"jawOpen":0.395,"mouthClose":0.217,"mouthFunnel":0.23,"mouthPucker":0.108,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.093,"mouthSmileRight":0.125,"mouthFrownLeft":0.002,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.092,"mouthRollUpper":0.132,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.499,"mouthLowerDownRight":0.492,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.01,"browDownRight":0.01,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.021,"leftEyeRoll":-0.002,"rightEyeRoll":0.002}},{"time":0.5166666666666666,"blendshapes":{"eyeBlinkLeft":0.162,"eyeLookDownLeft":0.17,"eyeLookInLeft":0.05,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.089,"eyeWideLeft":0,"eyeBlinkRight":0.162,"eyeLookDownRight":0.17,"eyeLookInRight":0.062,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.089,"eyeWideRight":0,"jawForward":0.141,"jawLeft":0.037,"jawRight":0,"jawOpen":0.39,"mouthClose":0.202,"mouthFunnel":0.232,"mouthPucker":0.095,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.085,"mouthSmileRight":0.116,"mouthFrownLeft":0.007,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.085,"mouthRollUpper":0.123,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.504,"mouthLowerDownRight":0.5,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.01,"browDownRight":0.01,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.022,"leftEyeRoll":-0.002,"rightEyeRoll":0.002}},{"time":0.5333333333333333,"blendshapes":{"eyeBlinkLeft":0.164,"eyeLookDownLeft":0.172,"eyeLookInLeft":0.05,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.088,"eyeWideLeft":0,"eyeBlinkRight":0.164,"eyeLookDownRight":0.172,"eyeLookInRight":0.063,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.088,"eyeWideRight":0,"jawForward":0.141,"jawLeft":0.037,"jawRight":0,"jawOpen":0.373,"mouthClose":0.169,"mouthFunnel":0.242,"mouthPucker":0.086,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.082,"mouthSmileRight":0.108,"mouthFrownLeft":0.016,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.073,"mouthRollUpper":0.106,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.51,"mouthLowerDownRight":0.512,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.01,"browDownRight":0.01,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.023,"leftEyeRoll":-0.002,"rightEyeRoll":0.002}},{"time":0.55,"blendshapes":{"eyeBlinkLeft":0.171,"eyeLookDownLeft":0.176,"eyeLookInLeft":0.049,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.088,"eyeWideLeft":0,"eyeBlinkRight":0.171,"eyeLookDownRight":0.176,"eyeLookInRight":0.063,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.088,"eyeWideRight":0,"jawForward":0.14,"jawLeft":0.037,"jawRight":0,"jawOpen":0.36,"mouthClose":0.146,"mouthFunnel":0.246,"mouthPucker":0.083,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.082,"mouthSmileRight":0.104,"mouthFrownLeft":0.02,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.065,"mouthRollUpper":0.093,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.511,"mouthLowerDownRight":0.517,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.01,"browDownRight":0.01,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.023,"leftEyeRoll":-0.002,"rightEyeRoll":0.002}},{"time":0.5666666666666668,"blendshapes":{"eyeBlinkLeft":0.224,"eyeLookDownLeft":0.189,"eyeLookInLeft":0.048,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.088,"eyeWideLeft":0,"eyeBlinkRight":0.224,"eyeLookDownRight":0.189,"eyeLookInRight":0.064,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.088,"eyeWideRight":0,"jawForward":0.138,"jawLeft":0.037,"jawRight":0,"jawOpen":0.352,"mouthClose":0.137,"mouthFunnel":0.243,"mouthPucker":0.086,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.08,"mouthSmileRight":0.101,"mouthFrownLeft":0.023,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.064,"mouthRollUpper":0.086,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.507,"mouthLowerDownRight":0.512,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.009,"browDownRight":0.009,"browInnerUp":0.093,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.024,"leftEyeRoll":-0.002,"rightEyeRoll":0.002}},{"time":0.5833333333333335,"blendshapes":{"eyeBlinkLeft":0.301,"eyeLookDownLeft":0.219,"eyeLookInLeft":0.047,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.091,"eyeWideLeft":0,"eyeBlinkRight":0.301,"eyeLookDownRight":0.219,"eyeLookInRight":0.065,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.091,"eyeWideRight":0,"jawForward":0.137,"jawLeft":0.037,"jawRight":0,"jawOpen":0.348,"mouthClose":0.133,"mouthFunnel":0.242,"mouthPucker":0.09,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.075,"mouthSmileRight":0.093,"mouthFrownLeft":0.027,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.065,"mouthRollUpper":0.082,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.499,"mouthLowerDownRight":0.503,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.009,"browDownRight":0.009,"browInnerUp":0.094,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.025,"leftEyeRoll":-0.002,"rightEyeRoll":0.003}},{"time":0.6000000000000002,"blendshapes":{"eyeBlinkLeft":0.375,"eyeLookDownLeft":0.248,"eyeLookInLeft":0.048,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.114,"eyeWideLeft":0,"eyeBlinkRight":0.375,"eyeLookDownRight":0.248,"eyeLookInRight":0.063,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.114,"eyeWideRight":0,"jawForward":0.141,"jawLeft":0.037,"jawRight":0,"jawOpen":0.354,"mouthClose":0.129,"mouthFunnel":0.25,"mouthPucker":0.097,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.069,"mouthSmileRight":0.085,"mouthFrownLeft":0.037,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.065,"mouthRollUpper":0.081,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.499,"mouthLowerDownRight":0.5,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.01,"browDownRight":0.01,"browInnerUp":0.095,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.026,"leftEyeRoll":-0.002,"rightEyeRoll":0.003}},{"time":0.6166666666666669,"blendshapes":{"eyeBlinkLeft":0.448,"eyeLookDownLeft":0.28,"eyeLookInLeft":0.054,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.146,"eyeWideLeft":0,"eyeBlinkRight":0.448,"eyeLookDownRight":0.28,"eyeLookInRight":0.055,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.146,"eyeWideRight":0,"jawForward":0.145,"jawLeft":0.037,"jawRight":0,"jawOpen":0.339,"mouthClose":0.101,"mouthFunnel":0.245,"mouthPucker":0.093,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.082,"mouthSmileRight":0.096,"mouthFrownLeft":0.034,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.061,"mouthRollUpper":0.078,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.513,"mouthLowerDownRight":0.516,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.016,"browDownRight":0.016,"browInnerUp":0.096,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.026,"leftEyeRoll":-0.003,"rightEyeRoll":0.003}},{"time":0.6333333333333336,"blendshapes":{"eyeBlinkLeft":0.477,"eyeLookDownLeft":0.3,"eyeLookInLeft":0.063,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.179,"eyeWideLeft":0,"eyeBlinkRight":0.477,"eyeLookDownRight":0.3,"eyeLookInRight":0.046,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.179,"eyeWideRight":0,"jawForward":0.148,"jawLeft":0.037,"jawRight":0,"jawOpen":0.32,"mouthClose":0.076,"mouthFunnel":0.228,"mouthPucker":0.088,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.099,"mouthSmileRight":0.112,"mouthFrownLeft":0.024,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.058,"mouthRollUpper":0.076,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.523,"mouthLowerDownRight":0.528,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.023,"browDownRight":0.023,"browInnerUp":0.097,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.029,"leftEyeRoll":-0.004,"rightEyeRoll":0.003}},{"time":0.6500000000000004,"blendshapes":{"eyeBlinkLeft":0.489,"eyeLookDownLeft":0.289,"eyeLookInLeft":0.075,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.209,"eyeWideLeft":0,"eyeBlinkRight":0.489,"eyeLookDownRight":0.289,"eyeLookInRight":0.034,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.209,"eyeWideRight":0,"jawForward":0.15,"jawLeft":0.037,"jawRight":0,"jawOpen":0.31,"mouthClose":0.066,"mouthFunnel":0.215,"mouthPucker":0.087,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.109,"mouthSmileRight":0.121,"mouthFrownLeft":0.017,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.058,"mouthRollUpper":0.076,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.528,"mouthLowerDownRight":0.532,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.03,"browDownRight":0.03,"browInnerUp":0.098,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.032,"leftEyeRoll":-0.004,"rightEyeRoll":0.002}},{"time":0.6666666666666671,"blendshapes":{"eyeBlinkLeft":0.389,"eyeLookDownLeft":0.247,"eyeLookInLeft":0.072,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.222,"eyeWideLeft":0,"eyeBlinkRight":0.389,"eyeLookDownRight":0.248,"eyeLookInRight":0.037,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.222,"eyeWideRight":0,"jawForward":0.154,"jawLeft":0.037,"jawRight":0,"jawOpen":0.307,"mouthClose":0.061,"mouthFunnel":0.204,"mouthPucker":0.086,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.117,"mouthSmileRight":0.127,"mouthFrownLeft":0.013,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.059,"mouthRollUpper":0.078,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.537,"mouthLowerDownRight":0.539,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.039,"browDownRight":0.039,"browInnerUp":0.098,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.035,"leftEyeRoll":-0.003,"rightEyeRoll":0.002}},{"time":0.6833333333333338,"blendshapes":{"eyeBlinkLeft":0.266,"eyeLookDownLeft":0.144,"eyeLookInLeft":0.075,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.236,"eyeWideLeft":0,"eyeBlinkRight":0.266,"eyeLookDownRight":0.144,"eyeLookInRight":0.034,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.236,"eyeWideRight":0,"jawForward":0.161,"jawLeft":0.037,"jawRight":0,"jawOpen":0.311,"mouthClose":0.058,"mouthFunnel":0.192,"mouthPucker":0.081,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.125,"mouthSmileRight":0.134,"mouthFrownLeft":0.008,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.06,"mouthRollUpper":0.082,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.55,"mouthLowerDownRight":0.551,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.051,"browDownRight":0.051,"browInnerUp":0.098,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.037,"leftEyeRoll":-0.002,"rightEyeRoll":0.001}},{"time":0.7000000000000005,"blendshapes":{"eyeBlinkLeft":0.149,"eyeLookDownLeft":0.028,"eyeLookInLeft":0.081,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.244,"eyeWideLeft":0,"eyeBlinkRight":0.149,"eyeLookDownRight":0.028,"eyeLookInRight":0.028,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.244,"eyeWideRight":0,"jawForward":0.163,"jawLeft":0.037,"jawRight":0,"jawOpen":0.326,"mouthClose":0.079,"mouthFunnel":0.184,"mouthPucker":0.071,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.116,"mouthSmileRight":0.129,"mouthFrownLeft":0.007,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.067,"mouthRollUpper":0.091,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.545,"mouthLowerDownRight":0.539,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.058,"browDownRight":0.058,"browInnerUp":0.097,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.039,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":0.7166666666666672,"blendshapes":{"eyeBlinkLeft":0.063,"eyeLookDownLeft":0,"eyeLookInLeft":0.095,"eyeLookOutLeft":0,"eyeLookUpLeft":0.048,"eyeSquintLeft":0.246,"eyeWideLeft":0,"eyeBlinkRight":0.063,"eyeLookDownRight":0,"eyeLookInRight":0.015,"eyeLookOutRight":0,"eyeLookUpRight":0.048,"eyeSquintRight":0.246,"eyeWideRight":0,"jawForward":0.162,"jawLeft":0.037,"jawRight":0,"jawOpen":0.332,"mouthClose":0.099,"mouthFunnel":0.175,"mouthPucker":0.069,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.114,"mouthSmileRight":0.13,"mouthFrownLeft":0.004,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.074,"mouthRollUpper":0.098,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.533,"mouthLowerDownRight":0.523,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.062,"browDownRight":0.062,"browInnerUp":0.095,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.04,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.733333333333334,"blendshapes":{"eyeBlinkLeft":0.022,"eyeLookDownLeft":0,"eyeLookInLeft":0.106,"eyeLookOutLeft":0,"eyeLookUpLeft":0.085,"eyeSquintLeft":0.238,"eyeWideLeft":0,"eyeBlinkRight":0.022,"eyeLookDownRight":0,"eyeLookInRight":0.005,"eyeLookOutRight":0,"eyeLookUpRight":0.085,"eyeSquintRight":0.238,"eyeWideRight":0,"jawForward":0.154,"jawLeft":0.037,"jawRight":0,"jawOpen":0.326,"mouthClose":0.11,"mouthFunnel":0.169,"mouthPucker":0.062,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.106,"mouthSmileRight":0.127,"mouthFrownLeft":0.003,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.078,"mouthRollUpper":0.098,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.511,"mouthLowerDownRight":0.498,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.064,"browDownRight":0.064,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.041,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.7500000000000007,"blendshapes":{"eyeBlinkLeft":0.003,"eyeLookDownLeft":0,"eyeLookInLeft":0.115,"eyeLookOutLeft":0,"eyeLookUpLeft":0.084,"eyeSquintLeft":0.22,"eyeWideLeft":0,"eyeBlinkRight":0.003,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.004,"eyeLookUpRight":0.084,"eyeSquintRight":0.22,"eyeWideRight":0,"jawForward":0.147,"jawLeft":0.037,"jawRight":0,"jawOpen":0.327,"mouthClose":0.134,"mouthFunnel":0.165,"mouthPucker":0.061,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.092,"mouthSmileRight":0.116,"mouthFrownLeft":0.004,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.085,"mouthRollUpper":0.1,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.482,"mouthLowerDownRight":0.467,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.065,"browDownRight":0.065,"browInnerUp":0.088,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.041,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.7666666666666674,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.118,"eyeLookOutLeft":0,"eyeLookUpLeft":0.084,"eyeSquintLeft":0.201,"eyeWideLeft":0.029,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.007,"eyeLookUpRight":0.084,"eyeSquintRight":0.201,"eyeWideRight":0.029,"jawForward":0.142,"jawLeft":0.037,"jawRight":0,"jawOpen":0.33,"mouthClose":0.166,"mouthFunnel":0.158,"mouthPucker":0.067,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.081,"mouthSmileRight":0.108,"mouthFrownLeft":0.004,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.096,"mouthRollUpper":0.109,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.451,"mouthLowerDownRight":0.433,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.066,"browDownRight":0.066,"browInnerUp":0.086,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.04,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.7833333333333341,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.115,"eyeLookOutLeft":0,"eyeLookUpLeft":0.079,"eyeSquintLeft":0.188,"eyeWideLeft":0.057,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.004,"eyeLookUpRight":0.079,"eyeSquintRight":0.188,"eyeWideRight":0.057,"jawForward":0.14,"jawLeft":0.037,"jawRight":0,"jawOpen":0.326,"mouthClose":0.196,"mouthFunnel":0.144,"mouthPucker":0.078,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.078,"mouthSmileRight":0.106,"mouthFrownLeft":0.001,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.109,"mouthRollUpper":0.121,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.419,"mouthLowerDownRight":0.402,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.083,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.039,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.8000000000000008,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.107,"eyeLookOutLeft":0,"eyeLookUpLeft":0.073,"eyeSquintLeft":0.18,"eyeWideLeft":0.073,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.004,"eyeLookOutRight":0,"eyeLookUpRight":0.073,"eyeSquintRight":0.18,"eyeWideRight":0.074,"jawForward":0.134,"jawLeft":0.037,"jawRight":0,"jawOpen":0.322,"mouthClose":0.222,"mouthFunnel":0.145,"mouthPucker":0.091,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.068,"mouthSmileRight":0.095,"mouthFrownLeft":0.001,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.118,"mouthRollUpper":0.127,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.385,"mouthLowerDownRight":0.37,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.039,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.8166666666666675,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.103,"eyeLookOutLeft":0,"eyeLookUpLeft":0.07,"eyeSquintLeft":0.175,"eyeWideLeft":0.082,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.008,"eyeLookOutRight":0,"eyeLookUpRight":0.07,"eyeSquintRight":0.175,"eyeWideRight":0.082,"jawForward":0.119,"jawLeft":0.037,"jawRight":0,"jawOpen":0.311,"mouthClose":0.237,"mouthFunnel":0.152,"mouthPucker":0.107,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.058,"mouthSmileRight":0.083,"mouthFrownLeft":0.002,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.118,"mouthRollUpper":0.118,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.355,"mouthLowerDownRight":0.341,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.081,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.039,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.8333333333333343,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.099,"eyeLookOutLeft":0,"eyeLookUpLeft":0.073,"eyeSquintLeft":0.172,"eyeWideLeft":0.087,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.012,"eyeLookOutRight":0,"eyeLookUpRight":0.073,"eyeSquintRight":0.172,"eyeWideRight":0.087,"jawForward":0.105,"jawLeft":0.037,"jawRight":0,"jawOpen":0.292,"mouthClose":0.216,"mouthFunnel":0.171,"mouthPucker":0.109,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.051,"mouthSmileRight":0.072,"mouthFrownLeft":0.005,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.106,"mouthRollUpper":0.099,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.35,"mouthLowerDownRight":0.337,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.08,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.038,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.850000000000001,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.1,"eyeLookOutLeft":0,"eyeLookUpLeft":0.076,"eyeSquintLeft":0.17,"eyeWideLeft":0.091,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.011,"eyeLookOutRight":0,"eyeLookUpRight":0.076,"eyeSquintRight":0.17,"eyeWideRight":0.091,"jawForward":0.101,"jawLeft":0.037,"jawRight":0,"jawOpen":0.281,"mouthClose":0.189,"mouthFunnel":0.192,"mouthPucker":0.11,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.048,"mouthSmileRight":0.065,"mouthFrownLeft":0.014,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.094,"mouthRollUpper":0.082,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.359,"mouthLowerDownRight":0.349,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.079,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.037,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.8666666666666677,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.105,"eyeLookOutLeft":0,"eyeLookUpLeft":0.078,"eyeSquintLeft":0.169,"eyeWideLeft":0.095,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.006,"eyeLookOutRight":0,"eyeLookUpRight":0.078,"eyeSquintRight":0.169,"eyeWideRight":0.095,"jawForward":0.103,"jawLeft":0.037,"jawRight":0,"jawOpen":0.274,"mouthClose":0.16,"mouthFunnel":0.197,"mouthPucker":0.104,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.053,"mouthSmileRight":0.069,"mouthFrownLeft":0.017,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.084,"mouthRollUpper":0.071,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.379,"mouthLowerDownRight":0.371,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.079,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.035,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.8833333333333344,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.108,"eyeLookOutLeft":0,"eyeLookUpLeft":0.079,"eyeSquintLeft":0.168,"eyeWideLeft":0.1,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.003,"eyeLookOutRight":0,"eyeLookUpRight":0.08,"eyeSquintRight":0.168,"eyeWideRight":0.1,"jawForward":0.108,"jawLeft":0.037,"jawRight":0,"jawOpen":0.268,"mouthClose":0.135,"mouthFunnel":0.183,"mouthPucker":0.09,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.066,"mouthSmileRight":0.083,"mouthFrownLeft":0.008,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.079,"mouthRollUpper":0.069,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.404,"mouthLowerDownRight":0.397,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.078,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.034,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.9000000000000011,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.114,"eyeLookOutLeft":0,"eyeLookUpLeft":0.077,"eyeSquintLeft":0.165,"eyeWideLeft":0.105,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.003,"eyeLookUpRight":0.077,"eyeSquintRight":0.165,"eyeWideRight":0.105,"jawForward":0.114,"jawLeft":0.037,"jawRight":0,"jawOpen":0.285,"mouthClose":0.142,"mouthFunnel":0.186,"mouthPucker":0.098,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.066,"mouthSmileRight":0.082,"mouthFrownLeft":0.011,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.081,"mouthRollUpper":0.073,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.415,"mouthLowerDownRight":0.408,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.077,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.033,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.9166666666666679,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.121,"eyeLookOutLeft":0,"eyeLookUpLeft":0.071,"eyeSquintLeft":0.162,"eyeWideLeft":0.107,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.01,"eyeLookUpRight":0.071,"eyeSquintRight":0.162,"eyeWideRight":0.108,"jawForward":0.118,"jawLeft":0.037,"jawRight":0,"jawOpen":0.292,"mouthClose":0.141,"mouthFunnel":0.183,"mouthPucker":0.095,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.068,"mouthSmileRight":0.084,"mouthFrownLeft":0.01,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.082,"mouthRollUpper":0.077,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.422,"mouthLowerDownRight":0.415,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.077,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.033,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.9333333333333346,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.125,"eyeLookOutLeft":0,"eyeLookUpLeft":0.065,"eyeSquintLeft":0.158,"eyeWideLeft":0.11,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.014,"eyeLookUpRight":0.065,"eyeSquintRight":0.158,"eyeWideRight":0.11,"jawForward":0.119,"jawLeft":0.037,"jawRight":0,"jawOpen":0.296,"mouthClose":0.146,"mouthFunnel":0.181,"mouthPucker":0.096,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.066,"mouthSmileRight":0.083,"mouthFrownLeft":0.01,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.083,"mouthRollUpper":0.079,"mouthShrugLower":0.024,"mouthShrugUpper":0.133,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.421,"mouthLowerDownRight":0.414,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.066,"browDownRight":0.066,"browInnerUp":0.077,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.033,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.9500000000000013,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.13,"eyeLookOutLeft":0,"eyeLookUpLeft":0.063,"eyeSquintLeft":0.156,"eyeWideLeft":0.112,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.019,"eyeLookUpRight":0.063,"eyeSquintRight":0.156,"eyeWideRight":0.113,"jawForward":0.115,"jawLeft":0.036,"jawRight":0,"jawOpen":0.287,"mouthClose":0.145,"mouthFunnel":0.172,"mouthPucker":0.091,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.064,"mouthSmileRight":0.08,"mouthFrownLeft":0.009,"mouthFrownRight":0.021,"mouthDimpleLeft":0.072,"mouthDimpleRight":0.066,"mouthStretchLeft":0.157,"mouthStretchRight":0.127,"mouthRollLower":0.082,"mouthRollUpper":0.079,"mouthShrugLower":0.024,"mouthShrugUpper":0.128,"mouthPressLeft":0.029,"mouthPressRight":0.031,"mouthLowerDownLeft":0.405,"mouthLowerDownRight":0.397,"mouthUpperUpLeft":0.025,"mouthUpperUpRight":0.026,"browDownLeft":0.066,"browDownRight":0.066,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.027,"cheekSquintLeft":0.069,"cheekSquintRight":0.075,"noseSneerLeft":0.049,"noseSneerRight":0.05,"tongueOut":0,"headRoll":0.033,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.966666666666668,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.134,"eyeLookOutLeft":0,"eyeLookUpLeft":0.063,"eyeSquintLeft":0.154,"eyeWideLeft":0.116,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.023,"eyeLookUpRight":0.063,"eyeSquintRight":0.154,"eyeWideRight":0.116,"jawForward":0.107,"jawLeft":0.033,"jawRight":0,"jawOpen":0.268,"mouthClose":0.14,"mouthFunnel":0.157,"mouthPucker":0.083,"mouthLeft":0.013,"mouthRight":0.005,"mouthSmileLeft":0.061,"mouthSmileRight":0.077,"mouthFrownLeft":0.006,"mouthFrownRight":0.019,"mouthDimpleLeft":0.068,"mouthDimpleRight":0.061,"mouthStretchLeft":0.147,"mouthStretchRight":0.118,"mouthRollLower":0.078,"mouthRollUpper":0.076,"mouthShrugLower":0.022,"mouthShrugUpper":0.119,"mouthPressLeft":0.027,"mouthPressRight":0.029,"mouthLowerDownLeft":0.376,"mouthLowerDownRight":0.367,"mouthUpperUpLeft":0.024,"mouthUpperUpRight":0.024,"browDownLeft":0.066,"browDownRight":0.066,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.025,"cheekSquintLeft":0.064,"cheekSquintRight":0.07,"noseSneerLeft":0.046,"noseSneerRight":0.047,"tongueOut":0,"headRoll":0.033,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":0.9833333333333347,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.137,"eyeLookOutLeft":0,"eyeLookUpLeft":0.063,"eyeSquintLeft":0.153,"eyeWideLeft":0.12,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.026,"eyeLookUpRight":0.064,"eyeSquintRight":0.153,"eyeWideRight":0.12,"jawForward":0.099,"jawLeft":0.031,"jawRight":0,"jawOpen":0.249,"mouthClose":0.137,"mouthFunnel":0.14,"mouthPucker":0.075,"mouthLeft":0.012,"mouthRight":0.004,"mouthSmileLeft":0.058,"mouthSmileRight":0.073,"mouthFrownLeft":0.004,"mouthFrownRight":0.018,"mouthDimpleLeft":0.062,"mouthDimpleRight":0.056,"mouthStretchLeft":0.135,"mouthStretchRight":0.108,"mouthRollLower":0.075,"mouthRollUpper":0.074,"mouthShrugLower":0.02,"mouthShrugUpper":0.109,"mouthPressLeft":0.025,"mouthPressRight":0.026,"mouthLowerDownLeft":0.341,"mouthLowerDownRight":0.331,"mouthUpperUpLeft":0.022,"mouthUpperUpRight":0.022,"browDownLeft":0.066,"browDownRight":0.066,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.023,"cheekSquintLeft":0.059,"cheekSquintRight":0.064,"noseSneerLeft":0.042,"noseSneerRight":0.043,"tongueOut":0,"headRoll":0.032,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.0000000000000013,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.136,"eyeLookOutLeft":0,"eyeLookUpLeft":0.06,"eyeSquintLeft":0.152,"eyeWideLeft":0.123,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.025,"eyeLookUpRight":0.06,"eyeSquintRight":0.152,"eyeWideRight":0.123,"jawForward":0.093,"jawLeft":0.028,"jawRight":0,"jawOpen":0.239,"mouthClose":0.143,"mouthFunnel":0.128,"mouthPucker":0.077,"mouthLeft":0.011,"mouthRight":0.004,"mouthSmileLeft":0.051,"mouthSmileRight":0.065,"mouthFrownLeft":0.006,"mouthFrownRight":0.016,"mouthDimpleLeft":0.057,"mouthDimpleRight":0.051,"mouthStretchLeft":0.123,"mouthStretchRight":0.099,"mouthRollLower":0.074,"mouthRollUpper":0.074,"mouthShrugLower":0.018,"mouthShrugUpper":0.1,"mouthPressLeft":0.023,"mouthPressRight":0.024,"mouthLowerDownLeft":0.306,"mouthLowerDownRight":0.294,"mouthUpperUpLeft":0.02,"mouthUpperUpRight":0.02,"browDownLeft":0.065,"browDownRight":0.065,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.021,"cheekSquintLeft":0.054,"cheekSquintRight":0.059,"noseSneerLeft":0.038,"noseSneerRight":0.039,"tongueOut":0,"headRoll":0.032,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.016666666666668,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.132,"eyeLookOutLeft":0,"eyeLookUpLeft":0.056,"eyeSquintLeft":0.149,"eyeWideLeft":0.124,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.021,"eyeLookUpRight":0.056,"eyeSquintRight":0.149,"eyeWideRight":0.124,"jawForward":0.086,"jawLeft":0.026,"jawRight":0,"jawOpen":0.226,"mouthClose":0.136,"mouthFunnel":0.123,"mouthPucker":0.076,"mouthLeft":0.01,"mouthRight":0.004,"mouthSmileLeft":0.045,"mouthSmileRight":0.057,"mouthFrownLeft":0.009,"mouthFrownRight":0.015,"mouthDimpleLeft":0.052,"mouthDimpleRight":0.047,"mouthStretchLeft":0.113,"mouthStretchRight":0.091,"mouthRollLower":0.069,"mouthRollUpper":0.069,"mouthShrugLower":0.017,"mouthShrugUpper":0.092,"mouthPressLeft":0.021,"mouthPressRight":0.022,"mouthLowerDownLeft":0.281,"mouthLowerDownRight":0.271,"mouthUpperUpLeft":0.018,"mouthUpperUpRight":0.019,"browDownLeft":0.065,"browDownRight":0.065,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.019,"cheekSquintLeft":0.05,"cheekSquintRight":0.054,"noseSneerLeft":0.035,"noseSneerRight":0.036,"tongueOut":0,"headRoll":0.032,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.0333333333333345,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.128,"eyeLookOutLeft":0,"eyeLookUpLeft":0.049,"eyeSquintLeft":0.146,"eyeWideLeft":0.125,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.017,"eyeLookUpRight":0.049,"eyeSquintRight":0.146,"eyeWideRight":0.125,"jawForward":0.078,"jawLeft":0.024,"jawRight":0,"jawOpen":0.207,"mouthClose":0.121,"mouthFunnel":0.118,"mouthPucker":0.072,"mouthLeft":0.009,"mouthRight":0.003,"mouthSmileLeft":0.042,"mouthSmileRight":0.053,"mouthFrownLeft":0.009,"mouthFrownRight":0.014,"mouthDimpleLeft":0.048,"mouthDimpleRight":0.044,"mouthStretchLeft":0.104,"mouthStretchRight":0.084,"mouthRollLower":0.062,"mouthRollUpper":0.062,"mouthShrugLower":0.016,"mouthShrugUpper":0.085,"mouthPressLeft":0.019,"mouthPressRight":0.02,"mouthLowerDownLeft":0.261,"mouthLowerDownRight":0.252,"mouthUpperUpLeft":0.017,"mouthUpperUpRight":0.017,"browDownLeft":0.065,"browDownRight":0.065,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.018,"cheekSquintLeft":0.046,"cheekSquintRight":0.05,"noseSneerLeft":0.032,"noseSneerRight":0.033,"tongueOut":0,"headRoll":0.031,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.0500000000000012,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.043,"eyeSquintLeft":0.143,"eyeWideLeft":0.125,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.012,"eyeLookUpRight":0.043,"eyeSquintRight":0.143,"eyeWideRight":0.125,"jawForward":0.076,"jawLeft":0.022,"jawRight":0,"jawOpen":0.185,"mouthClose":0.093,"mouthFunnel":0.104,"mouthPucker":0.056,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.051,"mouthSmileRight":0.062,"mouthFrownLeft":0.004,"mouthFrownRight":0.013,"mouthDimpleLeft":0.045,"mouthDimpleRight":0.04,"mouthStretchLeft":0.097,"mouthStretchRight":0.078,"mouthRollLower":0.054,"mouthRollUpper":0.057,"mouthShrugLower":0.014,"mouthShrugUpper":0.079,"mouthPressLeft":0.018,"mouthPressRight":0.019,"mouthLowerDownLeft":0.257,"mouthLowerDownRight":0.25,"mouthUpperUpLeft":0.016,"mouthUpperUpRight":0.016,"browDownLeft":0.065,"browDownRight":0.065,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.017,"cheekSquintLeft":0.042,"cheekSquintRight":0.046,"noseSneerLeft":0.03,"noseSneerRight":0.031,"tongueOut":0,"headRoll":0.03,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.0666666666666678,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.12,"eyeLookOutLeft":0,"eyeLookUpLeft":0.039,"eyeSquintLeft":0.14,"eyeWideLeft":0.125,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.008,"eyeLookUpRight":0.039,"eyeSquintRight":0.14,"eyeWideRight":0.126,"jawForward":0.086,"jawLeft":0.022,"jawRight":0,"jawOpen":0.184,"mouthClose":0.069,"mouthFunnel":0.092,"mouthPucker":0.039,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.071,"mouthSmileRight":0.084,"mouthFrownLeft":-0.004,"mouthFrownRight":0.012,"mouthDimpleLeft":0.044,"mouthDimpleRight":0.04,"mouthStretchLeft":0.095,"mouthStretchRight":0.077,"mouthRollLower":0.049,"mouthRollUpper":0.061,"mouthShrugLower":0.014,"mouthShrugUpper":0.077,"mouthPressLeft":0.018,"mouthPressRight":0.019,"mouthLowerDownLeft":0.286,"mouthLowerDownRight":0.279,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.016,"browDownLeft":0.065,"browDownRight":0.065,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.042,"cheekSquintRight":0.045,"noseSneerLeft":0.03,"noseSneerRight":0.03,"tongueOut":0,"headRoll":0.029,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.0833333333333344,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.118,"eyeLookOutLeft":0,"eyeLookUpLeft":0.036,"eyeSquintLeft":0.138,"eyeWideLeft":0.125,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.007,"eyeLookUpRight":0.037,"eyeSquintRight":0.138,"eyeWideRight":0.126,"jawForward":0.108,"jawLeft":0.023,"jawRight":0,"jawOpen":0.221,"mouthClose":0.071,"mouthFunnel":0.096,"mouthPucker":0.035,"mouthLeft":0.009,"mouthRight":0.003,"mouthSmileLeft":0.094,"mouthSmileRight":0.111,"mouthFrownLeft":-0.007,"mouthFrownRight":0.013,"mouthDimpleLeft":0.048,"mouthDimpleRight":0.043,"mouthStretchLeft":0.103,"mouthStretchRight":0.083,"mouthRollLower":0.052,"mouthRollUpper":0.077,"mouthShrugLower":0.015,"mouthShrugUpper":0.083,"mouthPressLeft":0.019,"mouthPressRight":0.02,"mouthLowerDownLeft":0.347,"mouthLowerDownRight":0.34,"mouthUpperUpLeft":0.016,"mouthUpperUpRight":0.017,"browDownLeft":0.065,"browDownRight":0.065,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.018,"cheekSquintLeft":0.045,"cheekSquintRight":0.049,"noseSneerLeft":0.032,"noseSneerRight":0.033,"tongueOut":0,"headRoll":0.028,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.100000000000001,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.122,"eyeLookOutLeft":0,"eyeLookUpLeft":0.041,"eyeSquintLeft":0.137,"eyeWideLeft":0.127,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.011,"eyeLookUpRight":0.041,"eyeSquintRight":0.137,"eyeWideRight":0.127,"jawForward":0.134,"jawLeft":0.025,"jawRight":0,"jawOpen":0.285,"mouthClose":0.101,"mouthFunnel":0.109,"mouthPucker":0.046,"mouthLeft":0.01,"mouthRight":0.004,"mouthSmileLeft":0.102,"mouthSmileRight":0.121,"mouthFrownLeft":-0.002,"mouthFrownRight":0.014,"mouthDimpleLeft":0.052,"mouthDimpleRight":0.047,"mouthStretchLeft":0.111,"mouthStretchRight":0.089,"mouthRollLower":0.061,"mouthRollUpper":0.101,"mouthShrugLower":0.017,"mouthShrugUpper":0.09,"mouthPressLeft":0.021,"mouthPressRight":0.022,"mouthLowerDownLeft":0.406,"mouthLowerDownRight":0.397,"mouthUpperUpLeft":0.018,"mouthUpperUpRight":0.018,"browDownLeft":0.064,"browDownRight":0.064,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.019,"cheekSquintLeft":0.049,"cheekSquintRight":0.053,"noseSneerLeft":0.035,"noseSneerRight":0.035,"tongueOut":0,"headRoll":0.027,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.1166666666666676,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.043,"eyeSquintLeft":0.137,"eyeWideLeft":0.13,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.013,"eyeLookUpRight":0.044,"eyeSquintRight":0.137,"eyeWideRight":0.13,"jawForward":0.151,"jawLeft":0.028,"jawRight":0,"jawOpen":0.33,"mouthClose":0.118,"mouthFunnel":0.132,"mouthPucker":0.051,"mouthLeft":0.011,"mouthRight":0.004,"mouthSmileLeft":0.102,"mouthSmileRight":0.122,"mouthFrownLeft":0.006,"mouthFrownRight":0.016,"mouthDimpleLeft":0.056,"mouthDimpleRight":0.051,"mouthStretchLeft":0.121,"mouthStretchRight":0.097,"mouthRollLower":0.065,"mouthRollUpper":0.112,"mouthShrugLower":0.018,"mouthShrugUpper":0.098,"mouthPressLeft":0.023,"mouthPressRight":0.024,"mouthLowerDownLeft":0.454,"mouthLowerDownRight":0.443,"mouthUpperUpLeft":0.019,"mouthUpperUpRight":0.02,"browDownLeft":0.064,"browDownRight":0.063,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.021,"cheekSquintLeft":0.053,"cheekSquintRight":0.058,"noseSneerLeft":0.038,"noseSneerRight":0.038,"tongueOut":0,"headRoll":0.027,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.1333333333333342,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.127,"eyeLookOutLeft":0,"eyeLookUpLeft":0.047,"eyeSquintLeft":0.136,"eyeWideLeft":0.132,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.016,"eyeLookUpRight":0.048,"eyeSquintRight":0.136,"eyeWideRight":0.133,"jawForward":0.17,"jawLeft":0.03,"jawRight":0,"jawOpen":0.376,"mouthClose":0.147,"mouthFunnel":0.145,"mouthPucker":0.05,"mouthLeft":0.012,"mouthRight":0.004,"mouthSmileLeft":0.104,"mouthSmileRight":0.128,"mouthFrownLeft":0.01,"mouthFrownRight":0.017,"mouthDimpleLeft":0.061,"mouthDimpleRight":0.055,"mouthStretchLeft":0.133,"mouthStretchRight":0.107,"mouthRollLower":0.077,"mouthRollUpper":0.133,"mouthShrugLower":0.02,"mouthShrugUpper":0.107,"mouthPressLeft":0.025,"mouthPressRight":0.026,"mouthLowerDownLeft":0.495,"mouthLowerDownRight":0.48,"mouthUpperUpLeft":0.021,"mouthUpperUpRight":0.022,"browDownLeft":0.063,"browDownRight":0.063,"browInnerUp":0.076,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.023,"cheekSquintLeft":0.058,"cheekSquintRight":0.063,"noseSneerLeft":0.041,"noseSneerRight":0.042,"tongueOut":0,"headRoll":0.027,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.1500000000000008,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.129,"eyeLookOutLeft":0,"eyeLookUpLeft":0.051,"eyeSquintLeft":0.136,"eyeWideLeft":0.136,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.018,"eyeLookUpRight":0.051,"eyeSquintRight":0.136,"eyeWideRight":0.136,"jawForward":0.208,"jawLeft":0.033,"jawRight":0,"jawOpen":0.444,"mouthClose":0.213,"mouthFunnel":0.129,"mouthPucker":0.053,"mouthLeft":0.013,"mouthRight":0.005,"mouthSmileLeft":0.105,"mouthSmileRight":0.136,"mouthFrownLeft":0.008,"mouthFrownRight":0.019,"mouthDimpleLeft":0.067,"mouthDimpleRight":0.061,"mouthStretchLeft":0.145,"mouthStretchRight":0.116,"mouthRollLower":0.113,"mouthRollUpper":0.186,"mouthShrugLower":0.022,"mouthShrugUpper":0.116,"mouthPressLeft":0.027,"mouthPressRight":0.028,"mouthLowerDownLeft":0.526,"mouthLowerDownRight":0.508,"mouthUpperUpLeft":0.023,"mouthUpperUpRight":0.024,"browDownLeft":0.062,"browDownRight":0.062,"browInnerUp":0.077,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.025,"cheekSquintLeft":0.063,"cheekSquintRight":0.069,"noseSneerLeft":0.045,"noseSneerRight":0.046,"tongueOut":0,"headRoll":0.027,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.1666666666666674,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.132,"eyeLookOutLeft":0,"eyeLookUpLeft":0.053,"eyeSquintLeft":0.136,"eyeWideLeft":0.138,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.021,"eyeLookUpRight":0.053,"eyeSquintRight":0.136,"eyeWideRight":0.138,"jawForward":0.247,"jawLeft":0.036,"jawRight":0,"jawOpen":0.513,"mouthClose":0.293,"mouthFunnel":0.105,"mouthPucker":0.063,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.101,"mouthSmileRight":0.14,"mouthFrownLeft":0.005,"mouthFrownRight":0.02,"mouthDimpleLeft":0.072,"mouthDimpleRight":0.066,"mouthStretchLeft":0.156,"mouthStretchRight":0.125,"mouthRollLower":0.156,"mouthRollUpper":0.246,"mouthShrugLower":0.023,"mouthShrugUpper":0.125,"mouthPressLeft":0.029,"mouthPressRight":0.03,"mouthLowerDownLeft":0.542,"mouthLowerDownRight":0.521,"mouthUpperUpLeft":0.025,"mouthUpperUpRight":0.026,"browDownLeft":0.062,"browDownRight":0.062,"browInnerUp":0.077,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.027,"cheekSquintLeft":0.068,"cheekSquintRight":0.074,"noseSneerLeft":0.048,"noseSneerRight":0.049,"tongueOut":0,"headRoll":0.026,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.183333333333334,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.14,"eyeLookOutLeft":0,"eyeLookUpLeft":0.055,"eyeSquintLeft":0.136,"eyeWideLeft":0.141,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.03,"eyeLookUpRight":0.055,"eyeSquintRight":0.136,"eyeWideRight":0.141,"jawForward":0.259,"jawLeft":0.037,"jawRight":0,"jawOpen":0.546,"mouthClose":0.351,"mouthFunnel":0.1,"mouthPucker":0.083,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.088,"mouthSmileRight":0.13,"mouthFrownLeft":0.006,"mouthFrownRight":0.022,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.069,"mouthStretchLeft":0.164,"mouthStretchRight":0.131,"mouthRollLower":0.182,"mouthRollUpper":0.273,"mouthShrugLower":0.024,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.53,"mouthLowerDownRight":0.507,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.061,"browDownRight":0.061,"browInnerUp":0.078,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.025,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.2000000000000006,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.15,"eyeLookOutLeft":0,"eyeLookUpLeft":0.053,"eyeSquintLeft":0.136,"eyeWideLeft":0.142,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.039,"eyeLookUpRight":0.053,"eyeSquintRight":0.136,"eyeWideRight":0.142,"jawForward":0.232,"jawLeft":0.037,"jawRight":0,"jawOpen":0.519,"mouthClose":0.37,"mouthFunnel":0.113,"mouthPucker":0.111,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.067,"mouthSmileRight":0.105,"mouthFrownLeft":0.014,"mouthFrownRight":0.022,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.069,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.181,"mouthRollUpper":0.252,"mouthShrugLower":0.024,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.471,"mouthLowerDownRight":0.448,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.061,"browDownRight":0.061,"browInnerUp":0.079,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.023,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.2166666666666672,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.155,"eyeLookOutLeft":0,"eyeLookUpLeft":0.049,"eyeSquintLeft":0.136,"eyeWideLeft":0.142,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.044,"eyeLookUpRight":0.049,"eyeSquintRight":0.136,"eyeWideRight":0.143,"jawForward":0.191,"jawLeft":0.037,"jawRight":0,"jawOpen":0.456,"mouthClose":0.307,"mouthFunnel":0.14,"mouthPucker":0.105,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.068,"mouthSmileRight":0.102,"mouthFrownLeft":0.01,"mouthFrownRight":0.022,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.069,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.149,"mouthRollUpper":0.196,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.459,"mouthLowerDownRight":0.437,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.061,"browDownRight":0.061,"browInnerUp":0.08,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.021,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.2333333333333338,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.155,"eyeLookOutLeft":0,"eyeLookUpLeft":0.046,"eyeSquintLeft":0.135,"eyeWideLeft":0.143,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.045,"eyeLookUpRight":0.046,"eyeSquintRight":0.135,"eyeWideRight":0.143,"jawForward":0.163,"jawLeft":0.037,"jawRight":0,"jawOpen":0.401,"mouthClose":0.233,"mouthFunnel":0.166,"mouthPucker":0.091,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.076,"mouthSmileRight":0.107,"mouthFrownLeft":0.01,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.116,"mouthRollUpper":0.147,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.465,"mouthLowerDownRight":0.447,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.061,"browDownRight":0.061,"browInnerUp":0.081,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.019,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.2500000000000004,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.151,"eyeLookOutLeft":0,"eyeLookUpLeft":0.043,"eyeSquintLeft":0.134,"eyeWideLeft":0.144,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.04,"eyeLookUpRight":0.043,"eyeSquintRight":0.134,"eyeWideRight":0.144,"jawForward":0.151,"jawLeft":0.037,"jawRight":0,"jawOpen":0.359,"mouthClose":0.174,"mouthFunnel":0.175,"mouthPucker":0.085,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.094,"mouthSmileRight":0.123,"mouthFrownLeft":0.007,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.095,"mouthRollUpper":0.119,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.48,"mouthLowerDownRight":0.469,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.062,"browDownRight":0.061,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.018,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.266666666666667,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.152,"eyeLookOutLeft":0,"eyeLookUpLeft":0.04,"eyeSquintLeft":0.134,"eyeWideLeft":0.145,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.041,"eyeLookUpRight":0.041,"eyeSquintRight":0.134,"eyeWideRight":0.145,"jawForward":0.148,"jawLeft":0.037,"jawRight":0,"jawOpen":0.336,"mouthClose":0.149,"mouthFunnel":0.175,"mouthPucker":0.089,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.112,"mouthSmileRight":0.137,"mouthFrownLeft":0.003,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.087,"mouthRollUpper":0.109,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.489,"mouthLowerDownRight":0.481,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.066,"browDownRight":0.065,"browInnerUp":0.083,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.017,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.2833333333333337,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.15,"eyeLookOutLeft":0,"eyeLookUpLeft":0.034,"eyeSquintLeft":0.133,"eyeWideLeft":0.146,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.039,"eyeLookUpRight":0.034,"eyeSquintRight":0.133,"eyeWideRight":0.146,"jawForward":0.146,"jawLeft":0.037,"jawRight":0,"jawOpen":0.329,"mouthClose":0.148,"mouthFunnel":0.176,"mouthPucker":0.092,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.117,"mouthSmileRight":0.138,"mouthFrownLeft":0.003,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.086,"mouthRollUpper":0.107,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.485,"mouthLowerDownRight":0.477,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.069,"browDownRight":0.069,"browInnerUp":0.083,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.016,"leftEyeRoll":0.001,"rightEyeRoll":0}},{"time":1.3000000000000003,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.141,"eyeLookOutLeft":0,"eyeLookUpLeft":0.024,"eyeSquintLeft":0.132,"eyeWideLeft":0.146,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.03,"eyeLookUpRight":0.024,"eyeSquintRight":0.132,"eyeWideRight":0.146,"jawForward":0.14,"jawLeft":0.037,"jawRight":0,"jawOpen":0.309,"mouthClose":0.123,"mouthFunnel":0.185,"mouthPucker":0.085,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.119,"mouthSmileRight":0.139,"mouthFrownLeft":0.002,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.076,"mouthRollUpper":0.094,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.488,"mouthLowerDownRight":0.483,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.073,"browDownRight":0.073,"browInnerUp":0.083,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.017,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.3166666666666669,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.132,"eyeLookOutLeft":0,"eyeLookUpLeft":0.016,"eyeSquintLeft":0.13,"eyeWideLeft":0.147,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.021,"eyeLookUpRight":0.016,"eyeSquintRight":0.13,"eyeWideRight":0.147,"jawForward":0.15,"jawLeft":0.037,"jawRight":0,"jawOpen":0.341,"mouthClose":0.172,"mouthFunnel":0.171,"mouthPucker":0.095,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.104,"mouthSmileRight":0.128,"mouthFrownLeft":0.003,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.096,"mouthRollUpper":0.12,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.467,"mouthLowerDownRight":0.458,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.076,"browDownRight":0.076,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.017,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.3333333333333335,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.127,"eyeLookOutLeft":0,"eyeLookUpLeft":0.014,"eyeSquintLeft":0.129,"eyeWideLeft":0.147,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.016,"eyeLookUpRight":0.014,"eyeSquintRight":0.129,"eyeWideRight":0.147,"jawForward":0.156,"jawLeft":0.037,"jawRight":0,"jawOpen":0.331,"mouthClose":0.157,"mouthFunnel":0.155,"mouthPucker":0.08,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.115,"mouthSmileRight":0.141,"mouthFrownLeft":-0.004,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.097,"mouthRollUpper":0.126,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.473,"mouthLowerDownRight":0.466,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.077,"browDownRight":0.077,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.018,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.35,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.125,"eyeLookOutLeft":0,"eyeLookUpLeft":0.013,"eyeSquintLeft":0.129,"eyeWideLeft":0.148,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.013,"eyeLookUpRight":0.013,"eyeSquintRight":0.129,"eyeWideRight":0.148,"jawForward":0.167,"jawLeft":0.037,"jawRight":0,"jawOpen":0.336,"mouthClose":0.144,"mouthFunnel":0.148,"mouthPucker":0.069,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.129,"mouthSmileRight":0.156,"mouthFrownLeft":-0.006,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.096,"mouthRollUpper":0.134,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.498,"mouthLowerDownRight":0.495,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.078,"browDownRight":0.078,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.019,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.3666666666666667,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.016,"eyeSquintLeft":0.128,"eyeWideLeft":0.15,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.013,"eyeLookUpRight":0.017,"eyeSquintRight":0.128,"eyeWideRight":0.151,"jawForward":0.178,"jawLeft":0.037,"jawRight":0,"jawOpen":0.366,"mouthClose":0.143,"mouthFunnel":0.154,"mouthPucker":0.068,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.139,"mouthSmileRight":0.168,"mouthFrownLeft":-0.004,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.092,"mouthRollUpper":0.139,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.537,"mouthLowerDownRight":0.534,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.079,"browDownRight":0.079,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.019,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.3833333333333333,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.125,"eyeLookOutLeft":0,"eyeLookUpLeft":0.019,"eyeSquintLeft":0.128,"eyeWideLeft":0.152,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.014,"eyeLookUpRight":0.019,"eyeSquintRight":0.128,"eyeWideRight":0.153,"jawForward":0.182,"jawLeft":0.037,"jawRight":0,"jawOpen":0.403,"mouthClose":0.145,"mouthFunnel":0.17,"mouthPucker":0.072,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.146,"mouthSmileRight":0.178,"mouthFrownLeft":0,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.083,"mouthRollUpper":0.137,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.582,"mouthLowerDownRight":0.575,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.08,"browDownRight":0.08,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.4,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.126,"eyeLookOutLeft":0,"eyeLookUpLeft":0.019,"eyeSquintLeft":0.127,"eyeWideLeft":0.154,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.015,"eyeLookUpRight":0.019,"eyeSquintRight":0.127,"eyeWideRight":0.155,"jawForward":0.192,"jawLeft":0.037,"jawRight":0,"jawOpen":0.42,"mouthClose":0.138,"mouthFunnel":0.178,"mouthPucker":0.072,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.152,"mouthSmileRight":0.185,"mouthFrownLeft":0.002,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.078,"mouthRollUpper":0.14,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.611,"mouthLowerDownRight":0.606,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.08,"browDownRight":0.08,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.4166666666666665,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.125,"eyeLookOutLeft":0,"eyeLookUpLeft":0.019,"eyeSquintLeft":0.127,"eyeWideLeft":0.156,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.014,"eyeLookUpRight":0.019,"eyeSquintRight":0.127,"eyeWideRight":0.156,"jawForward":0.192,"jawLeft":0.037,"jawRight":0,"jawOpen":0.417,"mouthClose":0.133,"mouthFunnel":0.177,"mouthPucker":0.067,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.15,"mouthSmileRight":0.182,"mouthFrownLeft":0.002,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.077,"mouthRollUpper":0.138,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.613,"mouthLowerDownRight":0.608,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.08,"browDownRight":0.08,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.021,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.4333333333333331,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.019,"eyeSquintLeft":0.127,"eyeWideLeft":0.157,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.013,"eyeLookUpRight":0.019,"eyeSquintRight":0.127,"eyeWideRight":0.158,"jawForward":0.188,"jawLeft":0.037,"jawRight":0,"jawOpen":0.418,"mouthClose":0.15,"mouthFunnel":0.173,"mouthPucker":0.062,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.135,"mouthSmileRight":0.168,"mouthFrownLeft":0,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.083,"mouthRollUpper":0.139,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.595,"mouthLowerDownRight":0.583,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.081,"browDownRight":0.081,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.021,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.4499999999999997,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.018,"eyeSquintLeft":0.126,"eyeWideLeft":0.159,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.012,"eyeLookUpRight":0.018,"eyeSquintRight":0.126,"eyeWideRight":0.159,"jawForward":0.19,"jawLeft":0.037,"jawRight":0,"jawOpen":0.411,"mouthClose":0.144,"mouthFunnel":0.16,"mouthPucker":0.062,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.145,"mouthSmileRight":0.177,"mouthFrownLeft":-0.006,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.084,"mouthRollUpper":0.14,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.598,"mouthLowerDownRight":0.585,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.081,"browDownRight":0.081,"browInnerUp":0.085,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.4666666666666663,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.018,"eyeSquintLeft":0.126,"eyeWideLeft":0.159,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.012,"eyeLookUpRight":0.018,"eyeSquintRight":0.126,"eyeWideRight":0.16,"jawForward":0.196,"jawLeft":0.037,"jawRight":0,"jawOpen":0.407,"mouthClose":0.132,"mouthFunnel":0.15,"mouthPucker":0.069,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.166,"mouthSmileRight":0.194,"mouthFrownLeft":-0.012,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.081,"mouthRollUpper":0.141,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.615,"mouthLowerDownRight":0.604,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.082,"browDownRight":0.082,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.021,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.483333333333333,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.019,"eyeSquintLeft":0.126,"eyeWideLeft":0.16,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.013,"eyeLookUpRight":0.019,"eyeSquintRight":0.126,"eyeWideRight":0.16,"jawForward":0.199,"jawLeft":0.037,"jawRight":0,"jawOpen":0.416,"mouthClose":0.14,"mouthFunnel":0.152,"mouthPucker":0.078,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.167,"mouthSmileRight":0.194,"mouthFrownLeft":-0.011,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.082,"mouthRollUpper":0.143,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.619,"mouthLowerDownRight":0.61,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.083,"browDownRight":0.083,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.021,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.4999999999999996,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.018,"eyeSquintLeft":0.126,"eyeWideLeft":0.16,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.013,"eyeLookUpRight":0.018,"eyeSquintRight":0.126,"eyeWideRight":0.161,"jawForward":0.188,"jawLeft":0.037,"jawRight":0,"jawOpen":0.419,"mouthClose":0.156,"mouthFunnel":0.168,"mouthPucker":0.088,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.142,"mouthSmileRight":0.165,"mouthFrownLeft":-0.003,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.082,"mouthRollUpper":0.133,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.595,"mouthLowerDownRight":0.583,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.083,"browDownRight":0.083,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.022,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.5166666666666662,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.016,"eyeSquintLeft":0.125,"eyeWideLeft":0.161,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.013,"eyeLookUpRight":0.016,"eyeSquintRight":0.125,"eyeWideRight":0.161,"jawForward":0.179,"jawLeft":0.037,"jawRight":0,"jawOpen":0.407,"mouthClose":0.153,"mouthFunnel":0.178,"mouthPucker":0.076,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.12,"mouthSmileRight":0.143,"mouthFrownLeft":0.005,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.083,"mouthRollUpper":0.125,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.567,"mouthLowerDownRight":0.554,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.084,"browDownRight":0.084,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.023,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.5333333333333328,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.124,"eyeLookOutLeft":0,"eyeLookUpLeft":0.013,"eyeSquintLeft":0.125,"eyeWideLeft":0.16,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.012,"eyeLookUpRight":0.013,"eyeSquintRight":0.125,"eyeWideRight":0.16,"jawForward":0.194,"jawLeft":0.037,"jawRight":0,"jawOpen":0.443,"mouthClose":0.21,"mouthFunnel":0.169,"mouthPucker":0.072,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.089,"mouthSmileRight":0.118,"mouthFrownLeft":0.014,"mouthFrownRight":0.022,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.111,"mouthRollUpper":0.158,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.532,"mouthLowerDownRight":0.518,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.084,"browDownRight":0.084,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.024,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.5499999999999994,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.12,"eyeLookOutLeft":0,"eyeLookUpLeft":0.004,"eyeSquintLeft":0.124,"eyeWideLeft":0.14,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0,"eyeLookOutRight":0.008,"eyeLookUpRight":0.004,"eyeSquintRight":0.124,"eyeWideRight":0.14,"jawForward":0.215,"jawLeft":0.037,"jawRight":0,"jawOpen":0.496,"mouthClose":0.306,"mouthFunnel":0.146,"mouthPucker":0.097,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.064,"mouthSmileRight":0.098,"mouthFrownLeft":0.018,"mouthFrownRight":0.022,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.069,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.152,"mouthRollUpper":0.21,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.491,"mouthLowerDownRight":0.476,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.084,"browDownRight":0.084,"browInnerUp":0.085,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.024,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.566666666666666,"blendshapes":{"eyeBlinkLeft":0.004,"eyeLookDownLeft":0.01,"eyeLookInLeft":0.114,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.125,"eyeWideLeft":0.079,"eyeBlinkRight":0.004,"eyeLookDownRight":0.01,"eyeLookInRight":0,"eyeLookOutRight":0.002,"eyeLookUpRight":0,"eyeSquintRight":0.125,"eyeWideRight":0.079,"jawForward":0.225,"jawLeft":0.037,"jawRight":0,"jawOpen":0.547,"mouthClose":0.411,"mouthFunnel":0.132,"mouthPucker":0.154,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.043,"mouthSmileRight":0.079,"mouthFrownLeft":0.024,"mouthFrownRight":0.022,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.069,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.187,"mouthRollUpper":0.248,"mouthShrugLower":0.024,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.448,"mouthLowerDownRight":0.432,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.084,"browDownRight":0.084,"browInnerUp":0.085,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.024,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.5833333333333326,"blendshapes":{"eyeBlinkLeft":0.174,"eyeLookDownLeft":0.079,"eyeLookInLeft":0.106,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.149,"eyeWideLeft":0,"eyeBlinkRight":0.174,"eyeLookDownRight":0.079,"eyeLookInRight":0.006,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.149,"eyeWideRight":0,"jawForward":0.215,"jawLeft":0.037,"jawRight":0,"jawOpen":0.58,"mouthClose":0.496,"mouthFunnel":0.138,"mouthPucker":0.231,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":0.02,"mouthSmileRight":0.056,"mouthFrownLeft":0.037,"mouthFrownRight":0.022,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.069,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.201,"mouthRollUpper":0.253,"mouthShrugLower":0.024,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.406,"mouthLowerDownRight":0.391,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.084,"browDownRight":0.084,"browInnerUp":0.088,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.024,"leftEyeRoll":-0.002,"rightEyeRoll":0}},{"time":1.5999999999999992,"blendshapes":{"eyeBlinkLeft":0.391,"eyeLookDownLeft":0.205,"eyeLookInLeft":0.079,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.183,"eyeWideLeft":0,"eyeBlinkRight":0.391,"eyeLookDownRight":0.205,"eyeLookInRight":0.031,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.183,"eyeWideRight":0,"jawForward":0.197,"jawLeft":0.037,"jawRight":0,"jawOpen":0.587,"mouthClose":0.546,"mouthFunnel":0.147,"mouthPucker":0.289,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":0.007,"mouthSmileRight":0.04,"mouthFrownLeft":0.043,"mouthFrownRight":0.022,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.069,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.205,"mouthRollUpper":0.244,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.371,"mouthLowerDownRight":0.358,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.084,"browDownRight":0.084,"browInnerUp":0.094,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.025,"leftEyeRoll":-0.003,"rightEyeRoll":0.001}},{"time":1.6166666666666658,"blendshapes":{"eyeBlinkLeft":0.581,"eyeLookDownLeft":0.344,"eyeLookInLeft":0.067,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.2,"eyeWideLeft":0,"eyeBlinkRight":0.58,"eyeLookDownRight":0.344,"eyeLookInRight":0.042,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.2,"eyeWideRight":0,"jawForward":0.192,"jawLeft":0.037,"jawRight":0,"jawOpen":0.6,"mouthClose":0.586,"mouthFunnel":0.136,"mouthPucker":0.336,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":0.002,"mouthSmileRight":0.035,"mouthFrownLeft":0.042,"mouthFrownRight":0.022,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.069,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.215,"mouthRollUpper":0.249,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.35,"mouthLowerDownRight":0.338,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.081,"browDownRight":0.081,"browInnerUp":0.102,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.026,"leftEyeRoll":-0.004,"rightEyeRoll":0.003}},{"time":1.6333333333333324,"blendshapes":{"eyeBlinkLeft":0.848,"eyeLookDownLeft":0.271,"eyeLookInLeft":0.049,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.2,"eyeWideLeft":0,"eyeBlinkRight":0.848,"eyeLookDownRight":0.271,"eyeLookInRight":0.059,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.2,"eyeWideRight":0,"jawForward":0.185,"jawLeft":0.035,"jawRight":0,"jawOpen":0.543,"mouthClose":0.543,"mouthFunnel":0.102,"mouthPucker":0.323,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.02,"mouthSmileRight":0.05,"mouthFrownLeft":0.022,"mouthFrownRight":0.021,"mouthDimpleLeft":0.072,"mouthDimpleRight":0.065,"mouthStretchLeft":0.155,"mouthStretchRight":0.125,"mouthRollLower":0.211,"mouthRollUpper":0.244,"mouthShrugLower":0.023,"mouthShrugUpper":0.124,"mouthPressLeft":0.029,"mouthPressRight":0.03,"mouthLowerDownLeft":0.33,"mouthLowerDownRight":0.32,"mouthUpperUpLeft":0.025,"mouthUpperUpRight":0.026,"browDownLeft":0.08,"browDownRight":0.08,"browInnerUp":0.107,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.027,"cheekSquintLeft":0.068,"cheekSquintRight":0.074,"noseSneerLeft":0.048,"noseSneerRight":0.049,"tongueOut":0,"headRoll":0.028,"leftEyeRoll":-0.002,"rightEyeRoll":0.003}},{"time":1.649999999999999,"blendshapes":{"eyeBlinkLeft":0.87,"eyeLookDownLeft":0.293,"eyeLookInLeft":0.048,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.201,"eyeWideLeft":0,"eyeBlinkRight":0.869,"eyeLookDownRight":0.293,"eyeLookInRight":0.059,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.2,"eyeWideRight":0,"jawForward":0.167,"jawLeft":0.033,"jawRight":0,"jawOpen":0.474,"mouthClose":0.478,"mouthFunnel":0.085,"mouthPucker":0.293,"mouthLeft":0.013,"mouthRight":0.005,"mouthSmileLeft":0.038,"mouthSmileRight":0.063,"mouthFrownLeft":0.008,"mouthFrownRight":0.019,"mouthDimpleLeft":0.067,"mouthDimpleRight":0.061,"mouthStretchLeft":0.144,"mouthStretchRight":0.116,"mouthRollLower":0.191,"mouthRollUpper":0.222,"mouthShrugLower":0.022,"mouthShrugUpper":0.116,"mouthPressLeft":0.027,"mouthPressRight":0.028,"mouthLowerDownLeft":0.312,"mouthLowerDownRight":0.303,"mouthUpperUpLeft":0.023,"mouthUpperUpRight":0.024,"browDownLeft":0.08,"browDownRight":0.08,"browInnerUp":0.11,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.025,"cheekSquintLeft":0.063,"cheekSquintRight":0.069,"noseSneerLeft":0.045,"noseSneerRight":0.046,"tongueOut":0,"headRoll":0.029,"leftEyeRoll":-0.003,"rightEyeRoll":0.003}},{"time":1.6666666666666656,"blendshapes":{"eyeBlinkLeft":0.628,"eyeLookDownLeft":0.342,"eyeLookInLeft":0.1,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.206,"eyeWideLeft":0,"eyeBlinkRight":0.628,"eyeLookDownRight":0.342,"eyeLookInRight":0.009,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.206,"eyeWideRight":0,"jawForward":0.147,"jawLeft":0.032,"jawRight":0,"jawOpen":0.437,"mouthClose":0.428,"mouthFunnel":0.104,"mouthPucker":0.268,"mouthLeft":0.012,"mouthRight":0.005,"mouthSmileLeft":0.052,"mouthSmileRight":0.076,"mouthFrownLeft":0.002,"mouthFrownRight":0.019,"mouthDimpleLeft":0.066,"mouthDimpleRight":0.06,"mouthStretchLeft":0.142,"mouthStretchRight":0.114,"mouthRollLower":0.169,"mouthRollUpper":0.196,"mouthShrugLower":0.021,"mouthShrugUpper":0.114,"mouthPressLeft":0.026,"mouthPressRight":0.028,"mouthLowerDownLeft":0.321,"mouthLowerDownRight":0.31,"mouthUpperUpLeft":0.023,"mouthUpperUpRight":0.023,"browDownLeft":0.08,"browDownRight":0.08,"browInnerUp":0.112,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.025,"cheekSquintLeft":0.062,"cheekSquintRight":0.068,"noseSneerLeft":0.044,"noseSneerRight":0.045,"tongueOut":0,"headRoll":0.029,"leftEyeRoll":-0.006,"rightEyeRoll":0.001}},{"time":1.6833333333333322,"blendshapes":{"eyeBlinkLeft":0.454,"eyeLookDownLeft":0.252,"eyeLookInLeft":0.084,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.21,"eyeWideLeft":0,"eyeBlinkRight":0.454,"eyeLookDownRight":0.252,"eyeLookInRight":0.026,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.21,"eyeWideRight":0,"jawForward":0.137,"jawLeft":0.035,"jawRight":0,"jawOpen":0.437,"mouthClose":0.399,"mouthFunnel":0.152,"mouthPucker":0.246,"mouthLeft":0.013,"mouthRight":0.005,"mouthSmileLeft":0.065,"mouthSmileRight":0.092,"mouthFrownLeft":0,"mouthFrownRight":0.02,"mouthDimpleLeft":0.071,"mouthDimpleRight":0.064,"mouthStretchLeft":0.153,"mouthStretchRight":0.123,"mouthRollLower":0.153,"mouthRollUpper":0.18,"mouthShrugLower":0.023,"mouthShrugUpper":0.123,"mouthPressLeft":0.029,"mouthPressRight":0.03,"mouthLowerDownLeft":0.368,"mouthLowerDownRight":0.353,"mouthUpperUpLeft":0.025,"mouthUpperUpRight":0.025,"browDownLeft":0.079,"browDownRight":0.079,"browInnerUp":0.112,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.026,"cheekSquintLeft":0.067,"cheekSquintRight":0.073,"noseSneerLeft":0.048,"noseSneerRight":0.049,"tongueOut":0,"headRoll":0.029,"leftEyeRoll":-0.004,"rightEyeRoll":0.001}},{"time":1.6999999999999988,"blendshapes":{"eyeBlinkLeft":0.339,"eyeLookDownLeft":0.191,"eyeLookInLeft":0.085,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.212,"eyeWideLeft":0,"eyeBlinkRight":0.339,"eyeLookDownRight":0.191,"eyeLookInRight":0.026,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.212,"eyeWideRight":0,"jawForward":0.129,"jawLeft":0.037,"jawRight":0,"jawOpen":0.426,"mouthClose":0.35,"mouthFunnel":0.204,"mouthPucker":0.202,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":0.072,"mouthSmileRight":0.1,"mouthFrownLeft":0.001,"mouthFrownRight":0.021,"mouthDimpleLeft":0.076,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.135,"mouthRollUpper":0.164,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.411,"mouthLowerDownRight":0.396,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.079,"browDownRight":0.079,"browInnerUp":0.113,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.027,"leftEyeRoll":-0.003,"rightEyeRoll":0.001}},{"time":1.7166666666666655,"blendshapes":{"eyeBlinkLeft":0.227,"eyeLookDownLeft":0.118,"eyeLookInLeft":0.102,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.211,"eyeWideLeft":0,"eyeBlinkRight":0.227,"eyeLookDownRight":0.119,"eyeLookInRight":0.009,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.211,"eyeWideRight":0,"jawForward":0.121,"jawLeft":0.037,"jawRight":0,"jawOpen":0.4,"mouthClose":0.292,"mouthFunnel":0.234,"mouthPucker":0.163,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.068,"mouthSmileRight":0.093,"mouthFrownLeft":0.007,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.114,"mouthRollUpper":0.14,"mouthShrugLower":0.025,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.425,"mouthLowerDownRight":0.412,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.079,"browDownRight":0.078,"browInnerUp":0.112,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.025,"leftEyeRoll":-0.002,"rightEyeRoll":0}},{"time":1.733333333333332,"blendshapes":{"eyeBlinkLeft":0.154,"eyeLookDownLeft":0.074,"eyeLookInLeft":0.098,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.203,"eyeWideLeft":0,"eyeBlinkRight":0.154,"eyeLookDownRight":0.074,"eyeLookInRight":0.013,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.203,"eyeWideRight":0,"jawForward":0.116,"jawLeft":0.037,"jawRight":0,"jawOpen":0.39,"mouthClose":0.261,"mouthFunnel":0.255,"mouthPucker":0.146,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.06,"mouthSmileRight":0.082,"mouthFrownLeft":0.014,"mouthFrownRight":0.021,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.099,"mouthRollUpper":0.121,"mouthShrugLower":0.025,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.436,"mouthLowerDownRight":0.424,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.078,"browDownRight":0.078,"browInnerUp":0.112,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.023,"leftEyeRoll":-0.001,"rightEyeRoll":0}},{"time":1.7499999999999987,"blendshapes":{"eyeBlinkLeft":0.104,"eyeLookDownLeft":0.037,"eyeLookInLeft":0.105,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.191,"eyeWideLeft":0,"eyeBlinkRight":0.104,"eyeLookDownRight":0.037,"eyeLookInRight":0.007,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.191,"eyeWideRight":0,"jawForward":0.11,"jawLeft":0.037,"jawRight":0,"jawOpen":0.395,"mouthClose":0.257,"mouthFunnel":0.276,"mouthPucker":0.147,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.044,"mouthSmileRight":0.061,"mouthFrownLeft":0.026,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.091,"mouthRollUpper":0.106,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.434,"mouthLowerDownRight":0.422,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.076,"browDownRight":0.076,"browInnerUp":0.111,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.021,"leftEyeRoll":-0.001,"rightEyeRoll":0}},{"time":1.7666666666666653,"blendshapes":{"eyeBlinkLeft":0.076,"eyeLookDownLeft":0.016,"eyeLookInLeft":0.107,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.181,"eyeWideLeft":0,"eyeBlinkRight":0.076,"eyeLookDownRight":0.016,"eyeLookInRight":0.005,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.181,"eyeWideRight":0,"jawForward":0.107,"jawLeft":0.037,"jawRight":0,"jawOpen":0.418,"mouthClose":0.278,"mouthFunnel":0.297,"mouthPucker":0.163,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.022,"mouthSmileRight":0.035,"mouthFrownLeft":0.043,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.089,"mouthRollUpper":0.099,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.422,"mouthLowerDownRight":0.408,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.072,"browDownRight":0.072,"browInnerUp":0.111,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.7833333333333319,"blendshapes":{"eyeBlinkLeft":0.039,"eyeLookDownLeft":0.011,"eyeLookInLeft":0.112,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.169,"eyeWideLeft":0,"eyeBlinkRight":0.039,"eyeLookDownRight":0.011,"eyeLookInRight":0,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.169,"eyeWideRight":0,"jawForward":0.109,"jawLeft":0.037,"jawRight":0,"jawOpen":0.454,"mouthClose":0.312,"mouthFunnel":0.311,"mouthPucker":0.183,"mouthLeft":0.014,"mouthRight":0.005,"mouthSmileLeft":0.004,"mouthSmileRight":0.015,"mouthFrownLeft":0.061,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.094,"mouthRollUpper":0.102,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.41,"mouthLowerDownRight":0.393,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.066,"browDownRight":0.066,"browInnerUp":0.11,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.7999999999999985,"blendshapes":{"eyeBlinkLeft":0.019,"eyeLookDownLeft":0.007,"eyeLookInLeft":0.106,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.161,"eyeWideLeft":0,"eyeBlinkRight":0.019,"eyeLookDownRight":0.008,"eyeLookInRight":0.006,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.161,"eyeWideRight":0,"jawForward":0.116,"jawLeft":0.037,"jawRight":0,"jawOpen":0.487,"mouthClose":0.344,"mouthFunnel":0.31,"mouthPucker":0.191,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.007,"mouthSmileRight":0.006,"mouthFrownLeft":0.071,"mouthFrownRight":0.022,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.102,"mouthRollUpper":0.112,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.406,"mouthLowerDownRight":0.386,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.062,"browDownRight":0.062,"browInnerUp":0.11,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.816666666666665,"blendshapes":{"eyeBlinkLeft":0.01,"eyeLookDownLeft":0.006,"eyeLookInLeft":0.102,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.154,"eyeWideLeft":0,"eyeBlinkRight":0.01,"eyeLookDownRight":0.006,"eyeLookInRight":0.011,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.154,"eyeWideRight":0,"jawForward":0.117,"jawLeft":0.037,"jawRight":0,"jawOpen":0.538,"mouthClose":0.411,"mouthFunnel":0.328,"mouthPucker":0.236,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.028,"mouthSmileRight":-0.013,"mouthFrownLeft":0.094,"mouthFrownRight":0.023,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.164,"mouthStretchRight":0.132,"mouthRollLower":0.114,"mouthRollUpper":0.121,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.379,"mouthLowerDownRight":0.359,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.06,"browDownRight":0.06,"browInnerUp":0.109,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.021,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.8333333333333317,"blendshapes":{"eyeBlinkLeft":0.005,"eyeLookDownLeft":0.007,"eyeLookInLeft":0.099,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.149,"eyeWideLeft":0.006,"eyeBlinkRight":0.005,"eyeLookDownRight":0.007,"eyeLookInRight":0.013,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.149,"eyeWideRight":0.006,"jawForward":0.113,"jawLeft":0.037,"jawRight":0,"jawOpen":0.587,"mouthClose":0.499,"mouthFunnel":0.321,"mouthPucker":0.333,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.038,"mouthSmileRight":-0.023,"mouthFrownLeft":0.111,"mouthFrownRight":0.023,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.133,"mouthRollUpper":0.13,"mouthShrugLower":0.024,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.345,"mouthLowerDownRight":0.326,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.059,"browDownRight":0.059,"browInnerUp":0.109,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.8499999999999983,"blendshapes":{"eyeBlinkLeft":0.002,"eyeLookDownLeft":0.002,"eyeLookInLeft":0.096,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.147,"eyeWideLeft":0.017,"eyeBlinkRight":0.002,"eyeLookDownRight":0.002,"eyeLookInRight":0.017,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.147,"eyeWideRight":0.017,"jawForward":0.106,"jawLeft":0.037,"jawRight":0,"jawOpen":0.617,"mouthClose":0.57,"mouthFunnel":0.307,"mouthPucker":0.429,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.04,"mouthSmileRight":-0.028,"mouthFrownLeft":0.12,"mouthFrownRight":0.023,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.149,"mouthRollUpper":0.135,"mouthShrugLower":0.025,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.312,"mouthLowerDownRight":0.296,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.058,"browDownRight":0.058,"browInnerUp":0.108,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.071,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.866666666666665,"blendshapes":{"eyeBlinkLeft":0.001,"eyeLookDownLeft":0,"eyeLookInLeft":0.095,"eyeLookOutLeft":0,"eyeLookUpLeft":0.002,"eyeSquintLeft":0.145,"eyeWideLeft":0.029,"eyeBlinkRight":0.001,"eyeLookDownRight":0,"eyeLookInRight":0.017,"eyeLookOutRight":0,"eyeLookUpRight":0.002,"eyeSquintRight":0.145,"eyeWideRight":0.029,"jawForward":0.097,"jawLeft":0.037,"jawRight":0,"jawOpen":0.625,"mouthClose":0.609,"mouthFunnel":0.297,"mouthPucker":0.493,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.039,"mouthSmileRight":-0.031,"mouthFrownLeft":0.122,"mouthFrownRight":0.023,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.158,"mouthRollUpper":0.136,"mouthShrugLower":0.025,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.286,"mouthLowerDownRight":0.274,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.057,"browDownRight":0.057,"browInnerUp":0.107,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.071,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.8833333333333315,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.096,"eyeLookOutLeft":0,"eyeLookUpLeft":0.001,"eyeSquintLeft":0.144,"eyeWideLeft":0.043,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.017,"eyeLookOutRight":0,"eyeLookUpRight":0.001,"eyeSquintRight":0.144,"eyeWideRight":0.043,"jawForward":0.089,"jawLeft":0.037,"jawRight":0,"jawOpen":0.617,"mouthClose":0.622,"mouthFunnel":0.292,"mouthPucker":0.523,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.036,"mouthSmileRight":-0.031,"mouthFrownLeft":0.119,"mouthFrownRight":0.023,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.16,"mouthRollUpper":0.134,"mouthShrugLower":0.025,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.271,"mouthLowerDownRight":0.263,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.057,"browDownRight":0.057,"browInnerUp":0.106,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.071,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.02,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.8999999999999981,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.002,"eyeLookInLeft":0.095,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.143,"eyeWideLeft":0.058,"eyeBlinkRight":0,"eyeLookDownRight":0.002,"eyeLookInRight":0.017,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.143,"eyeWideRight":0.058,"jawForward":0.084,"jawLeft":0.037,"jawRight":0,"jawOpen":0.614,"mouthClose":0.637,"mouthFunnel":0.287,"mouthPucker":0.549,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.031,"mouthSmileRight":-0.027,"mouthFrownLeft":0.113,"mouthFrownRight":0.023,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.164,"mouthRollUpper":0.137,"mouthShrugLower":0.025,"mouthShrugUpper":0.132,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.263,"mouthLowerDownRight":0.257,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.057,"browDownRight":0.057,"browInnerUp":0.106,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.071,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.019,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.9166666666666647,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.002,"eyeLookInLeft":0.094,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.142,"eyeWideLeft":0.069,"eyeBlinkRight":0,"eyeLookDownRight":0.002,"eyeLookInRight":0.018,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.142,"eyeWideRight":0.069,"jawForward":0.081,"jawLeft":0.037,"jawRight":0,"jawOpen":0.6,"mouthClose":0.639,"mouthFunnel":0.281,"mouthPucker":0.547,"mouthLeft":0.014,"mouthRight":0.006,"mouthSmileLeft":-0.026,"mouthSmileRight":-0.023,"mouthFrownLeft":0.102,"mouthFrownRight":0.023,"mouthDimpleLeft":0.075,"mouthDimpleRight":0.068,"mouthStretchLeft":0.163,"mouthStretchRight":0.131,"mouthRollLower":0.166,"mouthRollUpper":0.142,"mouthShrugLower":0.025,"mouthShrugUpper":0.131,"mouthPressLeft":0.03,"mouthPressRight":0.032,"mouthLowerDownLeft":0.258,"mouthLowerDownRight":0.255,"mouthUpperUpLeft":0.026,"mouthUpperUpRight":0.027,"browDownLeft":0.057,"browDownRight":0.057,"browInnerUp":0.105,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.028,"cheekSquintLeft":0.072,"cheekSquintRight":0.078,"noseSneerLeft":0.051,"noseSneerRight":0.052,"tongueOut":0,"headRoll":0.018,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.9333333333333313,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.001,"eyeLookInLeft":0.091,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.141,"eyeWideLeft":0.076,"eyeBlinkRight":0,"eyeLookDownRight":0.001,"eyeLookInRight":0.022,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.141,"eyeWideRight":0.076,"jawForward":0.077,"jawLeft":0.035,"jawRight":0,"jawOpen":0.551,"mouthClose":0.595,"mouthFunnel":0.266,"mouthPucker":0.493,"mouthLeft":0.013,"mouthRight":0.005,"mouthSmileLeft":-0.022,"mouthSmileRight":-0.017,"mouthFrownLeft":0.087,"mouthFrownRight":0.022,"mouthDimpleLeft":0.071,"mouthDimpleRight":0.065,"mouthStretchLeft":0.155,"mouthStretchRight":0.125,"mouthRollLower":0.157,"mouthRollUpper":0.139,"mouthShrugLower":0.023,"mouthShrugUpper":0.125,"mouthPressLeft":0.029,"mouthPressRight":0.03,"mouthLowerDownLeft":0.245,"mouthLowerDownRight":0.245,"mouthUpperUpLeft":0.025,"mouthUpperUpRight":0.026,"browDownLeft":0.057,"browDownRight":0.057,"browInnerUp":0.104,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.027,"cheekSquintLeft":0.068,"cheekSquintRight":0.074,"noseSneerLeft":0.048,"noseSneerRight":0.049,"tongueOut":0,"headRoll":0.016,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.949999999999998,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.001,"eyeLookInLeft":0.09,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.141,"eyeWideLeft":0.079,"eyeBlinkRight":0,"eyeLookDownRight":0.001,"eyeLookInRight":0.022,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.141,"eyeWideRight":0.08,"jawForward":0.072,"jawLeft":0.033,"jawRight":0,"jawOpen":0.483,"mouthClose":0.517,"mouthFunnel":0.25,"mouthPucker":0.413,"mouthLeft":0.013,"mouthRight":0.005,"mouthSmileLeft":-0.018,"mouthSmileRight":-0.012,"mouthFrownLeft":0.073,"mouthFrownRight":0.02,"mouthDimpleLeft":0.066,"mouthDimpleRight":0.06,"mouthStretchLeft":0.144,"mouthStretchRight":0.116,"mouthRollLower":0.138,"mouthRollUpper":0.126,"mouthShrugLower":0.022,"mouthShrugUpper":0.116,"mouthPressLeft":0.027,"mouthPressRight":0.028,"mouthLowerDownLeft":0.232,"mouthLowerDownRight":0.235,"mouthUpperUpLeft":0.023,"mouthUpperUpRight":0.024,"browDownLeft":0.057,"browDownRight":0.057,"browInnerUp":0.103,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.025,"cheekSquintLeft":0.063,"cheekSquintRight":0.069,"noseSneerLeft":0.045,"noseSneerRight":0.046,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.9666666666666646,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.09,"eyeLookOutLeft":0,"eyeLookUpLeft":0.001,"eyeSquintLeft":0.14,"eyeWideLeft":0.081,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.023,"eyeLookOutRight":0,"eyeLookUpRight":0.001,"eyeSquintRight":0.14,"eyeWideRight":0.081,"jawForward":0.064,"jawLeft":0.03,"jawRight":0,"jawOpen":0.41,"mouthClose":0.429,"mouthFunnel":0.234,"mouthPucker":0.332,"mouthLeft":0.011,"mouthRight":0.005,"mouthSmileLeft":-0.013,"mouthSmileRight":-0.007,"mouthFrownLeft":0.06,"mouthFrownRight":0.018,"mouthDimpleLeft":0.061,"mouthDimpleRight":0.055,"mouthStretchLeft":0.132,"mouthStretchRight":0.106,"mouthRollLower":0.116,"mouthRollUpper":0.106,"mouthShrugLower":0.02,"mouthShrugUpper":0.107,"mouthPressLeft":0.025,"mouthPressRight":0.026,"mouthLowerDownLeft":0.22,"mouthLowerDownRight":0.225,"mouthUpperUpLeft":0.021,"mouthUpperUpRight":0.022,"browDownLeft":0.058,"browDownRight":0.058,"browInnerUp":0.102,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.023,"cheekSquintLeft":0.058,"cheekSquintRight":0.063,"noseSneerLeft":0.041,"noseSneerRight":0.042,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.9833333333333312,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.089,"eyeLookOutLeft":0,"eyeLookUpLeft":0.004,"eyeSquintLeft":0.14,"eyeWideLeft":0.083,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.024,"eyeLookOutRight":0,"eyeLookUpRight":0.004,"eyeSquintRight":0.14,"eyeWideRight":0.083,"jawForward":0.056,"jawLeft":0.027,"jawRight":0,"jawOpen":0.344,"mouthClose":0.349,"mouthFunnel":0.215,"mouthPucker":0.265,"mouthLeft":0.01,"mouthRight":0.004,"mouthSmileLeft":-0.007,"mouthSmileRight":-0.002,"mouthFrownLeft":0.05,"mouthFrownRight":0.016,"mouthDimpleLeft":0.055,"mouthDimpleRight":0.05,"mouthStretchLeft":0.121,"mouthStretchRight":0.097,"mouthRollLower":0.096,"mouthRollUpper":0.087,"mouthShrugLower":0.018,"mouthShrugUpper":0.097,"mouthPressLeft":0.023,"mouthPressRight":0.024,"mouthLowerDownLeft":0.207,"mouthLowerDownRight":0.212,"mouthUpperUpLeft":0.019,"mouthUpperUpRight":0.02,"browDownLeft":0.059,"browDownRight":0.059,"browInnerUp":0.101,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.021,"cheekSquintLeft":0.053,"cheekSquintRight":0.058,"noseSneerLeft":0.038,"noseSneerRight":0.038,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":1.9999999999999978,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.088,"eyeLookOutLeft":0,"eyeLookUpLeft":0.005,"eyeSquintLeft":0.139,"eyeWideLeft":0.085,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.024,"eyeLookOutRight":0,"eyeLookUpRight":0.005,"eyeSquintRight":0.139,"eyeWideRight":0.085,"jawForward":0.052,"jawLeft":0.025,"jawRight":0,"jawOpen":0.291,"mouthClose":0.29,"mouthFunnel":0.191,"mouthPucker":0.213,"mouthLeft":0.01,"mouthRight":0.004,"mouthSmileLeft":-0.001,"mouthSmileRight":0.004,"mouthFrownLeft":0.039,"mouthFrownRight":0.015,"mouthDimpleLeft":0.051,"mouthDimpleRight":0.046,"mouthStretchLeft":0.111,"mouthStretchRight":0.089,"mouthRollLower":0.084,"mouthRollUpper":0.076,"mouthShrugLower":0.017,"mouthShrugUpper":0.09,"mouthPressLeft":0.021,"mouthPressRight":0.022,"mouthLowerDownLeft":0.193,"mouthLowerDownRight":0.198,"mouthUpperUpLeft":0.018,"mouthUpperUpRight":0.018,"browDownLeft":0.06,"browDownRight":0.06,"browInnerUp":0.1,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.019,"cheekSquintLeft":0.049,"cheekSquintRight":0.053,"noseSneerLeft":0.035,"noseSneerRight":0.035,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.0166666666666644,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.088,"eyeLookOutLeft":0,"eyeLookUpLeft":0.007,"eyeSquintLeft":0.139,"eyeWideLeft":0.087,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.025,"eyeLookOutRight":0,"eyeLookUpRight":0.007,"eyeSquintRight":0.139,"eyeWideRight":0.087,"jawForward":0.05,"jawLeft":0.023,"jawRight":0,"jawOpen":0.252,"mouthClose":0.247,"mouthFunnel":0.171,"mouthPucker":0.174,"mouthLeft":0.009,"mouthRight":0.003,"mouthSmileLeft":0.002,"mouthSmileRight":0.006,"mouthFrownLeft":0.032,"mouthFrownRight":0.014,"mouthDimpleLeft":0.047,"mouthDimpleRight":0.043,"mouthStretchLeft":0.103,"mouthStretchRight":0.083,"mouthRollLower":0.076,"mouthRollUpper":0.069,"mouthShrugLower":0.015,"mouthShrugUpper":0.083,"mouthPressLeft":0.019,"mouthPressRight":0.02,"mouthLowerDownLeft":0.18,"mouthLowerDownRight":0.183,"mouthUpperUpLeft":0.016,"mouthUpperUpRight":0.017,"browDownLeft":0.061,"browDownRight":0.061,"browInnerUp":0.099,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.018,"cheekSquintLeft":0.045,"cheekSquintRight":0.049,"noseSneerLeft":0.032,"noseSneerRight":0.033,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.033333333333331,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.087,"eyeLookOutLeft":0,"eyeLookUpLeft":0.008,"eyeSquintLeft":0.139,"eyeWideLeft":0.09,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.025,"eyeLookOutRight":0,"eyeLookUpRight":0.008,"eyeSquintRight":0.139,"eyeWideRight":0.09,"jawForward":0.049,"jawLeft":0.022,"jawRight":0,"jawOpen":0.229,"mouthClose":0.223,"mouthFunnel":0.151,"mouthPucker":0.155,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.004,"mouthSmileRight":0.008,"mouthFrownLeft":0.028,"mouthFrownRight":0.013,"mouthDimpleLeft":0.044,"mouthDimpleRight":0.04,"mouthStretchLeft":0.095,"mouthStretchRight":0.077,"mouthRollLower":0.072,"mouthRollUpper":0.066,"mouthShrugLower":0.014,"mouthShrugUpper":0.077,"mouthPressLeft":0.018,"mouthPressRight":0.019,"mouthLowerDownLeft":0.168,"mouthLowerDownRight":0.17,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.016,"browDownLeft":0.063,"browDownRight":0.063,"browInnerUp":0.098,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.042,"cheekSquintRight":0.045,"noseSneerLeft":0.03,"noseSneerRight":0.03,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.0499999999999976,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.087,"eyeLookOutLeft":0,"eyeLookUpLeft":0.009,"eyeSquintLeft":0.139,"eyeWideLeft":0.093,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.026,"eyeLookOutRight":0,"eyeLookUpRight":0.009,"eyeSquintRight":0.139,"eyeWideRight":0.093,"jawForward":0.051,"jawLeft":0.021,"jawRight":0,"jawOpen":0.217,"mouthClose":0.206,"mouthFunnel":0.139,"mouthPucker":0.143,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.007,"mouthSmileRight":0.012,"mouthFrownLeft":0.024,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.038,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.07,"mouthRollUpper":0.064,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.167,"mouthLowerDownRight":0.169,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.065,"browDownRight":0.065,"browInnerUp":0.097,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.066666666666664,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.086,"eyeLookOutLeft":0,"eyeLookUpLeft":0.011,"eyeSquintLeft":0.138,"eyeWideLeft":0.096,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.027,"eyeLookOutRight":0,"eyeLookUpRight":0.011,"eyeSquintRight":0.138,"eyeWideRight":0.096,"jawForward":0.054,"jawLeft":0.021,"jawRight":0,"jawOpen":0.207,"mouthClose":0.188,"mouthFunnel":0.133,"mouthPucker":0.127,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.012,"mouthSmileRight":0.017,"mouthFrownLeft":0.021,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.068,"mouthRollUpper":0.064,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.175,"mouthLowerDownRight":0.175,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.066,"browDownRight":0.066,"browInnerUp":0.096,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.083333333333331,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.084,"eyeLookOutLeft":0,"eyeLookUpLeft":0.013,"eyeSquintLeft":0.138,"eyeWideLeft":0.102,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.028,"eyeLookOutRight":0,"eyeLookUpRight":0.013,"eyeSquintRight":0.138,"eyeWideRight":0.102,"jawForward":0.056,"jawLeft":0.021,"jawRight":0,"jawOpen":0.197,"mouthClose":0.173,"mouthFunnel":0.128,"mouthPucker":0.112,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.017,"mouthSmileRight":0.023,"mouthFrownLeft":0.017,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.067,"mouthRollUpper":0.064,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.181,"mouthLowerDownRight":0.18,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.067,"browDownRight":0.067,"browInnerUp":0.096,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.0999999999999974,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.083,"eyeLookOutLeft":0,"eyeLookUpLeft":0.015,"eyeSquintLeft":0.138,"eyeWideLeft":0.108,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.029,"eyeLookOutRight":0,"eyeLookUpRight":0.015,"eyeSquintRight":0.138,"eyeWideRight":0.108,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.201,"mouthClose":0.18,"mouthFunnel":0.127,"mouthPucker":0.12,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.017,"mouthSmileRight":0.023,"mouthFrownLeft":0.018,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.069,"mouthRollUpper":0.066,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.18,"mouthLowerDownRight":0.179,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.068,"browDownRight":0.068,"browInnerUp":0.095,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.116666666666664,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.082,"eyeLookOutLeft":0,"eyeLookUpLeft":0.016,"eyeSquintLeft":0.138,"eyeWideLeft":0.113,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.031,"eyeLookOutRight":0,"eyeLookUpRight":0.016,"eyeSquintRight":0.138,"eyeWideRight":0.113,"jawForward":0.055,"jawLeft":0.021,"jawRight":0,"jawOpen":0.192,"mouthClose":0.162,"mouthFunnel":0.134,"mouthPucker":0.102,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.014,"mouthSmileRight":0.021,"mouthFrownLeft":0.018,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.063,"mouthRollUpper":0.059,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.183,"mouthLowerDownRight":0.181,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.07,"browDownRight":0.07,"browInnerUp":0.094,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.1333333333333306,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.077,"eyeLookOutLeft":0,"eyeLookUpLeft":0.015,"eyeSquintLeft":0.138,"eyeWideLeft":0.117,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.035,"eyeLookOutRight":0,"eyeLookUpRight":0.015,"eyeSquintRight":0.138,"eyeWideRight":0.117,"jawForward":0.053,"jawLeft":0.021,"jawRight":0,"jawOpen":0.185,"mouthClose":0.149,"mouthFunnel":0.136,"mouthPucker":0.088,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.012,"mouthSmileRight":0.019,"mouthFrownLeft":0.018,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.059,"mouthRollUpper":0.054,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.185,"mouthLowerDownRight":0.183,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.072,"browDownRight":0.072,"browInnerUp":0.094,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.012,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.1499999999999972,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.073,"eyeLookOutLeft":0,"eyeLookUpLeft":0.012,"eyeSquintLeft":0.137,"eyeWideLeft":0.123,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.04,"eyeLookOutRight":0,"eyeLookUpRight":0.012,"eyeSquintRight":0.137,"eyeWideRight":0.123,"jawForward":0.052,"jawLeft":0.021,"jawRight":0,"jawOpen":0.179,"mouthClose":0.14,"mouthFunnel":0.136,"mouthPucker":0.078,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.01,"mouthSmileRight":0.019,"mouthFrownLeft":0.018,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.056,"mouthRollUpper":0.05,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.186,"mouthLowerDownRight":0.184,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.073,"browDownRight":0.073,"browInnerUp":0.093,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.011,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.166666666666664,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.068,"eyeLookOutLeft":0,"eyeLookUpLeft":0.008,"eyeSquintLeft":0.136,"eyeWideLeft":0.128,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.045,"eyeLookOutRight":0,"eyeLookUpRight":0.008,"eyeSquintRight":0.136,"eyeWideRight":0.128,"jawForward":0.051,"jawLeft":0.021,"jawRight":0,"jawOpen":0.174,"mouthClose":0.133,"mouthFunnel":0.134,"mouthPucker":0.07,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.01,"mouthSmileRight":0.019,"mouthFrownLeft":0.017,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.054,"mouthRollUpper":0.047,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.186,"mouthLowerDownRight":0.183,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.074,"browDownRight":0.074,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.01,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.1833333333333305,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.064,"eyeLookOutLeft":0,"eyeLookUpLeft":0.004,"eyeSquintLeft":0.135,"eyeWideLeft":0.132,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.049,"eyeLookOutRight":0,"eyeLookUpRight":0.004,"eyeSquintRight":0.135,"eyeWideRight":0.132,"jawForward":0.05,"jawLeft":0.021,"jawRight":0,"jawOpen":0.17,"mouthClose":0.128,"mouthFunnel":0.131,"mouthPucker":0.065,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.01,"mouthSmileRight":0.019,"mouthFrownLeft":0.016,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.053,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.186,"mouthLowerDownRight":0.182,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.075,"browDownRight":0.075,"browInnerUp":0.092,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.009,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.199999999999997,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.061,"eyeLookOutLeft":0,"eyeLookUpLeft":0.003,"eyeSquintLeft":0.134,"eyeWideLeft":0.136,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.052,"eyeLookOutRight":0,"eyeLookUpRight":0.003,"eyeSquintRight":0.134,"eyeWideRight":0.136,"jawForward":0.05,"jawLeft":0.021,"jawRight":0,"jawOpen":0.168,"mouthClose":0.126,"mouthFunnel":0.128,"mouthPucker":0.061,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.01,"mouthSmileRight":0.02,"mouthFrownLeft":0.015,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.053,"mouthRollUpper":0.045,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.186,"mouthLowerDownRight":0.181,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.076,"browDownRight":0.076,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.009,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.2166666666666637,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.061,"eyeLookOutLeft":0,"eyeLookUpLeft":0.002,"eyeSquintLeft":0.133,"eyeWideLeft":0.139,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.052,"eyeLookOutRight":0,"eyeLookUpRight":0.002,"eyeSquintRight":0.133,"eyeWideRight":0.139,"jawForward":0.05,"jawLeft":0.021,"jawRight":0,"jawOpen":0.166,"mouthClose":0.123,"mouthFunnel":0.125,"mouthPucker":0.058,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.011,"mouthSmileRight":0.02,"mouthFrownLeft":0.014,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.053,"mouthRollUpper":0.044,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.187,"mouthLowerDownRight":0.181,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.077,"browDownRight":0.077,"browInnerUp":0.091,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.009,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.2333333333333303,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.061,"eyeLookOutLeft":0,"eyeLookUpLeft":0.002,"eyeSquintLeft":0.132,"eyeWideLeft":0.14,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.052,"eyeLookOutRight":0,"eyeLookUpRight":0.002,"eyeSquintRight":0.132,"eyeWideRight":0.14,"jawForward":0.05,"jawLeft":0.021,"jawRight":0,"jawOpen":0.165,"mouthClose":0.122,"mouthFunnel":0.123,"mouthPucker":0.055,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.011,"mouthSmileRight":0.021,"mouthFrownLeft":0.013,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.053,"mouthRollUpper":0.044,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.187,"mouthLowerDownRight":0.181,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.077,"browDownRight":0.077,"browInnerUp":0.09,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.008,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.249999999999997,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.062,"eyeLookOutLeft":0,"eyeLookUpLeft":0.001,"eyeSquintLeft":0.131,"eyeWideLeft":0.142,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.051,"eyeLookOutRight":0,"eyeLookUpRight":0.001,"eyeSquintRight":0.131,"eyeWideRight":0.142,"jawForward":0.051,"jawLeft":0.021,"jawRight":0,"jawOpen":0.165,"mouthClose":0.121,"mouthFunnel":0.12,"mouthPucker":0.054,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.011,"mouthSmileRight":0.022,"mouthFrownLeft":0.013,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.053,"mouthRollUpper":0.044,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.187,"mouthLowerDownRight":0.18,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.078,"browDownRight":0.078,"browInnerUp":0.09,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.008,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.2666666666666635,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.062,"eyeLookOutLeft":0,"eyeLookUpLeft":0.001,"eyeSquintLeft":0.131,"eyeWideLeft":0.144,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.051,"eyeLookOutRight":0,"eyeLookUpRight":0.001,"eyeSquintRight":0.131,"eyeWideRight":0.144,"jawForward":0.051,"jawLeft":0.021,"jawRight":0,"jawOpen":0.165,"mouthClose":0.122,"mouthFunnel":0.119,"mouthPucker":0.054,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.012,"mouthSmileRight":0.022,"mouthFrownLeft":0.013,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.054,"mouthRollUpper":0.045,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.187,"mouthLowerDownRight":0.18,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.078,"browDownRight":0.078,"browInnerUp":0.09,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.008,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.28333333333333,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.062,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.13,"eyeWideLeft":0.145,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.05,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.13,"eyeWideRight":0.145,"jawForward":0.051,"jawLeft":0.021,"jawRight":0,"jawOpen":0.166,"mouthClose":0.123,"mouthFunnel":0.117,"mouthPucker":0.054,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.012,"mouthSmileRight":0.023,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.054,"mouthRollUpper":0.045,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.187,"mouthLowerDownRight":0.179,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.078,"browDownRight":0.078,"browInnerUp":0.089,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.008,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.2999999999999967,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.064,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.13,"eyeWideLeft":0.146,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.049,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.13,"eyeWideRight":0.146,"jawForward":0.052,"jawLeft":0.021,"jawRight":0,"jawOpen":0.167,"mouthClose":0.124,"mouthFunnel":0.116,"mouthPucker":0.054,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.012,"mouthSmileRight":0.023,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.054,"mouthRollUpper":0.045,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.188,"mouthLowerDownRight":0.18,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.078,"browDownRight":0.078,"browInnerUp":0.089,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.009,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.3166666666666633,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.067,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.129,"eyeWideLeft":0.146,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.046,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.129,"eyeWideRight":0.146,"jawForward":0.052,"jawLeft":0.021,"jawRight":0,"jawOpen":0.168,"mouthClose":0.124,"mouthFunnel":0.116,"mouthPucker":0.054,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.013,"mouthSmileRight":0.024,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.054,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.189,"mouthLowerDownRight":0.182,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.078,"browDownRight":0.078,"browInnerUp":0.089,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.009,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.33333333333333,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.07,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.129,"eyeWideLeft":0.147,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.043,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.129,"eyeWideRight":0.147,"jawForward":0.053,"jawLeft":0.021,"jawRight":0,"jawOpen":0.169,"mouthClose":0.123,"mouthFunnel":0.116,"mouthPucker":0.054,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.013,"mouthSmileRight":0.024,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.054,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.191,"mouthLowerDownRight":0.184,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.078,"browDownRight":0.078,"browInnerUp":0.089,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.01,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.3499999999999965,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.073,"eyeLookOutLeft":0,"eyeLookUpLeft":0.001,"eyeSquintLeft":0.129,"eyeWideLeft":0.147,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.039,"eyeLookOutRight":0,"eyeLookUpRight":0.001,"eyeSquintRight":0.129,"eyeWideRight":0.147,"jawForward":0.053,"jawLeft":0.021,"jawRight":0,"jawOpen":0.17,"mouthClose":0.122,"mouthFunnel":0.116,"mouthPucker":0.053,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.014,"mouthSmileRight":0.025,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.053,"mouthRollUpper":0.045,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.193,"mouthLowerDownRight":0.186,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.079,"browDownRight":0.079,"browInnerUp":0.088,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.011,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.366666666666663,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.076,"eyeLookOutLeft":0,"eyeLookUpLeft":0.001,"eyeSquintLeft":0.129,"eyeWideLeft":0.147,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.037,"eyeLookOutRight":0,"eyeLookUpRight":0.001,"eyeSquintRight":0.129,"eyeWideRight":0.147,"jawForward":0.054,"jawLeft":0.021,"jawRight":0,"jawOpen":0.171,"mouthClose":0.121,"mouthFunnel":0.117,"mouthPucker":0.053,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.014,"mouthSmileRight":0.025,"mouthFrownLeft":0.013,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.053,"mouthRollUpper":0.045,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.195,"mouthLowerDownRight":0.188,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.079,"browDownRight":0.079,"browInnerUp":0.088,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.012,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.3833333333333298,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.079,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.128,"eyeWideLeft":0.147,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.033,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.128,"eyeWideRight":0.147,"jawForward":0.054,"jawLeft":0.021,"jawRight":0,"jawOpen":0.172,"mouthClose":0.12,"mouthFunnel":0.117,"mouthPucker":0.052,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.015,"mouthSmileRight":0.026,"mouthFrownLeft":0.013,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.053,"mouthRollUpper":0.045,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.197,"mouthLowerDownRight":0.19,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.08,"browDownRight":0.079,"browInnerUp":0.088,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.3999999999999964,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.001,"eyeLookInLeft":0.079,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.128,"eyeWideLeft":0.148,"eyeBlinkRight":0,"eyeLookDownRight":0.001,"eyeLookInRight":0.034,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.128,"eyeWideRight":0.148,"jawForward":0.054,"jawLeft":0.021,"jawRight":0,"jawOpen":0.172,"mouthClose":0.119,"mouthFunnel":0.116,"mouthPucker":0.052,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.015,"mouthSmileRight":0.027,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.199,"mouthLowerDownRight":0.191,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.08,"browDownRight":0.08,"browInnerUp":0.087,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.416666666666663,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.001,"eyeLookInLeft":0.079,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.128,"eyeWideLeft":0.148,"eyeBlinkRight":0,"eyeLookDownRight":0.001,"eyeLookInRight":0.034,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.128,"eyeWideRight":0.148,"jawForward":0.055,"jawLeft":0.021,"jawRight":0,"jawOpen":0.173,"mouthClose":0.118,"mouthFunnel":0.116,"mouthPucker":0.051,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.016,"mouthSmileRight":0.027,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.2,"mouthLowerDownRight":0.192,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.081,"browDownRight":0.08,"browInnerUp":0.087,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.4333333333333296,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.002,"eyeLookInLeft":0.079,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.127,"eyeWideLeft":0.149,"eyeBlinkRight":0,"eyeLookDownRight":0.002,"eyeLookInRight":0.034,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.127,"eyeWideRight":0.149,"jawForward":0.055,"jawLeft":0.021,"jawRight":0,"jawOpen":0.173,"mouthClose":0.118,"mouthFunnel":0.115,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.017,"mouthSmileRight":0.028,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.201,"mouthLowerDownRight":0.193,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.081,"browDownRight":0.081,"browInnerUp":0.087,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.016,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.449999999999996,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.003,"eyeLookInLeft":0.078,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.127,"eyeWideLeft":0.149,"eyeBlinkRight":0,"eyeLookDownRight":0.003,"eyeLookInRight":0.035,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.127,"eyeWideRight":0.149,"jawForward":0.055,"jawLeft":0.021,"jawRight":0,"jawOpen":0.173,"mouthClose":0.117,"mouthFunnel":0.115,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.017,"mouthSmileRight":0.029,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.202,"mouthLowerDownRight":0.194,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.081,"browDownRight":0.081,"browInnerUp":0.086,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.466666666666663,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.004,"eyeLookInLeft":0.076,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.127,"eyeWideLeft":0.149,"eyeBlinkRight":0,"eyeLookDownRight":0.004,"eyeLookInRight":0.037,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.127,"eyeWideRight":0.149,"jawForward":0.056,"jawLeft":0.021,"jawRight":0,"jawOpen":0.173,"mouthClose":0.116,"mouthFunnel":0.115,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.018,"mouthSmileRight":0.029,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.203,"mouthLowerDownRight":0.195,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.081,"browDownRight":0.081,"browInnerUp":0.086,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.4833333333333294,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.004,"eyeLookInLeft":0.074,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.127,"eyeWideLeft":0.148,"eyeBlinkRight":0,"eyeLookDownRight":0.004,"eyeLookInRight":0.039,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.127,"eyeWideRight":0.148,"jawForward":0.056,"jawLeft":0.021,"jawRight":0,"jawOpen":0.173,"mouthClose":0.115,"mouthFunnel":0.115,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.019,"mouthSmileRight":0.03,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.204,"mouthLowerDownRight":0.196,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.081,"browDownRight":0.081,"browInnerUp":0.086,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.015,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.499999999999996,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.005,"eyeLookInLeft":0.069,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.127,"eyeWideLeft":0.145,"eyeBlinkRight":0,"eyeLookDownRight":0.005,"eyeLookInRight":0.044,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.127,"eyeWideRight":0.146,"jawForward":0.056,"jawLeft":0.021,"jawRight":0,"jawOpen":0.173,"mouthClose":0.115,"mouthFunnel":0.114,"mouthPucker":0.049,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.019,"mouthSmileRight":0.03,"mouthFrownLeft":0.011,"mouthFrownRight":0.012,"mouthDimpleLeft":0.042,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.204,"mouthLowerDownRight":0.197,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.082,"browDownRight":0.081,"browInnerUp":0.086,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.014,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.5166666666666626,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.003,"eyeLookInLeft":0.06,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.127,"eyeWideLeft":0.141,"eyeBlinkRight":0,"eyeLookDownRight":0.003,"eyeLookInRight":0.053,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.127,"eyeWideRight":0.141,"jawForward":0.056,"jawLeft":0.021,"jawRight":0,"jawOpen":0.172,"mouthClose":0.114,"mouthFunnel":0.114,"mouthPucker":0.049,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.02,"mouthSmileRight":0.031,"mouthFrownLeft":0.011,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.047,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.205,"mouthLowerDownRight":0.197,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.084,"browDownRight":0.084,"browInnerUp":0.085,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.013,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.533333333333329,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.054,"eyeLookOutLeft":0,"eyeLookUpLeft":0.003,"eyeSquintLeft":0.13,"eyeWideLeft":0.139,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.059,"eyeLookOutRight":0,"eyeLookUpRight":0.003,"eyeSquintRight":0.13,"eyeWideRight":0.139,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.172,"mouthClose":0.114,"mouthFunnel":0.114,"mouthPucker":0.049,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.02,"mouthSmileRight":0.031,"mouthFrownLeft":0.011,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.047,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.205,"mouthLowerDownRight":0.198,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.089,"browDownRight":0.089,"browInnerUp":0.085,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.012,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.549999999999996,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.047,"eyeLookOutLeft":0,"eyeLookUpLeft":0.015,"eyeSquintLeft":0.134,"eyeWideLeft":0.138,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.067,"eyeLookOutRight":0,"eyeLookUpRight":0.015,"eyeSquintRight":0.134,"eyeWideRight":0.139,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.172,"mouthClose":0.113,"mouthFunnel":0.114,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.021,"mouthSmileRight":0.032,"mouthFrownLeft":0.011,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.047,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.206,"mouthLowerDownRight":0.198,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.092,"browDownRight":0.092,"browInnerUp":0.084,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.012,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.5666666666666624,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.042,"eyeLookOutLeft":0,"eyeLookUpLeft":0.018,"eyeSquintLeft":0.136,"eyeWideLeft":0.138,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.071,"eyeLookOutRight":0,"eyeLookUpRight":0.018,"eyeSquintRight":0.136,"eyeWideRight":0.138,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.171,"mouthClose":0.113,"mouthFunnel":0.114,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.021,"mouthSmileRight":0.032,"mouthFrownLeft":0.011,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.047,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.206,"mouthLowerDownRight":0.199,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.094,"browDownRight":0.094,"browInnerUp":0.083,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.011,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.583333333333329,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.036,"eyeLookOutLeft":0,"eyeLookUpLeft":0.018,"eyeSquintLeft":0.137,"eyeWideLeft":0.138,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.077,"eyeLookOutRight":0,"eyeLookUpRight":0.018,"eyeSquintRight":0.137,"eyeWideRight":0.138,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.171,"mouthClose":0.112,"mouthFunnel":0.114,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.022,"mouthSmileRight":0.032,"mouthFrownLeft":0.011,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.047,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.206,"mouthLowerDownRight":0.199,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.096,"browDownRight":0.096,"browInnerUp":0.083,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.01,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.5999999999999956,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.025,"eyeLookOutLeft":0,"eyeLookUpLeft":0.01,"eyeSquintLeft":0.138,"eyeWideLeft":0.138,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.088,"eyeLookOutRight":0,"eyeLookUpRight":0.01,"eyeSquintRight":0.138,"eyeWideRight":0.138,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.171,"mouthClose":0.112,"mouthFunnel":0.114,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.022,"mouthSmileRight":0.033,"mouthFrownLeft":0.011,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.047,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.206,"mouthLowerDownRight":0.199,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.096,"browDownRight":0.096,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.009,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.6166666666666623,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0,"eyeLookInLeft":0.017,"eyeLookOutLeft":0,"eyeLookUpLeft":0.002,"eyeSquintLeft":0.138,"eyeWideLeft":0.138,"eyeBlinkRight":0,"eyeLookDownRight":0,"eyeLookInRight":0.096,"eyeLookOutRight":0,"eyeLookUpRight":0.002,"eyeSquintRight":0.138,"eyeWideRight":0.138,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.17,"mouthClose":0.112,"mouthFunnel":0.114,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.022,"mouthSmileRight":0.033,"mouthFrownLeft":0.011,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.047,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.207,"mouthLowerDownRight":0.2,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.096,"browDownRight":0.096,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.008,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.633333333333329,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.001,"eyeLookInLeft":0.012,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.137,"eyeWideLeft":0.138,"eyeBlinkRight":0,"eyeLookDownRight":0.001,"eyeLookInRight":0.101,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.137,"eyeWideRight":0.138,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.17,"mouthClose":0.111,"mouthFunnel":0.114,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.023,"mouthSmileRight":0.033,"mouthFrownLeft":0.01,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.052,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.207,"mouthLowerDownRight":0.2,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.094,"browDownRight":0.094,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.007,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.6499999999999955,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.004,"eyeLookInLeft":0.011,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.137,"eyeWideLeft":0.139,"eyeBlinkRight":0,"eyeLookDownRight":0.004,"eyeLookInRight":0.103,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.137,"eyeWideRight":0.139,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.17,"mouthClose":0.111,"mouthFunnel":0.114,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.023,"mouthSmileRight":0.033,"mouthFrownLeft":0.01,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.051,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.207,"mouthLowerDownRight":0.2,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.091,"browDownRight":0.091,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.006,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.666666666666662,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.008,"eyeLookInLeft":0.007,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.136,"eyeWideLeft":0.139,"eyeBlinkRight":0,"eyeLookDownRight":0.008,"eyeLookInRight":0.106,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.136,"eyeWideRight":0.139,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.17,"mouthClose":0.11,"mouthFunnel":0.114,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.023,"mouthSmileRight":0.033,"mouthFrownLeft":0.01,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.051,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.208,"mouthLowerDownRight":0.201,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.089,"browDownRight":0.089,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.006,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.6833333333333287,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.014,"eyeLookInLeft":0.005,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.134,"eyeWideLeft":0.138,"eyeBlinkRight":0,"eyeLookDownRight":0.014,"eyeLookInRight":0.108,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.135,"eyeWideRight":0.138,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.169,"mouthClose":0.109,"mouthFunnel":0.115,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.023,"mouthSmileRight":0.033,"mouthFrownLeft":0.01,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.051,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.208,"mouthLowerDownRight":0.201,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.087,"browDownRight":0.087,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.006,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.6999999999999953,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.02,"eyeLookInLeft":0.003,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.133,"eyeWideLeft":0.135,"eyeBlinkRight":0,"eyeLookDownRight":0.02,"eyeLookInRight":0.111,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.133,"eyeWideRight":0.135,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.169,"mouthClose":0.109,"mouthFunnel":0.115,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.024,"mouthSmileRight":0.033,"mouthFrownLeft":0.01,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.051,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.208,"mouthLowerDownRight":0.202,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.086,"browDownRight":0.086,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.007,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.716666666666662,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.021,"eyeLookInLeft":0,"eyeLookOutLeft":0,"eyeLookUpLeft":0,"eyeSquintLeft":0.132,"eyeWideLeft":0.132,"eyeBlinkRight":0,"eyeLookDownRight":0.021,"eyeLookInRight":0.113,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.132,"eyeWideRight":0.132,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.169,"mouthClose":0.108,"mouthFunnel":0.115,"mouthPucker":0.05,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.024,"mouthSmileRight":0.033,"mouthFrownLeft":0.01,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.051,"mouthRollUpper":0.046,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.209,"mouthLowerDownRight":0.202,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.085,"browDownRight":0.085,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.007,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.7333333333333285,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.021,"eyeLookInLeft":0,"eyeLookOutLeft":0.001,"eyeLookUpLeft":0,"eyeSquintLeft":0.131,"eyeWideLeft":0.13,"eyeBlinkRight":0,"eyeLookDownRight":0.021,"eyeLookInRight":0.115,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.132,"eyeWideRight":0.13,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.173,"mouthClose":0.118,"mouthFunnel":0.115,"mouthPucker":0.06,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.024,"mouthSmileRight":0.033,"mouthFrownLeft":0.012,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.053,"mouthRollUpper":0.048,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.204,"mouthLowerDownRight":0.198,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.085,"browDownRight":0.085,"browInnerUp":0.082,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.008,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.749999999999995,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.02,"eyeLookInLeft":0,"eyeLookOutLeft":0.001,"eyeLookUpLeft":0,"eyeSquintLeft":0.131,"eyeWideLeft":0.127,"eyeBlinkRight":0,"eyeLookDownRight":0.02,"eyeLookInRight":0.115,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.131,"eyeWideRight":0.127,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.175,"mouthClose":0.123,"mouthFunnel":0.114,"mouthPucker":0.066,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.025,"mouthSmileRight":0.034,"mouthFrownLeft":0.011,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.055,"mouthRollUpper":0.049,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.202,"mouthLowerDownRight":0.195,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.085,"browDownRight":0.085,"browInnerUp":0.081,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.008,"leftEyeRoll":0,"rightEyeRoll":0}},{"time":2.7666666666666617,"blendshapes":{"eyeBlinkLeft":0,"eyeLookDownLeft":0.02,"eyeLookInLeft":0,"eyeLookOutLeft":0.002,"eyeLookUpLeft":0,"eyeSquintLeft":0.13,"eyeWideLeft":0.124,"eyeBlinkRight":0,"eyeLookDownRight":0.02,"eyeLookInRight":0.115,"eyeLookOutRight":0,"eyeLookUpRight":0,"eyeSquintRight":0.131,"eyeWideRight":0.124,"jawForward":0.057,"jawLeft":0.021,"jawRight":0,"jawOpen":0.174,"mouthClose":0.123,"mouthFunnel":0.113,"mouthPucker":0.067,"mouthLeft":0.008,"mouthRight":0.003,"mouthSmileLeft":0.026,"mouthSmileRight":0.035,"mouthFrownLeft":0.01,"mouthFrownRight":0.012,"mouthDimpleLeft":0.043,"mouthDimpleRight":0.039,"mouthStretchLeft":0.092,"mouthStretchRight":0.074,"mouthRollLower":0.055,"mouthRollUpper":0.05,"mouthShrugLower":0.014,"mouthShrugUpper":0.075,"mouthPressLeft":0.017,"mouthPressRight":0.018,"mouthLowerDownLeft":0.203,"mouthLowerDownRight":0.196,"mouthUpperUpLeft":0.015,"mouthUpperUpRight":0.015,"browDownLeft":0.085,"browDownRight":0.085,"browInnerUp":0.081,"browOuterUpLeft":0,"browOuterUpRight":0,"cheekPuff":0.016,"cheekSquintLeft":0.041,"cheekSquintRight":0.044,"noseSneerLeft":0.029,"noseSneerRight":0.029,"tongueOut":0,"headRoll":0.008,"leftEyeRoll":0,"rightEyeRoll":0}}],"filename":"/speech-x66ql.mp3"}'),CC="http://65.111.164.242:4001/v1",_C="http://65.111.164.242:4001";function AC(){const e=(0,i.useRef)(),[t,n]=(0,i.useState)(!1),[r,o]=(0,i.useState)("Getting audio, but Lip-sync is not working."),[s,a]=(0,i.useState)(null),[l,u]=(0,i.useState)(!1),c=new URLSearchParams(window.location.search),h=c.get("textToSpeak"),p=c.get("allowSpeak");return(0,i.useEffect)((()=>{console.log({textToSpeak:h,allowSpeak:p,speakNowType:typeof p,speakNowType_:typeof!!p}),!0===!!p&&(o(h),n(!!p))}),[h,p]),(0,bw.jsxs)(bw.Fragment,{children:[(0,bw.jsxs)(AS,{dpr:2,onCreated:e=>{e.gl.physicallyCorrectLights=!0},children:[(0,bw.jsx)(Zv,{enableZoom:!0,target:[0,1.65,0]}),(0,bw.jsx)(ny,{}),(0,bw.jsx)(ry,{makeDefault:!0,zoom:400,position:[0,1.65,1.5]}),(0,bw.jsx)(i.Suspense,{fallback:null,children:(0,bw.jsx)(Xy,{background:!1,files:"./images/photo_studio_loft_hall_1k.hdr"})}),(0,bw.jsx)(i.Suspense,{fallback:null,children:(0,bw.jsx)(xC,{})}),(0,bw.jsx)(i.Suspense,{fallback:null,children:(0,bw.jsx)(EC,{avatar_url:LC,speak:t,setSpeak:n,text:r,setAudioSource:a,playing:l})})]}),(0,bw.jsx)($y,{dataInterpolation:e=>"Loading... please wait"}),(0,bw.jsx)(wC(),{src:s,ref:e,onEnded:function(e){a(null),n(!1),u(!1)},onCanPlayThrough:function(t){e.current.audioEl.current.play(),u(!0)}}),(0,bw.jsxs)("div",{className:ES,children:[(0,bw.jsx)("textarea",{rows:4,type:"text",className:xS,value:r,onChange:e=>o(e.target.value.substring(0,200))}),(0,bw.jsxs)("button",{onClick:()=>n(!0),className:PS,children:[" ",t?"Running...":"Speak"]})]})]})}function EC(e){let{avatar_url:t,speak:n,setSpeak:r,text:o,setAudioSource:s,playing:a}=e,l=OR(t),u=null;var c=[],h=[];l.scene.traverse((e=>{c.includes(e.type)||c.push(e.type),h.includes(e.name)||h.push(e.name),e.name.indexOf("Object")>-1&&console.warn(e.name,e.type,e,"visible ".concat(e.visible)),["Mesh","LineSegments","SkinnedMesh"].includes(e.type)&&(e.castShadow=!0,e.receiveShadow=!0,e.frustumCulled=!1)})),console.log(" allNodeTypes, allNodeName",{allNodeTypes:c,allNodeName:h});const[p,d]=(0,i.useState)([]),f=(0,i.useMemo)((()=>new Mm(l.scene)),[l.scene]);(0,i.useEffect)((()=>{let e={data:bC};console.log("===",e);let{blendData:t,filename:n}=e.data,i=[gw(t,u,"HG_Body"),gw(t,null,"HG_TeethLower")];n=_C+n,d(i),s(n)}),[]),(0,i.useEffect)((()=>{n&&function(e){return SC.post(CC+"/talk",{text:e})}(o).then((e=>{if(console.log({Data:e.data,response:e,speak:"Speak this with animation"}),200===e.status){let{blendData:t,filename:n}=e.data,i=[gw(t,u,"HG_Body"),gw(t,null,"HG_TeethLower")];n=_C+n,d(i),s(n)}else console.error(e.status,e.statusText)})).catch((e=>{console.error(e),r(!1)}))}),[n]);let m=hw(vw),{clips:g}=pw(m.animations);return g[0].tracks=g[0].tracks.filter((e=>e.name.includes("Head")||e.name.includes("Neck")||e.name.includes("Spine2"))),console.error("=================",g[0].tracks),g[0].tracks=g[0].tracks.map((e=>(e.name.includes("Head")&&(e.name="head.quaternion"),e.name.includes("Neck")&&(e.name="neck.quaternion"),e.name.includes("Spine")&&(e.name="spine2.quaternion"),e))),(0,i.useEffect)((()=>{document.title="Avatar Ava";let e=f.clipAction(g[0]);e&&(null===e||void 0===e||e.play());let t=gw(dw,u,"HG_Body"),n=f.clipAction(t);n&&(null===n||void 0===n||n.play())}),[]),(0,i.useEffect)((()=>{!1!==a&&p.forEach((e=>{let t=f.clipAction(e);null===t||void 0===t||t.setLoop(si),null===t||void 0===t||t.play()}))}),[a]),Tv(((e,t)=>{f.update(t)})),(0,bw.jsx)("primitive",{object:l.scene,dispose:null})}function xC(){const e=UR("./images/bg.webp");return(0,bw.jsxs)("mesh",{position:[0,1.6,-1],scale:[.215,.215,.6],children:[(0,bw.jsx)("planeGeometry",{attach:"geometry",args:[10,10,2]}),(0,bw.jsx)("meshStandardMaterial",{attach:"material",map:e,side:Ve}),(0,bw.jsx)("mesh",{position:[0,0,-5]})]})}const PC=function(){return(0,i.useEffect)((()=>{document.title="3D Avatar"}),[]),(0,bw.jsxs)("div",{id:"homeContainer",children:[(0,bw.jsx)("nav",{id:"navbar",children:"Home | About | Contact"}),(0,bw.jsx)(xe,{to:"/eva",children:"Avatar - Eva"}),(0,bw.jsx)("br",{}),(0,bw.jsx)(xe,{to:"/samantha",children:"Avatar - Samantha"}),(0,bw.jsx)("br",{}),(0,bw.jsx)(xe,{to:"/demoHead",children:"Avatar - Demo Head only"}),(0,bw.jsx)("br",{})]})};const TC=function(){return(0,i.useEffect)((()=>(document.title="3D Avatar Home 2",()=>{console.log("Going away from home")})),[]),(0,bw.jsxs)("section",{children:[(0,bw.jsx)("nav",{children:"Home 2 | About | Contact"}),(0,bw.jsx)("a",{href:"/3dAvatar",children:"Avatar - ava"})]})};const MC=function(){return(0,bw.jsx)("div",{children:"Home2_1"})};o.createRoot(document.getElementById("root")).render((0,bw.jsx)(i.Fragment,{children:(0,bw.jsx)(Ce,{basename:{}.homepage||"",children:(0,bw.jsxs)(ge,{children:[(0,bw.jsx)(fe,{path:"/",element:(0,bw.jsx)(PC,{})}),(0,bw.jsx)(fe,{path:"/eva",element:(0,bw.jsx)(Ew,{})}),(0,bw.jsx)(fe,{path:"/samantha",element:(0,bw.jsx)(AC,{})}),(0,bw.jsx)(fe,{path:"/demoHead",element:(0,bw.jsx)(xL,{})}),(0,bw.jsx)(fe,{path:"/app2",element:(0,bw.jsx)(TC,{})}),(0,bw.jsx)(fe,{path:"/nested",element:(0,bw.jsx)(MC,{})}),(0,bw.jsx)(fe,{path:"/app2/*",element:(0,bw.jsx)(TC,{})}),(0,bw.jsx)(fe,{path:"*",element:(0,bw.jsx)(PC,{})})]})})}))})()})();